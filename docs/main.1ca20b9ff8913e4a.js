(self.webpackChunkmapLibre=self.webpackChunkmapLibre||[]).push([[792],{28:(cm,$d,Dc)=>{"use strict";let Bu;function um(){return Bu}function W(e){const n=Bu;return Bu=e,n}const gt=Symbol("NotFound");function Xi(e){return e===gt||"\u0275NotFound"===e?.name}function ma(e,n){return Object.is(e,n)}Error;let Dt=null,Re=!1,Ns=1;const Yn=Symbol("SIGNAL");function zt(e){const n=Dt;return Dt=e,n}const Ls={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xo(e){if(Re)throw new Error("");if(null===Dt)return;Dt.consumerOnSignalRead(e);const n=Dt.producersTail;if(void 0!==n&&n.producer===e)return;let t;const r=Dt.recomputing;if(r&&(t=void 0!==n?n.nextProducer:Dt.producers,void 0!==t&&t.producer===e))return Dt.producersTail=t,void(t.lastReadVersion=e.version);const i=e.consumersTail;if(void 0!==i&&i.consumer===Dt&&(!r||function Pl(e,n){const t=n.producersTail;if(void 0!==t){let r=n.producers;do{if(r===e)return!0;if(r===t)break;r=r.nextProducer}while(void 0!==r)}return!1}(i,Dt)))return;const a=En(Dt),d={producer:e,consumer:Dt,nextProducer:t,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Dt.producersTail=d,void 0!==n?n.nextProducer=d:Dt.producers=d,a&&el(e,d)}function Qa(e){if((!En(e)||e.dirty)&&(e.dirty||e.lastCleanEpoch!==Ns)){if(!e.producerMustRecompute(e)&&!Os(e))return void wo(e);e.producerRecomputeValue(e),wo(e)}}function Pc(e){if(void 0===e.consumers)return;const n=Re;Re=!0;try{for(let t=e.consumers;void 0!==t;t=t.nextConsumer){const r=t.consumer;r.dirty||Ja(r)}}finally{Re=n}}function $o(){return!1!==Dt?.consumerAllowSignalWrites}function Ja(e){e.dirty=!0,Pc(e),e.consumerMarkedDirty?.(e)}function wo(e){e.dirty=!1,e.lastCleanEpoch=Ns}function So(e){return e&&(e.producersTail=void 0,e.recomputing=!0),zt(e)}function _a(e,n){if(zt(n),!e)return;e.recomputing=!1;const t=e.producersTail;let r=void 0!==t?t.nextProducer:e.producers;if(void 0!==r){if(En(e))do{r=Ac(r)}while(void 0!==r);void 0!==t?t.nextProducer=void 0:e.producers=void 0}}function Os(e){for(let n=e.producers;void 0!==n;n=n.nextProducer){const t=n.producer,r=n.lastReadVersion;if(r!==t.version||(Qa(t),r!==t.version))return!0}return!1}function ds(e){if(En(e)){let n=e.producers;for(;void 0!==n;)n=Ac(n)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function el(e,n){const t=e.consumersTail,r=En(e);if(void 0!==t?(n.nextConsumer=t.nextConsumer,t.nextConsumer=n):(n.nextConsumer=void 0,e.consumers=n),n.prevConsumer=t,e.consumersTail=n,!r)for(let i=e.producers;void 0!==i;i=i.nextProducer)el(i.producer,i)}function Ac(e){const n=e.producer,t=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,void 0!==r?r.prevConsumer=i:n.consumersTail=i,void 0!==i)i.nextConsumer=r;else if(n.consumers=r,!En(n)){let a=n.producers;for(;void 0!==a;)a=Ac(a)}return t}function En(e){return e.consumerIsAlwaysLive||void 0!==e.consumers}const ho=Symbol("UNSET"),Go=Symbol("COMPUTING"),Nr=Symbol("ERRORED"),Rc={...Ls,value:ho,dirty:!0,error:null,equal:ma,kind:"computed",producerMustRecompute:e=>e.value===ho||e.value===Go,producerRecomputeValue(e){if(e.value===Go)throw new Error("");const n=e.value;e.value=Go;const t=So(e);let r,i=!1;try{r=e.computation(),zt(null),i=n!==ho&&n!==Nr&&r!==Nr&&e.equal(n,r)}catch(a){r=Nr,e.error=a}finally{_a(e,t)}i?e.value=n:(e.value=r,e.version++)}};let qo=function Ho(){throw new Error};function Al(e){qo(e)}function Ir(e,n){const t=Object.create(Wo);t.value=e,void 0!==n&&(t.equal=n);const r=()=>function hs(e){return xo(e),e.value}(t);return r[Yn]=t,[r,d=>Eo(t,d),d=>function tl(e,n){$o()||Al(e),Eo(e,n(e.value))}(t,d)]}function Eo(e,n){$o()||Al(e),e.equal(e.value,n)||(e.value=n,function Lc(e){e.version++,function kc(){Ns++}(),Pc(e)}(e))}const Wo={...Ls,equal:ma,value:void 0,kind:"signal"};function An(e){return"function"==typeof e}function Bs(e){const t=e(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const zs=Bs(e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ba(e,n){if(e){const t=e.indexOf(n);0<=t&&e.splice(t,1)}}class Mr{constructor(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let n;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const a of t)a.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(An(r))try{r()}catch(a){n=a instanceof zs?a.errors:[a]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const a of i)try{Rl(a)}catch(d){n=n??[],d instanceof zs?n=[...n,...d.errors]:n.push(d)}}if(n)throw new zs(n)}}add(n){var t;if(n&&n!==this)if(this.closed)Rl(n);else{if(n instanceof Mr){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(n)}}_hasParent(n){const{_parentage:t}=this;return t===n||Array.isArray(t)&&t.includes(n)}_addParent(n){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(n),t):t?[t,n]:n}_removeParent(n){const{_parentage:t}=this;t===n?this._parentage=null:Array.isArray(t)&&ba(t,n)}remove(n){const{_finalizers:t}=this;t&&ba(t,n),n instanceof Mr&&n._removeParent(this)}}Mr.EMPTY=(()=>{const e=new Mr;return e.closed=!0,e})();const xa=Mr.EMPTY;function wa(e){return e instanceof Mr||e&&"closed"in e&&An(e.remove)&&An(e.add)&&An(e.unsubscribe)}function Rl(e){An(e)?e():e.unsubscribe()}const ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Z={setTimeout(e,n,...t){const{delegate:r}=Z;return r?.setTimeout?r.setTimeout(e,n,...t):setTimeout(e,n,...t)},clearTimeout(e){const{delegate:n}=Z;return(n?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Y(e){Z.setTimeout(()=>{const{onUnhandledError:n}=ye;if(!n)throw e;n(e)})}function X(){}const ce=De("C",void 0,void 0);function De(e,n,t){return{kind:e,value:n,error:t}}let ve=null;function Oe(e){if(ye.useDeprecatedSynchronousErrorHandling){const n=!ve;if(n&&(ve={errorThrown:!1,error:null}),e(),n){const{errorThrown:t,error:r}=ve;if(ve=null,t)throw r}}else e()}class je extends Mr{constructor(n){super(),this.isStopped=!1,n?(this.destination=n,wa(n)&&n.add(this)):this.destination=ri}static create(n,t,r){return new sn(n,t,r)}next(n){this.isStopped?Un(function Se(e){return De("N",e,void 0)}(n),this):this._next(n)}error(n){this.isStopped?Un(function me(e){return De("E",void 0,e)}(n),this):(this.isStopped=!0,this._error(n))}complete(){this.isStopped?Un(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(n){this.destination.next(n)}_error(n){try{this.destination.error(n)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const yt=Function.prototype.bind;function Ee(e,n){return yt.call(e,n)}class Ut{constructor(n){this.partialObserver=n}next(n){const{partialObserver:t}=this;if(t.next)try{t.next(n)}catch(r){St(r)}}error(n){const{partialObserver:t}=this;if(t.error)try{t.error(n)}catch(r){St(r)}else St(n)}complete(){const{partialObserver:n}=this;if(n.complete)try{n.complete()}catch(t){St(t)}}}class sn extends je{constructor(n,t,r){let i;if(super(),An(n)||!n)i={next:n??void 0,error:t??void 0,complete:r??void 0};else{let a;this&&ye.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=()=>this.unsubscribe(),i={next:n.next&&Ee(n.next,a),error:n.error&&Ee(n.error,a),complete:n.complete&&Ee(n.complete,a)}):i=n}this.destination=new Ut(i)}}function St(e){ye.useDeprecatedSynchronousErrorHandling?function Ge(e){ye.useDeprecatedSynchronousErrorHandling&&ve&&(ve.errorThrown=!0,ve.error=e)}(e):Y(e)}function Un(e,n){const{onStoppedNotification:t}=ye;t&&Z.setTimeout(()=>t(e,n))}const ri={closed:!0,next:X,error:function Qt(e){throw e},complete:X},Lr="function"==typeof Symbol&&Symbol.observable||"@@observable";function Zn(e){return e}function mn(e){return 0===e.length?Zn:1===e.length?e[0]:function(t){return e.reduce((r,i)=>i(r),t)}}let _n=(()=>{class e{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new e;return r.source=this,r.operator=t,r}subscribe(t,r,i){const a=function _r(e){return e&&e instanceof je||function Oi(e){return e&&An(e.next)&&An(e.error)&&An(e.complete)}(e)&&wa(e)}(t)?t:new sn(t,r,i);return Oe(()=>{const{operator:d,source:f}=this;a.add(d?d.call(a,f):f?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Ze(r))((i,a)=>{const d=new sn({next:f=>{try{t(f)}catch(_){a(_),d.unsubscribe()}},error:a,complete:i});this.subscribe(d)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[Lr](){return this}pipe(...t){return mn(t)(this)}toPromise(t){return new(t=Ze(t))((r,i)=>{let a;this.subscribe(d=>a=d,d=>i(d),()=>r(a))})}}return e.create=n=>new e(n),e})();function Ze(e){var n;return null!==(n=e??ye.Promise)&&void 0!==n?n:Promise}const nl=Bs(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ii=(()=>{class e extends _n{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new ot(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new nl}next(t){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Oe(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:a}=this;return r||i?xa:(this.currentObservers=null,a.push(t),new Mr(()=>{this.currentObservers=null,ba(a,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:a}=this;r?t.error(i):a&&t.complete()}asObservable(){const t=new _n;return t.source=this,t}}return e.create=(n,t)=>new ot(n,t),e})();class ot extends ii{constructor(n,t){super(),this.destination=n,this.source=t}next(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,n)}error(n){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,n)}complete(){var n,t;null===(t=null===(n=this.destination)||void 0===n?void 0:n.complete)||void 0===t||t.call(n)}_subscribe(n){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(n))&&void 0!==r?r:xa}}class jt extends ii{constructor(n){super(),this._value=n}get value(){return this.getValue()}_subscribe(n){const t=super._subscribe(n);return!t.closed&&n.next(this._value),t}getValue(){const{hasError:n,thrownError:t,_value:r}=this;if(n)throw t;return this._throwIfClosed(),r}next(n){super.next(this._value=n)}}const mi="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class Le extends Error{code;constructor(n,t){super(Lt(n,t)),this.code=n}}function Lt(e,n){return`${function rl(e){return`NG0${Math.abs(e)}`}(e)}${n?": "+n:""}`}const tr=globalThis;function dn(e){for(let n in e)if(e[n]===dn)return n;throw Error("")}function Oc(e,n){for(const t in n)n.hasOwnProperty(t)&&!e.hasOwnProperty(t)&&(e[t]=n[t])}function Cn(e){if("string"==typeof e)return e;if(Array.isArray(e))return`[${e.map(Cn).join(", ")}]`;if(null==e)return""+e;const n=e.overriddenName||e.name;if(n)return`${n}`;const t=e.toString();if(null==t)return""+t;const r=t.indexOf("\n");return r>=0?t.slice(0,r):t}function Fc(e,n){return e?n?`${e} ${n}`:e:n||""}const Gn=dn({__forward_ref__:dn});function zu(e){return e.__forward_ref__=zu,e.toString=function(){return Cn(this())},e}function Yt(e){return Bc(e)?e():e}function Bc(e){return"function"==typeof e&&e.hasOwnProperty(Gn)&&e.__forward_ref__===zu}function at(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Fi(e){return{providers:e.providers||[],imports:e.imports||[]}}function fs(e){return function Ol(e,n){return e.hasOwnProperty(n)&&e[n]||null}(e,Fl)}function js(e){return e&&e.hasOwnProperty(jc)?e[jc]:null}const Fl=dn({\u0275prov:dn}),jc=dn({\u0275inj:dn});class Ye{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(n,t){this._desc=n,this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=at({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function eo(e){return e&&!!e.\u0275providers}const Zo=dn({\u0275cmp:dn}),Vs=dn({\u0275dir:dn}),Hd=dn({\u0275pipe:dn}),qd=dn({\u0275mod:dn}),Ko=dn({\u0275fac:dn}),Ta=dn({__NG_ELEMENT_ID__:dn}),Uu=dn({__NG_ENV_ID__:dn});function Zt(e){return"string"==typeof e?e:null==e?"":String(e)}const il=dn({ngErrorCode:dn}),Uc=dn({ngErrorMessage:dn}),ps=dn({ngTokenPath:dn});function ur(e,n){return Gc("",-200,n)}function rf(e,n){throw new Le(-201,!1)}function Gc(e,n,t){const r=new Le(n,e);return r[il]=n,r[Uc]=e,t&&(r[ps]=t),r}let Bl;function Hc(){return Bl}function $n(e){const n=Bl;return Bl=e,n}function sf(e,n,t){const r=fs(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&t?null:void 0!==n?n:void rf()}const Ia={},lf="__NG_DI_FLAG__";class _m{injector;constructor(n){this.injector=n}retrieve(n,t){const r=sl(t)||0;try{return this.injector.get(n,8&r?null:Ia,r)}catch(i){if(Xi(i))return i;throw i}}}function Zd(e,n=0){const t=um();if(void 0===t)throw new Le(-203,!1);if(null===t)return sf(e,void 0,n);{const r=function gs(e){return{optional:!!(8&e),host:!!(1&e),self:!!(2&e),skipSelf:!!(4&e)}}(n),i=t.retrieve(e,r);if(Xi(i)){if(r.optional)return null;throw i}return i}}function kt(e,n=0){return(Hc()||Zd)(Yt(e),n)}function Fe(e,n){return kt(e,sl(n))}function sl(e){return typeof e>"u"||"number"==typeof e?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function cf(e){const n=[];for(let t=0;t<e.length;t++){const r=Yt(e[t]);if(Array.isArray(r)){if(0===r.length)throw new Le(900,!1);let i,a=0;for(let d=0;d<r.length;d++){const f=r[d],_=Gu(f);"number"==typeof _?-1===_?i=f.token:a|=_:i=f}n.push(kt(i,a))}else n.push(kt(r))}return n}function al(e,n){return e[lf]=n,e.prototype[lf]=n,e}function Gu(e){return e[lf]}function ms(e,n){return e.hasOwnProperty(Ko)?e[Ko]:null}function qc(e,n){e.forEach(t=>Array.isArray(t)?qc(t,n):n(t))}function ll(e,n,t){n>=e.length?e.push(t):e.splice(n,0,t)}function Hu(e,n){return n>=e.length-1?e.pop():e.splice(n,1)[0]}function Zc(e,n,t){let r=cl(e,n);return r>=0?e[1|r]=t:(r=~r,function uf(e,n,t,r){let i=e.length;if(i==n)e.push(t,r);else if(1===i)e.push(r,e[0]),e[0]=t;else{for(i--,e.push(e[i-1],e[i]);i>n;)e[i]=e[i-2],i--;e[n]=t,e[n+1]=r}}(e,r,n,t)),r}function Kd(e,n){const t=cl(e,n);if(t>=0)return e[1|t]}function cl(e,n){return function Ep(e,n,t){let r=0,i=e.length>>t;for(;i!==r;){const a=r+(i-r>>1),d=e[a<<t];if(n===d)return a<<t;d>n?i=a:r=a+1}return~(i<<t)}(e,n,1)}const _s={},Rn=[],Gs=new Ye(""),Yd=new Ye("",-1),zl=new Ye("");class Xd{get(n,t=Ia){if(t===Ia){const i=Gc("",-201);throw i.name="\u0275NotFound",i}return t}}function fo(e){return e[qd]||null}function Ln(e){return e[Zo]||null}function Bi(e){return e[Vs]||null}function Io(e){return e[Hd]||null}function jl(e){return{\u0275providers:e}}function Ma(...e){return{\u0275providers:wn(0,e),\u0275fromNgModule:!0}}function wn(e,...n){const t=[],r=new Set;let i;const a=d=>{t.push(d)};return qc(n,d=>{const f=d;Kc(f,a,[],r)&&(i||=[],i.push(f))}),void 0!==i&&eh(i,a),t}function eh(e,n){for(let t=0;t<e.length;t++){const{ngModule:r,providers:i}=e[t];qu(i,a=>{n(a,r)})}}function Kc(e,n,t,r){if(!(e=Yt(e)))return!1;let i=null,a=js(e);const d=!a&&Ln(e);if(a||d){if(d&&!d.standalone)return!1;i=e}else{const _=e.ngModule;if(a=js(_),!a)return!1;i=_}const f=r.has(i);if(d){if(f)return!1;if(r.add(i),d.dependencies){const _="function"==typeof d.dependencies?d.dependencies():d.dependencies;for(const S of _)Kc(S,n,t,r)}}else{if(!a)return!1;{if(null!=a.imports&&!f){let S;r.add(i);try{qc(a.imports,M=>{Kc(M,n,t,r)&&(S||=[],S.push(M))})}finally{}void 0!==S&&eh(S,n)}if(!f){const S=ms(i)||(()=>new i);n({provide:i,useFactory:S,deps:Rn},i),n({provide:zl,useValue:i,multi:!0},i),n({provide:Gs,useValue:()=>kt(i),multi:!0},i)}const _=a.providers;if(null!=_&&!f){const S=e;qu(_,M=>{n(M,S)})}}}return i!==e&&void 0!==e.providers}function qu(e,n){for(let t of e)eo(t)&&(t=t.\u0275providers),Array.isArray(t)?qu(t,n):n(t)}const Vl=dn({provide:String,useValue:dn});function Wu(e){return null!==e&&"object"==typeof e&&Vl in e}function Da(e){return"function"==typeof e}const th=new Ye(""),nh={},df={};let Yc;function Xc(){return void 0===Yc&&(Yc=new Xd),Yc}class si{}class ka extends si{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(n,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,eu(n,d=>this.processProvider(d)),this.records.set(Yd,Ul(void 0,this)),i.has("environment")&&this.records.set(si,Ul(void 0,this));const a=this.records.get(th);null!=a&&"string"==typeof a.value&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(zl,Rn,{self:!0}))}retrieve(n,t){const r=sl(t)||0;try{return this.get(n,Ia,r)}catch(i){if(Xi(i))return i;throw i}}destroy(){Jc(this),this._destroyed=!0;const n=zt(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const t=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),zt(n)}}onDestroy(n){return Jc(this),this._onDestroyHooks.push(n),()=>this.removeOnDestroy(n)}runInContext(n){Jc(this);const t=W(this),r=$n(void 0);try{return n()}finally{W(t),$n(r)}}get(n,t=Ia,r){if(Jc(this),n.hasOwnProperty(Uu))return n[Uu](this);const i=sl(r),d=W(this),f=$n(void 0);try{if(!(4&i)){let S=this.records.get(n);if(void 0===S){const M=function rh(e){return"function"==typeof e||"object"==typeof e&&"InjectionToken"===e.ngMetadataName}(n)&&fs(n);S=M&&this.injectableDefInScope(M)?Ul(Pa(n),nh):null,this.records.set(n,S)}if(null!=S)return this.hydrate(n,S,i)}return(2&i?Xc():this.parent).get(n,t=8&i&&t===Ia?null:t)}catch(_){const S=function $s(e){return e[il]}(_);throw-200===S||-201===S?new Le(S,null):_}finally{$n(f),W(d)}}resolveInjectorInitializers(){const n=zt(null),t=W(this),r=$n(void 0);try{const a=this.get(Gs,Rn,{self:!0});for(const d of a)d()}finally{W(t),$n(r),zt(n)}}toString(){const n=[],t=this.records;for(const r of t.keys())n.push(Cn(r));return`R3Injector[${n.join(", ")}]`}processProvider(n){let t=Da(n=Yt(n))?n:Yt(n&&n.provide);const r=function Qc(e){return Wu(e)?Ul(void 0,e.useValue):Ul(Mo(e),nh)}(n);if(!Da(n)&&!0===n.multi){let i=this.records.get(t);i||(i=Ul(void 0,nh,!0),i.factory=()=>cf(i.multi),this.records.set(t,i)),t=n,i.multi.push(n)}this.records.set(t,r)}hydrate(n,t,r){const i=zt(null);try{if(t.value===df)throw ur(Cn(n));return t.value===nh&&(t.value=df,t.value=t.factory(void 0,r)),"object"==typeof t.value&&t.value&&function $l(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{zt(i)}}injectableDefInScope(n){if(!n.providedIn)return!1;const t=Yt(n.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(n){const t=this._onDestroyHooks.indexOf(n);-1!==t&&this._onDestroyHooks.splice(t,1)}}function Pa(e){const n=fs(e),t=null!==n?n.factory:ms(e);if(null!==t)return t;if(e instanceof Ye)throw new Le(204,!1);if(e instanceof Function)return function Zu(e){if(e.length>0)throw new Le(204,!1);const t=function ln(e){return(e?.[Fl]??null)||null}(e);return null!==t?()=>t.factory(e):()=>new e}(e);throw new Le(204,!1)}function Mo(e,n,t){let r;if(Da(e)){const i=Yt(e);return ms(i)||Pa(i)}if(Wu(e))r=()=>Yt(e.useValue);else if(function Tp(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...cf(e.deps||[]));else if(function Cp(e){return!(!e||!e.useExisting)}(e))r=(i,a)=>kt(Yt(e.useExisting),void 0!==a&&8&a?8:void 0);else{const i=Yt(e&&(e.useClass||e.provide));if(!function hf(e){return!!e.deps}(e))return ms(i)||Pa(i);r=()=>new i(...cf(e.deps))}return r}function Jc(e){if(e.destroyed)throw new Le(205,!1)}function Ul(e,n,t=!1){return{factory:e,value:n,multi:t?[]:void 0}}function eu(e,n){for(const t of e)Array.isArray(t)?eu(t,n):t&&eo(t)?eu(t.\u0275providers,n):n(t)}function Ii(e,n){let t;e instanceof ka?(Jc(e),t=e):t=new _m(e);const i=W(t),a=$n(void 0);try{return n()}finally{W(i),$n(a)}}function vr(e){return Array.isArray(e)&&"object"==typeof e[1]}function Mi(e){return Array.isArray(e)&&!0===e[1]}function hr(e){return!!(4&e.flags)}function bi(e){return e.componentOffset>-1}function Di(e){return!(1&~e.flags)}function zi(e){return!!e.template}function Qo(e){return!!(512&e[2])}function Jo(e){return!(256&~e[2])}function br(e){for(;Array.isArray(e);)e=e[0];return e}function Xs(e,n){return br(n[e])}function Xr(e,n){return br(n[e.index])}function Qs(e,n){return e.data[n]}function Xe(e,n){const t=n[e];return vr(t)?t:t[0]}function lu(e){return!(128&~e[2])}function Or(e,n){return null==n?null:e[n]}function fl(e){e[17]=0}function Ju(e){1024&e[2]||(e[2]|=1024,lu(e)&&Fa(e))}function Zl(e){return!!(9216&e[2]||e[24]?.dirty)}function gf(e){e[10].changeDetectionScheduler?.notify(8),64&e[2]&&(e[2]|=1024),Zl(e)&&Fa(e)}function Fa(e){e[10].changeDetectionScheduler?.notify(0);let n=bs(e);for(;null!==n&&!(8192&n[2])&&(n[2]|=8192,lu(n));)n=bs(n)}function oh(e,n){if(Jo(e))throw new Le(911,!1);null===e[21]&&(e[21]=[]),e[21].push(n)}function bs(e){const n=e[3];return Mi(n)?n[3]:n}function ah(e){return e[7]??=[]}function mf(e){return e.cleanup??=[]}const Wt={lFrame:R(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Ao=!1;function ch(){Wt.lFrame.elementDepthCount--}function uh(){return Wt.bindingsEnabled}function dh(){return null!==Wt.skipHydrationRootTNode}function hh(e){return Wt.skipHydrationRootTNode===e}function mt(){Wt.skipHydrationRootTNode=null}function Ce(){return Wt.lFrame.lView}function Kt(){return Wt.lFrame.tView}function Fr(e){return Wt.lFrame.contextLView=e,e[8]}function ki(e){return Wt.lFrame.contextLView=null,e}function Mt(){let e=yf();for(;null!==e&&64===e.type;)e=e.parent;return e}function yf(){return Wt.lFrame.currentTNode}function za(e,n){const t=Wt.lFrame;t.currentTNode=e,t.isParent=n}function uu(){return Wt.lFrame.isParent}function zn(){Wt.lFrame.isParent=!1}function ph(){return Ao}function ja(e){const n=Ao;return Ao=e,n}function Br(){const e=Wt.lFrame;let n=e.bindingRootIndex;return-1===n&&(n=e.bindingRootIndex=e.tView.bindingStartIndex),n}function Qr(){return Wt.lFrame.bindingIndex++}function xs(e){const n=Wt.lFrame,t=n.bindingIndex;return n.bindingIndex=n.bindingIndex+e,t}function xf(e,n){const t=Wt.lFrame;t.bindingIndex=t.bindingRootIndex=e,o(n)}function o(e){Wt.lFrame.currentDirectiveIndex=e}function p(){return Wt.lFrame.currentQueryIndex}function m(e){Wt.lFrame.currentQueryIndex=e}function b(e){const n=e[1];return 2===n.type?n.declTNode:1===n.type?e[5]:null}function E(e,n,t){if(4&t){let i=n,a=e;for(;!(i=i.parent,null!==i||1&t||(i=b(a),null===i||(a=a[14],10&i.type))););if(null===i)return!1;n=i,e=a}const r=Wt.lFrame=D();return r.currentTNode=n,r.lView=e,!0}function I(e){const n=D(),t=e[1];Wt.lFrame=n,n.currentTNode=t.firstChild,n.lView=e,n.tView=t,n.contextLView=e,n.bindingIndex=t.bindingStartIndex,n.inI18n=!1}function D(){const e=Wt.lFrame,n=null===e?null:e.child;return null===n?R(e):n}function R(e){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=n),n}function O(){const e=Wt.lFrame;return Wt.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const j=O;function z(){const e=O();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function q(){return Wt.lFrame.selectedIndex}function ne(e){Wt.lFrame.selectedIndex=e}function ee(){const e=Wt.lFrame;return Qs(e.tView,e.selectedIndex)}function re(){Wt.lFrame.currentNamespace="svg"}let ge=!0;function le(){return ge}function be(e){ge=e}let ke={elements:void 0};function Ae(e,n=null,t=null,r){const i=We(e,n,t,r);return i.resolveInjectorInitializers(),i}function We(e,n=null,t=null,r,i=new Set){const a=[t||Rn,Ma(e)];return r=r||("object"==typeof e?void 0:Cn(e)),new ka(a,n||Xc(),r||null,i)}class qe{static THROW_IF_NOT_FOUND=Ia;static NULL=new Xd;static create(n,t){if(Array.isArray(n))return Ae({name:""},t,n,"");{const r=n.name??"";return Ae({name:r},n.parent,n.providers,r)}}static \u0275prov=at({token:qe,providedIn:"any",factory:()=>kt(Yd)});static __NG_ELEMENT_ID__=-1}const Be=new Ye("");let ht=(()=>class e{static __NG_ELEMENT_ID__=Dn;static __NG_ENV_ID__=t=>t})();class en extends ht{_lView;constructor(n){super(),this._lView=n}get destroyed(){return Jo(this._lView)}onDestroy(n){const t=this._lView;return oh(t,n),()=>function sh(e,n){if(null===e[21])return;const t=e[21].indexOf(n);-1!==t&&e[21].splice(t,1)}(t,n)}}function Dn(){return new en(Ce())}class In{_console=console;handleError(n){this._console.error("ERROR",n)}}const pn=new Ye("",{providedIn:"root",factory:()=>{const e=Fe(si);let n;return t=>{e.destroyed&&!n?setTimeout(()=>{throw t}):(n??=e.get(In),n.handleError(t))}}}),ar={provide:Gs,useValue:()=>{Fe(In)},multi:!0},wr=new Ye("",{providedIn:"root",factory:()=>{const e=Fe(Be).defaultView;if(!e)return;const n=Fe(pn),t=a=>{n(a.reason),a.preventDefault()},r=a=>{n(a.error?a.error:new Error(a.message,{cause:a})),a.preventDefault()},i=()=>{e.addEventListener("unhandledrejection",t),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),Fe(ht).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",t)})}});function kn(e,n){const[t,r,i]=Ir(e,n?.equal),a=t;return a.set=r,a.update=i,a.asReadonly=Jr.bind(a),a}function Jr(){const e=this[Yn];if(void 0===e.readonlyFn){const n=()=>this();n[Yn]=e,e.readonlyFn=n}return e.readonlyFn}class xi{}const Js=new Ye("",{providedIn:"root",factory:()=>!1}),Ql=new Ye(""),pl=new Ye("");let Va=(()=>class e{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=po})();function po(){return new Va(Ce(),Mt())}let wi=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new jt(!1);get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new _n(t=>{t.next(!1),t.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=at({token:e,providedIn:"root",factory:()=>new e})}return e})();function ts(...e){}let zr=(()=>{class e{static \u0275prov=at({token:e,providedIn:"root",factory:()=>new ci})}return e})();class ci{dirtyEffectCount=0;queues=new Map;add(n){this.enqueue(n),this.schedule(n)}schedule(n){n.dirty&&this.dirtyEffectCount++}remove(n){const r=this.queues.get(n.zone);r.has(n)&&(r.delete(n),n.dirty&&this.dirtyEffectCount--)}enqueue(n){const t=n.zone;this.queues.has(t)||this.queues.set(t,new Set);const r=this.queues.get(t);r.has(n)||r.add(n)}flush(){for(;this.dirtyEffectCount>0;){let n=!1;for(const[t,r]of this.queues)n||=null===t?this.flushQueue(r):t.run(()=>this.flushQueue(r));n||(this.dirtyEffectCount=0)}}flushQueue(n){let t=!1;for(const r of n)r.dirty&&(this.dirtyEffectCount--,t=!0,r.run());return t}}let No=null;function lr(){return No}class hu{}let ws=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(gl),providedIn:"platform"})}return e})();const Ss=new Ye("");let gl=(()=>{class e extends ws{_location;_history;_doc=Fe(Be);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return lr().getBaseHref(this._doc)}onPopState(t){const r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=lr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function gh(e,n){return e?n?e.endsWith("/")?n.startsWith("/")?e+n.slice(1):e+n:n.startsWith("/")?e+n:`${e}/${n}`:e:n}function go(e){const n=e.search(/#|\?|$/);return"/"===e[n-1]?e.slice(0,n-1)+e.slice(n):e}function ea(e){return e&&"?"!==e[0]?`?${e}`:e}let Ua=(()=>{class e{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(od),providedIn:"root"})}return e})();const id=new Ye("");let od=(()=>{class e extends Ua{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??Fe(Be).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return gh(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ea(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+ea(a));this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+ea(a));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(kt(ws),kt(id,8))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ns=(()=>{class e{_subject=new ii;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Pm(e){if(new RegExp("^(https?:)?//").test(e)){const[,t]=e.split(/\/\/[^\/]+/);return t}return e}(go(yy(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ea(r))}normalize(t){return e.stripTrailingSlash(function _y(e,n){if(!e||!n.startsWith(e))return n;const t=n.substring(e.length);return""===t||["/",";","?","#"].includes(t[0])?t:n}(this._basePath,yy(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ea(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ea;static joinWithSlash=gh;static stripTrailingSlash=go;static \u0275fac=function(r){return new(r||e)(kt(Ua))};static \u0275prov=at({token:e,factory:()=>function $a(){return new ns(kt(Ua))}(),providedIn:"root"})}return e})();function yy(e){return e.replace(/\/index.html$/,"")}function Am(e,n,t,r,i,a,d){try{var f=e[a](d),_=f.value}catch(S){return void t(S)}f.done?n(_):Promise.resolve(_).then(r,i)}function Jl(e){return function(){var n=this,t=arguments;return new Promise(function(r,i){var a=e.apply(n,t);function d(_){Am(a,r,i,d,f,"next",_)}function f(_){Am(a,r,i,d,f,"throw",_)}d(void 0)})}}function Ap(e){return An(e?.lift)}function no(e){return n=>{if(Ap(n))return n.lift(function(t){try{return e(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Si(e,n,t,r,i){return new by(e,n,t,r,i)}class by extends je{constructor(n,t,r,i,a,d){super(n),this.onFinalize=a,this.shouldUnsubscribe=d,this._next=t?function(f){try{t(f)}catch(_){n.error(_)}}:super._next,this._error=i?function(f){try{i(f)}catch(_){n.error(_)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(f){n.error(f)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}}}function Hn(e,n){return no((t,r)=>{let i=0;t.subscribe(Si(r,a=>{r.next(e.call(n,a,i++))}))})}function rs(e){return{toString:e}.toString()}const ml="__parameters__";function sd(e,n,t){return rs(()=>{const r=function Rp(e){return function(...t){if(e){const r=e(...t);for(const i in r)this[i]=r[i]}}}(n);function i(...a){if(this instanceof i)return r.apply(this,a),this;const d=new i(...a);return f.annotation=d,f;function f(_,S,M){const k=_.hasOwnProperty(ml)?_[ml]:Object.defineProperty(_,ml,{value:[]})[ml];for(;k.length<=M;)k.push(null);return(k[M]=k[M]||[]).push(d),_}}return i.prototype.ngMetadataName=e,i.annotationCls=i,i})}const Np=al(sd("Optional"),8),Lp=al(sd("SkipSelf"),4);class px{previousValue;currentValue;firstChange;constructor(n,t,r){this.previousValue=n,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Op(e,n,t,r){null!==n?n.applyValueToInputSignal(n,r):e[t]=r}const _l=(()=>{const e=()=>Fm;return e.ngInherit=!0,e})();function Fm(e){return e.type.prototype.ngOnChanges&&(e.setInput=mx),gx}function gx(){const e=Fp(this),n=e?.current;if(n){const t=e.previous;if(t===_s)e.previous=n;else for(let r in n)t[r]=n[r];e.current=null,this.ngOnChanges(n)}}function mx(e,n,t,r,i){const a=this.declaredInputs[r],d=Fp(e)||function Bm(e,n){return e[Ey]=n}(e,{previous:_s,current:null}),f=d.current||(d.current={}),_=d.previous,S=_[a];f[a]=new px(S&&S.currentValue,t,_===_s),Op(e,n,i,t)}const Ey="__ngSimpleChanges__";function Fp(e){return e[Ey]||null}const fu=[],qn=function(e,n=null,t){for(let r=0;r<fu.length;r++)(0,fu[r])(e,n,t)};function Cy(e,n){for(let t=n.directiveStart,r=n.directiveEnd;t<r;t++){const a=e.data[t].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:f,ngAfterViewInit:_,ngAfterViewChecked:S,ngOnDestroy:M}=a;d&&(e.contentHooks??=[]).push(-t,d),f&&((e.contentHooks??=[]).push(t,f),(e.contentCheckHooks??=[]).push(t,f)),_&&(e.viewHooks??=[]).push(-t,_),S&&((e.viewHooks??=[]).push(t,S),(e.viewCheckHooks??=[]).push(t,S)),null!=M&&(e.destroyHooks??=[]).push(t,M)}}function Bp(e,n,t){jp(e,n,3,t)}function zp(e,n,t,r){(3&e[2])===t&&jp(e,n,t,r)}function zm(e,n){let t=e[2];(3&t)===n&&(t&=16383,t+=1,e[2]=t)}function jp(e,n,t,r){const a=r??-1,d=n.length-1;let f=0;for(let _=void 0!==r?65535&e[17]:0;_<d;_++)if("number"==typeof n[_+1]){if(f=n[_],null!=r&&f>=r)break}else n[_]<0&&(e[17]+=65536),(f<a||-1==a)&&(Iy(e,t,n,_),e[17]=(4294901760&e[17])+_+2),_++}function Ty(e,n){qn(4,e,n);const t=zt(null);try{n.call(e)}finally{zt(t),qn(5,e,n)}}function Iy(e,n,t,r){const i=t[r]<0,a=t[r+1],f=e[i?-t[r]:t[r]];i?e[2]>>14<e[17]>>16&&(3&e[2])===n&&(e[2]+=16384,Ty(f,a)):Ty(f,a)}class Cf{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(n,t,r,i){this.factory=n,this.name=i,this.canSeeViewProviders=t,this.injectImpl=r}}function _h(e){return 3===e||4===e||6===e}function Gp(e){return 64===e.charCodeAt(0)}function Ga(e,n){if(null!==n&&0!==n.length)if(null===e||0===e.length)e=n.slice();else{let t=-1;for(let r=0;r<n.length;r++){const i=n[r];"number"==typeof i?t=i:0===t||Tf(e,t,i,0,-1===t||2===t?n[++r]:null)}}return e}function Tf(e,n,t,r,i){let a=0,d=e.length;if(-1===n)d=-1;else for(;a<e.length;){const f=e[a++];if("number"==typeof f){if(f===n){d=-1;break}if(f>n){d=a-1;break}}}for(;a<e.length;){const f=e[a];if("number"==typeof f)break;if(f===t)return void(null!==i&&(e[a+1]=i));a++,null!==i&&a++}-1!==d&&(e.splice(d,0,n),a=d+1),e.splice(a++,0,t),null!==i&&e.splice(a++,0,i)}function pu(e){return-1!==e}function nc(e){return 32767&e}function yh(e,n){let t=function xx(e){return e>>16}(e),r=n;for(;t>0;)r=r[14],t--;return r}let rc=!0;function Hp(e){const n=rc;return rc=e,n}let Dy=0;const Ha={};function Wp(e,n){const t=ky(e,n);if(-1!==t)return t;const r=n[1];r.firstCreatePass&&(e.injectorIndex=n.length,jm(r.data,e),jm(n,null),jm(r.blueprint,null));const i=Zp(e,n),a=e.injectorIndex;if(pu(i)){const d=nc(i),f=yh(i,n),_=f[1].data;for(let S=0;S<8;S++)n[a+S]=f[d+S]|_[d+S]}return n[a+8]=i,a}function jm(e,n){e.push(0,0,0,0,0,0,0,0,n)}function ky(e,n){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===n[e.injectorIndex+8]?-1:e.injectorIndex}function Zp(e,n){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let t=0,r=null,i=n;for(;null!==i;){if(r=Ny(i),null===r)return-1;if(t++,i=i[14],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return-1}function gu(e,n,t){!function Sx(e,n,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ta)&&(r=t[Ta]),null==r&&(r=t[Ta]=Dy++);const i=255&r;n.data[e+(i>>5)]|=1<<i}(e,n,t)}function Py(e,n,t){if(8&t||void 0!==e)return e;rf()}function Vm(e,n,t,r){if(8&t&&void 0===r&&(r=null),!(3&t)){const i=e[9],a=$n(void 0);try{return i?i.get(n,r,8&t):sf(n,r,8&t)}finally{$n(a)}}return Py(r,0,t)}function Ay(e,n,t,r=0,i){if(null!==e){if(2048&n[2]&&!(2&r)){const d=function Ix(e,n,t,r,i){let a=e,d=n;for(;null!==a&&null!==d&&2048&d[2]&&!Qo(d);){const f=Um(a,d,t,2|r,Ha);if(f!==Ha)return f;let _=a.parent;if(!_){const S=d[20];if(S){const M=S.get(t,Ha,r);if(M!==Ha)return M}_=Ny(d),d=d[14]}a=_}return i}(e,n,t,r,Ha);if(d!==Ha)return d}const a=Um(e,n,t,r,Ha);if(a!==Ha)return a}return Vm(n,t,r,i)}function Um(e,n,t,r,i){const a=function Tx(e){if("string"==typeof e)return e.charCodeAt(0)||0;const n=e.hasOwnProperty(Ta)?e[Ta]:void 0;return"number"==typeof n?n>=0?255&n:If:n}(t);if("function"==typeof a){if(!E(n,e,r))return 1&r?Py(i,0,r):Vm(n,t,r,i);try{let d;if(d=a(r),null!=d||8&r)return d;rf()}finally{j()}}else if("number"==typeof a){let d=null,f=ky(e,n),_=-1,S=1&r?n[15][5]:null;for((-1===f||4&r)&&(_=-1===f?Zp(e,n):n[f+8],-1!==_&&$m(r,!1)?(d=n[1],f=nc(_),n=yh(_,n)):f=-1);-1!==f;){const M=n[1];if(Ry(a,f,M.data)){const k=Cx(f,n,t,d,r,S);if(k!==Ha)return k}_=n[f+8],-1!==_&&$m(r,n[1].data[f+8]===S)&&Ry(a,f,n)?(d=M,f=nc(_),n=yh(_,n)):f=-1}}return i}function Cx(e,n,t,r,i,a){const d=n[1],f=d.data[e+8],M=bh(f,d,t,null==r?bi(f)&&rc:r!=d&&!!(3&f.type),1&i&&a===f);return null!==M?cd(n,d,M,f,i):Ha}function bh(e,n,t,r,i){const a=e.providerIndexes,d=n.data,f=1048575&a,_=e.directiveStart,M=a>>20,F=i?f+M:e.directiveEnd;for(let L=r?f:f+M;L<F;L++){const G=d[L];if(L<_&&t===G||L>=_&&G.type===t)return L}if(i){const L=d[_];if(L&&zi(L)&&L.type===t)return _}return null}function cd(e,n,t,r,i){let a=e[t];const d=n.data;if(a instanceof Cf){const f=a;if(f.resolving)throw function yn(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():Zt(e)}(d[t]),ur();const _=Hp(f.canSeeViewProviders);f.resolving=!0;const k=f.injectImpl?$n(f.injectImpl):null;E(e,r,0);try{a=e[t]=f.factory(void 0,i,d,e,r),n.firstCreatePass&&t>=r.directiveStart&&function yx(e,n,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:a}=n.type.prototype;if(r){const d=Fm(n);(t.preOrderHooks??=[]).push(e,d),(t.preOrderCheckHooks??=[]).push(e,d)}i&&(t.preOrderHooks??=[]).push(0-e,i),a&&((t.preOrderHooks??=[]).push(e,a),(t.preOrderCheckHooks??=[]).push(e,a))}(t,d[t],n)}finally{null!==k&&$n(k),Hp(_),f.resolving=!1,j()}}return a}function Ry(e,n,t){return!!(t[n+(e>>5)]&1<<e)}function $m(e,n){return!(2&e||1&e&&n)}class ei{_tNode;_lView;constructor(n,t){this._tNode=n,this._lView=t}get(n,t,r){return Ay(this._tNode,this._lView,n,sl(r),t)}}function If(){return new ei(Mt(),Ce())}function kr(e){return rs(()=>{const n=e.prototype.constructor,t=n[Ko]||Gm(n),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const a=i[Ko]||Gm(i);if(a&&a!==t)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function Gm(e){return Bc(e)?()=>{const n=Gm(Yt(e));return n&&n()}:ms(e)}function Ny(e){const n=e[1],t=n.type;return 2===t?n.declTNode:1===t?e[5]:null}function Mf(e){return function Ex(e,n){if("class"===n)return e.classes;if("style"===n)return e.styles;const t=e.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const a=t[i];if(_h(a))break;if(0===a)i+=2;else if("number"==typeof a)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(a===n)return t[i+1];i+=2}}}return null}(Mt(),e)}function Rx(){return xh(Mt(),Ce())}function xh(e,n){return new os(Xr(e,n))}let os=(()=>class e{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Rx})();function ui(e){return e instanceof os?e.nativeElement:e}function Wm(){return this._results[Symbol.iterator]()}class zy{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ii}constructor(n=!1){this._emitDistinctChangesOnly=n}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,t){return this._results.reduce(n,t)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,t){this.dirty=!1;const r=function to(e){return e.flat(Number.POSITIVE_INFINITY)}(n);(this._changesDetected=!function ym(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],a=n[r];if(t&&(i=t(i),a=t(a)),a!==i)return!1}return!0}(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(n){this._onDirty=n}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Wm}function Pf(e){return!(128&~e.flags)}var Xp=function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e}(Xp||{});const Qp=new Map;let Nx=0;function Ym(e){Qp.delete(e[19])}const vl="__ngContext__";function $i(e,n){vr(n)?(e[vl]=n[19],function Ox(e){Qp.set(e[19],e)}(n)):e[vl]=n}function n_(e){return Zy(e[12])}function Wy(e){return Zy(e[4])}function Zy(e){for(;null!==e&&!Mi(e);)e=e[4];return e}let Lf;function qa(){if(void 0!==Lf)return Lf;if(typeof document<"u")return document;throw new Le(210,!1)}const Sh=new Ye("",{providedIn:"root",factory:()=>Gx}),Gx="ng",ev=new Ye(""),dd=new Ye("",{providedIn:"platform",factory:()=>"unknown"}),tv=new Ye(""),nv=new Ye("",{providedIn:"root",factory:()=>qa().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),vu=new Ye("",{providedIn:"root",factory:()=>!1}),Yx=new Ye("");function bu(e){return!(32&~e.flags)}function fi(e,n){const t=e.contentQueries;if(null!==t){const r=zt(null);try{for(let i=0;i<t.length;i+=2){const d=t[i+1];if(-1!==d){const f=e.data[d];m(t[i]),f.contentQueries(2,n[d],d)}}}finally{zt(r)}}}function oo(e,n,t){m(0);const r=zt(null);try{n(e,t)}finally{zt(r)}}function jr(e,n,t){if(hr(n)){const r=zt(null);try{const a=n.directiveEnd;for(let d=n.directiveStart;d<a;d++){const f=e.data[d];f.contentQueries&&f.contentQueries(1,t[d],d)}}finally{zt(r)}}}var Qn=function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e}(Qn||{});let Vr,ac;function On(e){return function Ur(){if(void 0===Vr&&(Vr=null,tr.trustedTypes))try{Vr=tr.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return Vr}()?.createHTML(e)||e}function Ts(){if(void 0===ac&&(ac=null,tr.trustedTypes))try{ac=tr.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch{}return ac}function dv(e){return Ts()?.createHTML(e)||e}function xu(e){return Ts()?.createScriptURL(e)||e}class xd{changingThisBreaksApplicationSecurity;constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mi})`}}function lc(e){return e instanceof xd?e.changingThisBreaksApplicationSecurity:e}function wd(e,n){const t=function S_(e){return e instanceof xd&&e.getTypeName()||null}(e);if(null!=t&&t!==n){if("ResourceURL"===t&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${t} (see ${mi})`)}return t===n}class iw{inertDocumentHelper;constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const t=(new window.DOMParser).parseFromString(On(n),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(n):(t.firstChild?.remove(),t)}catch{return null}}}class ow{defaultDoc;inertDocument;constructor(n){this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(n){const t=this.inertDocument.createElement("template");return t.innerHTML=On(n),t}}const aw=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function E_(e){return(e=String(e)).match(aw)?e:"unsafe:"+e}function Ai(e){const n={};for(const t of e.split(","))n[t]=!0;return n}function Su(...e){const n={};for(const t of e)for(const r in t)t.hasOwnProperty(r)&&(n[r]=!0);return n}const C_=Ai("area,br,col,hr,img,wbr"),mv=Ai("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_v=Ai("rp,rt"),cc=Su(C_,Su(mv,Ai("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Su(_v,Ai("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Su(_v,mv)),Is=Ai("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),WT=Su(Is,Ai("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ai("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),vO=Ai("script,style,template");class bO{sanitizedSomething=!1;buf=[];sanitizeChildren(n){let t=n.firstChild,r=!0,i=[];for(;t;)if(t.nodeType===Node.ELEMENT_NODE?r=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,r&&t.firstChild)i.push(t),t=SO(t);else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let a=wO(t);if(a){t=a;break}t=i.pop()}return this.buf.join("")}startElement(n){const t=ZT(n).toLowerCase();if(!cc.hasOwnProperty(t))return this.sanitizedSomething=!0,!vO.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const r=n.attributes;for(let i=0;i<r.length;i++){const a=r.item(i),d=a.name,f=d.toLowerCase();if(!WT.hasOwnProperty(f)){this.sanitizedSomething=!0;continue}let _=a.value;Is[f]&&(_=E_(_)),this.buf.push(" ",d,'="',YT(_),'"')}return this.buf.push(">"),!0}endElement(n){const t=ZT(n).toLowerCase();cc.hasOwnProperty(t)&&!C_.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(n){this.buf.push(YT(n))}}function wO(e){const n=e.nextSibling;if(n&&e!==n.previousSibling)throw KT(n);return n}function SO(e){const n=e.firstChild;if(n&&function xO(e,n){return(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(e,n))throw KT(n);return n}function ZT(e){const n=e.nodeName;return"string"==typeof n?n:"FORM"}function KT(e){return new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`)}const EO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,CO=/([^\#-~ |!])/g;function YT(e){return e.replace(/&/g,"&amp;").replace(EO,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(CO,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yv;function lw(e){return"content"in e&&function IO(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var hg=function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e}(hg||{});function T_(e){const n=I_();return n?dv(n.sanitize(hg.HTML,e)||""):wd(e,"HTML")?dv(lc(e)):function TO(e,n){let t=null;try{yv=yv||function gv(e){const n=new ow(e);return function sw(){try{return!!(new window.DOMParser).parseFromString(On(""),"text/html")}catch{return!1}}()?new iw(n):n}(e);let r=n?String(n):"";t=yv.getInertBodyElement(r);let i=5,a=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=a,a=t.innerHTML,t=yv.getInertBodyElement(r)}while(r!==a);return On((new bO).sanitizeChildren(lw(t)||t))}finally{if(t){const r=lw(t)||t;for(;r.firstChild;)r.firstChild.remove()}}}(qa(),Zt(e))}function vv(e){const n=I_();return n?n.sanitize(hg.URL,e)||"":wd(e,"URL")?lc(e):E_(Zt(e))}function XT(e){const n=I_();if(n)return xu(n.sanitize(hg.RESOURCE_URL,e)||"");if(wd(e,"ResourceURL"))return xu(lc(e));throw new Le(904,!1)}function QT(e,n,t){return function AO(e,n){return"src"===n&&("embed"===e||"frame"===e||"iframe"===e||"media"===e||"script"===e)||"href"===n&&("base"===e||"link"===e)?XT:vv}(n,t)(e)}function I_(){const e=Ce();return e&&e[10].sanitizer}const RO=/^>|^->|<!--|-->|--!>|<!-$/g,NO=/(<|>)/g;function Eu(e){return e instanceof Function?e():e}function WO(e,n,t){let r=e.length;for(;;){const i=e.indexOf(n,t);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const a=n.length;if(i+a===r||e.charCodeAt(i+a)<=32)return i}t=i+1}}const aI="ng-template";function ZO(e,n,t,r){let i=0;if(r){for(;i<n.length&&"string"==typeof n[i];i+=2)if("class"===n[i]&&-1!==WO(n[i+1].toLowerCase(),t,0))return!0}else if(dw(e))return!1;if(i=n.indexOf(1,i),i>-1){let a;for(;++i<n.length&&"string"==typeof(a=n[i]);)if(a.toLowerCase()===t)return!0}return!1}function dw(e){return 4===e.type&&e.value!==aI}function KO(e,n,t){return n===(4!==e.type||t?e.value:aI)}function YO(e,n,t){let r=4;const i=e.attrs,a=null!==i?function JO(e){for(let n=0;n<e.length;n++)if(_h(e[n]))return n;return e.length}(i):0;let d=!1;for(let f=0;f<n.length;f++){const _=n[f];if("number"!=typeof _){if(!d)if(4&r){if(r=2|1&r,""!==_&&!KO(e,_,t)||""===_&&1===n.length){if(dc(r))return!1;d=!0}}else if(8&r){if(null===i||!ZO(e,i,_,t)){if(dc(r))return!1;d=!0}}else{const S=n[++f],M=XO(_,i,dw(e),t);if(-1===M){if(dc(r))return!1;d=!0;continue}if(""!==S){let k;if(k=M>a?"":i[M+1].toLowerCase(),2&r&&S!==k){if(dc(r))return!1;d=!0}}}}else{if(!d&&!dc(r)&&!dc(_))return!1;if(d&&dc(_))continue;d=!1,r=_|1&r}}return dc(r)||d}function dc(e){return!(1&e)}function XO(e,n,t,r){if(null===n)return-1;let i=0;if(r||!t){let a=!1;for(;i<n.length;){const d=n[i];if(d===e)return i;if(3===d||6===d)a=!0;else{if(1===d||2===d){let f=n[++i];for(;"string"==typeof f;)f=n[++i];continue}if(4===d)break;if(0===d){i+=4;continue}}i+=a?1:2}return-1}return function e4(e,n){let t=e.indexOf(4);if(t>-1)for(t++;t<e.length;){const r=e[t];if("number"==typeof r)return-1;if(r===n)return t;t++}return-1}(n,e)}function lI(e,n,t=!1){for(let r=0;r<n.length;r++)if(YO(e,n[r],t))return!0;return!1}function t4(e,n){e:for(let t=0;t<n.length;t++){const r=n[t];if(e.length===r.length){for(let i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function cI(e,n){return e?":not("+n.trim()+")":n}function n4(e){let n=e[0],t=1,r=2,i="",a=!1;for(;t<e.length;){let d=e[t];if("string"==typeof d)if(2&r){const f=e[++t];i+="["+d+(f.length>0?'="'+f+'"':"")+"]"}else 8&r?i+="."+d:4&r&&(i+=" "+d);else""!==i&&!dc(d)&&(n+=cI(a,i),i=""),r=d,a=a||!dc(r);t++}return""!==i&&(n+=cI(a,i)),n}const cr={};function fw(e,n){return e.createComment(function JT(e){return e.replace(RO,n=>n.replace(NO,"\u200b$1\u200b"))}(n))}function wv(e,n,t){return e.createElement(n,t)}function zf(e,n,t,r,i){e.insertBefore(n,t,r,i)}function dI(e,n,t){e.appendChild(n,t)}function hI(e,n,t,r,i){null!==r?zf(e,n,t,r,i):dI(e,n,t)}function pI(e,n,t){const{mergedAttrs:r,classes:i,styles:a}=t;null!==r&&function My(e,n,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const a=t[r++],d=t[r++],f=t[r++];e.setAttribute(n,d,f,a)}else{const a=i,d=t[++r];Gp(a)?e.setProperty(n,a,d):e.setAttribute(n,a,d),r++}}}(e,n,r),null!==i&&function s4(e,n,t){""===t?e.removeAttribute(n,"class"):e.setAttribute(n,"class",t)}(e,n,i),null!==a&&function o4(e,n,t){e.setAttribute(n,"style",t)}(e,n,a)}function pw(e,n,t,r,i,a,d,f,_,S,M){const k=26+r,F=k+i,L=function a4(e,n){const t=[];for(let r=0;r<n;r++)t.push(r<e?null:cr);return t}(k,F),G="function"==typeof S?S():S;return L[1]={type:e,blueprint:L,template:t,queries:null,viewQuery:f,declTNode:n,data:L.slice().fill(null,k),bindingStartIndex:k,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof a?a():a,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:_,consts:G,incompleteFirstPass:!1,ssrId:M}}function Sv(e,n,t,r,i,a,d,f,_,S,M){const k=n.blueprint.slice();return k[0]=i,k[2]=1228|r,(null!==S||e&&2048&e[2])&&(k[2]|=2048),fl(k),k[3]=k[14]=e,k[8]=t,k[10]=d||e&&e[10],k[11]=f||e&&e[11],k[9]=_||e&&e[9]||null,k[5]=a,k[19]=function Lx(){return Nx++}(),k[6]=M,k[20]=S,k[15]=2==n.type?e[15]:k,k}function gw(e){let n=16;return e.signals?n=4096:e.onPush&&(n=64),n}function D_(e,n,t,r){if(0===t)return-1;const i=n.length;for(let a=0;a<t;a++)n.push(r),e.blueprint.push(r),e.data.push(null);return i}function mw(e,n){return e[12]?e[13][4]=n:e[12]=n,e[13]=n,n}function bt(e=1){mI(Kt(),Ce(),q()+e,!1)}function mI(e,n,t,r){if(!r)if(3&~n[2]){const a=e.preOrderHooks;null!==a&&zp(n,a,0,t)}else{const a=e.preOrderCheckHooks;null!==a&&Bp(n,a,t)}ne(t)}var Ev=function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e}(Ev||{});function k_(e,n,t,r){const i=zt(null);try{const[a,d,f]=e.inputs[t];let _=null;0!==(d&Ev.SignalBased)&&(_=n[a][Yn]),null!==_&&void 0!==_.transformFn?r=_.transformFn(r):null!==f&&(r=f.call(n,r)),null!==e.setInput?e.setInput(n,_,r,t,a):Op(n,_,a,r)}finally{zt(i)}}var kh=function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e}(kh||{});function yw(e,n){return undefined(e,n)}function pg(e,n,t,r,i){if(null!=r){let a,d=!1;Mi(r)?a=r:vr(r)&&(d=!0,r=r[0]);const f=br(r);0===e&&null!==t?null==i?dI(n,t,f):zf(n,t,f,i||null,!0):1===e&&null!==t?zf(n,t,f,i||null,!0):2===e?function M_(e,n,t){e.removeChild(null,n,t)}(n,f,d):3===e&&n.destroyNode(f),null!=a&&function g4(e,n,t,r,i){const a=t[7];a!==br(t)&&pg(n,e,r,a,i);for(let f=10;f<t.length;f++){const _=t[f];Cv(_[1],_,e,n,r,a)}}(n,e,a,t,i)}}function yI(e,n){n[10].changeDetectionScheduler?.notify(9),Cv(e,n,n[11],2,null,null)}function vw(e,n){const t=e[9],r=t.indexOf(n);t.splice(r,1)}function P_(e,n){if(Jo(n))return;const t=n[11];t.destroyNode&&Cv(e,n,t,3,null,null),function d4(e){let n=e[12];if(!n)return bw(e[1],e);for(;n;){let t=null;if(vr(n))t=n[12];else{const r=n[10];r&&(t=r)}if(!t){for(;n&&!n[4]&&n!==e;)vr(n)&&bw(n[1],n),n=n[3];null===n&&(n=e),vr(n)&&bw(n[1],n),t=n&&n[4]}n=t}}(n)}function bw(e,n){if(Jo(n))return;const t=zt(null);try{n[2]&=-129,n[2]|=256,n[24]&&ds(n[24]),function f4(e,n){let t;if(null!=e&&null!=(t=e.destroyHooks))for(let r=0;r<t.length;r+=2){const i=n[t[r]];if(!(i instanceof Cf)){const a=t[r+1];if(Array.isArray(a))for(let d=0;d<a.length;d+=2){const f=i[a[d]],_=a[d+1];qn(4,f,_);try{_.call(f)}finally{qn(5,f,_)}}else{qn(4,i,a);try{a.call(i)}finally{qn(5,i,a)}}}}}(e,n),function h4(e,n){const t=e.cleanup,r=n[7];if(null!==t)for(let d=0;d<t.length-1;d+=2)if("string"==typeof t[d]){const f=t[d+3];f>=0?r[f]():r[-f].unsubscribe(),d+=2}else t[d].call(r[t[d+1]]);null!==r&&(n[7]=null);const i=n[21];if(null!==i){n[21]=null;for(let d=0;d<i.length;d++)(0,i[d])()}const a=n[23];if(null!==a){n[23]=null;for(const d of a)d.destroy()}}(e,n),1===n[1].type&&n[11].destroy();const r=n[16];if(null!==r&&Mi(n[3])){r!==n[3]&&vw(r,n);const i=n[18];null!==i&&i.detachView(e)}Ym(n)}finally{zt(t)}}function xw(e,n,t){return function vI(e,n,t){let r=n;for(;null!==r&&168&r.type;)r=(n=r).parent;if(null===r)return t[0];if(bi(r)){const{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===Qn.None||i===Qn.Emulated)return null}return Xr(r,t)}(e,n.parent,t)}function bI(e,n,t){return wI(e,n,t)}let wI=function xI(e,n,t){return 40&e.type?Xr(e,t):null};function Sw(e,n,t,r){const i=xw(e,r,n),a=n[11],f=bI(r.parent||n[5],r,n);if(null!=i)if(Array.isArray(t))for(let _=0;_<t.length;_++)hI(a,i,t[_],f,!1);else hI(a,i,t,f,!1)}function jf(e,n){if(null!==n){const t=n.type;if(3&t)return Xr(n,e);if(4&t)return Ew(-1,e[n.index]);if(8&t){const r=n.child;if(null!==r)return jf(e,r);{const i=e[n.index];return Mi(i)?Ew(-1,i):br(i)}}if(128&t)return jf(e,n.next);if(32&t)return yw(n,e)()||br(e[n.index]);{const r=EI(e,n);return null!==r?Array.isArray(r)?r[0]:jf(bs(e[15]),r):jf(e,n.next)}}return null}function EI(e,n){return null!==n?e[15][5].projection[n.projection]:null}function Ew(e,n){const t=10+e+1;if(t<n.length){const r=n[t],i=r[1].firstChild;if(null!==i)return jf(r,i)}return n[7]}function Cw(e,n,t,r,i,a,d){for(;null!=t;){if(128===t.type){t=t.next;continue}const f=r[t.index],_=t.type;if(d&&0===n&&(f&&$i(br(f),r),t.flags|=2),!bu(t))if(8&_)Cw(e,n,t.child,r,i,a,!1),pg(n,e,i,f,a);else if(32&_){const S=yw(t,r);let M;for(;M=S();)pg(n,e,i,M,a);pg(n,e,i,f,a)}else 16&_?CI(e,n,r,t,i,a):pg(n,e,i,f,a);t=d?t.projectionNext:t.next}}function Cv(e,n,t,r,i,a){Cw(t,r,e.firstChild,n,i,a,!1)}function CI(e,n,t,r,i,a){const d=t[15],_=d[5].projection[r.projection];if(Array.isArray(_))for(let S=0;S<_.length;S++)pg(n,e,i,_[S],a);else{let S=_;const M=d[3];Pf(r)&&(S.flags|=128),Cw(e,n,S,M,i,a,!0)}}function TI(e,n,t,r,i){const a=q(),d=2&r;try{ne(-1),d&&n.length>26&&mI(e,n,26,!1),qn(d?2:0,i,t),t(r,i)}finally{ne(a),qn(d?3:1,i,t)}}function Tv(e,n,t){(function x4(e,n,t){const r=t.directiveStart,i=t.directiveEnd;bi(t)&&function l4(e,n,t){const r=Xr(n,e),i=function gI(e){const n=e.tView;return null===n||n.incompleteFirstPass?e.tView=pw(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):n}(t),a=e[10].rendererFactory,d=mw(e,Sv(e,i,null,gw(t),r,n,null,a.createRenderer(r,t),null,null,null));e[n.index]=d}(n,t,e.data[r+t.componentOffset]),e.firstCreatePass||Wp(t,n);const a=t.initialInputs;for(let d=r;d<i;d++){const f=e.data[d],_=cd(n,e,d,t);$i(_,n),null!==a&&C4(0,d-r,_,f,0,a),zi(f)&&(Xe(t.index,n)[8]=cd(n,e,d,t))}})(e,n,t),!(64&~t.flags)&&function w4(e,n,t){const r=t.directiveStart,i=t.directiveEnd,a=t.index,d=function v(){return Wt.lFrame.currentDirectiveIndex}();try{ne(a);for(let f=r;f<i;f++){const _=e.data[f],S=n[f];o(f),(null!==_.hostBindings||0!==_.hostVars||null!==_.hostAttrs)&&S4(_,S)}}finally{ne(-1),o(d)}}(e,n,t)}function gg(e,n,t=Xr){const r=n.localNames;if(null!==r){let i=n.index+1;for(let a=0;a<r.length;a+=2){const d=r[a+1],f=-1===d?t(n,e):e[d];e[i++]=f}}}let II=()=>null;function Tw(e,n,t,r,i,a){kv(e,n[1],n,t,r)?bi(e)&&function MI(e,n){const t=Xe(n,e);16&t[2]||(t[2]|=64)}(n,e.index):(3&e.type&&(t=function b4(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(t)),Iw(e,n,t,r,i,a))}function Iw(e,n,t,r,i,a){if(3&e.type){const d=Xr(e,n);r=null!=a?a(r,e.value||"",t):r,i.setProperty(d,t,r)}}function S4(e,n){null!==e.hostBindings&&e.hostBindings(1,n)}function Mw(e,n){const t=e.directiveRegistry;let r=null;if(t)for(let i=0;i<t.length;i++){const a=t[i];lI(n,a.selectors,!1)&&(r??=[],zi(a)?r.unshift(a):r.push(a))}return r}function C4(e,n,t,r,i,a){const d=a[n];if(null!==d)for(let f=0;f<d.length;f+=2)k_(r,t,d[f],d[f+1])}function Mv(e,n,t,r,i){const a=26+t,d=n[1],f=i(d,n,e,r,t);n[a]=f,za(e,!0);const _=2===e.type;return _?(pI(n[11],f,e),(0===function sr(){return Wt.lFrame.elementDepthCount}()||Di(e))&&$i(f,n),function cu(){Wt.lFrame.elementDepthCount++}()):$i(f,n),le()&&(!_||!bu(e))&&Sw(d,n,f,e),e}function Dv(e){let n=e;return uu()?zn():(n=n.parent,za(n,!1)),n}function kv(e,n,t,r,i){const a=e.inputs?.[r],d=e.hostDirectiveInputs?.[r];let f=!1;if(d)for(let _=0;_<d.length;_+=2){const S=d[_];k_(n.data[S],t[S],d[_+1],i),f=!0}if(a)for(const _ of a)k_(n.data[_],t[_],r,i),f=!0;return f}function I4(e,n){const t=Xe(n,e),r=t[1];!function M4(e,n){for(let t=n.length;t<e.blueprint.length;t++)n.push(e.blueprint[t])}(r,t);const i=t[0];null!==i&&null===t[6]&&(t[6]=null),qn(18),Pv(r,t,t[8]),qn(19,t[8])}function Pv(e,n,t){I(n);try{const r=e.viewQuery;null!==r&&oo(1,r,t);const i=e.template;null!==i&&TI(e,n,i,1,t),e.firstCreatePass&&(e.firstCreatePass=!1),n[18]?.finishViewCreation(e),e.staticContentQueries&&fi(e,n),e.staticViewQueries&&oo(2,e.viewQuery,t);const a=e.components;null!==a&&function D4(e,n){for(let t=0;t<n.length;t++)I4(e,n[t])}(n,a)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{n[2]&=-5,z()}}function mg(e,n,t,r){const i=zt(null);try{const a=n.tView,_=Sv(e,a,t,4096&e[2]?4096:16,null,n,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);_[16]=e[n.index];const M=e[18];return null!==M&&(_[18]=M.createEmbeddedView(a)),Pv(a,_,t),_}finally{zt(i)}}function Vf(e,n){return!n||null===n.firstChild||Pf(e)}function A_(e,n,t,r,i=!1){for(;null!==t;){if(128===t.type){t=i?t.projectionNext:t.next;continue}const a=n[t.index];null!==a&&r.push(br(a)),Mi(a)&&P4(a,r);const d=t.type;if(8&d)A_(e,n,t.child,r);else if(32&d){const f=yw(t,n);let _;for(;_=f();)r.push(_)}else if(16&d){const f=EI(n,t);if(Array.isArray(f))r.push(...f);else{const _=bs(n[15]);A_(_[1],_,f,r,!0)}}t=i?t.projectionNext:t.next}return r}function P4(e,n){for(let t=10;t<e.length;t++){const r=e[t],i=r[1].firstChild;null!==i&&A_(r[1],r,i,n)}e[7]!==e[0]&&n.push(e[7])}function AI(e){if(null!==e[25]){for(const n of e[25])n.impl.addSequence(n);e[25].length=0}}let RI=[];const L4={...Ls,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Fa(e.lView)},consumerOnSignalRead(){this.lView[24]=this}},F4={...Ls,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let n=bs(e.lView);for(;n&&!NI(n[1]);)n=bs(n);n&&Ju(n)},consumerOnSignalRead(){this.lView[24]=this}};function NI(e){return 2!==e.type}function LI(e){if(null===e[23])return;let n=!0;for(;n;){let t=!1;for(const r of e[23])r.dirty&&(t=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));n=t&&!!(8192&e[2])}}function Av(e,n=0){const r=e[10].rendererFactory;r.begin?.();try{!function z4(e,n){const t=ph();try{ja(!0),kw(e,n);let r=0;for(;Zl(e);){if(100===r)throw new Le(103,!1);r++,kw(e,1)}}finally{ja(t)}}(e,n)}finally{r.end?.()}}function OI(e,n,t,r){if(Jo(n))return;const i=n[2];I(n);let f=!0,_=null,S=null;NI(e)?(S=function A4(e){return e[24]??function R4(e){const n=RI.pop()??Object.create(L4);return n.lView=e,n}(e)}(n),_=So(S)):null===function Tr(){return Dt}()?(f=!1,S=function O4(e){const n=e[24]??Object.create(F4);return n.lView=e,n}(n),_=So(S)):n[24]&&(ds(n[24]),n[24]=null);try{fl(n),function td(e){return Wt.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==t&&TI(e,n,t,2,r);const M=!(3&~i);if(M){const L=e.preOrderCheckHooks;null!==L&&Bp(n,L,null)}else{const L=e.preOrderHooks;null!==L&&zp(n,L,0,null),zm(n,0)}if(function V4(e){for(let n=n_(e);null!==n;n=Wy(n)){if(!(2&n[2]))continue;const t=n[9];for(let r=0;r<t.length;r++)Ju(t[r])}}(n),LI(n),FI(n,0),null!==e.contentQueries&&fi(e,n),M){const L=e.contentCheckHooks;null!==L&&Bp(n,L)}else{const L=e.contentHooks;null!==L&&zp(n,L,1),zm(n,1)}!function $4(e,n){const t=e.hostBindingOpCodes;if(null!==t)try{for(let r=0;r<t.length;r++){const i=t[r];if(i<0)ne(~i);else{const a=i,d=t[++r],f=t[++r];xf(d,a);const _=n[a];qn(24,_),f(2,_),qn(25,_)}}}finally{ne(-1)}}(e,n);const k=e.components;null!==k&&zI(n,k,0);const F=e.viewQuery;if(null!==F&&oo(2,F,r),M){const L=e.viewCheckHooks;null!==L&&Bp(n,L)}else{const L=e.viewHooks;null!==L&&zp(n,L,2),zm(n,2)}if(!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),n[22]){for(const L of n[22])L();n[22]=null}AI(n),n[2]&=-73}catch(M){throw Fa(n),M}finally{null!==S&&(_a(S,_),f&&function N4(e){e.lView[24]!==e&&(e.lView=null,RI.push(e))}(S)),z()}}function FI(e,n){for(let t=n_(e);null!==t;t=Wy(t))for(let r=10;r<t.length;r++)BI(t[r],n)}function U4(e,n,t){qn(18);const r=Xe(n,e);BI(r,t),qn(19,r[8])}function BI(e,n){lu(e)&&kw(e,n)}function kw(e,n){const r=e[1],i=e[2],a=e[24];let d=!!(0===n&&16&i);if(d||=!!(64&i&&0===n),d||=!!(1024&i),d||=!(!a?.dirty||!Os(a)),d||=!1,a&&(a.dirty=!1),e[2]&=-9217,d)OI(r,e,r.template,e[8]);else if(8192&i){const f=zt(null);try{LI(e),FI(e,1);const _=r.components;null!==_&&zI(e,_,1),AI(e)}finally{zt(f)}}}function zI(e,n,t){for(let r=0;r<n.length;r++)U4(e,n[r],t)}function _g(e,n){const t=ph()?64:1088;for(e[10].changeDetectionScheduler?.notify(n);e;){e[2]|=t;const r=bs(e);if(Qo(e)&&!r)return e;e=r}return null}function jI(e,n,t,r){return[e,!0,0,n,null,r,null,t,null,null]}function yg(e,n,t,r=!0){const i=n[1];if(function G4(e,n,t,r){const i=10+r,a=t.length;r>0&&(t[i-1][4]=n),r<a-10?(n[4]=t[i],ll(t,10+r,n)):(t.push(n),n[4]=null),n[3]=t;const d=n[16];null!==d&&t!==d&&UI(d,n);const f=n[18];null!==f&&f.insertView(e),gf(n),n[2]|=128}(i,n,e,t),r){const d=Ew(t,e),f=n[11],_=f.parentNode(e[7]);null!==_&&function u4(e,n,t,r,i,a){r[0]=i,r[5]=n,Cv(e,r,t,1,i,a)}(i,e[5],f,n,_,d)}const a=n[6];null!==a&&null!==a.firstChild&&(a.firstChild=null)}function R_(e,n){if(e.length<=10)return;const t=10+n,r=e[t];if(r){const i=r[16];null!==i&&i!==e&&vw(i,r),n>0&&(e[t-1][4]=r[4]);const a=Hu(e,10+n);!function _I(e,n){yI(e,n),n[0]=null,n[5]=null}(r[1],r);const d=a[18];null!==d&&d.detachView(a[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function UI(e,n){const t=e[9],r=n[3];(vr(r)||n[15]!==r[3][15])&&(e[2]|=2),null===t?e[9]=[n]:t.push(n)}class N_{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const n=this._lView,t=n[1];return A_(t,n,t.firstChild,[])}constructor(n,t){this._lView=n,this._cdRefInjectingView=t}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return Jo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(Mi(n)){const t=n[8],r=t?t.indexOf(this):-1;r>-1&&(R_(n,r),Hu(t,r))}this._attachedToViewContainer=!1}P_(this._lView[1],this._lView)}onDestroy(n){oh(this._lView,n)}markForCheck(){_g(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){gf(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,Av(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const n=Qo(this._lView),t=this._lView[16];null!==t&&!n&&vw(t,this._lView),yI(this._lView[1],this._lView)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Le(902,!1);this._appRef=n;const t=Qo(this._lView),r=this._lView[16];null!==r&&!t&&UI(r,this._lView),gf(this._lView)}}let hc=(()=>class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=H4;constructor(t,r,i){this._declarationLView=t,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,r){return this.createEmbeddedViewImpl(t,r)}createEmbeddedViewImpl(t,r,i){const a=mg(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:r,dehydratedView:i});return new N_(a)}})();function H4(){return Rv(Mt(),Ce())}function Rv(e,n){return 4&e.type?new hc(n,e,xh(e,n)):null}function Uf(e,n,t,r,i){let a=e.data[n];if(null===a)a=function Lw(e,n,t,r,i){const a=yf(),d=uu(),_=e.data[n]=function eF(e,n,t,r,i,a){let d=n?n.injectorIndex:-1,f=0;return dh()&&(f|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:d,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:f,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?a:a&&a.parent,t,n,r,i);return function J4(e,n,t,r){null===e.firstChild&&(e.firstChild=n),null!==t&&(r?null==t.child&&null!==n.parent&&(t.child=n):null===t.next&&(t.next=n,n.prev=t))}(e,_,a,d),_}(e,n,t,r,i),function bf(){return Wt.lFrame.inI18n}()&&(a.flags|=32);else if(64&a.type){a.type=t,a.value=r,a.attrs=i;const d=function ji(){const e=Wt.lFrame,n=e.currentTNode;return e.isParent?n:n.parent}();a.injectorIndex=null===d?-1:d.injectorIndex}return za(a,!0),a}let OF=class{},fM=class{};class FF{resolveComponentFactory(n){throw new Le(917,!1)}}let Vv=class{static NULL=new FF};class Uv{}let U_=(()=>class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>function BF(){const e=Ce(),t=Xe(Mt().index,e);return(vr(t)?t:e)[11]}()})(),zF=(()=>{class e{static \u0275prov=at({token:e,providedIn:"root",factory:()=>null})}return e})();const $w={};class bg{injector;parentInjector;constructor(n,t){this.injector=n,this.parentInjector=t}get(n,t,r){const i=this.injector.get(n,$w,r);return i!==$w||t===$w?i:this.parentInjector.get(n,t,r)}}function Gv(e,n,t){let r=t?e.styles:null,i=t?e.classes:null,a=0;if(null!==n)for(let d=0;d<n.length;d++){const f=n[d];"number"==typeof f?a=f:1==a?i=Fc(i,f):2==a&&(r=Fc(r,f+": "+n[++d]+";"))}t?e.styles=r:e.stylesWithoutHost=r,t?e.classes=i:e.classesWithoutHost=i}function Xt(e,n=0){const t=Ce();return null===t?kt(e,n):Ay(Mt(),t,Yt(e),n)}function mM(e,n,t,r,i){const a=null===r?null:{"":-1},d=i(e,t);if(null!==d){let f=d,_=null,S=null;for(const M of d)if(null!==M.resolveHostDirectives){[f,_,S]=M.resolveHostDirectives(d);break}!function HF(e,n,t,r,i,a,d){const f=r.length;let _=!1;for(let F=0;F<f;F++){const L=r[F];!_&&zi(L)&&(_=!0,GF(e,t,F)),gu(Wp(t,n),e,L.type)}!function XF(e,n,t){e.flags|=1,e.directiveStart=n,e.directiveEnd=n+t,e.providerIndexes=n}(t,e.data.length,f);for(let F=0;F<f;F++){const L=r[F];L.providersResolver&&L.providersResolver(L)}let S=!1,M=!1,k=D_(e,n,f,null);f>0&&(t.directiveToIndex=new Map);for(let F=0;F<f;F++){const L=r[F];if(t.mergedAttrs=Ga(t.mergedAttrs,L.hostAttrs),WF(e,t,n,k,L),YF(k,L,i),null!==d&&d.has(L)){const[Q,de]=d.get(L);t.directiveToIndex.set(L.type,[k,Q+t.directiveStart,de+t.directiveStart])}else(null===a||!a.has(L))&&t.directiveToIndex.set(L.type,k);null!==L.contentQueries&&(t.flags|=4),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(t.flags|=64);const G=L.type.prototype;!S&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((e.preOrderHooks??=[]).push(t.index),S=!0),!M&&(G.ngOnChanges||G.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(t.index),M=!0),k++}!function qF(e,n,t){for(let r=n.directiveStart;r<n.directiveEnd;r++){const i=e.data[r];if(null!==t&&t.has(i)){const a=t.get(i);yM(0,n,a,r),yM(1,n,a,r),bM(n,r,!0)}else _M(0,n,i,r),_M(1,n,i,r),bM(n,r,!1)}}(e,t,a)}(e,n,t,f,a,_,S)}null!==a&&null!==r&&function $F(e,n,t){const r=e.localNames=[];for(let i=0;i<n.length;i+=2){const a=t[n[i+1]];if(null==a)throw new Le(-301,!1);r.push(n[i],a)}}(t,r,a)}function GF(e,n,t){n.componentOffset=t,(e.components??=[]).push(n.index)}function _M(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const a in i)if(i.hasOwnProperty(a)){let d;d=0===e?n.inputs??={}:n.outputs??={},d[a]??=[],d[a].push(r),vM(n,a)}}function yM(e,n,t,r){const i=0===e?t.inputs:t.outputs;for(const a in i)if(i.hasOwnProperty(a)){const d=i[a];let f;f=0===e?n.hostDirectiveInputs??={}:n.hostDirectiveOutputs??={},f[d]??=[],f[d].push(r,a),vM(n,d)}}function vM(e,n){"class"===n?e.flags|=8:"style"===n&&(e.flags|=16)}function bM(e,n,t){const{attrs:r,inputs:i,hostDirectiveInputs:a}=e;if(null===r||!t&&null===i||t&&null===a||dw(e))return e.initialInputs??=[],void e.initialInputs.push(null);let d=null,f=0;for(;f<r.length;){const _=r[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(!t&&i.hasOwnProperty(_)){const S=i[_];for(const M of S)if(M===n){d??=[],d.push(_,r[f+1]);break}}else if(t&&a.hasOwnProperty(_)){const S=a[_];for(let M=0;M<S.length;M+=2)if(S[M]===n){d??=[],d.push(S[M+1],r[f+1]);break}}f+=2}else f+=2;else f+=4}e.initialInputs??=[],e.initialInputs.push(d)}function WF(e,n,t,r,i){e.data[r]=i;const a=i.factory||(i.factory=ms(i.type)),d=new Cf(a,zi(i),Xt,null);e.blueprint[r]=d,t[r]=d,function ZF(e,n,t,r,i){const a=i.hostBindings;if(a){let d=e.hostBindingOpCodes;null===d&&(d=e.hostBindingOpCodes=[]);const f=~n.index;(function KF(e){let n=e.length;for(;n>0;){const t=e[--n];if("number"==typeof t&&t<0)return t}return 0})(d)!=f&&d.push(f),d.push(t,r,a)}}(e,n,r,D_(e,t,i.hostVars,cr),i)}function YF(e,n,t){if(t){if(n.exportAs)for(let r=0;r<n.exportAs.length;r++)t[n.exportAs[r]]=e;zi(n)&&(t[""]=e)}}function Gw(e,n,t,r,i,a,d,f){const _=n[1],S=_.consts,k=Uf(_,e,t,r,Or(S,d));return a&&mM(_,n,k,Or(S,f),i),k.mergedAttrs=Ga(k.mergedAttrs,k.attrs),null!==k.attrs&&Gv(k,k.attrs,!1),null!==k.mergedAttrs&&Gv(k,k.mergedAttrs,!0),null!==_.queries&&_.queries.elementStart(_,k),k}function Hw(e,n){Cy(e,n),hr(n)&&e.queries.elementEnd(n)}function Hv(e){return!!qw(e)&&(Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e)}function qw(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Cu(e,n,t){return e[n]=t}function $r(e,n,t){return t!==cr&&(!Object.is(e[n],t)&&(e[n]=t,!0))}function q_(e,n,t){return function r(i){_g(bi(e)?Xe(e.index,n):n,5);const d=n[8];let f=wM(n,d,t,i),_=r.__ngNextListenerFn__;for(;_;)f=wM(n,d,_,i)&&f,_=_.__ngNextListenerFn__;return f}}function wM(e,n,t,r){const i=zt(null);try{return qn(6,n,t),!1!==t(r)}catch(a){return function Dw(e,n){const t=e[9];t&&t.get(pn,null)?.(n)}(e,a),!1}finally{qn(7,n,t),zt(i)}}function EM(e,n,t,r,i,a,d){const f=n.firstCreatePass?mf(n):null,_=ah(t),S=_.length;_.push(i,a),f&&f.push(r,e,S,(S+1)*(d?-1:1))}function Wv(e,n,t,r,i,a){const f=n[1],k=n[t][f.data[t].outputs[r]].subscribe(a);EM(e.index,f,n,i,a,k,!0)}const Ah=Symbol("BINDING");class CM extends Vv{ngModule;constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const t=Ln(n);return new Zv(t,this.ngModule)}}class Zv extends fM{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function c5(e){return Object.keys(e).map(n=>{const[t,r,i]=e[n],a={propName:t,templateName:n,isSignal:0!==(r&Ev.SignalBased)};return i&&(a.transform=i),a})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function u5(e){return Object.keys(e).map(n=>({propName:e[n],templateName:n}))}(this.componentDef.outputs),this.cachedOutputs}constructor(n,t){super(),this.componentDef=n,this.ngModule=t,this.componentType=n.type,this.selector=function r4(e){return e.map(n4).join(",")}(n.selectors),this.ngContentSelectors=n.ngContentSelectors??[],this.isBoundToModule=!!t}create(n,t,r,i,a,d){qn(22);const f=zt(null);try{const _=this.componentDef,S=function g5(e,n,t,r){const i=e?["ng-version","20.2.1"]:function i4(e){const n=[],t=[];let r=1,i=2;for(;r<e.length;){let a=e[r];if("string"==typeof a)2===i?""!==a&&n.push(a,e[++r]):8===i&&t.push(a);else{if(!dc(i))break;i=a}r++}return t.length&&n.push(1,...t),n}(n.selectors[0]);let a=null,d=null,f=0;if(t)for(const M of t)f+=M[Ah].requiredVars,M.create&&(M.targetIdx=0,(a??=[]).push(M)),M.update&&(M.targetIdx=0,(d??=[]).push(M));if(r)for(let M=0;M<r.length;M++){const k=r[M];if("function"!=typeof k)for(const F of k.bindings){f+=F[Ah].requiredVars;const L=M+1;F.create&&(F.targetIdx=L,(a??=[]).push(F)),F.update&&(F.targetIdx=L,(d??=[]).push(F))}}const _=[n];if(r)for(const M of r){const F=Bi("function"==typeof M?M:M.type);_.push(F)}return pw(0,null,function m5(e,n){return e||n?t=>{if(1&t&&e)for(const r of e)r.create();if(2&t&&n)for(const r of n)r.update()}:null}(a,d),1,f,_,null,null,null,[i],null)}(r,_,d,a),M=function d5(e,n,t){let r=n instanceof si?n:n?.injector;return r&&null!==e.getStandaloneInjector&&(r=e.getStandaloneInjector(r)||r),r?new bg(t,r):t}(_,i||this.ngModule,n),k=function h5(e){const n=e.get(Uv,null);if(null===n)throw new Le(407,!1);return{rendererFactory:n,sanitizer:e.get(zF,null),changeDetectionScheduler:e.get(xi,null),ngReflect:!1}}(M),F=k.rendererFactory.createRenderer(null,_),L=r?function _4(e,n,t,r){const a=r.get(vu,!1)||t===Qn.ShadowDom,d=e.selectRootElement(n,a);return function y4(e){II(e)}(d),d}(F,r,_.encapsulation,M):function f5(e,n){const t=function p5(e){return(e.selectors[0][0]||"div").toLowerCase()}(e);return wv(n,t,"svg"===t?"svg":"math"===t?"math":null)}(_,F),G=d?.some(TM)||a?.some(_e=>"function"!=typeof _e&&_e.bindings.some(TM)),Q=Sv(null,S,null,512|gw(_),null,null,k,F,M,null,null);Q[26]=L,I(Q);let de=null;try{const _e=Gw(26,Q,2,"#host",()=>S.directiveRegistry,!0,0);L&&(pI(F,L,_e),$i(L,Q)),Tv(S,Q,_e),jr(S,_e,Q),Hw(S,_e),void 0!==t&&function y5(e,n,t){const r=e.projection=[];for(let i=0;i<n.length;i++){const a=t[i];r.push(null!=a&&a.length?Array.from(a):null)}}(_e,this.ngContentSelectors,t),de=Xe(_e.index,Q),Q[8]=de[8],Pv(S,Q,null)}catch(_e){throw null!==de&&Ym(de),Ym(Q),_e}finally{qn(23),z()}return new _5(this.componentType,Q,!!G)}finally{zt(f)}}}function TM(e){const n=e[Ah].kind;return"input"===n||"twoWay"===n}class _5 extends OF{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(n,t,r){super(),this._rootLView=t,this._hasInputBindings=r,this._tNode=Qs(t[1],26),this.location=xh(this._tNode,t),this.instance=Xe(this._tNode.index,t)[8],this.hostView=this.changeDetectorRef=new N_(t,void 0),this.componentType=n}setInput(n,t){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(n)&&Object.is(this.previousInputValues.get(n),t))return;const i=this._rootLView;kv(r,i[1],i,n,t),this.previousInputValues.set(n,t),_g(Xe(r.index,i),1)}get injector(){return new ei(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}let Sl=(()=>class e{static __NG_ELEMENT_ID__=v5})();function v5(){return DM(Mt(),Ce())}const b5=Sl,IM=class extends b5{_lContainer;_hostTNode;_hostLView;constructor(n,t,r){super(),this._lContainer=n,this._hostTNode=t,this._hostLView=r}get element(){return xh(this._hostTNode,this._hostLView)}get injector(){return new ei(this._hostTNode,this._hostLView)}get parentInjector(){const n=Zp(this._hostTNode,this._hostLView);if(pu(n)){const t=yh(n,this._hostLView),r=nc(n);return new ei(t[1].data[r+8],t)}return new ei(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const t=MM(this._lContainer);return null!==t&&t[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,t,r){let i,a;"number"==typeof r?i=r:null!=r&&(i=r.index,a=r.injector);const f=n.createEmbeddedViewImpl(t||{},a,null);return this.insertImpl(f,i,Vf(this._hostTNode,null)),f}createComponent(n,t,r,i,a,d,f){const _=n&&!function tc(e){return"function"==typeof e}(n);let S;if(_)S=t;else{const de=t||{};S=de.index,r=de.injector,i=de.projectableNodes,a=de.environmentInjector||de.ngModuleRef,d=de.directives,f=de.bindings}const M=_?n:new Zv(Ln(n)),k=r||this.parentInjector;if(!a&&null==M.ngModule){const _e=(_?k:this.parentInjector).get(si,null);_e&&(a=_e)}Ln(M.componentType??{});const Q=M.create(k,i,null,a,d,f);return this.insertImpl(Q.hostView,S,Vf(this._hostTNode,null)),Q}insert(n,t){return this.insertImpl(n,t,!0)}insertImpl(n,t,r){const i=n._lView;if(function pf(e){return Mi(e[3])}(i)){const f=this.indexOf(n);if(-1!==f)this.detach(f);else{const _=i[3],S=new IM(_,_[5],_[3]);S.detach(S.indexOf(n))}}const a=this._adjustIndex(t),d=this._lContainer;return yg(d,i,a,r),n.attachToViewContainerRef(),ll(Ww(d),a,n),n}move(n,t){return this.insert(n,t)}indexOf(n){const t=MM(this._lContainer);return null!==t?t.indexOf(n):-1}remove(n){const t=this._adjustIndex(n,-1),r=R_(this._lContainer,t);r&&(Hu(Ww(this._lContainer),t),P_(r[1],r))}detach(n){const t=this._adjustIndex(n,-1),r=R_(this._lContainer,t);return r&&null!=Hu(Ww(this._lContainer),t)?new N_(r):null}_adjustIndex(n,t=0){return n??this.length+t}};function MM(e){return e[8]}function Ww(e){return e[8]||(e[8]=[])}function DM(e,n){let t;const r=n[e.index];return Mi(r)?t=r:(t=jI(r,n,null,e),n[e.index]=t,mw(n,t)),kM(t,n,e,r),new IM(t,e,n)}let kM=function AM(e,n,t,r){if(e[7])return;let i;i=8&t.type?br(r):function x5(e,n){const t=e[11],r=t.createComment(""),i=Xr(n,e),a=t.parentNode(i);return zf(t,a,r,t.nextSibling(i),!1),r}(n,t),e[7]=i};class Kw{queryList;matches=null;constructor(n){this.queryList=n}clone(){return new Kw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Yw{queries;constructor(n=[]){this.queries=n}createEmbeddedView(n){const t=n.queries;if(null!==t){const r=null!==n.contentQueries?n.contentQueries[0]:t.length,i=[];for(let a=0;a<r;a++){const d=t.getByIndex(a);i.push(this.queries[d.indexInDeclarationView].clone())}return new Yw(i)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}finishViewCreation(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let t=0;t<this.queries.length;t++)null!==tS(n,t).matches&&this.queries[t].setDirty()}}class RM{flags;read;predicate;constructor(n,t,r=null){this.flags=t,this.read=r,this.predicate="string"==typeof n?function M5(e){return e.split(",").map(n=>n.trim())}(n):n}}class Xw{queries;constructor(n=[]){this.queries=n}elementStart(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(n,t)}elementEnd(n){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(n)}embeddedTView(n){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,a=this.getByIndex(r).embeddedTView(n,i);a&&(a.indexInDeclarationView=r,null!==t?t.push(a):t=[a])}return null!==t?new Xw(t):null}template(n,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(n,t)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Qw{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(n,t=-1){this.metadata=n,this._declarationNodeIndex=t}elementStart(n,t){this.isApplyingToNode(t)&&this.matchTNode(n,t)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,t){this.elementStart(n,t)}embeddedTView(n,t){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,t),new Qw(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1&~this.metadata.flags){const t=this._declarationNodeIndex;let r=n.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(n,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const a=r[i];this.matchTNodeWithReadOption(n,t,E5(t,a)),this.matchTNodeWithReadOption(n,t,bh(t,n,a,!1,!1))}else r===hc?4&t.type&&this.matchTNodeWithReadOption(n,t,-1):this.matchTNodeWithReadOption(n,t,bh(t,n,r,!1,!1))}matchTNodeWithReadOption(n,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===os||i===Sl||i===hc&&4&t.type)this.addMatch(t.index,-2);else{const a=bh(t,n,i,!1,!1);null!==a&&this.addMatch(t.index,a)}else this.addMatch(t.index,r)}}addMatch(n,t){null===this.matches?this.matches=[n,t]:this.matches.push(n,t)}}function E5(e,n){const t=e.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===n)return t[r+1];return null}function T5(e,n,t,r){return-1===t?function C5(e,n){return 11&e.type?xh(e,n):4&e.type?Rv(e,n):null}(n,e):-2===t?function I5(e,n,t){return t===os?xh(n,e):t===hc?Rv(n,e):t===Sl?DM(n,e):void 0}(e,n,r):cd(e,e[1],t,n)}function NM(e,n,t,r){const i=n[18].queries[r];if(null===i.matches){const a=e.data,d=t.matches,f=[];for(let _=0;null!==d&&_<d.length;_+=2){const S=d[_];f.push(S<0?null:T5(n,a[S],d[_+1],t.metadata.read))}i.matches=f}return i.matches}function Jw(e,n,t,r){const i=e.queries.getByIndex(t),a=i.matches;if(null!==a){const d=NM(e,n,i,t);for(let f=0;f<a.length;f+=2){const _=a[f];if(_>0)r.push(d[f/2]);else{const S=a[f+1],M=n[-_];for(let k=10;k<M.length;k++){const F=M[k];F[16]===F[3]&&Jw(F[1],F,S,r)}if(null!==M[9]){const k=M[9];for(let F=0;F<k.length;F++){const L=k[F];Jw(L[1],L,S,r)}}}}}return r}function LM(e,n,t){const r=new zy(!(4&~t));return function _f(e,n,t,r){const i=ah(n);i.push(t),e.firstCreatePass&&mf(e).push(r,i.length-1)}(e,n,r,r.destroy),(n[18]??=new Yw).queries.push(new Kw(r))-1}function BM(e,n,t){null===e.queries&&(e.queries=new Xw),e.queries.track(new Qw(n,t))}function tS(e,n){return e.queries.getByIndex(n)}function zM(e,n){const t=e[1],r=tS(t,n);return r.crossesNgTemplate?Jw(t,e,n,[]):NM(t,e,r,n)}const GM=new Set;function _o(e){GM.has(e)||(GM.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}let qf=class{},HM=class{};class iS extends qf{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new CM(this);constructor(n,t,r,i=!0){super(),this.ngModuleType=n,this._parent=t;const a=fo(n);this._bootstrapComponents=Eu(a.bootstrap),this._r3Injector=We(n,t,[{provide:qf,useValue:this},{provide:Vv,useValue:this.componentFactoryResolver},...r],Cn(n),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class qM extends HM{moduleType;constructor(n){super(),this.moduleType=n}create(n){return new iS(this.moduleType,n,[])}}class WM extends qf{injector;componentFactoryResolver=new CM(this);instance=null;constructor(n){super();const t=new ka([...n.providers,{provide:qf,useValue:this},{provide:Vv,useValue:this.componentFactoryResolver}],n.parent||Xc(),n.debugName,new Set(["environment"]));this.injector=t,n.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(n){this.injector.onDestroy(n)}}function Kv(e,n,t=null){return new WM({providers:e,parent:n,debugName:t,runEnvironmentInitializers:!0}).injector}let V5=(()=>{class e{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){const r=wn(0,t.type),i=r.length>0?Kv([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=at({token:e,providedIn:"environment",factory:()=>new e(kt(si))})}return e})();function ra(e){return rs(()=>{const n=KM(e),t={...n,decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Xp.OnPush,directiveDefs:null,pipeDefs:null,dependencies:n.standalone&&e.dependencies||null,getStandaloneInjector:n.standalone?i=>i.get(V5).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||Qn.Emulated,styles:e.styles||Rn,_:null,schemas:e.schemas||null,tView:null,id:""};n.standalone&&_o("NgStandalone"),YM(t);const r=e.dependencies;return t.directiveDefs=Yv(r,ZM),t.pipeDefs=Yv(r,Io),t.id=function H5(e){let n=0;const r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,"function"==typeof e.consts?"":e.consts,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(const a of r.join("|"))n=Math.imul(31,n)+a.charCodeAt(0)|0;return n+=2147483648,"c"+n}(t),t})}function ZM(e){return Ln(e)||Bi(e)}function Sd(e){return rs(()=>({type:e.type,bootstrap:e.bootstrap||Rn,declarations:e.declarations||Rn,imports:e.imports||Rn,exports:e.exports||Rn,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function U5(e,n){if(null==e)return _s;const t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];let a,d,f,_;Array.isArray(i)?(f=i[0],a=i[1],d=i[2]??a,_=i[3]||null):(a=i,d=i,f=Ev.None,_=null),t[a]=[r,f,_],n[a]=d}return t}function $5(e){if(null==e)return _s;const n={};for(const t in e)e.hasOwnProperty(t)&&(n[e[t]]=t);return n}function qi(e){return rs(()=>{const n=KM(e);return YM(n),n})}function KM(e){const n={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputConfig:e.inputs||_s,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:!0===e.signals,selectors:e.selectors||Rn,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:U5(e.inputs,n),outputs:$5(e.outputs),debugInfo:null}}function YM(e){e.features?.forEach(n=>n(e))}function Yv(e,n){return e?()=>{const t="function"==typeof e?e():e,r=[];for(const i of t){const a=n(i);null!==a&&r.push(a)}return r}:null}function Ms(e){let n=function XM(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),t=!0;const r=[e];for(;n;){let i;if(zi(e))i=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Le(903,!1);i=n.\u0275dir}if(i){if(t){r.push(i);const d=e;d.inputs=oS(e.inputs),d.declaredInputs=oS(e.declaredInputs),d.outputs=oS(e.outputs);const f=i.hostBindings;f&&Y5(e,f);const _=i.viewQuery,S=i.contentQueries;if(_&&Z5(e,_),S&&K5(e,S),q5(e,i),Oc(e.outputs,i.outputs),zi(i)&&i.data.animation){const M=e.data;M.animation=(M.animation||[]).concat(i.data.animation)}}const a=i.features;if(a)for(let d=0;d<a.length;d++){const f=a[d];f&&f.ngInherit&&f(e),f===Ms&&(t=!1)}}n=Object.getPrototypeOf(n)}!function W5(e){let n=0,t=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=n+=i.hostVars,i.hostAttrs=Ga(i.hostAttrs,t=Ga(t,i.hostAttrs))}}(r)}function q5(e,n){for(const t in n.inputs){if(!n.inputs.hasOwnProperty(t)||e.inputs.hasOwnProperty(t))continue;const r=n.inputs[t];void 0!==r&&(e.inputs[t]=r,e.declaredInputs[t]=n.declaredInputs[t])}}function oS(e){return e===_s?{}:e===Rn?[]:e}function Z5(e,n){const t=e.viewQuery;e.viewQuery=t?(r,i)=>{n(r,i),t(r,i)}:n}function K5(e,n){const t=e.contentQueries;e.contentQueries=t?(r,i,a)=>{n(r,i,a),t(r,i,a)}:n}function Y5(e,n){const t=e.hostBindings;e.hostBindings=t?(r,i)=>{n(r,i),t(r,i)}:n}function n2(e,n,t,r,i,a,d,f){if(t.firstCreatePass){e.mergedAttrs=Ga(e.mergedAttrs,e.attrs);const M=e.tView=pw(2,e,i,a,d,t.directiveRegistry,t.pipeRegistry,null,t.schemas,t.consts,null);null!==t.queries&&(t.queries.template(t,e),M.queries=t.queries.embeddedTView(e))}f&&(e.flags|=f),za(e,!1);const _=i2(t,n,e,r);le()&&Sw(t,n,_,e),$i(_,n);const S=jI(_,n,_,e);n[r+26]=S,mw(n,S)}function Nn(e,n,t,r,i,a,d,f){const _=Ce(),S=Kt();return function r3(e,n,t,r,i,a,d,f,_,S,M){const k=t+26;let F;n.firstCreatePass?(F=Uf(n,k,4,d||null,f||null),uh()&&mM(n,e,F,Or(n.consts,S),Mw),Cy(n,F)):F=n.data[k],n2(F,e,n,t,r,i,a,_),Di(F)&&Tv(n,e,F),null!=S&&gg(e,F,M)}(_,S,e,n,t,r,i,Or(S.consts,a),void 0,d,f),Nn}let i2=function o2(e,n,t,r){return be(!0),n[11].createComment("")};var aS=function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e}(aS||{});const Y_=new Ye(""),u2=!1,Ci=class c3 extends ii{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(n=!1){super(),this.__isAsync=n,function tu(){return void 0!==Hc()||null!=um()}()&&(this.destroyRef=Fe(ht,{optional:!0})??void 0,this.pendingTasks=Fe(wi,{optional:!0})??void 0)}emit(n){const t=zt(null);try{super.next(n)}finally{zt(t)}}subscribe(n,t,r){let i=n,a=t||(()=>null),d=r;if(n&&"object"==typeof n){const _=n;i=_.next?.bind(_),a=_.error?.bind(_),d=_.complete?.bind(_)}this.__isAsync&&(a=this.wrapInTimeout(a),i&&(i=this.wrapInTimeout(i)),d&&(d=this.wrapInTimeout(d)));const f=super.subscribe({next:i,error:a,complete:d});return n instanceof Mr&&n.add(f),f}wrapInTimeout(n){return t=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{n(t)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function d2(e){let n,t;function r(){e=ts;try{void 0!==t&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(t),void 0!==n&&clearTimeout(n)}catch{}}return n=setTimeout(()=>{e(),r()}),"function"==typeof requestAnimationFrame&&(t=requestAnimationFrame(()=>{e(),r()})),()=>r()}function h2(e){return queueMicrotask(()=>e()),()=>{e=ts}}const lS="isAngularZone",eb=lS+"_ID";let u3=0;class Fn{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ci(!1);onMicrotaskEmpty=new Ci(!1);onStable=new Ci(!1);onError=new Ci(!1);constructor(n){const{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:a=u2}=n;if(typeof Zone>"u")throw new Le(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!i&&r,d.shouldCoalesceRunChangeDetection=i,d.callbackScheduled=!1,d.scheduleInRootZone=a,function f3(e){const n=()=>{!function h3(e){function n(){d2(()=>{e.callbackScheduled=!1,uS(e),e.isCheckStableRunning=!0,cS(e),e.isCheckStableRunning=!1})}e.isCheckStableRunning||e.callbackScheduled||(e.callbackScheduled=!0,e.scheduleInRootZone?Zone.root.run(()=>{n()}):e._outer.run(()=>{n()}),uS(e))}(e)},t=u3++;e._inner=e._inner.fork({name:"angular",properties:{[lS]:!0,[eb]:t,[eb+t]:!0},onInvokeTask:(r,i,a,d,f,_)=>{if(function p3(e){return g2(e,"__ignore_ng_zone__")}(_))return r.invokeTask(a,d,f,_);try{return f2(e),r.invokeTask(a,d,f,_)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===d.type||e.shouldCoalesceRunChangeDetection)&&n(),p2(e)}},onInvoke:(r,i,a,d,f,_,S)=>{try{return f2(e),r.invoke(a,d,f,_,S)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!function g3(e){return g2(e,"__scheduler_tick__")}(_)&&n(),p2(e)}},onHasTask:(r,i,a,d)=>{r.hasTask(a,d),i===a&&("microTask"==d.change?(e._hasPendingMicrotasks=d.microTask,uS(e),cS(e)):"macroTask"==d.change&&(e.hasPendingMacrotasks=d.macroTask))},onHandleError:(r,i,a,d)=>(r.handleError(a,d),e.runOutsideAngular(()=>e.onError.emit(d)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(lS)}static assertInAngularZone(){if(!Fn.isInAngularZone())throw new Le(909,!1)}static assertNotInAngularZone(){if(Fn.isInAngularZone())throw new Le(909,!1)}run(n,t,r){return this._inner.run(n,t,r)}runTask(n,t,r,i){const a=this._inner,d=a.scheduleEventTask("NgZoneEvent: "+i,n,d3,ts,ts);try{return a.runTask(d,t,r)}finally{a.cancelTask(d)}}runGuarded(n,t,r){return this._inner.runGuarded(n,t,r)}runOutsideAngular(n){return this._outer.run(n)}}const d3={};function cS(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function uS(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&!0===e.callbackScheduled)}function f2(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function p2(e){e._nesting--,cS(e)}class dS{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ci;onMicrotaskEmpty=new Ci;onStable=new Ci;onError=new Ci;run(n,t,r){return n.apply(t,r)}runGuarded(n,t,r){return n.apply(t,r)}runOutsideAngular(n){return n()}runTask(n,t,r,i){return n.apply(t,r)}}function g2(e,n){return!(!Array.isArray(e)||1!==e.length)&&!0===e[0]?.data?.[n]}let m2=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=at({token:e,providedIn:"root",factory:()=>new e})}return e})();const _2=[0,1,2,3];let _3=(()=>{class e{ngZone=Fe(Fn);scheduler=Fe(xi);errorHandler=Fe(In,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){Fe(Y_,{optional:!0})}execute(){const t=this.sequences.size>0;t&&qn(16),this.executing=!0;for(const r of _2)for(const i of this.sequences)if(!i.erroredOrDestroyed&&i.hooks[r])try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,i.hooks[r])(i.pipelinedValue),i.snapshot))}catch(a){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(a)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&qn(17)}register(t){const{view:r}=t;void 0!==r?((r[25]??=[]).push(t),Fa(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(aS.AFTER_NEXT_RENDER,t):t()}static \u0275prov=at({token:e,providedIn:"root",factory:()=>new e})}return e})();class y2{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(n,t,r,i,a,d=null){this.impl=n,this.hooks=t,this.view=r,this.once=i,this.snapshot=d,this.unregisterOnDestroy=a?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const n=this.view?.[25];n&&(this.view[25]=n.filter(t=>t!==this))}}function v2(e,n){const t=n?.injector??Fe(qe);return _o("NgAfterNextRender"),function b2(e,n,t,r){const i=n.get(m2);i.impl??=n.get(_3);const a=n.get(Y_,null,{optional:!0}),d=!0!==t?.manualCleanup?n.get(ht):null,f=n.get(Va,null,{optional:!0}),_=new y2(i.impl,function v3(e){return e instanceof Function?[void 0,void 0,e,void 0]:[e.earlyRead,e.write,e.mixedReadWrite,e.read]}(e),f?.view,r,d,a?.snapshot(null));return i.impl.register(_),_}(e,t,n,!0)}let D2=(()=>{class e{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();const G2=new Ye("");function sb(e){return!!e&&"function"==typeof e.then}function H2(e){return!!e&&"function"==typeof e.subscribe}const q2=new Ye("");function xS(e){return jl([{provide:q2,multi:!0,useValue:e}])}let W2=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=Fe(q2,{optional:!0})??[];injector=Fe(qe);constructor(){}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const a=Ii(this.injector,i);if(sb(a))t.push(a);else if(H2(a)){const d=new Promise((f,_)=>{a.subscribe({complete:f,error:_})});t.push(d)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const wS=new Ye("");let Nh=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=Fe(pn);afterRenderManager=Fe(m2);zonelessEnabled=Fe(Js);rootEffectScheduler=Fe(zr);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ii;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=Fe(wi);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Hn(t=>!t))}constructor(){Fe(Y_,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=Fe(si);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=qe.NULL){return this._injector.get(Fn).run(()=>{qn(10);const d=t instanceof fM;if(!this._injector.get(W2).done)throw new Le(405,"");let _;_=d?t:this._injector.get(Vv).resolveComponentFactory(t),this.componentTypes.push(_.componentType);const S=function EB(e){return e.isBoundToModule}(_)?void 0:this._injector.get(qf),k=_.create(i,[],r||_.selector,S),F=k.location.nativeElement,L=k.injector.get(G2,null);return L?.registerApplication(F),k.onDestroy(()=>{this.detachView(k.hostView),ab(this.components,k),L?.unregisterApplication(F)}),this._loadComponent(k),qn(11,k),k})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){qn(12),null!==this.tracingSnapshot?this.tracingSnapshot.run(aS.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new Le(101,!1);const t=zt(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,zt(t),this.afterTick.next(),qn(13)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Uv,null,{optional:!0}));let t=0;for(;0!==this.dirtyFlags&&t++<10;)qn(14),this.synchronizeOnce(),qn(15)}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let t=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews)(r||Zl(i))&&(Av(i,r&&!this.zonelessEnabled?0:1),t=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}t||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:t})=>Zl(t))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;ab(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(t),this._injector.get(wS,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>ab(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new Le(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function ab(e,n){const t=e.indexOf(n);t>-1&&e.splice(t,1)}function so(e,n,t,r){const i=Ce();return $r(i,Qr(),n)&&(Kt(),function E4(e,n,t,r,i,a){const d=Xr(e,n);!function Iv(e,n,t,r,i,a,d){if(null==a)e.removeAttribute(n,i,t);else{const f=null==d?Zt(a):d(a,r||"",i);e.setAttribute(n,i,f,t)}}(n[11],d,a,e.value,t,r,i)}(ee(),i,e,n,t,r)),so}const iD=new Ye("",{providedIn:"root",factory:()=>!1}),a8=new Ye("",{providedIn:"root",factory:()=>l8}),l8=4e3;function st(e,n,t){const r=Ce();return $r(r,Qr(),n)&&(Kt(),Tw(ee(),r,e,n,r[11],t)),st}function NS(e,n,t,r,i){kv(n,e,t,i?"class":"style",r)}function Pr(e,n,t,r){const i=Ce(),a=i[1],d=e+26,f=a.firstCreatePass?Gw(d,i,2,n,Mw,uh(),t,r):a.data[d];if(Mv(f,i,e,n,LS),Di(f)){const _=i[1];Tv(_,i,f),jr(_,f,i)}return null!=r&&gg(i,f),Pr}function ti(){const e=Kt(),t=Dv(Mt());return e.firstCreatePass&&Hw(e,t),hh(t)&&mt(),ch(),null!=t.classesWithoutHost&&function Vp(e){return!!(8&e.flags)}(t)&&NS(e,t,Ce(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Up(e){return!!(16&e.flags)}(t)&&NS(e,t,Ce(),t.stylesWithoutHost,!1),ti}function Er(e,n,t,r){return Pr(e,n,t,r),ti(),Er}function e0(e,n,t,r){const i=Ce(),a=i[1],d=e+26,f=a.firstCreatePass?function xM(e,n,t,r,i,a){const d=n.consts,_=Uf(n,e,t,r,Or(d,i));if(_.mergedAttrs=Ga(_.mergedAttrs,_.attrs),null!=a){const S=Or(d,a);_.localNames=[];for(let M=0;M<S.length;M+=2)_.localNames.push(S[M],-1)}return null!==_.attrs&&Gv(_,_.attrs,!1),null!==_.mergedAttrs&&Gv(_,_.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,_),_}(d,a,2,n,t,r):a.data[d];return Mv(f,i,e,n,LS),null!=r&&gg(i,f),e0}function t0(){return hh(Dv(Mt()))&&mt(),ch(),t0}function Dg(e,n,t,r){return e0(e,n,t,r),t0(),Dg}typeof document<"u"&&document;let LS=(e,n,t,r,i)=>(be(!0),wv(n[11],r,function fe(){return Wt.lFrame.currentNamespace}()));function yo(e,n,t){const r=Ce(),i=r[1],a=e+26,d=i.firstCreatePass?Gw(a,r,8,"ng-container",Mw,uh(),n,t):i.data[a];if(Mv(d,r,e,"ng-container",FS),Di(d)){const f=r[1];Tv(f,r,d),jr(f,d,r)}return null!=t&&gg(r,d),yo}function ao(){const e=Kt(),t=Dv(Mt());return e.firstCreatePass&&Hw(e,t),ao}function gb(e,n,t){return yo(e,n,t),ao(),gb}let FS=(e,n,t,r,i)=>(be(!0),fw(n[11],""));function ep(){return Ce()}function BS(e,n,t){const r=Ce();return $r(r,Qr(),n)&&(Kt(),Iw(ee(),r,e,n,r[11],t)),BS}const mb="en-US";let bD=mb;function fc(e,n,t){const r=Ce(),i=Kt(),a=Mt();return function VS(e,n,t,r,i,a,d){let f=!0,_=null;if((3&r.type||d)&&(_??=q_(r,n,a),function SM(e,n,t,r,i,a,d,f){const _=Di(e);let S=!1,M=null;if(!r&&_&&(M=function t5(e,n,t,r){const i=e.cleanup;if(null!=i)for(let a=0;a<i.length-1;a+=2){const d=i[a];if(d===t&&i[a+1]===r){const f=n[7],_=i[a+2];return f&&f.length>_?f[_]:null}"string"==typeof d&&(a+=2)}return null}(n,t,a,e.index)),null!==M)(M.__ngLastListenerFn__||M).__ngNextListenerFn__=d,M.__ngLastListenerFn__=d,S=!0;else{const k=Xr(e,t),F=r?r(k):k,L=i.listen(F,a,f);EM(r?Q=>r(br(Q[e.index])):e.index,n,t,a,f,L,!1)}return S}(r,e,n,d,t,i,a,_)&&(f=!1)),f){const S=r.outputs?.[i],M=r.hostDirectiveOutputs?.[i];if(M&&M.length)for(let k=0;k<M.length;k+=2){const F=M[k],L=M[k+1];_??=q_(r,n,a),Wv(r,n,F,L,i,_)}if(S&&S.length)for(const k of S)_??=q_(r,n,a),Wv(r,n,k,i,i,_)}}(i,r,r[11],a,e,n,t),fc}function et(e=1){return function U(e){return(Wt.lFrame.contextLView=function fn(e,n){for(;e>0;)n=n[14],e--;return n}(e,Wt.lFrame.contextLView))[8]}(e)}function I6(e,n){let t=null;const r=function QO(e){const n=e.attrs;if(null!=n){const t=n.indexOf(5);if(!(1&t))return n[t+1]}return null}(e);for(let i=0;i<n.length;i++){const a=n[i];if("*"!==a){if(null===r?lI(e,a,!0):t4(r,a))return i}else t=i}return t}function bb(e){const n=Ce()[15][5];if(!n.projection){const r=n.projection=function Wc(e,n){const t=[];for(let r=0;r<e;r++)t.push(n);return t}(e?e.length:1,null),i=r.slice();let a=n.child;for(;null!==a;){if(128!==a.type){const d=e?I6(a,e):0;null!==d&&(i[d]?i[d].projectionNext=a:r[d]=a,i[d]=a)}a=a.next}}}function xb(e,n=0,t,r,i,a){const d=Ce(),f=Kt(),_=r?e+1:null;null!==_&&function Wf(e,n,t,r,i,a,d,f,_,S,M){const k=t+26;let F;if(n.firstCreatePass){if(F=Uf(n,k,4,d||null,f||null),null!=S){const L=Or(n.consts,S);F.localNames=[];for(let G=0;G<L.length;G+=2)F.localNames.push(L[G],-1)}}else F=n.data[k];return n2(F,e,n,t,r,i,a,_),null!=S&&gg(e,F,M),F}(d,f,_,r,i,a,null,t);const S=Uf(f,26+e,16,null,t||null);null===S.projection&&(S.projection=n),zn();const k=!d[6]||dh();null===d[15][5].projection[S.projection]&&null!==_?function M6(e,n,t){const r=26+t,i=n.data[r],a=e[r];yg(a,mg(e,i,void 0,{dehydratedView:null}),0,Vf(i,null))}(d,f,_):k&&!bu(S)&&function p4(e,n,t){CI(n[11],0,n,t,xw(e,t,n),bI(t.parent||n[5],t,n))}(f,d,S)}function Tu(e,n,t,r){!function FM(e,n,t,r){const i=Kt();if(i.firstCreatePass){const a=Mt();BM(i,new RM(n,t,r),a.index),function D5(e,n){const t=e.contentQueries||(e.contentQueries=[]);n!==(t.length?t[t.length-1]:-1)&&t.push(e.queries.length-1,n)}(i,e),!(2&~t)&&(i.staticContentQueries=!0)}return LM(i,Ce(),t)}(e,n,t,r)}function l0(e,n,t){!function OM(e,n,t){const r=Kt();return r.firstCreatePass&&(BM(r,new RM(e,n,t),-1),!(2&~n)&&(r.staticViewQueries=!0)),LM(r,Ce(),n)}(e,n,t)}function la(e){const n=Ce(),t=Kt(),r=p();m(r+1);const i=tS(t,r);if(e.dirty&&function ff(e){return!(4&~e[2])}(n)===!(2&~i.metadata.flags)){if(null===i.matches)e.reset([]);else{const a=zM(n,r);e.reset(a,ui),e.notifyOnChanges()}return!0}return!1}function ca(){return function eS(e,n){return e[18].queries[n].queryList}(Ce(),p())}function wb(e){return function vs(e,n){return e[n]}(function xr(){return Wt.lFrame.contextLView}(),26+e)}function Sb(e,n){return e<<17|n<<2}function np(e){return e>>17&32767}function US(e){return 2|e}function Pg(e){return(131068&e)>>2}function $S(e,n){return-131069&e|n<<2}function GS(e){return 1|e}function jD(e,n,t,r){const i=e[t+1],a=null===n;let d=r?np(i):Pg(i),f=!1;for(;0!==d&&(!1===f||a);){const S=e[d+1];F6(e[d],n)&&(f=!0,e[d+1]=r?GS(S):US(S)),d=r?np(S):Pg(S)}f&&(e[t+1]=r?US(i):GS(i))}function F6(e,n){return null===e||null==n||(Array.isArray(e)?e[1]:e)===n||!(!Array.isArray(e)||"string"!=typeof n)&&cl(e,n)>=0}const lo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function VD(e){return e.substring(lo.key,lo.keyEnd)}function UD(e,n){const t=lo.textEnd;return t===n?-1:(n=lo.keyEnd=function V6(e,n,t){for(;n<t&&e.charCodeAt(n)>32;)n++;return n}(e,lo.key=n,t),Ag(e,n,t))}function Ag(e,n,t){for(;n<t&&e.charCodeAt(n)<=32;)n++;return n}function HS(e,n,t){return function ZD(e,n,t,r){const i=Ce(),a=Kt(),d=xs(2);a.firstUpdatePass&&XD(a,e,d,r),n!==cr&&$r(i,d,n)&&JD(a,a.data[q()],i,i[11],e,i[d+1]=function ez(e,n){return null==e||""===e||("string"==typeof n?e+=n:"object"==typeof e&&(e=Cn(lc(e)))),e}(n,t),r,d)}(e,n,t,!1),HS}function cn(e){!function KD(e,n,t,r){const i=Kt(),a=xs(2);i.firstUpdatePass&&XD(i,null,a,r);const d=Ce();if(t!==cr&&$r(d,a,t)){const f=i.data[q()];if(tk(f,r)&&!YD(i,a)){let _=r?f.classesWithoutHost:f.stylesWithoutHost;null!==_&&(t=Fc(_,t||"")),NS(i,f,d,t,r)}else!function J6(e,n,t,r,i,a,d,f){i===cr&&(i=Rn);let _=0,S=0,M=0<i.length?i[0]:null,k=0<a.length?a[0]:null;for(;null!==M||null!==k;){const F=_<i.length?i[_+1]:void 0,L=S<a.length?a[S+1]:void 0;let Q,G=null;M===k?(_+=2,S+=2,F!==L&&(G=k,Q=L)):null===k||null!==M&&M<k?(_+=2,G=M):(S+=2,G=k,Q=L),null!==G&&JD(e,n,t,r,G,Q,d,f),M=_<i.length?i[_]:null,k=S<a.length?a[S]:null}}(i,f,d,d[11],d[a+1],d[a+1]=function X6(e,n,t){if(null==t||""===t)return Rn;const r=[],i=lc(t);if(Array.isArray(i))for(let a=0;a<i.length;a++)e(r,i[a],!0);else if("object"==typeof i)for(const a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"==typeof i&&n(r,i);return r}(e,n,t),r,a)}}(Q6,q6,e,!0)}function q6(e,n){for(let t=function z6(e){return function GD(e){lo.key=0,lo.keyEnd=0,lo.value=0,lo.valueEnd=0,lo.textEnd=e.length}(e),UD(e,Ag(e,0,lo.textEnd))}(n);t>=0;t=UD(n,t))Zc(e,VD(n),!0)}function YD(e,n){return n>=e.expandoStartIndex}function XD(e,n,t,r){const i=e.data;if(null===i[t+1]){const a=i[q()],d=YD(e,t);tk(a,r)&&null===n&&!d&&(n=!1),n=function W6(e,n,t,r){const i=function u(e){const n=Wt.lFrame.currentDirectiveIndex;return-1===n?null:e[n]}(e);let a=r?n.residualClasses:n.residualStyles;if(null===i)0===(r?n.classBindings:n.styleBindings)&&(t=c0(t=qS(null,e,n,t,r),n.attrs,r),a=null);else{const d=n.directiveStylingLast;if(-1===d||e[d]!==i)if(t=qS(i,e,n,t,r),null===a){let _=function Z6(e,n,t){const r=t?n.classBindings:n.styleBindings;if(0!==Pg(r))return e[np(r)]}(e,n,r);void 0!==_&&Array.isArray(_)&&(_=qS(null,e,n,_[1],r),_=c0(_,n.attrs,r),function K6(e,n,t,r){e[np(t?n.classBindings:n.styleBindings)]=r}(e,n,r,_))}else a=function Y6(e,n,t){let r;const i=n.directiveEnd;for(let a=1+n.directiveStylingLast;a<i;a++)r=c0(r,e[a].hostAttrs,t);return c0(r,n.attrs,t)}(e,n,r)}return void 0!==a&&(r?n.residualClasses=a:n.residualStyles=a),t}(i,a,n,r),function L6(e,n,t,r,i,a){let d=a?n.classBindings:n.styleBindings,f=np(d),_=Pg(d);e[r]=t;let M,S=!1;if(Array.isArray(t)?(M=t[1],(null===M||cl(t,M)>0)&&(S=!0)):M=t,i)if(0!==_){const F=np(e[f+1]);e[r+1]=Sb(F,f),0!==F&&(e[F+1]=$S(e[F+1],r)),e[f+1]=function R6(e,n){return 131071&e|n<<17}(e[f+1],r)}else e[r+1]=Sb(f,0),0!==f&&(e[f+1]=$S(e[f+1],r)),f=r;else e[r+1]=Sb(_,0),0===f?f=r:e[_+1]=$S(e[_+1],r),_=r;S&&(e[r+1]=US(e[r+1])),jD(e,M,r,!0),jD(e,M,r,!1),function O6(e,n,t,r,i){const a=i?e.residualClasses:e.residualStyles;null!=a&&"string"==typeof n&&cl(a,n)>=0&&(t[r+1]=GS(t[r+1]))}(n,M,e,r,a),d=Sb(f,_),a?n.classBindings=d:n.styleBindings=d}(i,a,n,t,d,r)}}function qS(e,n,t,r,i){let a=null;const d=t.directiveEnd;let f=t.directiveStylingLast;for(-1===f?f=t.directiveStart:f++;f<d&&(a=n[f],r=c0(r,a.hostAttrs,i),a!==e);)f++;return null!==e&&(t.directiveStylingLast=f),r}function c0(e,n,t){const r=t?1:2;let i=-1;if(null!==n)for(let a=0;a<n.length;a++){const d=n[a];"number"==typeof d?i=d:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Zc(e,d,!!t||n[++a]))}return void 0===e?null:e}function Q6(e,n,t){const r=String(n);""!==r&&!r.includes(" ")&&Zc(e,r,t)}function JD(e,n,t,r,i,a,d,f){if(!(3&n.type))return;const _=e.data,S=_[f+1],M=function N6(e){return!(1&~e)}(S)?ek(_,n,t,i,Pg(S),d):void 0;Eb(M)||(Eb(a)||function A6(e){return!(2&~e)}(S)&&(a=ek(_,null,t,i,f,d)),function m4(e,n,t,r,i){if(n)i?e.addClass(t,r):e.removeClass(t,r);else{let a=-1===r.indexOf("-")?void 0:kh.DashCase;null==i?e.removeStyle(t,r,a):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=kh.Important),e.setStyle(t,r,i,a))}}(r,d,Xs(q(),t),i,a))}function ek(e,n,t,r,i,a){const d=null===n;let f;for(;i>0;){const _=e[i],S=Array.isArray(_),M=S?_[1]:_,k=null===M;let F=t[i+1];F===cr&&(F=k?Rn:void 0);let L=k?Kd(F,r):M===r?F:void 0;if(S&&!Eb(L)&&(L=Kd(_,r)),Eb(L)&&(f=L,d))return f;const G=e[i+1];i=d?np(G):Pg(G)}if(null!==n){let _=a?n.residualClasses:n.residualStyles;null!=_&&(f=Kd(_,r))}return f}function Eb(e){return void 0!==e}function tk(e,n){return!!(e.flags&(n?8:16))}function Ed(e,n=""){const t=Ce(),r=Kt(),i=e+26,a=r.firstCreatePass?Uf(r,i,1,n,null):r.data[i],d=nk(r,t,a,n,e);t[i]=d,le()&&Sw(r,t,d,a),za(a,!1)}let nk=(e,n,t,r,i)=>(be(!0),function hw(e,n){return e.createText(n)}(n[11],r));function Iu(e){return WS("",e),Iu}function WS(e,n,t){const r=Ce(),i=function ik(e,n,t,r=""){return $r(e,Qr(),t)?n+Zt(t)+r:cr}(r,e,n,t);return i!==cr&&function Cd(e,n,t){const r=Xs(n,e);!function uI(e,n,t){e.setValue(n,t)}(e[11],r,t)}(r,q(),i),WS}function ZS(e,n,t,r,i){if(e=Yt(e),Array.isArray(e))for(let a=0;a<e.length;a++)ZS(e[a],n,t,r,i);else{const a=Kt(),d=Ce(),f=Mt();let _=Da(e)?e:Yt(e.provide);const S=Mo(e),M=1048575&f.providerIndexes,k=f.directiveStart,F=f.providerIndexes>>20;if(Da(e)||!e.multi){const L=new Cf(S,i,Xt,null),G=YS(_,n,i?M:M+F,k);-1===G?(gu(Wp(f,d),a,_),KS(a,e,n.length),n.push(_),f.directiveStart++,f.directiveEnd++,i&&(f.providerIndexes+=1048576),t.push(L),d.push(L)):(t[G]=L,d[G]=L)}else{const L=YS(_,n,M+F,k),G=YS(_,n,M,M+F),de=G>=0&&t[G];if(i&&!de||!i&&!(L>=0&&t[L])){gu(Wp(f,d),a,_);const _e=function vz(e,n,t,r,i){const d=new Cf(e,t,Xt,null);return d.multi=[],d.index=n,d.componentProviders=0,Ek(d,i,r&&!t),d}(i?yz:_z,t.length,i,r,S);!i&&de&&(t[G].providerFactory=_e),KS(a,e,n.length,0),n.push(_),f.directiveStart++,f.directiveEnd++,i&&(f.providerIndexes+=1048576),t.push(_e),d.push(_e)}else KS(a,e,L>-1?L:G,Ek(t[i?G:L],S,!i&&r));!i&&r&&de&&t[G].componentProviders++}}}function KS(e,n,t,r){const i=Da(n),a=function Ip(e){return!!e.useClass}(n);if(i||a){const _=(a?Yt(n.useClass):n).prototype.ngOnDestroy;if(_){const S=e.destroyHooks||(e.destroyHooks=[]);if(!i&&n.multi){const M=S.indexOf(t);-1===M?S.push(t,[r,_]):S[M+1].push(r,_)}else S.push(t,_)}}}function Ek(e,n,t){return t&&e.componentProviders++,e.multi.push(n)-1}function YS(e,n,t,r){for(let i=t;i<r;i++)if(n[i]===e)return i;return-1}function _z(e,n,t,r,i){return XS(this.multi,[])}function yz(e,n,t,r,i){const a=this.multi;let d;if(this.providerFactory){const f=this.providerFactory.componentProviders,_=cd(r,r[1],this.providerFactory.index,i);d=_.slice(0,f),XS(a,d);for(let S=f;S<_.length;S++)d.push(_[S])}else d=[],XS(a,d);return d}function XS(e,n){for(let t=0;t<e.length;t++)n.push((0,e[t])());return n}function Mu(e,n=[]){return t=>{t.providersResolver=(r,i)=>function mz(e,n,t){const r=Kt();if(r.firstCreatePass){const i=zi(e);ZS(t,r.data,r.blueprint,i,!0),ZS(n,r.data,r.blueprint,i,!1)}}(r,i?i(e):e,n)}}function QS(e,n,t){const r=Br()+e,i=Ce();return i[r]===cr?Cu(i,r,t?n.call(t):n()):function H_(e,n){return e[n]}(i,r)}function Td(e,n,t,r){return function Tk(e,n,t,r,i,a){const d=n+t;return $r(e,d,i)?Cu(e,d+1,a?r.call(a,i):r(i)):function u0(e,n){const t=e[n];return t===cr?void 0:t}(e,d+1)}(Ce(),Br(),e,n,t,r)}function Tb(e,n){return Rv(e,n)}class hj{ngModuleFactory;componentFactories;constructor(n,t){this.ngModuleFactory=n,this.componentFactories=t}}let fj=(()=>{class e{compileModuleSync(t){return new qM(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),a=Eu(fo(t).declarations).reduce((d,f)=>{const _=Ln(f);return _&&d.push(new Zv(_)),d},[]);return new hj(r,a)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),gj=(()=>{class e{zone=Fe(Fn);changeDetectionScheduler=Fe(xi);applicationRef=Fe(Nh);applicationErrorHandler=Fe(pn);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(t){this.applicationErrorHandler(t)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function rE({ngZoneFactory:e,ignoreChangesOutsideZone:n,scheduleInRootZone:t}){return e??=()=>new Fn({...iE(),scheduleInRootZone:t}),[{provide:Fn,useFactory:e},{provide:Gs,multi:!0,useFactory:()=>{const r=Fe(gj,{optional:!0});return()=>r.initialize()}},{provide:Gs,multi:!0,useFactory:()=>{const r=Fe(_j);return()=>{r.initialize()}}},!0===n?{provide:Ql,useValue:!0}:[],{provide:pl,useValue:t??u2},{provide:pn,useFactory:()=>{const r=Fe(Fn),i=Fe(si);let a;return d=>{r.runOutsideAngular(()=>{i.destroyed&&!a?setTimeout(()=>{throw d}):(a??=i.get(In),a.handleError(d))})}}}]}function iE(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}let _j=(()=>{class e{subscription=new Mr;initialized=!1;zone=Fe(Fn);pendingTasks=Fe(wi);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Fn.assertNotInAngularZone(),queueMicrotask(()=>{null!==t&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Fn.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),sE=(()=>{class e{applicationErrorHandler=Fe(pn);appRef=Fe(Nh);taskService=Fe(wi);ngZone=Fe(Fn);zonelessEnabled=Fe(Js);tracing=Fe(Y_,{optional:!0});disableScheduling=Fe(Ql,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Mr;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(eb):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(Fe(pl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof dS||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&5===t)return;let r=!1;switch(t){case 0:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 6:case 13:this.appRef.dirtyFlags|=2,r=!0;break;case 12:this.appRef.dirtyFlags|=16,r=!0;break;case 11:r=!0;break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;const i=this.useMicrotaskScheduler?h2:d2;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>i(()=>this.tick())):this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(eb+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(t),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,h2(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const zh=new Ye("",{providedIn:"root",factory:()=>Fe(zh,{optional:!0,skipSelf:!0})||function vj(){return typeof $localize<"u"&&$localize.locale||mb}()}),Pb=Symbol("InputSignalNode#UNSET"),Jk={...Wo,transformFn:void 0,applyValueToInputSignal(e,n){Eo(e,n)}};function eP(e,n){const t=Object.create(Jk);function r(){if(xo(t),t.value===Pb)throw new Le(-950,null);return t.value}return t.value=e,t.transformFn=n?.transform,r[Yn]=t,r}class Ij{attributeName;constructor(n){this.attributeName=n}__NG_ELEMENT_ID__=()=>Mf(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function tP(e,n){return eP(e,n)}new Ye("").__NG_ELEMENT_ID__=e=>{const n=Mt();if(null===n)throw new Le(204,!1);if(2&n.type)return n.value;if(8&e)return null;throw new Le(204,!1)};const Id=(tP.required=function Dj(e){return eP(Pb,e)},tP),Ab=new Ye(""),Nj=new Ye("");function f0(e){return!e.moduleRef}let aP,jh=null;let Rb=(()=>class e{static __NG_ELEMENT_ID__=jj})();function jj(e){return function Vj(e,n,t){if(bi(e)&&!t){const r=Xe(e.index,n);return new N_(r,r)}return 175&e.type?new N_(n[15],n):null}(Mt(),Ce(),!(16&~e))}class pP{constructor(){}supports(n){return Hv(n)}create(n){return new $j(n)}}const Uj=(e,n)=>n;class $j{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(n){this._trackByFn=n||Uj}forEachItem(n){let t;for(t=this._itHead;null!==t;t=t._next)n(t)}forEachOperation(n){let t=this._itHead,r=this._removalsHead,i=0,a=null;for(;t||r;){const d=!r||t&&t.currentIndex<mP(r,i,a)?t:r,f=mP(d,i,a),_=d.currentIndex;if(d===r)i--,r=r._nextRemoved;else if(t=t._next,null==d.previousIndex)i++;else{a||(a=[]);const S=f-i,M=_-i;if(S!=M){for(let F=0;F<S;F++){const L=F<a.length?a[F]:a[F]=0,G=L+F;M<=G&&G<S&&(a[F]=L+1)}a[d.previousIndex]=M-S}}f!==_&&n(d,f,_)}}forEachPreviousItem(n){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachMovedItem(n){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}forEachIdentityChange(n){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)n(t)}diff(n){if(null==n&&(n=[]),!Hv(n))throw new Le(900,!1);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let i,a,d,t=this._itHead,r=!1;if(Array.isArray(n)){this.length=n.length;for(let f=0;f<this.length;f++)a=n[f],d=this._trackByFn(f,a),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,a,d,f)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,d,f),r=!0),t=t._next}else i=0,function JF(e,n){if(Array.isArray(e))for(let t=0;t<e.length;t++)n(e[t]);else{const t=e[Symbol.iterator]();let r;for(;!(r=t.next()).done;)n(r.value)}}(n,f=>{d=this._trackByFn(i,f),null!==t&&Object.is(t.trackById,d)?(r&&(t=this._verifyReinsertion(t,f,d,i)),Object.is(t.item,f)||this._addIdentityChange(t,f)):(t=this._mismatch(t,f,d,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,t,r,i){let a;return null===n?a=this._itTail:(a=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._reinsertAfter(n,a,i)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(n.item,t)||this._addIdentityChange(n,t),this._moveAfter(n,a,i)):n=this._addAfter(new Gj(t,r),a,i),n}_verifyReinsertion(n,t,r,i){let a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==a?n=this._reinsertAfter(a,n._prev,i):n.currentIndex!=i&&(n.currentIndex=i,this._addToMoves(n,i)),n}_truncate(n){for(;null!==n;){const t=n._next;this._addToRemovals(this._unlink(n)),n=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const i=n._prevRemoved,a=n._nextRemoved;return null===i?this._removalsHead=a:i._nextRemoved=a,null===a?this._removalsTail=i:a._prevRemoved=i,this._insertAfter(n,t,r),this._addToMoves(n,r),n}_moveAfter(n,t,r){return this._unlink(n),this._insertAfter(n,t,r),this._addToMoves(n,r),n}_addAfter(n,t,r){return this._insertAfter(n,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,t,r){const i=null===t?this._itHead:t._next;return n._next=i,n._prev=t,null===i?this._itTail=n:i._prev=n,null===t?this._itHead=n:t._next=n,null===this._linkedRecords&&(this._linkedRecords=new gP),this._linkedRecords.put(n),n.currentIndex=r,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const t=n._prev,r=n._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,n}_addToMoves(n,t){return n.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gP),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,t){return n.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Gj{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(n,t){this.item=n,this.trackById=t}}class Hj{_head=null;_tail=null;add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,n))return r;return null}remove(n){const t=n._prevDup,r=n._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class gP{map=new Map;put(n){const t=n.trackById;let r=this.map.get(t);r||(r=new Hj,this.map.set(t,r)),r.add(n)}get(n,t){const i=this.map.get(n);return i?i.get(n,t):null}remove(n){const t=n.trackById;return this.map.get(t).remove(n)&&this.map.delete(t),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mP(e,n,t){const r=e.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+n+i}class _P{constructor(){}supports(n){return n instanceof Map||qw(n)}create(){return new qj}}class qj{_records=new Map;_mapHead=null;_appendAfter=null;_previousMapHead=null;_changesHead=null;_changesTail=null;_additionsHead=null;_additionsTail=null;_removalsHead=null;_removalsTail=null;get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let t;for(t=this._mapHead;null!==t;t=t._next)n(t)}forEachPreviousItem(n){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)n(t)}forEachChangedItem(n){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)n(t)}forEachAddedItem(n){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)n(t)}forEachRemovedItem(n){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)n(t)}diff(n){if(n){if(!(n instanceof Map||qw(n)))throw new Le(900,!1)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(n,(r,i)=>{if(t&&t.key===i)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{const a=this._getOrCreateRecordForKey(i,r);t=this._insertBeforeOrAppend(t,a)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,t){if(n){const r=n._prev;return t._next=n,t._prev=r,n._prev=t,r&&(r._next=t),n===this._mapHead&&(this._mapHead=t),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(n,t){if(this._records.has(n)){const i=this._records.get(n);this._maybeAddToChanges(i,t);const a=i._prev,d=i._next;return a&&(a._next=d),d&&(d._prev=a),i._next=null,i._prev=null,i}const r=new Wj(n);return this._records.set(n,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,t){Object.is(t,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=t,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,t){n instanceof Map?n.forEach(t):Object.keys(n).forEach(r=>t(n[r],r))}}class Wj{key;previousValue=null;currentValue=null;_nextPrevious=null;_next=null;_prev=null;_nextAdded=null;_nextRemoved=null;_nextChanged=null;constructor(n){this.key=n}}function yP(){return new hE([new pP])}let hE=(()=>{class e{factories;static \u0275prov=at({token:e,providedIn:"root",factory:yP});constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||yP()),deps:[[e,new Lp,new Np]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new Le(901,!1)}}return e})();function vP(){return new Nb([new _P])}let Nb=(()=>{class e{static \u0275prov=at({token:e,providedIn:"root",factory:vP});factories;constructor(t){this.factories=t}static create(t,r){if(r){const i=r.factories.slice();t=t.concat(i)}return new e(t)}static extend(t){return{provide:e,useFactory:r=>e.create(t,r||vP()),deps:[[e,new Lp,new Np]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(r)return r;throw new Le(901,!1)}}return e})();function Yj(e){qn(8);try{const{rootComponent:n,appProviders:t,platformProviders:r}=e,i=function zj(e=[]){if(jh)return jh;const n=function dP(e=[],n){return qe.create({name:n,providers:[{provide:th,useValue:"platform"},{provide:Ab,useValue:new Set([()=>jh=null])},...e]})}(e);return jh=n,function SB(){!function Nc(e){qo=e}(()=>{throw new Le(600,"")})}(),function hP(e){const n=e.get(ev,null);Ii(e,()=>{n?.forEach(t=>t())})}(n),n}(r),a=[rE({}),{provide:xi,useExisting:sE},ar,...t||[]];return function sP(e){const n=f0(e)?e.r3Injector:e.moduleRef.injector,t=n.get(Fn);return t.run(()=>{f0(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();const r=n.get(pn);let i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r})}),f0(e)){const a=()=>n.destroy(),d=e.platformInjector.get(Ab);d.add(a),n.onDestroy(()=>{i.unsubscribe(),d.delete(a)})}else{const a=()=>e.moduleRef.destroy(),d=e.platformInjector.get(Ab);d.add(a),e.moduleRef.onDestroy(()=>{ab(e.allPlatformModules,e.moduleRef),i.unsubscribe(),d.delete(a)})}return function Oj(e,n,t){try{const r=t();return sb(r)?r.catch(i=>{throw n.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw n.runOutsideAngular(()=>e(r)),r}}(r,t,()=>{const a=n.get(wi),d=a.add(),f=n.get(W2);return f.runInitializers(),f.donePromise.then(()=>{if(function G8(e){"string"==typeof e&&(bD=e.toLowerCase().replace(/_/g,"-"))}(n.get(zh,mb)||mb),!n.get(Nj,!0))return f0(e)?n.get(Nh):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(f0(e)){const M=n.get(Nh);return void 0!==e.rootComponent&&M.bootstrap(e.rootComponent),M}return aP?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{a.remove(d)})})})}({r3Injector:new WM({providers:a,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:n})}catch(n){return Promise.reject(n)}finally{qn(9)}}function Hr(e){return"boolean"==typeof e?e:null!=e&&"false"!==e}function Du(e,n=NaN){return isNaN(parseFloat(e))||isNaN(Number(e))?n:Number(e)}const NP="browser";function gE(e){return e===NP}let T7=(()=>{class e{static \u0275prov=at({token:e,providedIn:"root",factory:()=>new I7(Fe(Be),window)})}return e})();class I7{document;window;offset=()=>[0,0];constructor(n,t){this.document=n,this.window=t}setOffset(n){this.offset=Array.isArray(n)?()=>n:n}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(n,t){this.window.scrollTo({...t,left:n[0],top:n[1]})}scrollToAnchor(n,t){const r=function M7(e,n){const t=e.getElementById(n)||e.getElementsByName(n)[0];if(t)return t;if("function"==typeof e.createTreeWalker&&e.body&&"function"==typeof e.body.attachShadow){const r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const d=a.getElementById(n)||a.querySelector(`[name="${n}"]`);if(d)return d}i=r.nextNode()}}return null}(this.document,n);r&&(this.scrollToElement(r,t),r.focus())}setHistoryScrollRestoration(n){try{this.window.history.scrollRestoration=n}catch{console.warn(Lt(2400,!1))}}scrollToElement(n,t){const r=n.getBoundingClientRect(),i=r.left+this.window.pageXOffset,a=r.top+this.window.pageYOffset,d=this.offset();this.window.scrollTo({...t,left:i-d[0],top:a-d[1]})}}const vE=new Ye("");let HP=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,a){return this._findPluginFor(r).addEventListener(t,r,i,a)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(a=>a.supports(t)),!r)throw new Le(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||e)(kt(vE),kt(Fn))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class qP{_doc;constructor(n){this._doc=n}manager}const bE="ng-app-id";function WP(e){for(const n of e)n.remove()}function ZP(e,n){const t=n.createElement("style");return t.textContent=e,t}function xE(e,n){const t=n.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),t}let KP=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(t,r,i,a={}){this.doc=t,this.appId=r,this.nonce=i,function n9(e,n,t,r){const i=e.head?.querySelectorAll(`style[${bE}="${n}"],link[${bE}="${n}"]`);if(i)for(const a of i)a.removeAttribute(bE),a instanceof HTMLLinkElement?r.set(a.href.slice(a.href.lastIndexOf("/")+1),{usage:0,elements:[a]}):a.textContent&&t.set(a.textContent,{usage:0,elements:[a]})}(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(const i of t)this.addUsage(i,this.inline,ZP);r?.forEach(i=>this.addUsage(i,this.external,xE))}removeStyles(t,r){for(const i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){const a=r.get(t);a?a.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(d=>this.addElement(d,i(t,this.doc)))})}removeUsage(t,r){const i=r.get(t);i&&(i.usage--,i.usage<=0&&(WP(i.elements),r.delete(t)))}ngOnDestroy(){for(const[,{elements:t}]of[...this.inline,...this.external])WP(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(const[r,{elements:i}]of this.inline)i.push(this.addElement(t,ZP(r,this.doc)));for(const[r,{elements:i}]of this.external)i.push(this.addElement(t,xE(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),t.appendChild(r)}static \u0275fac=function(r){return new(r||e)(kt(Be),kt(Sh),kt(nv,8),kt(dd))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const wE={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},SE=/%COMP%/g,l9=new Ye("",{providedIn:"root",factory:()=>!0});function XP(e,n){return n.map(t=>t.replace(SE,e))}let EE=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;animationDisabled;maxAnimationTimeout;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;registry;constructor(t,r,i,a,d,f,_,S=null,M,k,F=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=a,this.doc=d,this.platformId=f,this.ngZone=_,this.nonce=S,this.animationDisabled=M,this.maxAnimationTimeout=k,this.tracingService=F,this.platformIsServer=!1,this.defaultRenderer=new CE(t,d,_,this.platformIsServer,this.tracingService,this.registry=function Ie(){return ke}(),this.maxAnimationTimeout)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof JP?i.applyToHost(t):i instanceof TE&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let a=i.get(r.id);if(!a){const d=this.doc,f=this.ngZone,_=this.eventManager,S=this.sharedStylesHost,M=this.removeStylesOnCompDestroy,k=this.platformIsServer,F=this.tracingService;switch(r.encapsulation){case Qn.Emulated:a=new JP(_,S,r,this.appId,M,d,f,k,F,this.registry,this.animationDisabled,this.maxAnimationTimeout);break;case Qn.ShadowDom:return new h9(_,S,t,r,d,f,this.nonce,k,F,this.registry,this.maxAnimationTimeout);default:a=new TE(_,S,r,M,d,f,k,F,this.registry,this.animationDisabled,this.maxAnimationTimeout)}i.set(r.id,a)}return a}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||e)(kt(HP),kt(KP),kt(Sh),kt(l9),kt(Be),kt(dd),kt(Fn),kt(nv),kt(iD),kt(a8),kt(Y_,8))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class CE{eventManager;doc;ngZone;platformIsServer;tracingService;registry;maxAnimationTimeout;data=Object.create(null);throwOnSyntheticProps=!0;constructor(n,t,r,i,a,d,f){this.eventManager=n,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=a,this.registry=d,this.maxAnimationTimeout=f}destroy(){}destroyNode=null;createElement(n,t){return t?this.doc.createElementNS(wE[t]||t,n):this.doc.createElement(n)}createComment(n){return this.doc.createComment(n)}createText(n){return this.doc.createTextNode(n)}appendChild(n,t){(QP(n)?n.content:n).appendChild(t)}insertBefore(n,t,r){n&&(QP(n)?n.content:n).insertBefore(t,r)}removeChild(n,t){const{elements:r}=this.registry;r?r.animate(t,()=>t.remove(),this.maxAnimationTimeout):t.remove()}selectRootElement(n,t){let r="string"==typeof n?this.doc.querySelector(n):n;if(!r)throw new Le(-5104,!1);return t||(r.textContent=""),r}parentNode(n){return n.parentNode}nextSibling(n){return n.nextSibling}setAttribute(n,t,r,i){if(i){t=i+":"+t;const a=wE[i];a?n.setAttributeNS(a,t,r):n.setAttribute(t,r)}else n.setAttribute(t,r)}removeAttribute(n,t,r){if(r){const i=wE[r];i?n.removeAttributeNS(i,t):n.removeAttribute(`${r}:${t}`)}else n.removeAttribute(t)}addClass(n,t){n.classList.add(t)}removeClass(n,t){n.classList.remove(t)}setStyle(n,t,r,i){i&(kh.DashCase|kh.Important)?n.style.setProperty(t,r,i&kh.Important?"important":""):n.style[t]=r}removeStyle(n,t,r){r&kh.DashCase?n.style.removeProperty(t):n.style[t]=""}setProperty(n,t,r){null!=n&&(n[t]=r)}setValue(n,t){n.nodeValue=t}listen(n,t,r,i){if("string"==typeof n&&!(n=lr().getGlobalEventTarget(this.doc,n)))throw new Le(5102,!1);let a=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(a=this.tracingService.wrapEventListener(n,t,a)),this.eventManager.addEventListener(n,t,a,i)}decoratePreventDefault(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&t.preventDefault()}}}function QP(e){return"TEMPLATE"===e.tagName&&void 0!==e.content}class h9 extends CE{sharedStylesHost;hostEl;shadowRoot;constructor(n,t,r,i,a,d,f,_,S,M,k){super(n,a,d,_,S,M,k),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let F=i.styles;F=XP(i.id,F);for(const G of F){const Q=document.createElement("style");f&&Q.setAttribute("nonce",f),Q.textContent=G,this.shadowRoot.appendChild(Q)}const L=i.getExternalStyles?.();if(L)for(const G of L){const Q=xE(G,a);f&&Q.setAttribute("nonce",f),this.shadowRoot.appendChild(Q)}}nodeOrShadowRoot(n){return n===this.hostEl?this.shadowRoot:n}appendChild(n,t){return super.appendChild(this.nodeOrShadowRoot(n),t)}insertBefore(n,t,r){return super.insertBefore(this.nodeOrShadowRoot(n),t,r)}removeChild(n,t){return super.removeChild(null,t)}parentNode(n){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(n)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class TE extends CE{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;_animationDisabled;constructor(n,t,r,i,a,d,f,_,S,M,k,F){super(n,a,d,f,_,S,k),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this._animationDisabled=M;let L=r.styles;this.styles=F?XP(F,L):L,this.styleUrls=r.getExternalStyles?.(F)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){if(this.removeStylesOnCompDestroy){if(!this._animationDisabled&&this.registry.elements)return void this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)},this.maxAnimationTimeout)});this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}}class JP extends TE{contentAttr;hostAttr;constructor(n,t,r,i,a,d,f,_,S,M,k,F){const L=i+"-"+r.id;super(n,t,r,a,d,f,_,S,M,k,F,L),this.contentAttr=function c9(e){return"_ngcontent-%COMP%".replace(SE,e)}(L),this.hostAttr=function u9(e){return"_nghost-%COMP%".replace(SE,e)}(L)}applyToHost(n){this.applyStyles(),this.setAttribute(n,this.hostAttr,"")}createElement(n,t){const r=super.createElement(n,t);return super.setAttribute(r,this.contentAttr,""),r}}class IE extends hu{supportsDOMEvents=!0;static makeCurrent(){!function rd(e){No??=e}(new IE)}onAndCancel(n,t,r,i){return n.addEventListener(t,r,i),()=>{n.removeEventListener(t,r,i)}}dispatchEvent(n,t){n.dispatchEvent(t)}remove(n){n.remove()}createElement(n,t){return(t=t||this.getDefaultDocument()).createElement(n)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(n){return n.nodeType===Node.ELEMENT_NODE}isShadowRoot(n){return n instanceof DocumentFragment}getGlobalEventTarget(n,t){return"window"===t?window:"document"===t?n:"body"===t?n.body:null}getBaseHref(n){const t=function f9(){return y0=y0||document.head.querySelector("base"),y0?y0.getAttribute("href"):null}();return null==t?null:function p9(e){return new URL(e,document.baseURI).pathname}(t)}resetBaseElement(){y0=null}getUserAgent(){return window.navigator.userAgent}getCookie(n){return function vy(e,n){n=encodeURIComponent(n);for(const t of e.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===n)return decodeURIComponent(a)}return null}(document.cookie,n)}}let y0=null,m9=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();const eA=["alt","control","meta","shift"],y9={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v9={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};function tA(e){return{appProviders:[...I9,...e?.providers??[]],platformProviders:C9}}const C9=[{provide:dd,useValue:NP},{provide:ev,useValue:function w9(){IE.makeCurrent()},multi:!0},{provide:Be,useFactory:function E9(){return function Jy(e){Lf=e}(document),document}}],I9=[{provide:th,useValue:"root"},{provide:In,useFactory:function S9(){return new In}},{provide:vE,useClass:(()=>{class e extends qP{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,a){return t.addEventListener(r,i,a),()=>this.removeEventListener(t,r,i,a)}removeEventListener(t,r,i,a){return t.removeEventListener(r,i,a)}static \u0275fac=function(r){return new(r||e)(kt(Be))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[Be]},{provide:vE,useClass:(()=>{class e extends qP{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,i,a){const d=e.parseEventName(r),f=e.eventCallback(d.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>lr().onAndCancel(t,d.domEventName,f,a))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=e._normalizeKey(r.pop());let d="",f=r.indexOf("code");if(f>-1&&(r.splice(f,1),d="code."),eA.forEach(S=>{const M=r.indexOf(S);M>-1&&(r.splice(M,1),d+=S+".")}),d+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=d,_}static matchEventFullKeyCode(t,r){let i=y9[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),eA.forEach(d=>{d!==i&&(0,v9[d])(t)&&(a+=d+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{e.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}static \u0275fac=function(r){return new(r||e)(kt(Be))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),multi:!0,deps:[Be]},EE,KP,HP,{provide:Uv,useExisting:EE},{provide:class cx{},useClass:m9},[]];function co(e){return function P9(e){const n=zt(null);try{return e()}finally{zt(n)}}(e)}function Vh(e,n){return function Fs(e,n){const t=Object.create(Rc);t.computation=e,void 0!==n&&(t.equal=n);const r=()=>{if(Qa(t),xo(t),t.value===Nr)throw t.error;return t.value};return r[Yn]=t,r}(e,n?.equal)}class A9{[Yn];constructor(n){this[Yn]=n}destroy(){this[Yn].destroy()}}function Ub(e,n){const t=n?.injector??Fe(qe);let i,r=!0!==n?.manualCleanup?t.get(ht):null;const a=t.get(Va,null,{optional:!0}),d=t.get(xi);return null!==a?(i=function L9(e,n,t){const r=Object.create(N9);return r.view=e,r.zone=typeof Zone<"u"?Zone.current:null,r.notifier=n,r.fn=t,e[23]??=new Set,e[23].add(r),r.consumerMarkedDirty(r),r}(a.view,d,e),r instanceof en&&r._lView===a.view&&(r=null)):i=function O9(e,n,t){const r=Object.create(R9);return r.fn=e,r.scheduler=n,r.notifier=t,r.zone=typeof Zone<"u"?Zone.current:null,r.scheduler.add(r),r.notifier.notify(12),r}(e,t.get(zr),d),i.injector=t,null!==r&&(i.onDestroyFn=r.onDestroy(()=>i.destroy())),new A9(i)}const rA={...Ls,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,hasRun:!1,cleanupFns:void 0,zone:null,kind:"effect",onDestroyFn:ts,run(){if(this.dirty=!1,this.hasRun&&!Os(this))return;this.hasRun=!0;const e=r=>(this.cleanupFns??=[]).push(r),n=So(this),t=ja(!1);try{this.maybeCleanup(),this.fn(e)}finally{ja(t),_a(this,n)}},maybeCleanup(){if(!this.cleanupFns?.length)return;const e=zt(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],zt(e)}}},R9={...rA,consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){ds(this),this.onDestroyFn(),this.maybeCleanup(),this.scheduler.remove(this)}},N9={...rA,consumerMarkedDirty(){this.view[2]|=8192,Fa(this.view),this.notifier.notify(13)},destroy(){ds(this),this.onDestroyFn(),this.maybeCleanup(),this.view[23]?.delete(this)}};Error,Error;let H9=(()=>{class e extends Ua{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=gh(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){const d=this.prepareExternalUrl(i+ea(a))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,d)}replaceState(t,r,i,a){const d=this.prepareExternalUrl(i+ea(a))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||e)(kt(ws),kt(id,8))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class PV{$implicit;ngForOf;index;count;constructor(n,t,r,i){this.$implicit=n,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let zE=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,d)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new PV(i.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===a?void 0:a);else if(null!==a){const f=r.get(a);r.move(f,d),vA(f,i)}});for(let i=0,a=r.length;i<a;i++){const f=r.get(i).context;f.index=i,f.count=a,f.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{vA(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(Xt(Sl),Xt(hc),Xt(hE))};static \u0275dir=qi({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function vA(e,n){e.context.$implicit=n.item}let e1=(()=>{class e{_viewContainer;_context=new AV;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){bA(t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){bA(t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||e)(Xt(Sl),Xt(hc))};static \u0275dir=qi({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})();class AV{$implicit=null;ngIf=null}function bA(e,n){if(e&&!e.createEmbeddedView)throw new Le(2020,!1)}let t1=(()=>{class e{_ngEl;_differs;_renderer;_ngStyle=null;_differ=null;constructor(t,r,i){this._ngEl=t,this._differs=r,this._renderer=i}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[i,a]=t.split("."),d=-1===i.indexOf("-")?void 0:kh.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,i,a?`${r}${a}`:r,d):this._renderer.removeStyle(this._ngEl.nativeElement,i,d)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}static \u0275fac=function(r){return new(r||e)(Xt(os),Xt(Nb),Xt(U_))};static \u0275dir=qi({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}})}return e})(),n1=(()=>{class e{_viewContainerRef;_viewRef=null;ngTemplateOutletContext=null;ngTemplateOutlet=null;ngTemplateOutletInjector=null;constructor(t){this._viewContainerRef=t}ngOnChanges(t){if(this._shouldRecreateView(t)){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const i=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,i,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(t){return!!t.ngTemplateOutlet||!!t.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(t,r,i)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,r,i),get:(t,r,i)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,i)}})}static \u0275fac=function(r){return new(r||e)(Xt(Sl))};static \u0275dir=qi({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},features:[_l]})}return e})(),Uh=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({})}return e})();function $h(e){return this instanceof $h?(this.v=e,this):new $h(e)}function TA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=function WE(e){var n="function"==typeof Symbol&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=e[a]&&function(d){return new Promise(function(f,_){!function i(a,d,f,_){Promise.resolve(_).then(function(S){a({value:S,done:f})},d)}(f,_,(d=e[a](d)).done,d.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const IA=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function MA(e){return An(e?.then)}function DA(e){return An(e[Lr])}function kA(e){return Symbol.asyncIterator&&An(e?.[Symbol.asyncIterator])}function PA(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const AA=function PU(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function RA(e){return An(e?.[AA])}function NA(e){return function CA(e,n,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=t.apply(e,n||[]),a=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",function d(L){return function(G){return Promise.resolve(G).then(L,k)}}),i[Symbol.asyncIterator]=function(){return this},i;function f(L,G){r[L]&&(i[L]=function(Q){return new Promise(function(de,_e){a.push([L,Q,de,_e])>1||_(L,Q)})},G&&(i[L]=G(i[L])))}function _(L,G){try{!function S(L){L.value instanceof $h?Promise.resolve(L.value.v).then(M,k):F(a[0][2],L)}(r[L](G))}catch(Q){F(a[0][3],Q)}}function M(L){_("next",L)}function k(L){_("throw",L)}function F(L,G){L(G),a.shift(),a.length&&_(a[0][0],a[0][1])}}(this,arguments,function*(){const t=e.getReader();try{for(;;){const{value:r,done:i}=yield $h(t.read());if(i)return yield $h(void 0);yield yield $h(r)}}finally{t.releaseLock()}})}function LA(e){return An(e?.getReader)}function Dd(e){if(e instanceof _n)return e;if(null!=e){if(DA(e))return function AU(e){return new _n(n=>{const t=e[Lr]();if(An(t.subscribe))return t.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(IA(e))return function RU(e){return new _n(n=>{for(let t=0;t<e.length&&!n.closed;t++)n.next(e[t]);n.complete()})}(e);if(MA(e))return function NU(e){return new _n(n=>{e.then(t=>{n.closed||(n.next(t),n.complete())},t=>n.error(t)).then(null,Y)})}(e);if(kA(e))return OA(e);if(RA(e))return function LU(e){return new _n(n=>{for(const t of e)if(n.next(t),n.closed)return;n.complete()})}(e);if(LA(e))return function OU(e){return OA(NA(e))}(e)}throw PA(e)}function OA(e){return new _n(n=>{(function FU(e,n){var t,r,i,a;return function SA(e,n,t,r){return new(t||(t=Promise))(function(a,d){function f(M){try{S(r.next(M))}catch(k){d(k)}}function _(M){try{S(r.throw(M))}catch(k){d(k)}}function S(M){M.done?a(M.value):function i(a){return a instanceof t?a:new t(function(d){d(a)})}(M.value).then(f,_)}S((r=r.apply(e,n||[])).next())})}(this,void 0,void 0,function*(){try{for(t=TA(e);!(r=yield t.next()).done;)if(n.next(r.value),n.closed)return}catch(d){i={error:d}}finally{try{r&&!r.done&&(a=t.return)&&(yield a.call(t))}finally{if(i)throw i.error}}n.complete()})})(e,n).catch(t=>n.error(t))})}function kd(e,n,t,r=0,i=!1){const a=n.schedule(function(){t(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(a),!i)return a}function FA(e,n=0){return no((t,r)=>{t.subscribe(Si(r,i=>kd(r,e,()=>r.next(i),n),()=>kd(r,e,()=>r.complete(),n),i=>kd(r,e,()=>r.error(i),n)))})}function BA(e,n=0){return no((t,r)=>{r.add(e.schedule(()=>t.subscribe(r),n))})}function zA(e,n){if(!e)throw new Error("Iterable cannot be null");return new _n(t=>{kd(t,n,()=>{const r=e[Symbol.asyncIterator]();kd(t,n,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function zo(e,n){return n?function $U(e,n){if(null!=e){if(DA(e))return function BU(e,n){return Dd(e).pipe(BA(n),FA(n))}(e,n);if(IA(e))return function jU(e,n){return new _n(t=>{let r=0;return n.schedule(function(){r===e.length?t.complete():(t.next(e[r++]),t.closed||this.schedule())})})}(e,n);if(MA(e))return function zU(e,n){return Dd(e).pipe(BA(n),FA(n))}(e,n);if(kA(e))return zA(e,n);if(RA(e))return function VU(e,n){return new _n(t=>{let r;return kd(t,n,()=>{r=e[AA](),kd(t,n,()=>{let i,a;try{({value:i,done:a}=r.next())}catch(d){return void t.error(d)}a?t.complete():t.next(i)},0,!0)}),()=>An(r?.return)&&r.return()})}(e,n);if(LA(e))return function UU(e,n){return zA(NA(e),n)}(e,n)}throw PA(e)}(e,n):Dd(e)}function KE(e){return e[e.length-1]}function r1(e){return function GU(e){return e&&An(e.schedule)}(KE(e))?e.pop():void 0}function rn(...e){return zo(e,r1(e))}const{isArray:qU}=Array,{getPrototypeOf:WU,prototype:ZU,keys:KU}=Object;const{isArray:QU}=Array;function YE(...e){const n=r1(e),t=function HU(e){return An(KE(e))?e.pop():void 0}(e),{args:r,keys:i}=function YU(e){if(1===e.length){const n=e[0];if(qU(n))return{args:n,keys:null};if(function XU(e){return e&&"object"==typeof e&&WU(e)===ZU}(n)){const t=KU(n);return{args:t.map(r=>n[r]),keys:t}}}return{args:e,keys:null}}(e);if(0===r.length)return zo([],n);const a=new _n(function n$(e,n,t=Zn){return r=>{jA(n,()=>{const{length:i}=e,a=new Array(i);let d=i,f=i;for(let _=0;_<i;_++)jA(n,()=>{const S=zo(e[_],n);let M=!1;S.subscribe(Si(r,k=>{a[_]=k,M||(M=!0,f--),f||r.next(t(a.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,n,i?d=>function t$(e,n){return e.reduce((t,r,i)=>(t[r]=n[i],t),{})}(i,d):Zn));return t?a.pipe(function e$(e){return Hn(n=>function JU(e,n){return QU(n)?e(...n):e(n)}(e,n))}(t)):a}function jA(e,n,t){e?kd(t,e,n):n()}const i1=Bs(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function ss(e,n,t=1/0){return An(n)?ss((r,i)=>Hn((a,d)=>n(r,a,i,d))(Dd(e(r,i))),t):("number"==typeof n&&(t=n),no((r,i)=>function r$(e,n,t,r,i,a,d,f){const _=[];let S=0,M=0,k=!1;const F=()=>{k&&!_.length&&!S&&n.complete()},L=Q=>S<r?G(Q):_.push(Q),G=Q=>{a&&n.next(Q),S++;let de=!1;Dd(t(Q,M++)).subscribe(Si(n,_e=>{i?.(_e),a?L(_e):n.next(_e)},()=>{de=!0},void 0,()=>{if(de)try{for(S--;_.length&&S<r;){const _e=_.shift();d?kd(n,d,()=>G(_e)):G(_e)}F()}catch(_e){n.error(_e)}}))};return e.subscribe(Si(n,L,()=>{k=!0,F()})),()=>{f?.()}}(r,i,e,t)))}function b0(e=1/0){return ss(Zn,e)}function XE(...e){return function i$(){return b0(1)}()(zo(e,r1(e)))}function QE(e){return new _n(n=>{Dd(e()).subscribe(n)})}function o1(e,n){const t=An(e)?e:()=>e,r=i=>i.error(t());return new _n(n?i=>n.schedule(r,0,i):r)}const mc=new _n(e=>e.complete());function JE(){return no((e,n)=>{let t=null;e._refCount++;const r=Si(n,void 0,void 0,void 0,()=>{if(!e||e._refCount<=0||0<--e._refCount)return void(t=null);const i=e._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),n.unsubscribe()});e.subscribe(r),r.closed||(t=e.connect())})}class VA extends _n{constructor(n,t){super(),this.source=n,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Ap(n)&&(this.lift=n.lift)}_subscribe(n){return this.getSubject().subscribe(n)}getSubject(){const n=this._subject;return(!n||n.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:n}=this;this._subject=this._connection=null,n?.unsubscribe()}connect(){let n=this._connection;if(!n){n=this._connection=new Mr;const t=this.getSubject();n.add(this.source.subscribe(Si(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),n.closed&&(this._connection=null,n=Mr.EMPTY)}return n}refCount(){return JE()(this)}}function Ka(e,n){return no((t,r)=>{let i=null,a=0,d=!1;const f=()=>d&&!i&&r.complete();t.subscribe(Si(r,_=>{i?.unsubscribe();let S=0;const M=a++;Dd(e(_,M)).subscribe(i=Si(r,k=>r.next(n?n(_,k,M,S++):k),()=>{i=null,f()}))},()=>{d=!0,f()}))})}function Og(e){return e<=0?()=>mc:no((n,t)=>{let r=0;n.subscribe(Si(t,i=>{++r<=e&&(t.next(i),e<=r&&t.complete())}))})}function Pd(e,n){return no((t,r)=>{let i=0;t.subscribe(Si(r,a=>e.call(n,a,i++)&&r.next(a)))})}function s1(e){return no((n,t)=>{let r=!1;n.subscribe(Si(t,i=>{r=!0,t.next(i)},()=>{r||t.next(e),t.complete()}))})}function UA(e=a$){return no((n,t)=>{let r=!1;n.subscribe(Si(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(e())))})}function a$(){return new i1}function ip(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Pd((i,a)=>e(i,a,r)):Zn,Og(1),t?s1(n):UA(()=>new i1))}function x0(e,n){return An(n)?ss(e,n,1):ss(e,1)}function as(e,n,t){const r=An(e)||n||t?{next:e,error:n,complete:t}:e;return r?no((i,a)=>{var d;null===(d=r.subscribe)||void 0===d||d.call(r);let f=!0;i.subscribe(Si(a,_=>{var S;null===(S=r.next)||void 0===S||S.call(r,_),a.next(_)},()=>{var _;f=!1,null===(_=r.complete)||void 0===_||_.call(r),a.complete()},_=>{var S;f=!1,null===(S=r.error)||void 0===S||S.call(r,_),a.error(_)},()=>{var _,S;f&&(null===(_=r.unsubscribe)||void 0===_||_.call(r)),null===(S=r.finalize)||void 0===S||S.call(r)}))}):Zn}function Fg(e){return no((n,t)=>{let a,r=null,i=!1;r=n.subscribe(Si(t,void 0,void 0,d=>{a=Dd(e(d,Fg(e)(n))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function eC(e){return e<=0?()=>mc:no((n,t)=>{let r=[];n.subscribe(Si(t,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function tC(e){return no((n,t)=>{try{n.subscribe(t)}finally{t.add(e)}})}function $A(e){return no((n,t)=>{Dd(e).subscribe(Si(t,()=>t.complete(),X)),!t.closed&&n.subscribe(t)})}let d$=(()=>{class e{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||e)(kt(Be))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const bn="primary",S0=Symbol("RouteTitle");class g${params;constructor(n){this.params=n||{}}has(n){return Object.prototype.hasOwnProperty.call(this.params,n)}get(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t[0]:t}return null}getAll(n){if(this.has(n)){const t=this.params[n];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bg(e){return new g$(e)}function m$(e,n,t){const r=t.path.split("/");if(r.length>e.length||"full"===t.pathMatch&&(n.hasChildren()||r.length<e.length))return null;const i={};for(let a=0;a<r.length;a++){const d=r[a],f=e[a];if(":"===d[0])i[d.substring(1)]=f;else if(d!==f.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function ku(e,n){const t=e?nC(e):void 0,r=n?nC(n):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!qA(e[i],n[i]))return!1;return!0}function nC(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function qA(e,n){if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return!1;const t=[...e].sort(),r=[...n].sort();return t.every((i,a)=>r[a]===i)}return e===n}function WA(e){return e.length>0?e[e.length-1]:null}function Ad(e){return function iU(e){return!!e&&(e instanceof _n||An(e.lift)&&An(e.subscribe))}(e)?e:sb(e)?zo(Promise.resolve(e)):rn(e)}const y$={exact:function YA(e,n,t){if(!sp(e.segments,n.segments)||!a1(e.segments,n.segments,t)||e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children)if(!e.children[r]||!YA(e.children[r],n.children[r],t))return!1;return!0},subset:XA},ZA={exact:function v$(e,n){return ku(e,n)},subset:function b$(e,n){return Object.keys(n).length<=Object.keys(e).length&&Object.keys(n).every(t=>qA(e[t],n[t]))},ignored:()=>!0};function KA(e,n,t){return y$[t.paths](e.root,n.root,t.matrixParams)&&ZA[t.queryParams](e.queryParams,n.queryParams)&&!("exact"===t.fragment&&e.fragment!==n.fragment)}function XA(e,n,t){return QA(e,n,n.segments,t)}function QA(e,n,t,r){if(e.segments.length>t.length){const i=e.segments.slice(0,t.length);return!(!sp(i,t)||n.hasChildren()||!a1(i,t,r))}if(e.segments.length===t.length){if(!sp(e.segments,t)||!a1(e.segments,t,r))return!1;for(const i in n.children)if(!e.children[i]||!XA(e.children[i],n.children[i],r))return!1;return!0}{const i=t.slice(0,e.segments.length),a=t.slice(e.segments.length);return!!(sp(e.segments,i)&&a1(e.segments,i,r)&&e.children[bn])&&QA(e.children[bn],n,a,r)}}function a1(e,n,t){return n.every((r,i)=>ZA[t](e[i].parameters,r.parameters))}class op{root;queryParams;fragment;_queryParamMap;constructor(n=new mr([],{}),t={},r=null){this.root=n,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Bg(this.queryParams),this._queryParamMap}toString(){return S$.serialize(this)}}class mr{segments;children;parent=null;constructor(n,t){this.segments=n,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return c1(this)}}class E0{path;parameters;_parameterMap;constructor(n,t){this.path=n,this.parameters=t}get parameterMap(){return this._parameterMap??=Bg(this.parameters),this._parameterMap}toString(){return tR(this)}}function sp(e,n){return e.length===n.length&&e.every((t,r)=>t.path===n[r].path)}let C0=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>new l1,providedIn:"root"})}return e})();class l1{parse(n){const t=new N$(n);return new op(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(n){const t=`/${T0(n.root,!0)}`,r=function T$(e){const n=Object.entries(e).map(([t,r])=>Array.isArray(r)?r.map(i=>`${u1(t)}=${u1(i)}`).join("&"):`${u1(t)}=${u1(r)}`).filter(t=>t);return n.length?`?${n.join("&")}`:""}(n.queryParams);return`${t}${r}${"string"==typeof n.fragment?`#${function E$(e){return encodeURI(e)}(n.fragment)}`:""}`}}const S$=new l1;function c1(e){return e.segments.map(n=>tR(n)).join("/")}function T0(e,n){if(!e.hasChildren())return c1(e);if(n){const t=e.children[bn]?T0(e.children[bn],!1):"",r=[];return Object.entries(e.children).forEach(([i,a])=>{i!==bn&&r.push(`${i}:${T0(a,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function w$(e,n){let t=[];return Object.entries(e.children).forEach(([r,i])=>{r===bn&&(t=t.concat(n(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==bn&&(t=t.concat(n(i,r)))}),t}(e,(r,i)=>i===bn?[T0(e.children[bn],!1)]:[`${i}:${T0(r,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[bn]?`${c1(e)}/${t[0]}`:`${c1(e)}/(${t.join("//")})`}}function JA(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function u1(e){return JA(e).replace(/%3B/gi,";")}function rC(e){return JA(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function d1(e){return decodeURIComponent(e)}function eR(e){return d1(e.replace(/\+/g,"%20"))}function tR(e){return`${rC(e.path)}${function C$(e){return Object.entries(e).map(([n,t])=>`;${rC(n)}=${rC(t)}`).join("")}(e.parameters)}`}const I$=/^[^\/()?;#]+/;function iC(e){const n=e.match(I$);return n?n[0]:""}const M$=/^[^\/()?;=#]+/,k$=/^[^=?&#]+/,A$=/^[^&#]+/;class N${url;remaining;constructor(n){this.url=n,this.remaining=n}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new mr([],{}):new mr([],this.parseChildren())}parseQueryParams(){const n={};if(this.consumeOptional("?"))do{this.parseQueryParam(n)}while(this.consumeOptional("&"));return n}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const n=[];for(this.peekStartsWith("(")||n.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),n.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(n.length>0||Object.keys(t).length>0)&&(r[bn]=new mr(n,t)),r}parseSegment(){const n=iC(this.remaining);if(""===n&&this.peekStartsWith(";"))throw new Le(4009,!1);return this.capture(n),new E0(d1(n),this.parseMatrixParams())}parseMatrixParams(){const n={};for(;this.consumeOptional(";");)this.parseParam(n);return n}parseParam(n){const t=function D$(e){const n=e.match(M$);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=iC(this.remaining);i&&(r=i,this.capture(r))}n[d1(t)]=d1(r)}parseQueryParam(n){const t=function P$(e){const n=e.match(k$);return n?n[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function R$(e){const n=e.match(A$);return n?n[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const i=eR(t),a=eR(r);if(n.hasOwnProperty(i)){let d=n[i];Array.isArray(d)||(d=[d],n[i]=d),d.push(a)}else n[i]=a}parseParens(n){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=iC(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Le(4010,!1);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):n&&(a=bn);const d=this.parseChildren();t[a]=1===Object.keys(d).length?d[bn]:new mr([],d),this.consumeOptional("//")}return t}peekStartsWith(n){return this.remaining.startsWith(n)}consumeOptional(n){return!!this.peekStartsWith(n)&&(this.remaining=this.remaining.substring(n.length),!0)}capture(n){if(!this.consumeOptional(n))throw new Le(4011,!1)}}function nR(e){return e.segments.length>0?new mr([],{[bn]:e}):e}function rR(e){const n={};for(const[r,i]of Object.entries(e.children)){const a=rR(i);if(r===bn&&0===a.segments.length&&a.hasChildren())for(const[d,f]of Object.entries(a.children))n[d]=f;else(a.segments.length>0||a.hasChildren())&&(n[r]=a)}return function L$(e){if(1===e.numberOfChildren&&e.children[bn]){const n=e.children[bn];return new mr(e.segments.concat(n.segments),n.children)}return e}(new mr(e.segments,n))}function ap(e){return e instanceof op}function iR(e){let n;const i=nR(function t(a){const d={};for(const _ of a.children){const S=t(_);d[_.outlet]=S}const f=new mr(a.url,d);return a===e&&(n=f),f}(e.root));return n??i}function oR(e,n,t,r){let i=e;for(;i.parent;)i=i.parent;if(0===n.length)return oC(i,i,i,t,r);const a=function F$(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new aR(!0,0,e);let n=0,t=!1;const r=e.reduce((i,a,d)=>{if("object"==typeof a&&null!=a){if(a.outlets){const f={};return Object.entries(a.outlets).forEach(([_,S])=>{f[_]="string"==typeof S?S.split("/"):S}),[...i,{outlets:f}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===d?(a.split("/").forEach((f,_)=>{0==_&&"."===f||(0==_&&""===f?t=!0:".."===f?n++:""!=f&&i.push(f))}),i):[...i,a]},[]);return new aR(t,n,r)}(n);if(a.toRoot())return oC(i,i,new mr([],{}),t,r);const d=function B$(e,n,t){if(e.isAbsolute)return new f1(n,!0,0);if(!t)return new f1(n,!1,NaN);if(null===t.parent)return new f1(t,!0,0);const r=h1(e.commands[0])?0:1;return function z$(e,n,t){let r=e,i=n,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Le(4005,!1);i=r.segments.length}return new f1(r,!1,i-a)}(t,t.segments.length-1+r,e.numberOfDoubleDots)}(a,i,e),f=d.processChildren?M0(d.segmentGroup,d.index,a.commands):lR(d.segmentGroup,d.index,a.commands);return oC(i,d.segmentGroup,f,t,r)}function h1(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function I0(e){return"object"==typeof e&&null!=e&&e.outlets}function oC(e,n,t,r,i){let d,a={};r&&Object.entries(r).forEach(([_,S])=>{a[_]=Array.isArray(S)?S.map(M=>`${M}`):`${S}`}),d=e===n?t:sR(e,n,t);const f=nR(rR(d));return new op(f,a,i)}function sR(e,n,t){const r={};return Object.entries(e.children).forEach(([i,a])=>{r[i]=a===n?t:sR(a,n,t)}),new mr(e.segments,r)}class aR{isAbsolute;numberOfDoubleDots;commands;constructor(n,t,r){if(this.isAbsolute=n,this.numberOfDoubleDots=t,this.commands=r,n&&r.length>0&&h1(r[0]))throw new Le(4003,!1);const i=r.find(I0);if(i&&i!==WA(r))throw new Le(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class f1{segmentGroup;processChildren;index;constructor(n,t,r){this.segmentGroup=n,this.processChildren=t,this.index=r}}function lR(e,n,t){if(e??=new mr([],{}),0===e.segments.length&&e.hasChildren())return M0(e,n,t);const r=function V$(e,n,t){let r=0,i=n;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=t.length)return a;const d=e.segments[i],f=t[r];if(I0(f))break;const _=`${f}`,S=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&S&&"object"==typeof S&&void 0===S.outlets){if(!uR(_,S,d))return a;r+=2}else{if(!uR(_,{},d))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,n,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const a=new mr(e.segments.slice(0,r.pathIndex),{});return a.children[bn]=new mr(e.segments.slice(r.pathIndex),e.children),M0(a,0,i)}return r.match&&0===i.length?new mr(e.segments,{}):r.match&&!e.hasChildren()?sC(e,n,t):r.match?M0(e,0,i):sC(e,n,t)}function M0(e,n,t){if(0===t.length)return new mr(e.segments,{});{const r=function j$(e){return I0(e[0])?e[0].outlets:{[bn]:e}}(t),i={};if(Object.keys(r).some(a=>a!==bn)&&e.children[bn]&&1===e.numberOfChildren&&0===e.children[bn].segments.length){const a=M0(e.children[bn],n,t);return new mr(e.segments,a.children)}return Object.entries(r).forEach(([a,d])=>{"string"==typeof d&&(d=[d]),null!==d&&(i[a]=lR(e.children[a],n,d))}),Object.entries(e.children).forEach(([a,d])=>{void 0===r[a]&&(i[a]=d)}),new mr(e.segments,i)}}function sC(e,n,t){const r=e.segments.slice(0,n);let i=0;for(;i<t.length;){const a=t[i];if(I0(a)){const _=U$(a.outlets);return new mr(r,_)}if(0===i&&h1(t[0])){r.push(new E0(e.segments[n].path,cR(t[0]))),i++;continue}const d=I0(a)?a.outlets[bn]:`${a}`,f=i<t.length-1?t[i+1]:null;d&&f&&h1(f)?(r.push(new E0(d,cR(f))),i+=2):(r.push(new E0(d,{})),i++)}return new mr(r,{})}function U$(e){const n={};return Object.entries(e).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(n[t]=sC(new mr([],{}),0,r))}),n}function cR(e){const n={};return Object.entries(e).forEach(([t,r])=>n[t]=`${r}`),n}function uR(e,n,t){return e==t.path&&ku(n,t.parameters)}const D0="imperative";var Bn=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Bn||{});class Pu{id;url;constructor(n,t){this.id=n,this.url=t}}class p1 extends Pu{type=Bn.NavigationStart;navigationTrigger;restoredState;constructor(n,t,r="imperative",i=null){super(n,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Rd extends Pu{urlAfterRedirects;type=Bn.NavigationEnd;constructor(n,t,r){super(n,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var ua=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e}(ua||{}),g1=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(g1||{});class lp extends Pu{reason;code;type=Bn.NavigationCancel;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zg extends Pu{reason;code;type=Bn.NavigationSkipped;constructor(n,t,r,i){super(n,t),this.reason=r,this.code=i}}class aC extends Pu{error;target;type=Bn.NavigationError;constructor(n,t,r,i){super(n,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class dR extends Pu{urlAfterRedirects;state;type=Bn.RoutesRecognized;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $$ extends Pu{urlAfterRedirects;state;type=Bn.GuardsCheckStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class G$ extends Pu{urlAfterRedirects;state;shouldActivate;type=Bn.GuardsCheckEnd;constructor(n,t,r,i,a){super(n,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class H$ extends Pu{urlAfterRedirects;state;type=Bn.ResolveStart;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class q$ extends Pu{urlAfterRedirects;state;type=Bn.ResolveEnd;constructor(n,t,r,i){super(n,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W${route;type=Bn.RouteConfigLoadStart;constructor(n){this.route=n}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Z${route;type=Bn.RouteConfigLoadEnd;constructor(n){this.route=n}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class K${snapshot;type=Bn.ChildActivationStart;constructor(n){this.snapshot=n}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Y${snapshot;type=Bn.ChildActivationEnd;constructor(n){this.snapshot=n}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X${snapshot;type=Bn.ActivationStart;constructor(n){this.snapshot=n}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q${snapshot;type=Bn.ActivationEnd;constructor(n){this.snapshot=n}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hR{routerEvent;position;anchor;type=Bn.Scroll;constructor(n,t,r){this.routerEvent=n,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class lC{}class m1{url;navigationBehaviorOptions;constructor(n,t){this.url=n,this.navigationBehaviorOptions=t}}function _c(e){return e.outlet||bn}function jg(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let n=e.parent;n;n=n.parent){const t=n.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class oG{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return jg(this.route?.snapshot)??this.rootInjector}constructor(n){this.rootInjector=n,this.children=new k0(this.rootInjector)}}let k0=(()=>{class e{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new oG(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||e)(kt(si))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();class fR{_root;constructor(n){this._root=n}get root(){return this._root.value}parent(n){const t=this.pathFromRoot(n);return t.length>1?t[t.length-2]:null}children(n){const t=cC(n,this._root);return t?t.children.map(r=>r.value):[]}firstChild(n){const t=cC(n,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(n){const t=uC(n,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==n)}pathFromRoot(n){return uC(n,this._root).map(t=>t.value)}}function cC(e,n){if(e===n.value)return n;for(const t of n.children){const r=cC(e,t);if(r)return r}return null}function uC(e,n){if(e===n.value)return[n];for(const t of n.children){const r=uC(e,t);if(r.length)return r.unshift(n),r}return[]}class yc{value;children;constructor(n,t){this.value=n,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vg(e){const n={};return e&&e.children.forEach(t=>n[t.value.outlet]=t),n}class pR extends fR{snapshot;constructor(n,t){super(n),this.snapshot=t,dC(this,n)}toString(){return this.snapshot.toString()}}function gR(e){const n=function sG(e){const a=new y1([],{},{},"",{},bn,e,null,{});return new mR("",new yc(a,[]))}(e),t=new jt([new E0("",{})]),r=new jt({}),i=new jt({}),a=new jt({}),d=new jt(""),f=new Ug(t,r,a,d,i,bn,e,n.root);return f.snapshot=n.root,new pR(new yc(f,[]),n)}class Ug{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(n,t,r,i,a,d,f,_){this.urlSubject=n,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=a,this.outlet=d,this.component=f,this._futureSnapshot=_,this.title=this.dataSubject?.pipe(Hn(S=>S[S0]))??rn(void 0),this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Hn(n=>Bg(n))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Hn(n=>Bg(n))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function _1(e,n,t="emptyOnly"){let r;const{routeConfig:i}=e;return r=null===n||"always"!==t&&""!==i?.path&&(n.component||n.routeConfig?.loadComponent)?{params:{...e.params},data:{...e.data},resolve:{...e.data,...e._resolvedData??{}}}:{params:{...n.params,...e.params},data:{...n.data,...e.data},resolve:{...e.data,...n.data,...i?.data,...e._resolvedData}},i&&yR(i)&&(r.resolve[S0]=i.title),r}class y1{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[S0]}constructor(n,t,r,i,a,d,f,_,S){this.url=n,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=d,this.component=f,this.routeConfig=_,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bg(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bg(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mR extends fR{url;constructor(n,t){super(t),this.url=n,dC(this,t)}toString(){return _R(this._root)}}function dC(e,n){n.value._routerState=e,n.children.forEach(t=>dC(e,t))}function _R(e){const n=e.children.length>0?` { ${e.children.map(_R).join(", ")} } `:"";return`${e.value}${n}`}function hC(e){if(e.snapshot){const n=e.snapshot,t=e._futureSnapshot;e.snapshot=t,ku(n.queryParams,t.queryParams)||e.queryParamsSubject.next(t.queryParams),n.fragment!==t.fragment&&e.fragmentSubject.next(t.fragment),ku(n.params,t.params)||e.paramsSubject.next(t.params),function _$(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;++t)if(!ku(e[t],n[t]))return!1;return!0}(n.url,t.url)||e.urlSubject.next(t.url),ku(n.data,t.data)||e.dataSubject.next(t.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function fC(e,n){const t=ku(e.params,n.params)&&function x$(e,n){return sp(e,n)&&e.every((t,r)=>ku(t.parameters,n[r].parameters))}(e.url,n.url);return t&&!(!e.parent!=!n.parent)&&(!e.parent||fC(e.parent,n.parent))}function yR(e){return"string"==typeof e.title||null===e.title}const aG=new Ye("");let vR=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=bn;activateEvents=new Ci;deactivateEvents=new Ci;attachEvents=new Ci;detachEvents=new Ci;routerOutletData=Id(void 0);parentContexts=Fe(k0);location=Fe(Sl);changeDetector=Fe(Rb);inputBinder=Fe(v1,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Le(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Le(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Le(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Le(4013,!1);this._activatedRoute=t;const i=this.location,d=t.snapshot.component,f=this.parentContexts.getOrCreateContext(this.name).children,_=new lG(t,f,i.injector,this.routerOutletData);this.activated=i.createComponent(d,{index:i.length,injector:_,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=qi({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[_l]})}return e})();class lG{route;childContexts;parent;outletData;constructor(n,t,r,i){this.route=n,this.childContexts=t,this.parent=r,this.outletData=i}get(n,t){return n===Ug?this.route:n===k0?this.childContexts:n===aG?this.outletData:this.parent.get(n,t)}}const v1=new Ye("");let bR=(()=>{class e{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=YE([r.queryParams,r.params,r.data]).pipe(Ka(([a,d,f],_)=>(f={...a,...d,...f},0===_?rn(f):Promise.resolve(f)))).subscribe(a=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=function S7(e){const n=Ln(e);if(!n)return null;const t=new Zv(n);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return n.standalone},get isSignal(){return n.signals}}}(r.component);if(d)for(const{templateName:f}of d.inputs)t.activatedComponentRef.setInput(f,a[f]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),xR=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ra({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){1&r&&Er(0,"router-outlet")},dependencies:[vR],encapsulation:2})}return e})();function pC(e){const n=e.children&&e.children.map(pC),t=n?{...e,children:n}:{...e};return!t.component&&!t.loadComponent&&(n||t.loadChildren)&&t.outlet&&t.outlet!==bn&&(t.component=xR),t}function P0(e,n,t){if(t&&e.shouldReuseRoute(n.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=n.value;const i=function uG(e,n,t){return n.children.map(r=>{for(const i of t.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return P0(e,r,i);return P0(e,r)})}(e,n,t);return new yc(r,i)}{if(e.shouldAttach(n.value)){const a=e.retrieve(n.value);if(null!==a){const d=a.route;return d.value._futureSnapshot=n.value,d.children=n.children.map(f=>P0(e,f)),d}}const r=function dG(e){return new Ug(new jt(e.url),new jt(e.params),new jt(e.queryParams),new jt(e.fragment),new jt(e.data),e.outlet,e.component,e)}(n.value),i=n.children.map(a=>P0(e,a));return new yc(r,i)}}class gC{redirectTo;navigationBehaviorOptions;constructor(n,t){this.redirectTo=n,this.navigationBehaviorOptions=t}}const wR="ngNavigationCancelingError";function b1(e,n){const{redirectTo:t,navigationBehaviorOptions:r}=ap(n)?{redirectTo:n,navigationBehaviorOptions:void 0}:n,i=SR(!1,ua.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function SR(e,n){const t=new Error(`NavigationCancelingError: ${e||""}`);return t[wR]=!0,t.cancellationCode=n,t}function ER(e){return!!e&&e[wR]}class pG{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(n,t,r,i,a){this.routeReuseStrategy=n,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=a}activate(n){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,n),hC(this.futureState.root),this.activateChildRoutes(t,r,n)}deactivateChildRoutes(n,t,r){const i=Vg(t);n.children.forEach(a=>{const d=a.value.outlet;this.deactivateRoutes(a,i[d],r),delete i[d]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(n,t,r){const i=n.value,a=t?t.value:null;if(i===a)if(i.component){const d=r.getContext(i.outlet);d&&this.deactivateChildRoutes(n,t,d.children)}else this.deactivateChildRoutes(n,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(n,t){n.value.component&&this.routeReuseStrategy.shouldDetach(n.value.snapshot)?this.detachAndStoreRouteSubtree(n,t):this.deactivateRouteAndOutlet(n,t)}detachAndStoreRouteSubtree(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Vg(n);for(const d of Object.values(a))this.deactivateRouteAndItsChildren(d,i);if(r&&r.outlet){const d=r.outlet.detach(),f=r.children.onOutletDeactivated();this.routeReuseStrategy.store(n.value.snapshot,{componentRef:d,route:n,contexts:f})}}deactivateRouteAndOutlet(n,t){const r=t.getContext(n.value.outlet),i=r&&n.value.component?r.children:t,a=Vg(n);for(const d of Object.values(a))this.deactivateRouteAndItsChildren(d,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(n,t,r){const i=Vg(t);n.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new Q$(a.value.snapshot))}),n.children.length&&this.forwardEvent(new Y$(n.value.snapshot))}activateRoutes(n,t,r){const i=n.value,a=t?t.value:null;if(hC(i),i===a)if(i.component){const d=r.getOrCreateContext(i.outlet);this.activateChildRoutes(n,t,d.children)}else this.activateChildRoutes(n,t,r);else if(i.component){const d=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const f=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),d.children.onOutletReAttached(f.contexts),d.attachRef=f.componentRef,d.route=f.route.value,d.outlet&&d.outlet.attach(f.componentRef,f.route.value),hC(f.route.value),this.activateChildRoutes(n,null,d.children)}else d.attachRef=null,d.route=i,d.outlet&&d.outlet.activateWith(i,d.injector),this.activateChildRoutes(n,null,d.children)}else this.activateChildRoutes(n,null,r)}}class CR{path;route;constructor(n){this.path=n,this.route=this.path[this.path.length-1]}}class x1{component;route;constructor(n,t){this.component=n,this.route=t}}function gG(e,n,t){const r=e._root;return A0(r,n?n._root:null,t,[r.value])}function $g(e,n){const t=Symbol(),r=n.get(e,t);return r===t?"function"!=typeof e||function Ea(e){return null!==fs(e)}(e)?n.get(e):e:r}function A0(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Vg(n);return e.children.forEach(d=>{(function _G(e,n,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=e.value,d=n?n.value:null,f=t?t.getContext(e.value.outlet):null;if(d&&a.routeConfig===d.routeConfig){const _=function yG(e,n,t){if("function"==typeof t)return t(e,n);switch(t){case"pathParamsChange":return!sp(e.url,n.url);case"pathParamsOrQueryParamsChange":return!sp(e.url,n.url)||!ku(e.queryParams,n.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fC(e,n)||!ku(e.queryParams,n.queryParams);default:return!fC(e,n)}}(d,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new CR(r)):(a.data=d.data,a._resolvedData=d._resolvedData),A0(e,n,a.component?f?f.children:null:t,r,i),_&&f&&f.outlet&&f.outlet.isActivated&&i.canDeactivateChecks.push(new x1(f.outlet.component,d))}else d&&R0(n,f,i),i.canActivateChecks.push(new CR(r)),A0(e,null,a.component?f?f.children:null:t,r,i)})(d,a[d.value.outlet],t,r.concat([d.value]),i),delete a[d.value.outlet]}),Object.entries(a).forEach(([d,f])=>R0(f,t.getContext(d),i)),i}function R0(e,n,t){const r=Vg(e),i=e.value;Object.entries(r).forEach(([a,d])=>{R0(d,i.component?n?n.children.getContext(a):null:n,t)}),t.canDeactivateChecks.push(new x1(i.component&&n&&n.outlet&&n.outlet.isActivated?n.outlet.component:null,i))}function N0(e){return"function"==typeof e}function TR(e){return e instanceof i1||"EmptyError"===e?.name}const w1=Symbol("INITIAL_VALUE");function Gg(){return Ka(e=>YE(e.map(n=>n.pipe(Og(1),function s$(...e){const n=r1(e);return no((t,r)=>{(n?XE(e,t,n):XE(e,t)).subscribe(r)})}(w1)))).pipe(Hn(n=>{for(const t of n)if(!0!==t){if(t===w1)return w1;if(!1===t||CG(t))return t}return!0}),Pd(n=>n!==w1),Og(1)))}function CG(e){return ap(e)||e instanceof gC}function IR(e){return function un(...e){return mn(e)}(as(n=>{if("boolean"!=typeof n)throw b1(0,n)}),Hn(n=>!0===n))}class mC{segmentGroup;constructor(n){this.segmentGroup=n||null}}class _C extends Error{urlTree;constructor(n){super(),this.urlTree=n}}function Hg(e){return o1(new mC(e))}function OG(e){return o1(new Le(4e3,!1))}class BG{urlSerializer;urlTree;constructor(n,t){this.urlSerializer=n,this.urlTree=t}lineralizeSegments(n,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return rn(r);if(i.numberOfChildren>1||!i.children[bn])return OG();i=i.children[bn]}}applyRedirectCommands(n,t,r,i,a){return function zG(e,n,t){if("string"==typeof e)return rn(e);const r=e,{queryParams:i,fragment:a,routeConfig:d,url:f,outlet:_,params:S,data:M,title:k}=n;return Ad(Ii(t,()=>r({params:S,data:M,queryParams:i,fragment:a,routeConfig:d,url:f,outlet:_,title:k})))}(t,i,a).pipe(Hn(d=>{if(d instanceof op)throw new _C(d);const f=this.applyRedirectCreateUrlTree(d,this.urlSerializer.parse(d),n,r);if("/"===d[0])throw new _C(f);return f}))}applyRedirectCreateUrlTree(n,t,r,i){const a=this.createSegmentGroup(n,t.root,r,i);return new op(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(n,t){const r={};return Object.entries(n).forEach(([i,a])=>{if("string"==typeof a&&":"===a[0]){const f=a.substring(1);r[i]=t[f]}else r[i]=a}),r}createSegmentGroup(n,t,r,i){const a=this.createSegments(n,t.segments,r,i);let d={};return Object.entries(t.children).forEach(([f,_])=>{d[f]=this.createSegmentGroup(n,_,r,i)}),new mr(a,d)}createSegments(n,t,r,i){return t.map(a=>":"===a.path[0]?this.findPosParam(n,a,i):this.findOrReturn(a,r))}findPosParam(n,t,r){const i=r[t.path.substring(1)];if(!i)throw new Le(4001,!1);return i}findOrReturn(n,t){let r=0;for(const i of t){if(i.path===n.path)return t.splice(r),i;r++}return n}}const yC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jG(e,n,t,r,i){const a=MR(e,n,t);return a.matched?(r=function eG(e,n){return e.providers&&!e._injector&&(e._injector=Kv(e.providers,n,`Route: ${e.path}`)),e._injector??n}(n,r),function LG(e,n,t,r){const i=n.canMatch;return i&&0!==i.length?rn(i.map(d=>{const f=$g(d,e);return Ad(function EG(e){return e&&N0(e.canMatch)}(f)?f.canMatch(n,t):Ii(e,()=>f(n,t)))})).pipe(Gg(),IR()):rn(!0)}(r,n,t).pipe(Hn(d=>!0===d?a:{...yC}))):rn(a)}function MR(e,n,t){if("**"===n.path)return function VG(e){return{matched:!0,parameters:e.length>0?WA(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}(t);if(""===n.path)return"full"===n.pathMatch&&(e.hasChildren()||t.length>0)?{...yC}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(n.matcher||m$)(t,e,n);if(!i)return{...yC};const a={};Object.entries(i.posParams??{}).forEach(([f,_])=>{a[f]=_.path});const d=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:d,positionalParamSegments:i.posParams??{}}}function DR(e,n,t,r){return t.length>0&&function GG(e,n,t){return t.some(r=>S1(e,n,r)&&_c(r)!==bn)}(e,t,r)?{segmentGroup:new mr(n,$G(r,new mr(t,e.children))),slicedSegments:[]}:0===t.length&&function HG(e,n,t){return t.some(r=>S1(e,n,r))}(e,t,r)?{segmentGroup:new mr(e.segments,UG(e,t,r,e.children)),slicedSegments:t}:{segmentGroup:new mr(e.segments,e.children),slicedSegments:t}}function UG(e,n,t,r){const i={};for(const a of t)if(S1(e,n,a)&&!r[_c(a)]){const d=new mr([],{});i[_c(a)]=d}return{...r,...i}}function $G(e,n){const t={};t[bn]=n;for(const r of e)if(""===r.path&&_c(r)!==bn){const i=new mr([],{});t[_c(r)]=i}return t}function S1(e,n,t){return(!(e.hasChildren()||n.length>0)||"full"!==t.pathMatch)&&""===t.path}class WG{}class YG{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(n,t,r,i,a,d,f){this.injector=n,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=d,this.urlSerializer=f,this.applyRedirects=new BG(this.urlSerializer,this.urlTree)}noMatchError(n){return new Le(4002,`'${n.segmentGroup}'`)}recognize(){const n=DR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(n).pipe(Hn(({children:t,rootSnapshot:r})=>{const i=new yc(r,t),a=new mR("",i),d=function O$(e,n,t=null,r=null){return oR(iR(e),n,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return d.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(d),{state:a,tree:d}}))}match(n){const t=new y1([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Object.freeze({}),bn,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,n,bn,t).pipe(Hn(r=>({children:r,rootSnapshot:t})),Fg(r=>{if(r instanceof _C)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mC?this.noMatchError(r):r}))}processSegmentGroup(n,t,r,i,a){return 0===r.segments.length&&r.hasChildren()?this.processChildren(n,t,r,a):this.processSegment(n,t,r,r.segments,i,!0,a).pipe(Hn(d=>d instanceof yc?[d]:[]))}processChildren(n,t,r,i){const a=[];for(const d of Object.keys(r.children))"primary"===d?a.unshift(d):a.push(d);return zo(a).pipe(x0(d=>{const f=r.children[d],_=function iG(e,n){const t=e.filter(r=>_c(r)===n);return t.push(...e.filter(r=>_c(r)!==n)),t}(t,d);return this.processSegmentGroup(n,_,f,d,i)}),function c$(e,n){return no(function l$(e,n,t,r,i){return(a,d)=>{let f=t,_=n,S=0;a.subscribe(Si(d,M=>{const k=S++;_=f?e(_,M,k):(f=!0,M),r&&d.next(_)},i&&(()=>{f&&d.next(_),d.complete()})))}}(e,n,arguments.length>=2,!0))}((d,f)=>(d.push(...f),d)),s1(null),function u$(e,n){const t=arguments.length>=2;return r=>r.pipe(e?Pd((i,a)=>e(i,a,r)):Zn,eC(1),t?s1(n):UA(()=>new i1))}(),ss(d=>{if(null===d)return Hg(r);const f=kR(d);return function XG(e){e.sort((n,t)=>n.value.outlet===bn?-1:t.value.outlet===bn?1:n.value.outlet.localeCompare(t.value.outlet))}(f),rn(f)}))}processSegment(n,t,r,i,a,d,f){return zo(t).pipe(x0(_=>this.processSegmentAgainstRoute(_._injector??n,t,_,r,i,a,d,f).pipe(Fg(S=>{if(S instanceof mC)return rn(null);throw S}))),ip(_=>!!_),Fg(_=>{if(TR(_))return function qG(e,n,t){return 0===n.length&&!e.children[t]}(r,i,a)?rn(new WG):Hg(r);throw _}))}processSegmentAgainstRoute(n,t,r,i,a,d,f,_){return _c(r)===d||d!==bn&&S1(i,a,r)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(n,i,r,a,d,_):this.allowRedirects&&f?this.expandSegmentAgainstRouteUsingRedirect(n,i,t,r,a,d,_):Hg(i):Hg(i)}expandSegmentAgainstRouteUsingRedirect(n,t,r,i,a,d,f){const{matched:_,parameters:S,consumedSegments:M,positionalParamSegments:k,remainingSegments:F}=MR(t,i,a);if(!_)return Hg(t);"string"==typeof i.redirectTo&&"/"===i.redirectTo[0]&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const L=new y1(a,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PR(i),_c(i),i.component??i._loadedComponent??null,i,AR(i)),G=_1(L,f,this.paramsInheritanceStrategy);return L.params=Object.freeze(G.params),L.data=Object.freeze(G.data),this.applyRedirects.applyRedirectCommands(M,i.redirectTo,k,L,n).pipe(Ka(de=>this.applyRedirects.lineralizeSegments(i,de)),ss(de=>this.processSegment(n,r,t,de.concat(F),d,!1,f)))}matchSegmentAgainstRoute(n,t,r,i,a,d){const f=jG(t,r,i,n);return"**"===r.path&&(t.children={}),f.pipe(Ka(_=>_.matched?this.getChildConfig(n=r._injector??n,r,i).pipe(Ka(({routes:S})=>{const M=r._loadedInjector??n,{parameters:k,consumedSegments:F,remainingSegments:L}=_,G=new y1(F,k,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,PR(r),_c(r),r.component??r._loadedComponent??null,r,AR(r)),Q=_1(G,d,this.paramsInheritanceStrategy);G.params=Object.freeze(Q.params),G.data=Object.freeze(Q.data);const{segmentGroup:de,slicedSegments:_e}=DR(t,F,L,S);if(0===_e.length&&de.hasChildren())return this.processChildren(M,S,de,G).pipe(Hn(Ue=>new yc(G,Ue)));if(0===S.length&&0===_e.length)return rn(new yc(G,[]));const we=_c(r)===a;return this.processSegment(M,S,de,_e,we?bn:a,!0,G).pipe(Hn(Ue=>new yc(G,Ue instanceof yc?[Ue]:[])))})):Hg(t)))}getChildConfig(n,t,r){return t.children?rn({routes:t.children,injector:n}):t.loadChildren?void 0!==t._loadedRoutes?rn({routes:t._loadedRoutes,injector:t._loadedInjector}):function NG(e,n,t,r){const i=n.canLoad;return void 0===i||0===i.length?rn(!0):rn(i.map(d=>{const f=$g(d,e);return Ad(function bG(e){return e&&N0(e.canLoad)}(f)?f.canLoad(n,t):Ii(e,()=>f(n,t)))})).pipe(Gg(),IR())}(n,t,r).pipe(ss(i=>i?this.configLoader.loadChildren(n,t).pipe(as(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function FG(){return o1(SR(!1,ua.GuardRejected))}())):rn({routes:[],injector:n})}}function QG(e){const n=e.value.routeConfig;return n&&""===n.path}function kR(e){const n=[],t=new Set;for(const r of e){if(!QG(r)){n.push(r);continue}const i=n.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):n.push(r)}for(const r of t){const i=kR(r.children);n.push(new yc(r.value,i))}return n.filter(r=>!t.has(r))}function PR(e){return e.data||{}}function AR(e){return e.resolve||{}}function RR(e){const n=e.children.map(t=>RR(t)).flat();return[e,...n]}function vC(e){return Ka(n=>{const t=e(n);return t?zo(t).pipe(Hn(()=>n)):rn(n)})}let NR=(()=>{class e{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===bn);return r}getResolvedTitleForRoute(t){return t.data[S0]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(iH),providedIn:"root"})}return e})(),iH=(()=>{class e extends NR{title;constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(kt(d$))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const qg=new Ye("",{providedIn:"root",factory:()=>({})}),L0=new Ye("");let bC=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=Fe(fj);loadComponent(t,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return rn(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);const i=Ad(Ii(t,()=>r.loadComponent())).pipe(Hn(LR),Ka(OR),as(d=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=d}),tC(()=>{this.componentLoaders.delete(r)})),a=new VA(i,()=>new ii).pipe(JE());return this.componentLoaders.set(r,a),a}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return rn({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=function oH(e,n,t,r){return Ad(Ii(t,()=>e.loadChildren())).pipe(Hn(LR),Ka(OR),ss(i=>i instanceof HM||Array.isArray(i)?rn(i):zo(n.compileModuleAsync(i))),Hn(i=>{r&&r(e);let a,d,f=!1;return Array.isArray(i)?(d=i,!0):(a=i.create(t).injector,d=a.get(L0,[],{optional:!0,self:!0}).flat()),{routes:d.map(pC),injector:a}}))}(r,this.compiler,t,this.onLoadEndListener).pipe(tC(()=>{this.childrenLoaders.delete(r)})),d=new VA(a,()=>new ii).pipe(JE());return this.childrenLoaders.set(r,d),d}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function LR(e){return function sH(e){return e&&"object"==typeof e&&"default"in e}(e)?e.default:e}function OR(e){return rn(e)}let xC=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(aH),providedIn:"root"})}return e})(),aH=(()=>{class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const FR=new Ye(""),BR=new Ye("");function lH(e,n,t){const r=e.get(BR),i=e.get(Be);if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(S=>setTimeout(S));let a;const d=new Promise(S=>{a=S}),f=i.startViewTransition(()=>(a(),function cH(e){return new Promise(n=>{v2({read:()=>setTimeout(n)},{injector:e})})}(e)));f.ready.catch(S=>{});const{onViewTransitionCreated:_}=r;return _&&Ii(e,()=>_({transition:f,from:n,to:t})),d}const zR=new Ye("");let wC=(()=>{class e{currentNavigation=kn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new ii;transitionAbortWithErrorSubject=new ii;configLoader=Fe(bC);environmentInjector=Fe(si);destroyRef=Fe(ht);urlSerializer=Fe(C0);rootContexts=Fe(k0);location=Fe(ns);inputBindingEnabled=null!==Fe(v1,{optional:!0});titleStrategy=Fe(NR);options=Fe(qg,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=Fe(xC);createViewTransition=Fe(FR,{optional:!0});navigationErrorHandler=Fe(zR,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>rn(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=i=>this.events.next(new Z$(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new W$(i)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;co(()=>{this.transitions?.next({...t,extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:r})})}setupNavigations(t){return this.transitions=new jt(null),this.transitions.pipe(Pd(r=>null!==r),Ka(r=>{let i=!1;return rn(r).pipe(Ka(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",ua.SupersededByNewNavigation),mc;this.currentTransition=r,this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:"string"==typeof a.extras.browserUrl?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null,abort:()=>a.abortController.abort()});const d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!d&&"reload"!==(a.extras.onSameUrlNavigation??t.onSameUrlNavigation))return this.events.next(new zg(a.id,this.urlSerializer.serialize(a.rawUrl),"",g1.IgnoredSameUrlNavigation)),a.resolve(!1),mc;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return rn(a).pipe(Ka(_=>(this.events.next(new p1(_.id,this.urlSerializer.serialize(_.extractedUrl),_.source,_.restoredState)),_.id!==this.navigationId?mc:Promise.resolve(_))),function JG(e,n,t,r,i,a){return ss(d=>function ZG(e,n,t,r,i,a,d="emptyOnly"){return new YG(e,n,t,r,i,d,a).recognize()}(e,n,t,r,d.extractedUrl,i,a).pipe(Hn(({state:f,tree:_})=>({...d,targetSnapshot:f,urlAfterRedirects:_}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),as(_=>{r.targetSnapshot=_.targetSnapshot,r.urlAfterRedirects=_.urlAfterRedirects,this.currentNavigation.update(M=>(M.finalUrl=_.urlAfterRedirects,M));const S=new dR(_.id,this.urlSerializer.serialize(_.extractedUrl),this.urlSerializer.serialize(_.urlAfterRedirects),_.targetSnapshot);this.events.next(S)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){const{id:_,extractedUrl:S,source:M,restoredState:k,extras:F}=a,L=new p1(_,this.urlSerializer.serialize(S),M,k);this.events.next(L);const G=gR(this.rootComponentType).snapshot;return this.currentTransition=r={...a,targetSnapshot:G,urlAfterRedirects:S,extras:{...F,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(Q=>(Q.finalUrl=S,Q)),rn(r)}return this.events.next(new zg(a.id,this.urlSerializer.serialize(a.extractedUrl),"",g1.IgnoredByUrlHandlingStrategy)),a.resolve(!1),mc}),as(a=>{const d=new $$(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)}),Hn(a=>(this.currentTransition=r={...a,guards:gG(a.targetSnapshot,a.currentSnapshot,this.rootContexts)},r)),function TG(e,n){return ss(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:d}}=t;return 0===d.length&&0===a.length?rn({...t,guardsResult:!0}):function IG(e,n,t,r){return zo(e).pipe(ss(i=>function RG(e,n,t,r,i){const a=n&&n.routeConfig?n.routeConfig.canDeactivate:null;return a&&0!==a.length?rn(a.map(f=>{const _=jg(n)??i,S=$g(f,_);return Ad(function SG(e){return e&&N0(e.canDeactivate)}(S)?S.canDeactivate(e,n,t,r):Ii(_,()=>S(e,n,t,r))).pipe(ip())})).pipe(Gg()):rn(!0)}(i.component,i.route,t,n,r)),ip(i=>!0!==i,!0))}(d,r,i,e).pipe(ss(f=>f&&function vG(e){return"boolean"==typeof e}(f)?function MG(e,n,t,r){return zo(n).pipe(x0(i=>XE(function kG(e,n){return null!==e&&n&&n(new K$(e)),rn(!0)}(i.route.parent,r),function DG(e,n){return null!==e&&n&&n(new X$(e)),rn(!0)}(i.route,r),function AG(e,n,t){const r=n[n.length-1],a=n.slice(0,n.length-1).reverse().map(d=>function mG(e){const n=e.routeConfig?e.routeConfig.canActivateChild:null;return n&&0!==n.length?{node:e,guards:n}:null}(d)).filter(d=>null!==d).map(d=>QE(()=>rn(d.guards.map(_=>{const S=jg(d.node)??t,M=$g(_,S);return Ad(function wG(e){return e&&N0(e.canActivateChild)}(M)?M.canActivateChild(r,e):Ii(S,()=>M(r,e))).pipe(ip())})).pipe(Gg())));return rn(a).pipe(Gg())}(e,i.path,t),function PG(e,n,t){const r=n.routeConfig?n.routeConfig.canActivate:null;if(!r||0===r.length)return rn(!0);const i=r.map(a=>QE(()=>{const d=jg(n)??t,f=$g(a,d);return Ad(function xG(e){return e&&N0(e.canActivate)}(f)?f.canActivate(n,e):Ii(d,()=>f(n,e))).pipe(ip())}));return rn(i).pipe(Gg())}(e,i.route,t))),ip(i=>!0!==i,!0))}(r,a,e,n):rn(f)),Hn(f=>({...t,guardsResult:f})))})}(this.environmentInjector,a=>this.events.next(a)),as(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&"boolean"!=typeof a.guardsResult)throw b1(0,a.guardsResult);const d=new G$(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(d)}),Pd(a=>!!a.guardsResult||(this.cancelNavigationTransition(a,"",ua.GuardRejected),!1)),vC(a=>{if(0!==a.guards.canActivateChecks.length)return rn(a).pipe(as(d=>{const f=new H$(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Ka(d=>{let f=!1;return rn(d).pipe(function eH(e,n){return ss(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return rn(t);const a=new Set(i.map(_=>_.route)),d=new Set;for(const _ of a)if(!d.has(_))for(const S of RR(_))d.add(S);let f=0;return zo(d).pipe(x0(_=>a.has(_)?function tH(e,n,t,r){const i=e.routeConfig,a=e._resolve;return void 0!==i?.title&&!yR(i)&&(a[S0]=i.title),QE(()=>(e.data=_1(e,e.parent,t).resolve,function nH(e,n,t,r){const i=nC(e);if(0===i.length)return rn({});const a={};return zo(i).pipe(ss(d=>function rH(e,n,t,r){const i=jg(n)??r,a=$g(e,i);return Ad(a.resolve?a.resolve(n,t):Ii(i,()=>a(n,t)))}(e[d],n,t,r).pipe(ip(),as(f=>{if(f instanceof gC)throw b1(new l1,f);a[d]=f}))),eC(1),Hn(()=>a),Fg(d=>TR(d)?mc:o1(d)))}(a,e,n,r).pipe(Hn(d=>(e._resolvedData=d,e.data={...e.data,...d},null)))))}(_,r,e,n):(_.data=_1(_,_.parent,e).resolve,rn(void 0))),as(()=>f++),eC(1),ss(_=>f===d.size?rn(t):mc))})}(this.paramsInheritanceStrategy,this.environmentInjector),as({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(d,"",ua.NoDataFromResolver)}}))}),as(d=>{const f=new q$(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}))}),vC(a=>{const d=f=>{const _=[];if(f.routeConfig?.loadComponent){const S=jg(f)??this.environmentInjector;_.push(this.configLoader.loadComponent(S,f.routeConfig).pipe(as(M=>{f.component=M}),Hn(()=>{})))}for(const S of f.children)_.push(...d(S));return _};return YE(d(a.targetSnapshot.root)).pipe(s1(null),Og(1))}),vC(()=>this.afterPreactivation()),Ka(()=>{const{currentSnapshot:a,targetSnapshot:d}=r,f=this.createViewTransition?.(this.environmentInjector,a.root,d.root);return f?zo(f).pipe(Hn(()=>r)):rn(r)}),Hn(a=>{const d=function cG(e,n,t){const r=P0(e,n._root,t?t._root:void 0);return new pR(r,n)}(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return this.currentTransition=r={...a,targetRouterState:d},this.currentNavigation.update(f=>(f.targetRouterState=d,f)),r}),as(()=>{this.events.next(new lC)}),((e,n,t,r)=>Hn(i=>(new pG(n,i.targetRouterState,i.currentRouterState,t,r).activate(e),i)))(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a),this.inputBindingEnabled),Og(1),$A(new _n(a=>{const d=r.abortController.signal,f=()=>a.next();return d.addEventListener("abort",f),()=>d.removeEventListener("abort",f)}).pipe(Pd(()=>!i&&!r.targetRouterState),as(()=>{this.cancelNavigationTransition(r,r.abortController.signal.reason+"",ua.Aborted)}))),as({next:a=>{i=!0,this.lastSuccessfulNavigation=co(this.currentNavigation),this.events.next(new Rd(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{i=!0}}),$A(this.transitionAbortWithErrorSubject.pipe(as(a=>{throw a}))),tC(()=>{i||this.cancelNavigationTransition(r,"",ua.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Fg(a=>{if(this.destroyed)return r.resolve(!1),mc;if(i=!0,ER(a))this.events.next(new lp(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),function hG(e){return ER(e)&&ap(e.url)}(a)?this.events.next(new m1(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{const d=new aC(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{const f=Ii(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(!(f instanceof gC))throw this.events.next(d),a;{const{message:_,cancellationCode:S}=b1(0,f);this.events.next(new lp(r.id,this.urlSerializer.serialize(r.extractedUrl),_,S)),this.events.next(new m1(f.redirectTo,f.navigationBehaviorOptions))}}catch(f){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(f)}}return mc}))}))}cancelNavigationTransition(t,r,i){const a=new lp(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(a),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=co(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return t.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function uH(e){return e!==D0}let dH=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(fH),providedIn:"root"})}return e})();class hH{shouldDetach(n){return!1}store(n,t){}shouldAttach(n){return!1}retrieve(n){return null}shouldReuseRoute(n,t){return n.routeConfig===t.routeConfig}}let fH=(()=>{class e extends hH{static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jR=(()=>{class e{urlSerializer=Fe(C0);options=Fe(qg,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=Fe(ns);urlHandlingStrategy=Fe(xC);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new op;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){const a=void 0!==t?this.urlHandlingStrategy.merge(t,r):r,d=i??a;return d instanceof op?this.urlSerializer.serialize(d):d}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=gR(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:()=>Fe(pH),providedIn:"root"})}return e})(),pH=(()=>{class e extends jR{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof p1?this.updateStateMemento():t instanceof zg?this.commitTransition(r):t instanceof dR?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof lC?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof lp&&t.code!==ua.SupersededByNewNavigation&&t.code!==ua.Redirect?this.restoreHistory(r):t instanceof aC?this.restoreHistory(r,!0):t instanceof Rd&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){const{replaceUrl:a,state:d}=r;if(this.location.isCurrentPathEqualTo(t)||a){const f=this.browserPageId,_={...d,...this.generateNgRouterState(i,f)};this.location.replaceState(t,"",_)}else{const f={...d,...this.generateNgRouterState(i,this.browserPageId+1)};this.location.go(t,"",f)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const a=this.currentPageId-this.browserPageId;0!==a?this.location.historyGo(a):this.getCurrentUrlTree()===t.finalUrl&&0===a&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function VR(e,n){e.events.pipe(Pd(t=>t instanceof Rd||t instanceof lp||t instanceof aC||t instanceof zg),Hn(t=>t instanceof Rd||t instanceof zg?0:t instanceof lp&&(t.code===ua.Redirect||t.code===ua.SupersededByNewNavigation)?2:1),Pd(t=>2!==t),Og(1)).subscribe(()=>{n()})}const gH={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mH={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nd=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=Fe(D2);stateManager=Fe(jR);options=Fe(qg,{optional:!0})||{};pendingTasks=Fe(wi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=Fe(wC);urlSerializer=Fe(C0);location=Fe(ns);urlHandlingStrategy=Fe(xC);injector=Fe(si);_events=new ii;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=Fe(dH);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=Fe(L0,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!Fe(v1,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mr;subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const i=this.navigationTransitions.currentTransition,a=co(this.navigationTransitions.currentNavigation);if(null!==i&&null!==a)if(this.stateManager.handleRouterEvent(r,a),r instanceof lp&&r.code!==ua.Redirect&&r.code!==ua.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Rd)this.navigated=!0;else if(r instanceof m1){const d=r.navigationBehaviorOptions,f=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),_={browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||"eager"===this.urlUpdateStrategy||uH(i.source),...d};this.scheduleNavigation(f,D0,null,_,{resolve:i.resolve,reject:i.reject,promise:i.promise})}(function J$(e){return!(e instanceof lC||e instanceof m1)})(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),D0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){const a={replaceUrl:!0},d=i?.navigationId?i:null;if(i){const _={...i};delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const f=this.parseUrl(t);this.scheduleNavigation(f,r,d,a).catch(_=>{this.disposed||this.injector.get(pn)(_)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return co(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:d,queryParamsHandling:f,preserveFragment:_}=r,S=_?this.currentUrlTree.fragment:d;let k,M=null;switch(f??this.options.defaultQueryParamsHandling){case"merge":M={...this.currentUrlTree.queryParams,...a};break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=a||null}null!==M&&(M=this.removeEmptyProps(M));try{k=iR(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||"/"!==t[0][0])&&(t=[]),k=this.currentUrlTree.root}return oR(k,t,M,S??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ap(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,D0,null,r)}navigate(t,r={skipLocationChange:!1}){return function _H(e){for(let n=0;n<e.length;n++)if(null==e[n])throw new Le(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(i=!0===r?{...gH}:!1===r?{...mH}:r,ap(t))return KA(this.currentUrlTree,t,i);const a=this.parseUrl(t);return KA(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,a])=>(null!=a&&(r[i]=a),r),{})}scheduleNavigation(t,r,i,a,d){if(this.disposed)return Promise.resolve(!1);let f,_,S;d?(f=d.resolve,_=d.reject,S=d.promise):S=new Promise((k,F)=>{f=k,_=F});const M=this.pendingTasks.add();return VR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(M))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:a,resolve:f,reject:_,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(k=>Promise.reject(k))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),O0=(()=>{class e{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=kn(null);get href(){return co(this.reactiveHref)}set href(t){this.reactiveHref.set(t)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ii;applicationErrorHandler=Fe(pn);options=Fe(qg,{optional:!0});constructor(t,r,i,a,d,f){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=d,this.locationStrategy=f,this.reactiveHref.set(Fe(new Ij("href"),{optional:!0}));const _=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===_||"area"===_||!("object"!=typeof customElements||!customElements.get(_)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(void 0!==this.subscription||!this.isAnchorElement)return;let t=this.preserveFragment;const r=i=>"merge"===i||"preserve"===i;t||=r(this.queryParamsHandling),t||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),t&&(this.subscription=this.router.events.subscribe(i=>{i instanceof Rd&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){null==t?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=ap(t)||Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,a,d){const f=this.urlTree;if(null===f||this.isAnchorElement&&(0!==t||r||i||a||d||"string"==typeof this.target&&"_self"!=this.target))return!0;const _={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(f,_)?.catch(S=>{this.applicationErrorHandler(S)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const t=this.urlTree;this.reactiveHref.set(null!==t&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t))??"":null)}applyAttributeValue(t,r){const i=this.renderer,a=this.el.nativeElement;null!==r?i.setAttribute(a,t,r):i.removeAttribute(a,t)}get urlTree(){return null===this.routerLinkInput?null:ap(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||e)(Xt(Nd),Xt(Ug),Mf("tabindex"),Xt(U_),Xt(os),Xt(Ua))};static \u0275dir=qi({type:e,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){1&r&&fc("click",function(d){return i.onClick(d.button,d.ctrlKey,d.shiftKey,d.altKey,d.metaKey)}),2&r&&so("href",i.reactiveHref(),QT)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Hr],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Hr],replaceUrl:[2,"replaceUrl","replaceUrl",Hr],routerLink:"routerLink"},features:[_l]})}return e})(),SC=(()=>{class e{router;element;renderer;cdr;link;links;classes=[];routerEventsSubscription;linkInputChangesSubscription;_isActive=!1;get isActive(){return this._isActive}routerLinkActiveOptions={exact:!1};ariaCurrentWhenActive;isActiveChange=new Ci;constructor(t,r,i,a,d){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=d,this.routerEventsSubscription=t.events.subscribe(f=>{f instanceof Rd&&this.update()})}ngAfterContentInit(){rn(this.links.changes,rn(null)).pipe(b0()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=zo(t).pipe(b0()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function yH(e){return!!e.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{const a=i.urlTree;return!!a&&t.isActive(a,r)}}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static \u0275fac=function(r){return new(r||e)(Xt(Nd),Xt(os),Xt(U_),Xt(Rb),Xt(O0,8))};static \u0275dir=qi({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,a){if(1&r&&Tu(a,O0,5),2&r){let d;la(d=ca())&&(i.links=d)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[_l]})}return e})();class UR{}let vH=(()=>{class e{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,a){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Pd(t=>t instanceof Rd),x0(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=Kv(a.providers,t,`Route: ${a.path}`));const d=a._injector??t,f=a._loadedInjector??d;(a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent)&&i.push(this.preloadConfig(d,a)),(a.children||a._loadedRoutes)&&i.push(this.processRoutes(f,a.children??a._loadedRoutes))}return zo(i).pipe(b0())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):rn(null);const a=i.pipe(ss(d=>null===d?rn(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));return r.loadComponent&&!r._loadedComponent?zo([a,this.loader.loadComponent(t,r)]).pipe(b0()):a})}static \u0275fac=function(r){return new(r||e)(kt(Nd),kt(si),kt(UR),kt(bC))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const EC=new Ye("");let $R=(()=>{class e{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=D0;restoredId=0;store={};constructor(t,r,i,a,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=a,this.options=d,d.scrollPositionRestoration||="disabled",d.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof p1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Rd?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof zg&&t.code===g1.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof hR&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){var i=this;this.zone.runOutsideAngular(Jl(function*(){yield new Promise(a=>{setTimeout(a),typeof requestAnimationFrame<"u"&&requestAnimationFrame(a)}),i.zone.run(()=>{i.transitions.events.next(new hR(t,"popstate"===i.lastSource?i.store[i.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function gM(){throw new Error("invalid")}()};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();function GR(e){return e.routerState.root}function Au(e,n){return{\u0275kind:e,\u0275providers:n}}function HR(){const e=Fe(qe);return n=>{const t=e.get(Nh);if(n!==t.components[0])return;const r=e.get(Nd),i=e.get(qR);1===e.get(CC)&&r.initialNavigation(),e.get(WR,null,{optional:!0})?.setUpPreloading(),e.get(EC,null,{optional:!0})?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const qR=new Ye("",{factory:()=>new ii}),CC=new Ye("",{providedIn:"root",factory:()=>1}),WR=new Ye("");function EH(e){return Au(0,[{provide:WR,useExisting:vH},{provide:UR,useExisting:e}])}function TH(e){return _o("NgRouterViewTransitions"),Au(9,[{provide:FR,useValue:lH},{provide:BR,useValue:{skipNextTransition:!!e?.skipInitialTransition,...e}}])}const IH=[ns,{provide:C0,useClass:l1},Nd,k0,{provide:Ug,useFactory:GR,deps:[Nd]},bC,[]];let TC=(()=>{class e{constructor(){}static forRoot(t,r){return{ngModule:e,providers:[IH,[],{provide:L0,multi:!0,useValue:t},[],r?.errorHandler?{provide:zR,useValue:r.errorHandler}:[],{provide:qg,useValue:r||{}},r?.useHash?{provide:Ua,useClass:H9}:{provide:Ua,useClass:od},{provide:EC,useFactory:()=>{const e=Fe(T7),n=Fe(Fn),t=Fe(qg),r=Fe(wC),i=Fe(C0);return t.scrollOffset&&e.setOffset(t.scrollOffset),new $R(i,r,e,n,t)}},r?.preloadingStrategy?EH(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?PH(r):[],r?.bindToComponentInputs?Au(8,[bR,{provide:v1,useExisting:bR}]).\u0275providers:[],r?.enableViewTransitions?TH().\u0275providers:[],[{provide:ZR,useFactory:HR},{provide:wS,multi:!0,useExisting:ZR}]]}}static forChild(t){return{ngModule:e,providers:[{provide:L0,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({})}return e})();function PH(e){return["disabled"===e.initialNavigation?Au(3,[xS(()=>{Fe(Nd).setUpLocationChangeListener()}),{provide:CC,useValue:2}]).\u0275providers:[],"enabledBlocking"===e.initialNavigation?Au(2,[{provide:Yx,useValue:!0},{provide:CC,useValue:0},xS(()=>{const n=Fe(qe);return n.get(Ss,Promise.resolve()).then(()=>new Promise(r=>{const i=n.get(Nd),a=n.get(qR);VR(i,()=>{r(!0)}),n.get(wC).afterPreactivation=()=>(r(!0),a.closed?rn(void 0):a),i.initialNavigation()}))})]).\u0275providers:[]]}const ZR=new Ye("");var on=function(e){return e[e.State=0]="State",e[e.Transition=1]="Transition",e[e.Sequence=2]="Sequence",e[e.Group=3]="Group",e[e.Animate=4]="Animate",e[e.Keyframes=5]="Keyframes",e[e.Style=6]="Style",e[e.Trigger=7]="Trigger",e[e.Reference=8]="Reference",e[e.AnimateChild=9]="AnimateChild",e[e.AnimateRef=10]="AnimateRef",e[e.Query=11]="Query",e[e.Stagger=12]="Stagger",e}(on||{});const Ld="*";function KR(e,n){return{type:on.Trigger,name:e,definitions:n,options:{}}}function E1(e,n=null){return{type:on.Animate,styles:n,timings:e}}function Wg(e){return{type:on.Style,styles:e,offset:null}}function C1(e,n,t){return{type:on.State,name:e,styles:n,options:t}}function T1(e,n,t=null){return{type:on.Transition,expr:e,animation:n,options:t}}class F0{_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_originalOnDoneFns=[];_originalOnStartFns=[];_started=!1;_destroyed=!1;_finished=!1;_position=0;parentPlayer=null;totalTime;constructor(n=0,t=0){this.totalTime=n+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(n=>n()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(n){this._position=this.totalTime?n*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class YR{_onDoneFns=[];_onStartFns=[];_finished=!1;_started=!1;_destroyed=!1;_onDestroyFns=[];parentPlayer=null;totalTime=0;players;constructor(n){this.players=n;let t=0,r=0,i=0;const a=this.players.length;0==a?queueMicrotask(()=>this._onFinish()):this.players.forEach(d=>{d.onDone(()=>{++t==a&&this._onFinish()}),d.onDestroy(()=>{++r==a&&this._onDestroy()}),d.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((d,f)=>Math.max(d,f.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this.players.forEach(n=>n.init())}onStart(n){this._onStartFns.push(n)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(n=>n()),this._onStartFns=[])}onDone(n){this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(n=>n.play())}pause(){this.players.forEach(n=>n.pause())}restart(){this.players.forEach(n=>n.restart())}finish(){this._onFinish(),this.players.forEach(n=>n.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(n=>n.destroy()),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}reset(){this.players.forEach(n=>n.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(n){const t=n*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const n=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=n?n.getPosition():0}beforeDestroy(){this.players.forEach(n=>{n.beforeDestroy&&n.beforeDestroy()})}triggerCallback(n){const t="start"==n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function XR(e){return new Le(3e3,!1)}function GH(e){return new Le(3002,!1)}function Hh(e){switch(e.length){case 0:return new F0;case 1:return e[0];default:return new YR(e)}}function QR(e,n,t=new Map,r=new Map){const i=[],a=[];let d=-1,f=null;if(n.forEach(_=>{const S=_.get("offset"),M=S==d,k=M&&f||new Map;_.forEach((F,L)=>{let G=L,Q=F;if("offset"!==L)switch(G=e.normalizePropertyName(G,i),Q){case"!":Q=t.get(L);break;case Ld:Q=r.get(L);break;default:Q=e.normalizeStyleValue(L,G,Q,i)}k.set(G,Q)}),M||a.push(k),f=k,d=S}),i.length)throw function tq(){return new Le(3502,!1)}();return a}function MC(e,n,t,r){switch(n){case"start":e.onStart(()=>r(t&&DC(t,"start",e)));break;case"done":e.onDone(()=>r(t&&DC(t,"done",e)));break;case"destroy":e.onDestroy(()=>r(t&&DC(t,"destroy",e)))}}function DC(e,n,t){const a=kC(e.element,e.triggerName,e.fromState,e.toState,n||e.phaseName,t.totalTime??e.totalTime,!!t.disabled),d=e._data;return null!=d&&(a._data=d),a}function kC(e,n,t,r,i="",a=0,d){return{element:e,triggerName:n,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!d}}function Ya(e,n,t){let r=e.get(n);return r||e.set(n,r=t),r}function JR(e){const n=e.indexOf(":");return[e.substring(1,n),e.slice(n+1)]}const fq=typeof document>"u"?null:document.documentElement;function PC(e){const n=e.parentNode||e.host||null;return n===fq?null:n}let cp=null,eN=!1;function tN(e,n){for(;n;){if(n===e)return!0;n=PC(n)}return!1}function nN(e,n,t){if(t)return Array.from(e.querySelectorAll(n));const r=e.querySelector(n);return r?[r]:[]}const iN="ng-enter",AC="ng-leave",I1="ng-trigger",M1=".ng-trigger",oN="ng-animating",RC=".ng-animating";function Od(e){if("number"==typeof e)return e;const n=e.match(/^(-?[\.\d]+)(m?s)/);return!n||n.length<2?0:NC(parseFloat(n[1]),n[2])}function NC(e,n){return"s"===n?1e3*e:e}function D1(e,n,t){return e.hasOwnProperty("duration")?e:function bq(e,n,t){let r,i=0,a="";if("string"==typeof e){const d=e.match(vq);if(null===d)return n.push(XR()),{duration:0,delay:0,easing:""};r=NC(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(i=NC(parseFloat(f),d[4]));const _=d[5];_&&(a=_)}else r=e;if(!t){let d=!1,f=n.length;r<0&&(n.push(function LH(){return new Le(3100,!1)}()),d=!0),i<0&&(n.push(function OH(){return new Le(3101,!1)}()),d=!0),d&&n.splice(f,0,XR())}return{duration:r,delay:i,easing:a}}(e,n,t)}const vq=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function Ru(e,n,t){n.forEach((r,i)=>{const a=OC(i);t&&!t.has(i)&&t.set(i,e.style[a]),e.style[a]=r})}function up(e,n){n.forEach((t,r)=>{const i=OC(r);e.style[i]=""})}function B0(e){return Array.isArray(e)?1==e.length?e[0]:function NH(e,n=null){return{type:on.Sequence,steps:e,options:n}}(e):e}const LC=new RegExp("{{\\s*(.+?)\\s*}}","g");function sN(e){let n=[];if("string"==typeof e){let t;for(;t=LC.exec(e);)n.push(t[1]);LC.lastIndex=0}return n}function z0(e,n,t){const r=`${e}`,i=r.replace(LC,(a,d)=>{let f=n[d];return null==f&&(t.push(function BH(){return new Le(3003,!1)}()),f=""),f.toString()});return i==r?e:i}const Sq=/-+([a-z0-9])/g;function OC(e){return e.replace(Sq,(...n)=>n[1].toUpperCase())}function Xa(e,n,t){switch(n.type){case on.Trigger:return e.visitTrigger(n,t);case on.State:return e.visitState(n,t);case on.Transition:return e.visitTransition(n,t);case on.Sequence:return e.visitSequence(n,t);case on.Group:return e.visitGroup(n,t);case on.Animate:return e.visitAnimate(n,t);case on.Keyframes:return e.visitKeyframes(n,t);case on.Style:return e.visitStyle(n,t);case on.Reference:return e.visitReference(n,t);case on.AnimateChild:return e.visitAnimateChild(n,t);case on.AnimateRef:return e.visitAnimateRef(n,t);case on.Query:return e.visitQuery(n,t);case on.Stagger:return e.visitStagger(n,t);default:throw function zH(){return new Le(3004,!1)}()}}function FC(e,n){return window.getComputedStyle(e)[n]}let BC=(()=>{class e{validateStyleProperty(t){return function gq(e){cp||(cp=function mq(){return typeof document<"u"?document.body:null}()||{},eN=!!cp.style&&"WebkitAppearance"in cp.style);let n=!0;return cp.style&&!function pq(e){return"ebkit"==e.substring(1,6)}(e)&&(n=e in cp.style,!n&&eN&&(n="Webkit"+e.charAt(0).toUpperCase()+e.slice(1)in cp.style)),n}(t)}containsElement(t,r){return tN(t,r)}getParentElement(t){return PC(t)}query(t,r,i){return nN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,d,f=[],_){return new F0(i,a)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})();class zC{static NOOP=new BC}class jC{}const Iq=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class aN extends jC{normalizePropertyName(n,t){return OC(n)}normalizeStyleValue(n,t,r,i){let a="";const d=r.toString().trim();if(Iq.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const f=r.match(/^[+-]?[\d\.]+([a-z]*)$/);f&&0==f[1].length&&i.push(function jH(){return new Le(3005,!1)}())}return d+a}}const P1=new Set(["true","1"]),A1=new Set(["false","0"]);function lN(e,n){const t=P1.has(e)||A1.has(e),r=P1.has(n)||A1.has(n);return(i,a)=>{let d="*"==e||e==i,f="*"==n||n==a;return!d&&t&&"boolean"==typeof i&&(d=i?P1.has(e):A1.has(e)),!f&&r&&"boolean"==typeof a&&(f=a?P1.has(n):A1.has(n)),d&&f}}const Pq=new RegExp("s*:selfs*,?","g");function UC(e,n,t,r){return new Aq(e).build(n,t,r)}class Aq{_driver;constructor(n){this._driver=n}build(n,t,r){const i=new Lq(t);return this._resetContextStyleTimingState(i),Xa(this,B0(n),i)}_resetContextStyleTimingState(n){n.currentQuerySelector="",n.collectedStyles=new Map,n.collectedStyles.set("",new Map),n.currentTime=0}visitTrigger(n,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],d=[];return"@"==n.name.charAt(0)&&t.errors.push(function VH(){return new Le(3006,!1)}()),n.definitions.forEach(f=>{if(this._resetContextStyleTimingState(t),f.type==on.State){const _=f,S=_.name;S.toString().split(/\s*,\s*/).forEach(M=>{_.name=M,a.push(this.visitState(_,t))}),_.name=S}else if(f.type==on.Transition){const _=this.visitTransition(f,t);r+=_.queryCount,i+=_.depCount,d.push(_)}else t.errors.push(function UH(){return new Le(3007,!1)}())}),{type:on.Trigger,name:n.name,states:a,transitions:d,queryCount:r,depCount:i,options:null}}visitState(n,t){const r=this.visitStyle(n.styles,t),i=n.options&&n.options.params||null;if(r.containsDynamicStyles){const a=new Set,d=i||{};r.styles.forEach(f=>{f instanceof Map&&f.forEach(_=>{sN(_).forEach(S=>{d.hasOwnProperty(S)||a.add(S)})})}),a.size&&t.errors.push(function $H(){return new Le(3008,!1)}(0,a.values()))}return{type:on.State,name:n.name,style:r,options:i?{params:i}:null}}visitTransition(n,t){t.queryCount=0,t.depCount=0;const r=Xa(this,B0(n.animation),t),i=function Mq(e,n){const t=[];return"string"==typeof e?e.split(/\s*,\s*/).forEach(r=>function Dq(e,n,t){if(":"==e[0]){const _=function kq(e,n){switch(e){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return n.push(function JH(){return new Le(3016,!1)}()),"* => *"}}(e,t);if("function"==typeof _)return void n.push(_);e=_}const r=e.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function QH(){return new Le(3015,!1)}()),n;const i=r[1],a=r[2],d=r[3];n.push(lN(i,d)),"<"==a[0]&&("*"!=i||"*"!=d)&&n.push(lN(d,i))}(r,t,n)):t.push(e),t}(n.expr,t.errors);return{type:on.Transition,matchers:i,animation:r,queryCount:t.queryCount,depCount:t.depCount,options:dp(n.options)}}visitSequence(n,t){return{type:on.Sequence,steps:n.steps.map(r=>Xa(this,r,t)),options:dp(n.options)}}visitGroup(n,t){const r=t.currentTime;let i=0;const a=n.steps.map(d=>{t.currentTime=r;const f=Xa(this,d,t);return i=Math.max(i,t.currentTime),f});return t.currentTime=i,{type:on.Group,steps:a,options:dp(n.options)}}visitAnimate(n,t){const r=function Fq(e,n){if(e.hasOwnProperty("duration"))return e;if("number"==typeof e)return $C(D1(e,n).duration,0,"");const t=e;if(t.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=$C(0,0,"");return a.dynamic=!0,a.strValue=t,a}const i=D1(t,n);return $C(i.duration,i.delay,i.easing)}(n.timings,t.errors);t.currentAnimateTimings=r;let i,a=n.styles?n.styles:Wg({});if(a.type==on.Keyframes)i=this.visitKeyframes(a,t);else{let d=n.styles,f=!1;if(!d){f=!0;const S={};r.easing&&(S.easing=r.easing),d=Wg(S)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(d,t);_.isEmptyStep=f,i=_}return t.currentAnimateTimings=null,{type:on.Animate,timings:r,style:i,options:null}}visitStyle(n,t){const r=this._makeStyleAst(n,t);return this._validateStyleAst(r,t),r}_makeStyleAst(n,t){const r=[],i=Array.isArray(n.styles)?n.styles:[n.styles];for(let f of i)"string"==typeof f?f===Ld?r.push(f):t.errors.push(GH()):r.push(new Map(Object.entries(f)));let a=!1,d=null;return r.forEach(f=>{if(f instanceof Map&&(f.has("easing")&&(d=f.get("easing"),f.delete("easing")),!a))for(let _ of f.values())if(_.toString().indexOf("{{")>=0){a=!0;break}}),{type:on.Style,styles:r,easing:d,offset:n.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(n,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),n.styles.forEach(d=>{"string"!=typeof d&&d.forEach((f,_)=>{const S=t.collectedStyles.get(t.currentQuerySelector),M=S.get(_);let k=!0;M&&(a!=i&&a>=M.startTime&&i<=M.endTime&&(t.errors.push(function HH(){return new Le(3010,!1)}()),k=!1),a=M.startTime),k&&S.set(_,{startTime:a,endTime:i}),t.options&&function wq(e,n,t){const r=n.params||{},i=sN(e);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(function FH(){return new Le(3001,!1)}())})}(f,t.options,t.errors)})})}visitKeyframes(n,t){const r={type:on.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function qH(){return new Le(3011,!1)}()),r;let a=0;const d=[];let f=!1,_=!1,S=0;const M=n.steps.map(_e=>{const we=this._makeStyleAst(_e,t);let Ue=null!=we.offset?we.offset:function Oq(e){if("string"==typeof e)return null;let n=null;if(Array.isArray(e))e.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;n=parseFloat(r.get("offset")),r.delete("offset")}});else if(e instanceof Map&&e.has("offset")){const t=e;n=parseFloat(t.get("offset")),t.delete("offset")}return n}(we.styles),dt=0;return null!=Ue&&(a++,dt=we.offset=Ue),_=_||dt<0||dt>1,f=f||dt<S,S=dt,d.push(dt),we});_&&t.errors.push(function WH(){return new Le(3012,!1)}()),f&&t.errors.push(function ZH(){return new Le(3200,!1)}());const k=n.steps.length;let F=0;a>0&&a<k?t.errors.push(function KH(){return new Le(3202,!1)}()):0==a&&(F=1/(k-1));const L=k-1,G=t.currentTime,Q=t.currentAnimateTimings,de=Q.duration;return M.forEach((_e,we)=>{const Ue=F>0?we==L?1:F*we:d[we],dt=Ue*de;t.currentTime=G+Q.delay+dt,Q.duration=dt,this._validateStyleAst(_e,t),_e.offset=Ue,r.styles.push(_e)}),r}visitReference(n,t){return{type:on.Reference,animation:Xa(this,B0(n.animation),t),options:dp(n.options)}}visitAnimateChild(n,t){return t.depCount++,{type:on.AnimateChild,options:dp(n.options)}}visitAnimateRef(n,t){return{type:on.AnimateRef,animation:this.visitReference(n.animation,t),options:dp(n.options)}}visitQuery(n,t){const r=t.currentQuerySelector,i=n.options||{};t.queryCount++,t.currentQuery=n;const[a,d]=function Rq(e){const n=!!e.split(/\s*,\s*/).find(t=>":self"==t);return n&&(e=e.replace(Pq,"")),e=e.replace(/@\*/g,M1).replace(/@\w+/g,t=>M1+"-"+t.slice(1)).replace(/:animating/g,RC),[e,n]}(n.selector);t.currentQuerySelector=r.length?r+" "+a:a,Ya(t.collectedStyles,t.currentQuerySelector,new Map);const f=Xa(this,B0(n.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:on.Query,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:d,animation:f,originalSelector:n.selector,options:dp(n.options)}}visitStagger(n,t){t.currentQuery||t.errors.push(function YH(){return new Le(3013,!1)}());const r="full"===n.timings?{duration:0,delay:0,easing:"full"}:D1(n.timings,t.errors,!0);return{type:on.Stagger,animation:Xa(this,B0(n.animation),t),timings:r,options:null}}}class Lq{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(n){this.errors=n}}function dp(e){return e?(e={...e}).params&&(e.params=function Nq(e){return e?{...e}:null}(e.params)):e={},e}function $C(e,n,t){return{duration:e,delay:n,easing:t}}function GC(e,n,t,r,i,a,d=null,f=!1){return{type:1,element:e,keyframes:n,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:d,subTimeline:f}}class R1{_map=new Map;get(n){return this._map.get(n)||[]}append(n,t){let r=this._map.get(n);r||this._map.set(n,r=[]),r.push(...t)}has(n){return this._map.has(n)}clear(){this._map.clear()}}const jq=new RegExp(":enter","g"),Uq=new RegExp(":leave","g");function HC(e,n,t,r,i,a=new Map,d=new Map,f,_,S=[]){return(new $q).buildKeyframes(e,n,t,r,i,a,d,f,_,S)}class $q{buildKeyframes(n,t,r,i,a,d,f,_,S,M=[]){S=S||new R1;const k=new qC(n,t,S,i,a,M,[]);k.options=_;const F=_.delay?Od(_.delay):0;k.currentTimeline.delayNextStep(F),k.currentTimeline.setStyles([d],null,k.errors,_),Xa(this,r,k);const L=k.timelines.filter(G=>G.containsAnimation());if(L.length&&f.size){let G;for(let Q=L.length-1;Q>=0;Q--){const de=L[Q];if(de.element===t){G=de;break}}G&&!G.allowOnlyTimelineStyles()&&G.setStyles([f],null,k.errors,_)}return L.length?L.map(G=>G.buildKeyframes()):[GC(t,[],[],[],0,F,"",!1)]}visitTrigger(n,t){}visitState(n,t){}visitTransition(n,t){}visitAnimateChild(n,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(n.options),a=t.currentTimeline.currentTime,d=this._visitSubInstructions(r,i,i.options);a!=d&&t.transformIntoNewTimeline(d)}t.previousNode=n}visitAnimateRef(n,t){const r=t.createSubContext(n.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([n.options,n.animation.options],t,r),this.visitReference(n.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=n}_applyAnimationRefDelays(n,t,r){for(const i of n){const a=i?.delay;if(a){const d="number"==typeof a?a:Od(z0(a,i?.params??{},t.errors));r.delayNextStep(d)}}}_visitSubInstructions(n,t,r){let a=t.currentTimeline.currentTime;const d=null!=r.duration?Od(r.duration):null,f=null!=r.delay?Od(r.delay):null;return 0!==d&&n.forEach(_=>{const S=t.appendInstructionToTimeline(_,d,f);a=Math.max(a,S.duration+S.delay)}),a}visitReference(n,t){t.updateOptions(n.options,!0),Xa(this,n.animation,t),t.previousNode=n}visitSequence(n,t){const r=t.subContextCount;let i=t;const a=n.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){i.previousNode.type==on.Style&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=N1);const d=Od(a.delay);i.delayNextStep(d)}n.steps.length&&(n.steps.forEach(d=>Xa(this,d,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=n}visitGroup(n,t){const r=[];let i=t.currentTimeline.currentTime;const a=n.options&&n.options.delay?Od(n.options.delay):0;n.steps.forEach(d=>{const f=t.createSubContext(n.options);a&&f.delayNextStep(a),Xa(this,d,f),i=Math.max(i,f.currentTimeline.currentTime),r.push(f.currentTimeline)}),r.forEach(d=>t.currentTimeline.mergeTimelineCollectedStyles(d)),t.transformIntoNewTimeline(i),t.previousNode=n}_visitTiming(n,t){if(n.dynamic){const r=n.strValue;return D1(t.params?z0(r,t.params,t.errors):r,t.errors)}return{duration:n.duration,delay:n.delay,easing:n.easing}}visitAnimate(n,t){const r=t.currentAnimateTimings=this._visitTiming(n.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=n.style;a.type==on.Keyframes?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=n}visitStyle(n,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const a=i&&i.easing||n.easing;n.isEmptyStep?r.applyEmptyStep(a):r.setStyles(n.styles,a,t.errors,t.options),t.previousNode=n}visitKeyframes(n,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,f=t.createSubContext().currentTimeline;f.easing=r.easing,n.styles.forEach(_=>{f.forwardTime((_.offset||0)*a),f.setStyles(_.styles,_.easing,t.errors,t.options),f.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(f),t.transformIntoNewTimeline(i+a),t.previousNode=n}visitQuery(n,t){const r=t.currentTimeline.currentTime,i=n.options||{},a=i.delay?Od(i.delay):0;a&&(t.previousNode.type===on.Style||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=N1);let d=r;const f=t.invokeQuery(n.selector,n.originalSelector,n.limit,n.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=f.length;let _=null;f.forEach((S,M)=>{t.currentQueryIndex=M;const k=t.createSubContext(n.options,S);a&&k.delayNextStep(a),S===t.element&&(_=k.currentTimeline),Xa(this,n.animation,k),k.currentTimeline.applyStylesToKeyframe(),d=Math.max(d,k.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(d),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=n}visitStagger(n,t){const r=t.parentContext,i=t.currentTimeline,a=n.timings,d=Math.abs(a.duration),f=d*(t.currentQueryTotal-1);let _=d*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":_=f-_;break;case"full":_=r.currentStaggerTime}const M=t.currentTimeline;_&&M.delayNextStep(_);const k=M.currentTime;Xa(this,n.animation,t),t.previousNode=n,r.currentStaggerTime=i.currentTime-k+(i.startTime-r.currentTimeline.startTime)}}const N1={};class qC{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=N1;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(n,t,r,i,a,d,f,_){this._driver=n,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=d,this.timelines=f,this.currentTimeline=_||new L1(this._driver,t,0),f.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(n,t){if(!n)return;const r=n;let i=this.options;null!=r.duration&&(i.duration=Od(r.duration)),null!=r.delay&&(i.delay=Od(r.delay));const a=r.params;if(a){let d=i.params;d||(d=this.options.params={}),Object.keys(a).forEach(f=>{(!t||!d.hasOwnProperty(f))&&(d[f]=z0(a[f],d,this.errors))})}}_copyOptions(){const n={};if(this.options){const t=this.options.params;if(t){const r=n.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return n}createSubContext(n=null,t,r){const i=t||this.element,a=new qC(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(n),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(n){return this.previousNode=N1,this.currentTimeline=this.currentTimeline.fork(this.element,n),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(n,t,r){const i={duration:t??n.duration,delay:this.currentTimeline.currentTime+(r??0)+n.delay,easing:""},a=new Gq(this._driver,n.element,n.keyframes,n.preStyleProps,n.postStyleProps,i,n.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(n){this.currentTimeline.forwardTime(this.currentTimeline.duration+n)}delayNextStep(n){n>0&&this.currentTimeline.delayNextStep(n)}invokeQuery(n,t,r,i,a,d){let f=[];if(i&&f.push(this.element),n.length>0){n=(n=n.replace(jq,"."+this._enterClassName)).replace(Uq,"."+this._leaveClassName);let S=this._driver.query(this.element,n,1!=r);0!==r&&(S=r<0?S.slice(S.length+r,S.length):S.slice(0,r)),f.push(...S)}return!a&&0==f.length&&d.push(function XH(){return new Le(3014,!1)}()),f}}class L1{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(n,t,r,i){this._driver=n,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(n){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+n),t&&this.snapshotCurrentStyles()):this.startTime+=n}fork(n,t){return this.applyStylesToKeyframe(),new L1(this._driver,n,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(n){this.applyStylesToKeyframe(),this.duration=n,this._loadKeyframe()}_updateStyle(n,t){this._localTimelineStyles.set(n,t),this._globalTimelineStyles.set(n,t),this._styleSummary.set(n,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(n){n&&this._previousKeyframe.set("easing",n);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||Ld),this._currentKeyframe.set(t,Ld);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(n,t,r,i){t&&this._previousKeyframe.set("easing",t);const a=i&&i.params||{},d=function Hq(e,n){const t=new Map;let r;return e.forEach(i=>{if("*"===i){r??=n.keys();for(let a of r)t.set(a,Ld)}else for(let[a,d]of i)t.set(a,d)}),t}(n,this._globalTimelineStyles);for(let[f,_]of d){const S=z0(_,a,r);this._pendingStyles.set(f,S),this._localTimelineStyles.has(f)||this._backFill.set(f,this._globalTimelineStyles.get(f)??Ld),this._updateStyle(f,S)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((n,t)=>{this._currentKeyframe.set(t,n)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((n,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,n)}))}snapshotCurrentStyles(){for(let[n,t]of this._localTimelineStyles)this._pendingStyles.set(n,t),this._updateStyle(n,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const n=[];for(let t in this._currentKeyframe)n.push(t);return n}mergeTimelineCollectedStyles(n){n._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const n=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((f,_)=>{const S=new Map([...this._backFill,...f]);S.forEach((M,k)=>{"!"===M?n.add(k):M===Ld&&t.add(k)}),r||S.set("offset",_/this.duration),i.push(S)});const a=[...n.values()],d=[...t.values()];if(r){const f=i[0],_=new Map(f);f.set("offset",0),_.set("offset",1),i=[f,_]}return GC(this.element,i,a,d,this.duration,this.startTime,this.easing,!1)}}class Gq extends L1{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(n,t,r,i,a,d,f=!1){super(n,t,d.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=f,this.timings={duration:d.duration,delay:d.delay,easing:d.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let n=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],d=r+t,f=t/d,_=new Map(n[0]);_.set("offset",0),a.push(_);const S=new Map(n[0]);S.set("offset",dN(f)),a.push(S);const M=n.length-1;for(let k=1;k<=M;k++){let F=new Map(n[k]);const L=F.get("offset");F.set("offset",dN((t+L*r)/d)),a.push(F)}r=d,t=0,i="",n=a}return GC(this.element,n,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function dN(e,n=3){const t=Math.pow(10,n-1);return Math.round(e*t)/t}function hN(e,n,t,r,i,a,d,f,_,S,M,k,F){return{type:0,element:e,triggerName:n,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:d,timelines:f,queriedElements:_,preStyleProps:S,postStyleProps:M,totalTime:k,errors:F}}const WC={};class fN{_triggerName;ast;_stateStyles;constructor(n,t,r){this._triggerName=n,this.ast=t,this._stateStyles=r}match(n,t,r,i){return function qq(e,n,t,r,i){return e.some(a=>a(n,t,r,i))}(this.ast.matchers,n,t,r,i)}buildStyles(n,t,r){let i=this._stateStyles.get("*");return void 0!==n&&(i=this._stateStyles.get(n?.toString())||i),i?i.buildStyles(t,r):new Map}build(n,t,r,i,a,d,f,_,S,M){const k=[],F=this.ast.options&&this.ast.options.params||WC,G=this.buildStyles(r,f&&f.params||WC,k),Q=_&&_.params||WC,de=this.buildStyles(i,Q,k),_e=new Set,we=new Map,Ue=new Map,dt="void"===i,ut={params:pN(Q,F),delay:this.ast.options?.delay},Ht=M?[]:HC(n,t,this.ast.animation,a,d,G,de,ut,S,k);let Bt=0;return Ht.forEach(Sn=>{Bt=Math.max(Sn.duration+Sn.delay,Bt)}),k.length?hN(t,this._triggerName,r,i,dt,G,de,[],[],we,Ue,Bt,k):(Ht.forEach(Sn=>{const Wn=Sn.element,Ki=Ya(we,Wn,new Set);Sn.preStyleProps.forEach(uo=>Ki.add(uo));const Yi=Ya(Ue,Wn,new Set);Sn.postStyleProps.forEach(uo=>Yi.add(uo)),Wn!==t&&_e.add(Wn)}),hN(t,this._triggerName,r,i,dt,G,de,Ht,[..._e.values()],we,Ue,Bt))}}function pN(e,n){const t={...n};return Object.entries(e).forEach(([r,i])=>{null!=i&&(t[r]=i)}),t}class Wq{styles;defaultParams;normalizer;constructor(n,t,r){this.styles=n,this.defaultParams=t,this.normalizer=r}buildStyles(n,t){const r=new Map,i=pN(n,this.defaultParams);return this.styles.styles.forEach(a=>{"string"!=typeof a&&a.forEach((d,f)=>{d&&(d=z0(d,i,t));const _=this.normalizer.normalizePropertyName(f,t);d=this.normalizer.normalizeStyleValue(f,_,d,t),r.set(f,d)})}),r}}class Kq{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(n,t,r){this.name=n,this.ast=t,this._normalizer=r,t.states.forEach(i=>{this.states.set(i.name,new Wq(i.style,i.options&&i.options.params||{},r))}),gN(this.states,"true","1"),gN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new fN(n,i,this.states))}),this.fallbackTransition=function Yq(e,n){return new fN(e,{type:on.Transition,animation:{type:on.Sequence,steps:[],options:null},matchers:[(d,f)=>!0],options:null,queryCount:0,depCount:0},n)}(n,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(n,t,r,i){return this.transitionFactories.find(d=>d.match(n,t,r,i))||null}matchStyles(n,t,r){return this.fallbackTransition.buildStyles(n,t,r)}}function gN(e,n,t){e.has(n)?e.has(t)||e.set(t,e.get(n)):e.has(t)&&e.set(n,e.get(t))}const Xq=new R1;class Qq{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(n,t,r){this.bodyNode=n,this._driver=t,this._normalizer=r}register(n,t){const r=[],a=UC(this._driver,t,r,[]);if(r.length)throw function nq(){return new Le(3503,!1)}();this._animations.set(n,a)}_buildPlayer(n,t,r){const i=n.element,a=QR(this._normalizer,n.keyframes,t,r);return this._driver.animate(i,a,n.duration,n.delay,n.easing,[],!0)}create(n,t,r={}){const i=[],a=this._animations.get(n);let d;const f=new Map;if(a?(d=HC(this._driver,t,a,iN,AC,new Map,new Map,r,Xq,i),d.forEach(M=>{const k=Ya(f,M.element,new Map);M.postStyleProps.forEach(F=>k.set(F,null))})):(i.push(function rq(){return new Le(3300,!1)}()),d=[]),i.length)throw function iq(){return new Le(3504,!1)}();f.forEach((M,k)=>{M.forEach((F,L)=>{M.set(L,this._driver.computeStyle(k,L,Ld))})});const S=Hh(d.map(M=>{const k=f.get(M.element);return this._buildPlayer(M,new Map,k)}));return this._playersById.set(n,S),S.onDestroy(()=>this.destroy(n)),this.players.push(S),S}destroy(n){const t=this._getPlayer(n);t.destroy(),this._playersById.delete(n);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(n){const t=this._playersById.get(n);if(!t)throw function oq(){return new Le(3301,!1)}();return t}listen(n,t,r,i){const a=kC(t,"","","");return MC(this._getPlayer(n),r,a,i),()=>{}}command(n,t,r,i){if("register"==r)return void this.register(n,i[0]);if("create"==r)return void this.create(n,t,i[0]||{});const a=this._getPlayer(n);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(n)}}}const mN="ng-animate-queued",ZC="ng-animate-disabled",rW=[],_N={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},iW={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},vc="__ng_removed";class KC{namespaceId;value;options;get params(){return this.options.params}constructor(n,t=""){this.namespaceId=t;const r=n&&n.hasOwnProperty("value");if(this.value=function lW(e){return e??null}(r?n.value:n),r){const{value:a,...d}=n;this.options=d}else this.options={};this.options.params||(this.options.params={})}absorbOptions(n){const t=n.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const j0="void",YC=new KC(j0);class oW{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(n,t,r){this.id=n,this.hostElement=t,this._engine=r,this._hostClassName="ng-tns-"+n,Tl(t,this._hostClassName)}listen(n,t,r,i){if(!this._triggers.has(t))throw function sq(){return new Le(3302,!1)}();if(null==r||0==r.length)throw function aq(){return new Le(3303,!1)}();if(!function cW(e){return"start"==e||"done"==e}(r))throw function lq(){return new Le(3400,!1)}();const a=Ya(this._elementListeners,n,[]),d={name:t,phase:r,callback:i};a.push(d);const f=Ya(this._engine.statesByElement,n,new Map);return f.has(t)||(Tl(n,I1),Tl(n,I1+"-"+t),f.set(t,YC)),()=>{this._engine.afterFlush(()=>{const _=a.indexOf(d);_>=0&&a.splice(_,1),this._triggers.has(t)||f.delete(t)})}}register(n,t){return!this._triggers.has(n)&&(this._triggers.set(n,t),!0)}_getTrigger(n){const t=this._triggers.get(n);if(!t)throw function cq(){return new Le(3401,!1)}();return t}trigger(n,t,r,i=!0){const a=this._getTrigger(t),d=new XC(this.id,t,n);let f=this._engine.statesByElement.get(n);f||(Tl(n,I1),Tl(n,I1+"-"+t),this._engine.statesByElement.set(n,f=new Map));let _=f.get(t);const S=new KC(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&S.absorbOptions(_.options),f.set(t,S),_||(_=YC),S.value!==j0&&_.value===S.value){if(!function hW(e,n){const t=Object.keys(e),r=Object.keys(n);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!n.hasOwnProperty(a)||e[a]!==n[a])return!1}return!0}(_.params,S.params)){const Q=[],de=a.matchStyles(_.value,_.params,Q),_e=a.matchStyles(S.value,S.params,Q);Q.length?this._engine.reportError(Q):this._engine.afterFlush(()=>{up(n,de),Ru(n,_e)})}return}const F=Ya(this._engine.playersByElement,n,[]);F.forEach(Q=>{Q.namespaceId==this.id&&Q.triggerName==t&&Q.queued&&Q.destroy()});let L=a.matchTransition(_.value,S.value,n,S.params),G=!1;if(!L){if(!i)return;L=a.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:t,transition:L,fromState:_,toState:S,player:d,isFallbackTransition:G}),G||(Tl(n,mN),d.onStart(()=>{Zg(n,mN)})),d.onDone(()=>{let Q=this.players.indexOf(d);Q>=0&&this.players.splice(Q,1);const de=this._engine.playersByElement.get(n);if(de){let _e=de.indexOf(d);_e>=0&&de.splice(_e,1)}}),this.players.push(d),F.push(d),d}deregister(n){this._triggers.delete(n),this._engine.statesByElement.forEach(t=>t.delete(n)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=n))})}clearElementCache(n){this._engine.statesByElement.delete(n),this._elementListeners.delete(n);const t=this._engine.playersByElement.get(n);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(n))}_signalRemovalForInnerTriggers(n,t){const r=this._engine.driver.query(n,M1,!0);r.forEach(i=>{if(i[vc])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(d=>d.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(n,t,r,i){const a=this._engine.statesByElement.get(n),d=new Map;if(a){const f=[];if(a.forEach((_,S)=>{if(d.set(S,_.value),this._triggers.has(S)){const M=this.trigger(n,S,j0,i);M&&f.push(M)}}),f.length)return this._engine.markElementAsRemoved(this.id,n,!0,t,d),r&&Hh(f).onDone(()=>this._engine.processLeaveNode(n)),!0}return!1}prepareLeaveAnimationListeners(n){const t=this._elementListeners.get(n),r=this._engine.statesByElement.get(n);if(t&&r){const i=new Set;t.forEach(a=>{const d=a.name;if(i.has(d))return;i.add(d);const _=this._triggers.get(d).fallbackTransition,S=r.get(d)||YC,M=new KC(j0),k=new XC(this.id,d,n);this._engine.totalQueuedPlayers++,this._queue.push({element:n,triggerName:d,transition:_,fromState:S,toState:M,player:k,isFallbackTransition:!0})})}}removeNode(n,t){const r=this._engine;if(n.childElementCount&&this._signalRemovalForInnerTriggers(n,t),this.triggerLeaveAnimation(n,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(n):[];if(a&&a.length)i=!0;else{let d=n;for(;d=d.parentNode;)if(r.statesByElement.get(d)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(n),i)r.markElementAsRemoved(this.id,n,!1,t);else{const a=n[vc];(!a||a===_N)&&(r.afterFlush(()=>this.clearElementCache(n)),r.destroyInnerAnimations(n),r._onRemovalComplete(n,t))}}insertNode(n,t){Tl(n,this._hostClassName)}drainQueuedTransitions(n){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,d=this._elementListeners.get(a);d&&d.forEach(f=>{if(f.name==r.triggerName){const _=kC(a,r.triggerName,r.fromState.value,r.toState.value);_._data=n,MC(r.player,f.phase,_,f.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,d=i.transition.ast.depCount;return 0==a||0==d?a-d:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(n){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,n)}}class sW{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(n,t)=>{};_onRemovalComplete(n,t){this.onRemovalComplete(n,t)}constructor(n,t,r){this.bodyNode=n,this.driver=t,this._normalizer=r}get queuedPlayers(){const n=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&n.push(r)})}),n}createNamespace(n,t){const r=new oW(n,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[n]=r}_balanceNamespaceList(n,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let d=!1,f=this.driver.getParentElement(t);for(;f;){const _=i.get(f);if(_){const S=r.indexOf(_);r.splice(S+1,0,n),d=!0;break}f=this.driver.getParentElement(f)}d||r.unshift(n)}else r.push(n);return i.set(t,n),n}register(n,t){let r=this._namespaceLookup[n];return r||(r=this.createNamespace(n,t)),r}registerTrigger(n,t,r){let i=this._namespaceLookup[n];i&&i.register(t,r)&&this.totalAnimations++}destroy(n,t){n&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const r=this._fetchNamespace(n);this.namespacesByHostElement.delete(r.hostElement);const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1),r.destroy(t),delete this._namespaceLookup[n]}))}_fetchNamespace(n){return this._namespaceLookup[n]}fetchNamespacesByElement(n){const t=new Set,r=this.statesByElement.get(n);if(r)for(let i of r.values())if(i.namespaceId){const a=this._fetchNamespace(i.namespaceId);a&&t.add(a)}return t}trigger(n,t,r,i){if(O1(t)){const a=this._fetchNamespace(n);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(n,t,r,i){if(!O1(t))return;const a=t[vc];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const d=this.collectedLeaveElements.indexOf(t);d>=0&&this.collectedLeaveElements.splice(d,1)}if(n){const d=this._fetchNamespace(n);d&&d.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(n){this.collectedEnterElements.push(n)}markElementAsDisabled(n,t){t?this.disabledNodes.has(n)||(this.disabledNodes.add(n),Tl(n,ZC)):this.disabledNodes.has(n)&&(this.disabledNodes.delete(n),Zg(n,ZC))}removeNode(n,t,r){if(O1(t)){const i=n?this._fetchNamespace(n):null;i?i.removeNode(t,r):this.markElementAsRemoved(n,t,!1,r);const a=this.namespacesByHostElement.get(t);a&&a.id!==n&&a.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(n,t,r,i,a){this.collectedLeaveElements.push(t),t[vc]={namespaceId:n,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(n,t,r,i,a){return O1(t)?this._fetchNamespace(n).listen(t,r,i,a):()=>{}}_buildInstruction(n,t,r,i,a){return n.transition.build(this.driver,n.element,n.fromState.value,n.toState.value,r,i,n.fromState.options,n.toState.options,t,a)}destroyInnerAnimations(n){let t=this.driver.query(n,M1,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(n,RC,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(n){const t=this.playersByElement.get(n);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(n){const t=this.playersByQueriedElement.get(n);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(n=>{if(this.players.length)return Hh(this.players).onDone(()=>n());n()})}processLeaveNode(n){const t=n[vc];if(t&&t.setForRemoval){if(n[vc]=_N,t.namespaceId){this.destroyInnerAnimations(n);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(n)}this._onRemovalComplete(n,t.setForRemoval)}n.classList?.contains(ZC)&&this.markElementAsDisabled(n,!1),this.driver.query(n,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(n=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Tl(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,n)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Hh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(n){throw function uq(){return new Le(3402,!1)}()}_flushAnimations(n,t){const r=new R1,i=[],a=new Map,d=[],f=new Map,_=new Map,S=new Map,M=new Set;this.disabledNodes.forEach(Et=>{M.add(Et);const Ft=this.driver.query(Et,".ng-animate-queued",!0);for(let qt=0;qt<Ft.length;qt++)M.add(Ft[qt])});const k=this.bodyNode,F=Array.from(this.statesByElement.keys()),L=bN(F,this.collectedEnterElements),G=new Map;let Q=0;L.forEach((Et,Ft)=>{const qt=iN+Q++;G.set(Ft,qt),Et.forEach(Mn=>Tl(Mn,qt))});const de=[],_e=new Set,we=new Set;for(let Et=0;Et<this.collectedLeaveElements.length;Et++){const Ft=this.collectedLeaveElements[Et],qt=Ft[vc];qt&&qt.setForRemoval&&(de.push(Ft),_e.add(Ft),qt.hasAnimation?this.driver.query(Ft,".ng-star-inserted",!0).forEach(Mn=>_e.add(Mn)):we.add(Ft))}const Ue=new Map,dt=bN(F,Array.from(_e));dt.forEach((Et,Ft)=>{const qt=AC+Q++;Ue.set(Ft,qt),Et.forEach(Mn=>Tl(Mn,qt))}),n.push(()=>{L.forEach((Et,Ft)=>{const qt=G.get(Ft);Et.forEach(Mn=>Zg(Mn,qt))}),dt.forEach((Et,Ft)=>{const qt=Ue.get(Ft);Et.forEach(Mn=>Zg(Mn,qt))}),de.forEach(Et=>{this.processLeaveNode(Et)})});const ut=[],Ht=[];for(let Et=this._namespaceList.length-1;Et>=0;Et--)this._namespaceList[Et].drainQueuedTransitions(t).forEach(qt=>{const Mn=qt.player,gi=qt.element;if(ut.push(Mn),this.collectedEnterElements.length){const bo=gi[vc];if(bo&&bo.setForMove){if(bo.previousTriggersValues&&bo.previousTriggersValues.has(qt.triggerName)){const Ud=bo.previousTriggersValues.get(qt.triggerName),ga=this.statesByElement.get(qt.element);if(ga&&ga.has(qt.triggerName)){const lm=ga.get(qt.triggerName);lm.value=Ud,ga.set(qt.triggerName,lm)}}return void Mn.destroy()}}const Rs=!k||!this.driver.containsElement(k,gi),vo=Ue.get(gi),Mc=G.get(gi),Rr=this._buildInstruction(qt,r,Mc,vo,Rs);if(Rr.errors&&Rr.errors.length)return void Ht.push(Rr);if(Rs)return Mn.onStart(()=>up(gi,Rr.fromStyles)),Mn.onDestroy(()=>Ru(gi,Rr.toStyles)),void i.push(Mn);if(qt.isFallbackTransition)return Mn.onStart(()=>up(gi,Rr.fromStyles)),Mn.onDestroy(()=>Ru(gi,Rr.toStyles)),void i.push(Mn);const fy=[];Rr.timelines.forEach(bo=>{bo.stretchStartingKeyframe=!0,this.disabledNodes.has(bo.element)||fy.push(bo)}),Rr.timelines=fy,r.append(gi,Rr.timelines),d.push({instruction:Rr,player:Mn,element:gi}),Rr.queriedElements.forEach(bo=>Ya(f,bo,[]).push(Mn)),Rr.preStyleProps.forEach((bo,Ud)=>{if(bo.size){let ga=_.get(Ud);ga||_.set(Ud,ga=new Set),bo.forEach((lm,py)=>ga.add(py))}}),Rr.postStyleProps.forEach((bo,Ud)=>{let ga=S.get(Ud);ga||S.set(Ud,ga=new Set),bo.forEach((lm,py)=>ga.add(py))})});if(Ht.length){const Et=[];Ht.forEach(Ft=>{Et.push(function dq(){return new Le(3505,!1)}())}),ut.forEach(Ft=>Ft.destroy()),this.reportError(Et)}const Bt=new Map,Sn=new Map;d.forEach(Et=>{const Ft=Et.element;r.has(Ft)&&(Sn.set(Ft,Ft),this._beforeAnimationBuild(Et.player.namespaceId,Et.instruction,Bt))}),i.forEach(Et=>{const Ft=Et.element;this._getPreviousPlayers(Ft,!1,Et.namespaceId,Et.triggerName,null).forEach(Mn=>{Ya(Bt,Ft,[]).push(Mn),Mn.destroy()})});const Wn=de.filter(Et=>wN(Et,_,S)),Ki=new Map;vN(Ki,this.driver,we,S,Ld).forEach(Et=>{wN(Et,_,S)&&Wn.push(Et)});const uo=new Map;L.forEach((Et,Ft)=>{vN(uo,this.driver,new Set(Et),_,"!")}),Wn.forEach(Et=>{const Ft=Ki.get(Et),qt=uo.get(Et);Ki.set(Et,new Map([...Ft?.entries()??[],...qt?.entries()??[]]))});const us=[],Vd=[],_p={};d.forEach(Et=>{const{element:Ft,player:qt,instruction:Mn}=Et;if(r.has(Ft)){if(M.has(Ft))return qt.onDestroy(()=>Ru(Ft,Mn.toStyles)),qt.disabled=!0,qt.overrideTotalTime(Mn.totalTime),void i.push(qt);let gi=_p;if(Sn.size>1){let vo=Ft;const Mc=[];for(;vo=vo.parentNode;){const Rr=Sn.get(vo);if(Rr){gi=Rr;break}Mc.push(vo)}Mc.forEach(Rr=>Sn.set(Rr,gi))}const Rs=this._buildAnimation(qt.namespaceId,Mn,Bt,a,uo,Ki);if(qt.setRealPlayer(Rs),gi===_p)us.push(qt);else{const vo=this.playersByElement.get(gi);vo&&vo.length&&(qt.parentPlayer=Hh(vo)),i.push(qt)}}else up(Ft,Mn.fromStyles),qt.onDestroy(()=>Ru(Ft,Mn.toStyles)),Vd.push(qt),M.has(Ft)&&i.push(qt)}),Vd.forEach(Et=>{const Ft=a.get(Et.element);if(Ft&&Ft.length){const qt=Hh(Ft);Et.setRealPlayer(qt)}}),i.forEach(Et=>{Et.parentPlayer?Et.syncPlayerEvents(Et.parentPlayer):Et.destroy()});for(let Et=0;Et<de.length;Et++){const Ft=de[Et],qt=Ft[vc];if(Zg(Ft,AC),qt&&qt.hasAnimation)continue;let Mn=[];if(f.size){let Rs=f.get(Ft);Rs&&Rs.length&&Mn.push(...Rs);let vo=this.driver.query(Ft,RC,!0);for(let Mc=0;Mc<vo.length;Mc++){let Rr=f.get(vo[Mc]);Rr&&Rr.length&&Mn.push(...Rr)}}const gi=Mn.filter(Rs=>!Rs.destroyed);gi.length?uW(this,Ft,gi):this.processLeaveNode(Ft)}return de.length=0,us.forEach(Et=>{this.players.push(Et),Et.onDone(()=>{Et.destroy();const Ft=this.players.indexOf(Et);this.players.splice(Ft,1)}),Et.play()}),us}afterFlush(n){this._flushFns.push(n)}afterFlushAnimationsDone(n){this._whenQuietFns.push(n)}_getPreviousPlayers(n,t,r,i,a){let d=[];if(t){const f=this.playersByQueriedElement.get(n);f&&(d=f)}else{const f=this.playersByElement.get(n);if(f){const _=!a||a==j0;f.forEach(S=>{S.queued||!_&&S.triggerName!=i||d.push(S)})}}return(r||i)&&(d=d.filter(f=>!(r&&r!=f.namespaceId||i&&i!=f.triggerName))),d}_beforeAnimationBuild(n,t,r){const a=t.element,d=t.isRemovalTransition?void 0:n,f=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const S=_.element,M=S!==a,k=Ya(r,S,[]);this._getPreviousPlayers(S,M,d,f,t.toState).forEach(L=>{const G=L.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),L.destroy(),k.push(L)})}up(a,t.fromStyles)}_buildAnimation(n,t,r,i,a,d){const f=t.triggerName,_=t.element,S=[],M=new Set,k=new Set,F=t.timelines.map(G=>{const Q=G.element;M.add(Q);const de=Q[vc];if(de&&de.removedBeforeQueried)return new F0(G.duration,G.delay);const _e=Q!==_,we=function dW(e){const n=[];return xN(e,n),n}((r.get(Q)||rW).map(Bt=>Bt.getRealPlayer())).filter(Bt=>!!Bt.element&&Bt.element===Q),Ue=a.get(Q),dt=d.get(Q),ut=QR(this._normalizer,G.keyframes,Ue,dt),Ht=this._buildPlayer(G,ut,we);if(G.subTimeline&&i&&k.add(Q),_e){const Bt=new XC(n,f,Q);Bt.setRealPlayer(Ht),S.push(Bt)}return Ht});S.forEach(G=>{Ya(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function aW(e,n,t){let r=e.get(n);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&e.delete(n)}return r}(this.playersByQueriedElement,G.element,G))}),M.forEach(G=>Tl(G,oN));const L=Hh(F);return L.onDestroy(()=>{M.forEach(G=>Zg(G,oN)),Ru(_,t.toStyles)}),k.forEach(G=>{Ya(i,G,[]).push(L)}),L}_buildPlayer(n,t,r){return t.length>0?this.driver.animate(n.element,t,n.duration,n.delay,n.easing,r):new F0(n.duration,n.delay)}}class XC{namespaceId;triggerName;element;_player=new F0;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(n,t,r){this.namespaceId=n,this.triggerName=t,this.element=r}setRealPlayer(n){this._containsRealPlayer||(this._player=n,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>MC(n,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(n.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(n){this.totalTime=n}syncPlayerEvents(n){const t=this._player;t.triggerCallback&&n.onStart(()=>t.triggerCallback("start")),n.onDone(()=>this.finish()),n.onDestroy(()=>this.destroy())}_queueEvent(n,t){Ya(this._queuedCallbacks,n,[]).push(t)}onDone(n){this.queued&&this._queueEvent("done",n),this._player.onDone(n)}onStart(n){this.queued&&this._queueEvent("start",n),this._player.onStart(n)}onDestroy(n){this.queued&&this._queueEvent("destroy",n),this._player.onDestroy(n)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(n){this.queued||this._player.setPosition(n)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(n){const t=this._player;t.triggerCallback&&t.triggerCallback(n)}}function O1(e){return e&&1===e.nodeType}function yN(e,n){const t=e.style.display;return e.style.display=n??"none",t}function vN(e,n,t,r,i){const a=[];t.forEach(_=>a.push(yN(_)));const d=[];r.forEach((_,S)=>{const M=new Map;_.forEach(k=>{const F=n.computeStyle(S,k,i);M.set(k,F),(!F||0==F.length)&&(S[vc]=iW,d.push(S))}),e.set(S,M)});let f=0;return t.forEach(_=>yN(_,a[f++])),d}function bN(e,n){const t=new Map;if(e.forEach(f=>t.set(f,[])),0==n.length)return t;const i=new Set(n),a=new Map;function d(f){if(!f)return 1;let _=a.get(f);if(_)return _;const S=f.parentNode;return _=t.has(S)?S:i.has(S)?1:d(S),a.set(f,_),_}return n.forEach(f=>{const _=d(f);1!==_&&t.get(_).push(f)}),t}function Tl(e,n){e.classList?.add(n)}function Zg(e,n){e.classList?.remove(n)}function uW(e,n,t){Hh(t).onDone(()=>e.processLeaveNode(n))}function xN(e,n){for(let t=0;t<e.length;t++){const r=e[t];r instanceof YR?xN(r.players,n):n.push(r)}}function wN(e,n,t){const r=t.get(e);if(!r)return!1;let i=n.get(e);return i?r.forEach(a=>i.add(a)):n.set(e,r),t.delete(e),!0}class V0{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(n,t)=>{};constructor(n,t,r){this._driver=t,this._normalizer=r,this._transitionEngine=new sW(n.body,t,r),this._timelineEngine=new Qq(n.body,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(n,t,r,i,a){const d=n+"-"+i;let f=this._triggerCache[d];if(!f){const _=[],M=UC(this._driver,a,_,[]);if(_.length)throw function eq(){return new Le(3404,!1)}();f=function Zq(e,n,t){return new Kq(e,n,t)}(i,M,this._normalizer),this._triggerCache[d]=f}this._transitionEngine.registerTrigger(t,i,f)}register(n,t){this._transitionEngine.register(n,t)}destroy(n,t){this._transitionEngine.destroy(n,t)}onInsert(n,t,r,i){this._transitionEngine.insertNode(n,t,r,i)}onRemove(n,t,r){this._transitionEngine.removeNode(n,t,r)}disableAnimations(n,t){this._transitionEngine.markElementAsDisabled(n,t)}process(n,t,r,i){if("@"==r.charAt(0)){const[a,d]=JR(r);this._timelineEngine.command(a,t,d,i)}else this._transitionEngine.trigger(n,t,r,i)}listen(n,t,r,i,a){if("@"==r.charAt(0)){const[d,f]=JR(r);return this._timelineEngine.listen(d,t,f,a)}return this._transitionEngine.listen(n,t,r,i,a)}flush(n=-1){this._transitionEngine.flush(n)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(n){this._transitionEngine.afterFlushAnimationsDone(n)}}let pW=(()=>{class e{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i;let a=e.initialStylesByElement.get(t);a||e.initialStylesByElement.set(t,a=new Map),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Ru(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ru(this._element,this._initialStyles),this._endStyles&&(Ru(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(up(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(up(this._element,this._endStyles),this._endStyles=null),Ru(this._element,this._initialStyles),this._state=3)}}return e})();function QC(e){let n=null;return e.forEach((t,r)=>{(function gW(e){return"display"===e||"position"===e})(r)&&(n=n||new Map,n.set(r,t))}),n}class SN{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(n,t,r,i){this.element=n,this.keyframes=t,this.options=r,this._specialStyles=i,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(n=>n()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const n=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,n,this.options),this._finalKeyframe=n.length?n[n.length-1]:new Map;const t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(n){const t=[];return n.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(n,t,r){return n.animate(this._convertKeyframesToObject(t),r)}onStart(n){this._originalOnStartFns.push(n),this._onStartFns.push(n)}onDone(n){this._originalOnDoneFns.push(n),this._onDoneFns.push(n)}onDestroy(n){this._onDestroyFns.push(n)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(n=>n()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(n=>n()),this._onDestroyFns=[])}setPosition(n){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=n*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const n=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&n.set(i,this._finished?r:FC(this.element,i))}),this.currentSnapshot=n}triggerCallback(n){const t="start"===n?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class EN{validateStyleProperty(n){return!0}validateAnimatableStyleProperty(n){return!0}containsElement(n,t){return tN(n,t)}getParentElement(n){return PC(n)}query(n,t,r){return nN(n,t,r)}computeStyle(n,t,r){return FC(n,t)}animate(n,t,r,i,a,d=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(_.easing=a);const S=new Map,M=d.filter(L=>L instanceof SN);(function Eq(e,n){return 0===e||0===n})(r,i)&&M.forEach(L=>{L.currentSnapshot.forEach((G,Q)=>S.set(Q,G))});let k=function xq(e){return e.length?e[0]instanceof Map?e:e.map(n=>new Map(Object.entries(n))):[]}(t).map(L=>new Map(L));k=function Cq(e,n,t){if(t.size&&n.length){let r=n[0],i=[];if(t.forEach((a,d)=>{r.has(d)||i.push(d),r.set(d,a)}),i.length)for(let a=1;a<n.length;a++){let d=n[a];i.forEach(f=>d.set(f,FC(e,f)))}}return n}(n,k,S);const F=function fW(e,n){let t=null,r=null;return Array.isArray(n)&&n.length?(t=QC(n[0]),n.length>1&&(r=QC(n[n.length-1]))):n instanceof Map&&(t=QC(n)),t||r?new pW(e,t,r):null}(n,k);return new SN(n,k,_,F)}}const CN="@.disabled";class TN{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(n,t,r,i){this.namespaceId=n,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(n){this.delegate.destroyNode?.(n)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(n,t){return this.delegate.createElement(n,t)}createComment(n){return this.delegate.createComment(n)}createText(n){return this.delegate.createText(n)}appendChild(n,t){this.delegate.appendChild(n,t),this.engine.onInsert(this.namespaceId,t,n,!1)}insertBefore(n,t,r,i=!0){this.delegate.insertBefore(n,t,r),this.engine.onInsert(this.namespaceId,t,n,i)}removeChild(n,t,r){this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(n,t){return this.delegate.selectRootElement(n,t)}parentNode(n){return this.delegate.parentNode(n)}nextSibling(n){return this.delegate.nextSibling(n)}setAttribute(n,t,r,i){this.delegate.setAttribute(n,t,r,i)}removeAttribute(n,t,r){this.delegate.removeAttribute(n,t,r)}addClass(n,t){this.delegate.addClass(n,t)}removeClass(n,t){this.delegate.removeClass(n,t)}setStyle(n,t,r,i){this.delegate.setStyle(n,t,r,i)}removeStyle(n,t,r){this.delegate.removeStyle(n,t,r)}setProperty(n,t,r){"@"==t.charAt(0)&&t==CN?this.disableAnimations(n,!!r):this.delegate.setProperty(n,t,r)}setValue(n,t){this.delegate.setValue(n,t)}listen(n,t,r,i){return this.delegate.listen(n,t,r,i)}disableAnimations(n,t){this.engine.disableAnimations(n,t)}}class mW extends TN{factory;constructor(n,t,r,i,a){super(t,r,i,a),this.factory=n,this.namespaceId=t}setProperty(n,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==CN?this.disableAnimations(n,r=void 0===r||!!r):this.engine.process(this.namespaceId,n,t.slice(1),r):this.delegate.setProperty(n,t,r)}listen(n,t,r,i){if("@"==t.charAt(0)){const a=function _W(e){switch(e){case"body":return document.body;case"document":return document;case"window":return window;default:return e}}(n);let d=t.slice(1),f="";return"@"!=d.charAt(0)&&([d,f]=function yW(e){const n=e.indexOf(".");return[e.substring(0,n),e.slice(n+1)]}(d)),this.engine.listen(this.namespaceId,a,d,f,_=>{this.factory.scheduleListenerCallback(_._data||-1,r,_)})}return this.delegate.listen(n,t,r,i)}}class vW{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(n,t,r){this.delegate=n,this.engine=t,this._zone=r,t.onRemovalComplete=(i,a)=>{a?.removeChild(null,i)}}createRenderer(n,t){const i=this.delegate.createRenderer(n,t);if(!n||!t?.data?.animation){const S=this._rendererCache;let M=S.get(i);return M||(M=new TN("",i,this.engine,()=>S.delete(i)),S.set(i,M)),M}const a=t.id,d=t.id+"-"+this._currentId;this._currentId++,this.engine.register(d,n);const f=S=>{Array.isArray(S)?S.forEach(f):this.engine.registerTrigger(a,d,n,S.name,S)};return t.data.animation.forEach(f),new mW(this,d,i,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(n,t,r){if(n>=0&&n<this._microtaskId)return void this._zone.run(()=>t(r));const i=this._animationCallbacksBuffer;0==i.length&&queueMicrotask(()=>{this._zone.run(()=>{i.forEach(a=>{const[d,f]=a;d(f)}),this._animationCallbacksBuffer=[]})}),i.push([t,r])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(n){this.engine.flush(),this.delegate.componentReplaced?.(n)}}const EW=[{provide:zC,useFactory:()=>new EN},{provide:tv,useFactory:()=>"BrowserAnimations"},...[{provide:jC,useFactory:function xW(){return new aN}},{provide:V0,useClass:(()=>{class e extends V0{constructor(t,r,i){super(t,r,i)}ngOnDestroy(){this.flush()}static \u0275fac=function(r){return new(r||e)(kt(Be),kt(zC),kt(jC))};static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})()},{provide:Uv,useFactory:function wW(e,n,t){return new vW(e,n,t)},deps:[EE,V0,Fn]}]];let ls=(()=>class e{static STARTS_WITH="startsWith";static CONTAINS="contains";static NOT_CONTAINS="notContains";static ENDS_WITH="endsWith";static EQUALS="equals";static NOT_EQUALS="notEquals";static IN="in";static LESS_THAN="lt";static LESS_THAN_OR_EQUAL_TO="lte";static GREATER_THAN="gt";static GREATER_THAN_OR_EQUAL_TO="gte";static BETWEEN="between";static IS="is";static IS_NOT="isNot";static BEFORE="before";static AFTER="after";static DATE_IS="dateIs";static DATE_IS_NOT="dateIsNot";static DATE_BEFORE="dateBefore";static DATE_AFTER="dateAfter"})(),MN=(()=>{class e{template;type;name;constructor(t){this.template=t}getType(){return this.name}static \u0275fac=function(r){return new(r||e)(Xt(hc))};static \u0275dir=qi({type:e,selectors:[["","pTemplate",""]],inputs:{type:"type",name:[0,"pTemplate","name"]}})}return e})(),bc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({imports:[Uh]})}return e})();function xc(e){return null==e||""===e||Array.isArray(e)&&0===e.length||!(e instanceof Date)&&"object"==typeof e&&0===Object.keys(e).length}function JC(e,n,t=new WeakSet){if(e===n)return!0;if(!e||!n||"object"!=typeof e||"object"!=typeof n||t.has(e)||t.has(n))return!1;t.add(e).add(n);let a,d,f,r=Array.isArray(e),i=Array.isArray(n);if(r&&i){if(d=e.length,d!=n.length)return!1;for(a=d;0!==a--;)if(!JC(e[a],n[a],t))return!1;return!0}if(r!=i)return!1;let _=e instanceof Date,S=n instanceof Date;if(_!=S)return!1;if(_&&S)return e.getTime()==n.getTime();let M=e instanceof RegExp,k=n instanceof RegExp;if(M!=k)return!1;if(M&&k)return e.toString()==n.toString();let F=Object.keys(e);if(d=F.length,d!==Object.keys(n).length)return!1;for(a=d;0!==a--;)if(!Object.prototype.hasOwnProperty.call(n,F[a]))return!1;for(a=d;0!==a--;)if(f=F[a],!JC(e[f],n[f],t))return!1;return!0}function AW(e,n){return JC(e,n)}function eT(e){return"function"==typeof e&&"call"in e&&"apply"in e}function Pn(e){return!xc(e)}function tT(e,n){if(!e||!n)return null;try{let t=e[n];if(Pn(t))return t}catch{}if(Object.keys(e).length){if(eT(n))return n(e);if(-1===n.indexOf("."))return e[n];{let t=n.split("."),r=e;for(let i=0,a=t.length;i<a;++i){if(null==r)return null;r=r[t[i]]}return r}}return null}function wc(e,n=!0){return e instanceof Object&&e.constructor===Object&&(n||0!==Object.keys(e).length)}function NN(e,n){let t;if(Pn(e))try{t=e.findLast(n)}catch{t=[...e].reverse().find(n)}return t}function Ps(e,...n){return eT(e)?e(...n):e}function Fd(e,n=!0){return"string"==typeof e&&(n||""!==e)}function LN(e){return Fd(e)?e.replace(/(-|_)/g,"").toLowerCase():e}function ON(e,n="",t={}){let r=LN(n).split("."),i=r.shift();return i?wc(e)?ON(Ps(e[Object.keys(e).find(d=>LN(d)===i)||""],t),r.join("."),t):void 0:Ps(e,t)}function hp(e,n){if(n){let t=n.test(e);return n.lastIndex=0,t}return!1}function U0(e){return e&&e.replace(/\/\*(?:(?!\*\/)[\s\S])*\*\/|[\r\n\t]+/g,"").replace(/ {2,}/g," ").replace(/ ([{:}]) /g,"$1").replace(/([;,]) /g,"$1").replace(/ !/g,"!").replace(/: /g,":").trim()}function BN(e){return Fd(e)?e.replace(/(_)/g,"-").replace(/[A-Z]/g,(n,t)=>0===t?n:"-"+n.toLowerCase()).toLowerCase():e}var jW=Object.defineProperty,VW=Object.defineProperties,UW=Object.getOwnPropertyDescriptors,B1=Object.getOwnPropertySymbols,zN=Object.prototype.hasOwnProperty,jN=Object.prototype.propertyIsEnumerable,VN=(e,n,t)=>n in e?jW(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,qr=(e,n)=>{for(var t in n||(n={}))zN.call(n,t)&&VN(e,t,n[t]);if(B1)for(var t of B1(n))jN.call(n,t)&&VN(e,t,n[t]);return e},fp=(e,n)=>VW(e,UW(n)),Bd=(e,n)=>{var t={};for(var r in e)zN.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&B1)for(var r of B1(e))n.indexOf(r)<0&&jN.call(e,r)&&(t[r]=e[r]);return t},Sc=function IW(){let e=new Map;return{on(n,t){let r=e.get(n);return r?r.push(t):r=[t],e.set(n,r),this},off(n,t){let r=e.get(n);return r&&r.splice(r.indexOf(t)>>>0,1),this},emit(n,t){let r=e.get(n);r&&r.forEach(i=>{i(t)})},clear(){e.clear()}}}(),qh=/{([^}]*)}/g,UN=/(\d+\s+[\+\-\*\/]\s+\d+)/g,$N=/var\([^)]+\)/g;function GN(e){return Fd(e)?e.replace(/[A-Z]/g,(n,t)=>0===t?n:"."+n.toLowerCase()).toLowerCase():e}function GW(e){return wc(e)&&e.hasOwnProperty("$value")&&e.hasOwnProperty("$type")?e.$value:e}function nT(e="",n=""){return function HW(e){return e.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}(`${Fd(e,!1)&&Fd(n,!1)?`${e}-`:e}${n}`)}function HN(e="",n=""){return`--${nT(e,n)}`}function qN(e,n="",t="",r=[],i){if(Fd(e)){let a=e.trim();if(function qW(e=""){return((e.match(/{/g)||[]).length+(e.match(/}/g)||[]).length)%2!=0}(a))return;if(hp(a,qh)){let d=a.replaceAll(qh,f=>{let _=f.replace(/{|}/g,"").split(".").filter(S=>!r.some(M=>hp(S,M)));return`var(${HN(t,BN(_.join("-")))}${Pn(i)?`, ${i}`:""})`});return hp(d.replace($N,"0"),UN)?`calc(${d})`:d}return a}if(function FW(e){return Pn(e)&&!isNaN(e)}(e))return e}function WW(e,n,t){Fd(n,!1)&&e.push(`${n}:${t};`)}function Kg(e,n){return e?`${e}{${n}}`:""}function WN(e,n){if(-1===e.indexOf("dt("))return e;function t(d,f){let _=[],S=0,M="",k=null,F=0;for(;S<=d.length;){let L=d[S];if(('"'===L||"'"===L||"`"===L)&&"\\"!==d[S-1]&&(k=k===L?null:L),!k&&("("===L&&F++,")"===L&&F--,(","===L||S===d.length)&&0===F)){let G=M.trim();G.startsWith("dt(")?_.push(WN(G,f)):_.push(r(G)),M="",S++;continue}void 0!==L&&(M+=L),S++}return _}function r(d){let f=d[0];if(('"'===f||"'"===f||"`"===f)&&d[d.length-1]===f)return d.slice(1,-1);let _=Number(d);return isNaN(_)?d:_}let i=[],a=[];for(let d=0;d<e.length;d++)if("d"===e[d]&&"dt("===e.slice(d,d+3))a.push(d),d+=2;else if(")"===e[d]&&a.length>0){let f=a.pop();0===a.length&&i.push([f,d])}if(!i.length)return e;for(let d=i.length-1;d>=0;d--){let[f,_]=i[d],k=n(...t(e.slice(f+3,_),n));e=e.slice(0,f)+k+e.slice(_+1)}return e}var Wh=(...e)=>rT(Vn.getTheme(),...e),rT=(e={},n,t,r)=>{if(n){let{variable:i,options:a}=Vn.defaults||{},{prefix:d,transform:f}=e?.options||a||{},_=hp(n,qh)?n:`{${n}}`;return"value"===r||xc(r)&&"strict"===f?Vn.getTokenValue(n):qN(_,void 0,d,[i.excludedKeyRegex],t)}return""};function $0(e,...n){return e instanceof Array?WN(e.reduce((r,i,a)=>{var d;return r+i+(null!=(d=Ps(n[a],{dt:Wh}))?d:"")},""),Wh):Ps(e,{dt:Wh})}var Ec={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(e){return{type:"class",selector:e,matched:this.pattern.test(e.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(e){return{type:"attr",selector:`:root${e}`,matched:this.pattern.test(e.trim())}}},media:{pattern:/^@media (.*)$/,resolve(e){return{type:"media",selector:e,matched:this.pattern.test(e.trim())}}},system:{pattern:/^system$/,resolve(e){return{type:"system",selector:"@media (prefers-color-scheme: dark)",matched:this.pattern.test(e.trim())}}},custom:{resolve:e=>({type:"custom",selector:e,matched:!0})}},resolve(e){let n=Object.keys(this.rules).filter(t=>"custom"!==t).map(t=>this.rules[t]);return[e].flat().map(t=>{var r;return null!=(r=n.map(i=>i.resolve(t)).find(i=>i.matched))?r:this.rules.custom.resolve(t)})}},_toVariables:(e,n)=>function XW(e,n={}){let t=Vn.defaults.variable,{prefix:r=t.prefix,selector:i=t.selector,excludedKeyRegex:a=t.excludedKeyRegex}=n,d=[],f=[],_=[{node:e,path:r}];for(;_.length;){let{node:M,path:k}=_.pop();for(let F in M){let G=GW(M[F]),Q=hp(F,a)?nT(k):nT(k,BN(F));if(wc(G))_.push({node:G,path:Q});else{WW(f,HN(Q),qN(G,Q,r,[a]));let we=Q;r&&we.startsWith(r+"-")&&(we=we.slice(r.length+1)),d.push(we.replace(/-/g,"."))}}}let S=f.join("");return{value:f,tokens:d,declarations:S,css:Kg(i,S)}}(e,{prefix:n?.prefix}),getCommon({name:e="",theme:n={},set:r,defaults:i}){var a,d,f,_,S,M,k;let G,Q,de,_e,we,Ue,dt,{preset:F,options:L}=n;if(Pn(F)&&"strict"!==L.transform){let{primitive:ut,semantic:Ht,extend:Bt}=F,Sn=Ht||{},{colorScheme:Wn}=Sn,Ki=Bd(Sn,["colorScheme"]),Yi=Bt||{},{colorScheme:uo}=Yi,us=Bd(Yi,["colorScheme"]),Vd=Wn||{},{dark:_p}=Vd,Et=Bd(Vd,["dark"]),Ft=uo||{},{dark:qt}=Ft,Mn=Bd(Ft,["dark"]),gi=Pn(ut)?this._toVariables({primitive:ut},L):{},Rs=Pn(Ki)?this._toVariables({semantic:Ki},L):{},vo=Pn(Et)?this._toVariables({light:Et},L):{},Mc=Pn(_p)?this._toVariables({dark:_p},L):{},Rr=Pn(us)?this._toVariables({semantic:us},L):{},fy=Pn(Mn)?this._toVariables({light:Mn},L):{},lx=Pn(qt)?this._toVariables({dark:qt},L):{},[bo,Ud]=[null!=(a=gi.declarations)?a:"",gi.tokens],[ga,lm]=[null!=(d=Rs.declarations)?d:"",Rs.tokens||[]],[py,Lde]=[null!=(f=vo.declarations)?f:"",vo.tokens||[]],[Ode,Fde]=[null!=(_=Mc.declarations)?_:"",Mc.tokens||[]],[Bde,zde]=[null!=(S=Rr.declarations)?S:"",Rr.tokens||[]],[jde,Vde]=[null!=(M=fy.declarations)?M:"",fy.tokens||[]],[Ude,$de]=[null!=(k=lx.declarations)?k:"",lx.tokens||[]];G=this.transformCSS(e,bo,"light","variable",L,r,i),Q=Ud,de=`${this.transformCSS(e,`${ga}${py}`,"light","variable",L,r,i)}${this.transformCSS(e,`${Ode}`,"dark","variable",L,r,i)}`,_e=[...new Set([...lm,...Lde,...Fde])],we=`${this.transformCSS(e,`${Bde}${jde}color-scheme:light`,"light","variable",L,r,i)}${this.transformCSS(e,`${Ude}color-scheme:dark`,"dark","variable",L,r,i)}`,Ue=[...new Set([...zde,...Vde,...$de])],dt=Ps(F.css,{dt:Wh})}return{primitive:{css:G,tokens:Q},semantic:{css:de,tokens:_e},global:{css:we,tokens:Ue},style:dt}},getPreset({name:e="",preset:n={},options:t,set:i,defaults:a,selector:d}){var f,_,S;let M,k,F;if(Pn(n)&&"strict"!==t.transform){let L=e.replace("-directive",""),G=n,{colorScheme:Q,extend:de,css:_e}=G,we=Bd(G,["colorScheme","extend","css"]),Ue=de||{},{colorScheme:dt}=Ue,ut=Bd(Ue,["colorScheme"]),Ht=Q||{},{dark:Bt}=Ht,Sn=Bd(Ht,["dark"]),Wn=dt||{},{dark:Ki}=Wn,Yi=Bd(Wn,["dark"]),uo=Pn(we)?this._toVariables({[L]:qr(qr({},we),ut)},t):{},us=Pn(Sn)?this._toVariables({[L]:qr(qr({},Sn),Yi)},t):{},Vd=Pn(Bt)?this._toVariables({[L]:qr(qr({},Bt),Ki)},t):{},[_p,Et]=[null!=(f=uo.declarations)?f:"",uo.tokens||[]],[Ft,qt]=[null!=(_=us.declarations)?_:"",us.tokens||[]],[Mn,gi]=[null!=(S=Vd.declarations)?S:"",Vd.tokens||[]];M=`${this.transformCSS(L,`${_p}${Ft}`,"light","variable",t,i,a,d)}${this.transformCSS(L,Mn,"dark","variable",t,i,a,d)}`,k=[...new Set([...Et,...qt,...gi])],F=Ps(_e,{dt:Wh})}return{css:M,tokens:k,style:F}},getPresetC({name:e="",theme:n={},params:t,set:r,defaults:i}){var a;let{preset:d,options:f}=n,_=null==(a=d?.components)?void 0:a[e];return this.getPreset({name:e,preset:_,options:f,params:t,set:r,defaults:i})},getPresetD({name:e="",theme:n={},params:t,set:r,defaults:i}){var a,d;let f=e.replace("-directive",""),{preset:_,options:S}=n,M=(null==(a=_?.components)?void 0:a[f])||(null==(d=_?.directives)?void 0:d[f]);return this.getPreset({name:f,preset:M,options:S,params:t,set:r,defaults:i})},applyDarkColorScheme:e=>!("none"===e.darkModeSelector||!1===e.darkModeSelector),getColorSchemeOption(e,n){var t;return this.applyDarkColorScheme(e)?this.regex.resolve(!0===e.darkModeSelector?n.options.darkModeSelector:null!=(t=e.darkModeSelector)?t:n.options.darkModeSelector):[]},getLayerOrder(e,n={},t,r){let{cssLayer:i}=n;return i?`@layer ${Ps(i.order||i.name||"primeui",t)}`:""},getCommonStyleSheet({name:e="",theme:n={},params:t,props:r={},set:i,defaults:a}){let d=this.getCommon({name:e,theme:n,params:t,set:i,defaults:a}),f=Object.entries(r).reduce((_,[S,M])=>_.push(`${S}="${M}"`)&&_,[]).join(" ");return Object.entries(d||{}).reduce((_,[S,M])=>{if(wc(M)&&Object.hasOwn(M,"css")){let k=U0(M.css);_.push(`<style type="text/css" data-primevue-style-id="${S}-variables" ${f}>${k}</style>`)}return _},[]).join("")},getStyleSheet({name:e="",theme:n={},params:t,props:r={},set:i,defaults:a}){var d;let f={name:e,theme:n,params:t,set:i,defaults:a},_=null==(d=e.includes("-directive")?this.getPresetD(f):this.getPresetC(f))?void 0:d.css,S=Object.entries(r).reduce((M,[k,F])=>M.push(`${k}="${F}"`)&&M,[]).join(" ");return _?`<style type="text/css" data-primevue-style-id="${e}-variables" ${S}>${U0(_)}</style>`:""},createTokens(e={},n,t="",r="",i={}){let a=function(f,_={},S=[]){if(S.includes(this.path))return console.warn(`Circular reference detected at ${this.path}`),{colorScheme:f,path:this.path,paths:_,value:void 0};S.push(this.path),_.name=this.path,_.binding||(_.binding={});let M=this.value;if("string"==typeof this.value&&qh.test(this.value)){let k=this.value.trim().replace(qh,F=>{var L;let G=F.slice(1,-1),Q=this.tokens[G];if(!Q)return console.warn(`Token not found for path: ${G}`),"__UNRESOLVED__";let de=Q.computed(f,_,S);return Array.isArray(de)&&2===de.length?`light-dark(${de[0].value},${de[1].value})`:null!=(L=de?.value)?L:"__UNRESOLVED__"});M=UN.test(k.replace($N,"0"))?`calc(${k})`:k}return xc(_.binding)&&delete _.binding,S.pop(),{colorScheme:f,path:this.path,paths:_,value:M.includes("__UNRESOLVED__")?void 0:M}},d=(f,_,S)=>{Object.entries(f).forEach(([M,k])=>{let F=hp(M,n.variable.excludedKeyRegex)?_:_?`${_}.${GN(M)}`:GN(M),L=S?`${S}.${M}`:M;wc(k)?d(k,F,L):(i[F]||(i[F]={paths:[],computed:(G,Q={},de=[])=>{if(1===i[F].paths.length)return i[F].paths[0].computed(i[F].paths[0].scheme,Q.binding,de);if(G&&"none"!==G)for(let _e=0;_e<i[F].paths.length;_e++){let we=i[F].paths[_e];if(we.scheme===G)return we.computed(G,Q.binding,de)}return i[F].paths.map(_e=>_e.computed(_e.scheme,Q[_e.scheme],de))}}),i[F].paths.push({path:L,value:k,scheme:L.includes("colorScheme.light")?"light":L.includes("colorScheme.dark")?"dark":"none",computed:a,tokens:i}))})};return d(e,t,r),i},getTokenValue(e,n,t){var r;let i=n.split(".").filter(_=>!hp(_.toLowerCase(),t.variable.excludedKeyRegex)).join("."),a=n.includes("colorScheme.light")?"light":n.includes("colorScheme.dark")?"dark":void 0,d=[null==(r=e[i])?void 0:r.computed(a)].flat().filter(f=>f);return 1===d.length?d[0].value:d.reduce((f={},_)=>{let S=_,{colorScheme:M}=S,k=Bd(S,["colorScheme"]);return f[M]=k,f},void 0)},getSelectorRule:(e,n,t,r)=>"class"===t||"attr"===t?Kg(Pn(n)?`${e}${n},${e} ${n}`:e,r):Kg(e,Kg(n??":root",r)),transformCSS(e,n,t,r,i={},a,d,f){if(Pn(n)){let{cssLayer:_}=i;if("style"!==r){let S=this.getColorSchemeOption(i,d);n="dark"===t?S.reduce((M,{type:k,selector:F})=>(Pn(F)&&(M+=F.includes("[CSS]")?F.replace("[CSS]",n):this.getSelectorRule(F,f,k,n)),M),""):Kg(f??":root",n)}if(_){let S={name:"primeui",order:"primeui"};wc(_)&&(S.name=Ps(_.name,{name:e,type:r})),Pn(S.name)&&(n=Kg(`@layer ${S.name}`,n),a?.layerNames(S.name))}return n}return""}},Vn={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(e={}){let{theme:n}=e;n&&(this._theme=fp(qr({},n),{options:qr(qr({},this.defaults.options),n.options)}),this._tokens=Ec.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var e;return(null==(e=this.theme)?void 0:e.preset)||{}},get options(){var e;return(null==(e=this.theme)?void 0:e.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(e){this.update({theme:e}),Sc.emit("theme:change",e)},getPreset(){return this.preset},setPreset(e){this._theme=fp(qr({},this.theme),{preset:e}),this._tokens=Ec.createTokens(e,this.defaults),this.clearLoadedStyleNames(),Sc.emit("preset:change",e),Sc.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(e){this._theme=fp(qr({},this.theme),{options:e}),this.clearLoadedStyleNames(),Sc.emit("options:change",e),Sc.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(e){this._layerNames.add(e)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(e){return Ec.getTokenValue(this.tokens,e,this.defaults)},getCommon(e="",n){return Ec.getCommon({name:e,theme:this.theme,params:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(e="",n){let t={name:e,theme:this.theme,params:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ec.getPresetC(t)},getDirective(e="",n){let t={name:e,theme:this.theme,params:n,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ec.getPresetD(t)},getCustomPreset(e="",n,t,r){let i={name:e,preset:n,options:this.options,selector:t,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return Ec.getPreset(i)},getLayerOrderCSS(e=""){return Ec.getLayerOrder(e,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(e="",n,t="style",r){return Ec.transformCSS(e,n,r,t,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(e="",n,t={}){return Ec.getCommonStyleSheet({name:e,theme:this.theme,params:n,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(e,n,t={}){return Ec.getStyleSheet({name:e,theme:this.theme,params:n,props:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(e){this._loadingStyles.add(e)},onStyleUpdated(e){this._loadingStyles.add(e)},onStyleLoaded(e,{name:n}){this._loadingStyles.size&&(this._loadingStyles.delete(n),Sc.emit(`theme:${n}:load`,e),!this._loadingStyles.size&&Sc.emit("theme:load"))}};function G0(e,n){return!!e&&(e.classList?e.classList.contains(n):new RegExp("(^| )"+n+"( |$)","gi").test(e.className))}function Yg(e,n){if(e&&n){let t=r=>{e.classList?e.classList.remove(r):e.className=e.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," ")};[n].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(t))}}function sT(e){return e?Math.abs(e.scrollLeft):0}function JN(){let e=document.documentElement;return(window.pageXOffset||sT(e))-(e.clientLeft||0)}function eL(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function Il(e,n){if(e instanceof HTMLElement){let t=e.offsetWidth;if(n){let r=getComputedStyle(e);t+=parseFloat(r.marginLeft)+parseFloat(r.marginRight)}return t}return 0}function nL(e){return!!(null!==e&&typeof e<"u"&&e.nodeName&&function aT(e){if(e){let n=e.parentNode;return n&&n instanceof ShadowRoot&&n.host&&(n=n.host),n}return null}(e))}function Zh(e){return typeof Element<"u"?e instanceof Element:null!==e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName}function rL(e){let n=e;return e&&"object"==typeof e&&(Object.hasOwn(e,"current")?n=e.current:Object.hasOwn(e,"el")&&(n=Object.hasOwn(e.el,"nativeElement")?e.el.nativeElement:e.el)),Zh(n)?n:void 0}function iL(e,n){let t=function iZ(e,n){var t,r,i,f;if(e)switch(e){case"document":return document;case"window":return window;case"body":return document.body;case"@next":return n?.nextElementSibling;case"@prev":return n?.previousElementSibling;case"@first":return n?.firstElementChild;case"@last":return n?.lastElementChild;case"@child":return null==(t=n?.children)?void 0:t[0];case"@parent":return n?.parentElement;case"@grandparent":return null==(r=n?.parentElement)?void 0:r.parentElement;default:{if("string"==typeof e){let f=e.match(/^@child\[(\d+)]/);return f?(null==(i=n?.children)?void 0:i[parseInt(f[1],10)])||null:document.querySelector(e)||null}let a="function"==typeof(f=e)&&"call"in f&&"apply"in f?e():e,d=rL(a);return nL(d)?d:9===a?.nodeType?a:void 0}}}(e,n);if(!t)throw new Error("Cannot append "+n+" to "+e);t.appendChild(n)}function uT(e,n={}){if(Zh(e)){let t=(r,i)=>{var a,d;let f=null!=(a=e?.$attrs)&&a[r]?[null==(d=e?.$attrs)?void 0:d[r]]:[];return[i].flat().reduce((_,S)=>{if(null!=S){let M=typeof S;if("string"===M||"number"===M)_.push(S);else if("object"===M){let k=Array.isArray(S)?t(r,S):Object.entries(S).map(([F,L])=>"style"!==r||!L&&0!==L?L?F:void 0:`${F.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${L}`);_=k.length?_.concat(k.filter(F=>!!F)):_}}return _},f)};Object.entries(n).forEach(([r,i])=>{if(null!=i){let a=r.match(/^on(.+)/);a?e.addEventListener(a[1].toLowerCase(),i):"p-bind"===r||"pBind"===r?uT(e,i):(i="class"===r?[...new Set(t("class",i))].join(" ").trim():"style"===r?t("style",i).join(";").trim():i,(e.$attrs=e.$attrs||{})&&(e.$attrs[r]=i),e.setAttribute(r,i))}})}}function da(e,n){return Zh(e)?e.matches(n)?e:e.querySelector(n):null}function V1(e,n){e&&document.activeElement!==e&&e.focus(n)}function H0(e,n){if(Zh(e)){let t=e.getAttribute(n);return isNaN(t)?"true"===t||"false"===t?"true"===t:t:+t}}function sL(e){if(e){let n=e.offsetHeight,t=getComputedStyle(e);return n-=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)+parseFloat(t.borderTopWidth)+parseFloat(t.borderBottomWidth),n}return 0}function Nu(e,n){if(e){let t=e.offsetHeight;if(n){let r=getComputedStyle(e);t+=parseFloat(r.marginTop)+parseFloat(r.marginBottom)}return t}return 0}function cL(e){if(e){let n=e.offsetWidth,t=getComputedStyle(e);return n-=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight)+parseFloat(t.borderLeftWidth)+parseFloat(t.borderRightWidth),n}return 0}let yZ=0,vZ=(()=>{class e{document=Fe(Be);use(t,r={}){let a=t,d=null;const{immediate:f=!0,manual:_=!1,name:S="style_"+ ++yZ,id:M,media:k,nonce:F,first:L=!1,props:G={}}=r;if(this.document){if(d=this.document.querySelector(`style[data-primeng-style-id="${S}"]`)||M&&this.document.getElementById(M)||this.document.createElement("style"),!d.isConnected){a=t;const Q=this.document.head;L&&Q.firstChild?Q.insertBefore(d,Q.firstChild):Q.appendChild(d),uT(d,{type:"text/css",media:k,nonce:F,"data-primeng-style-id":S})}return d.textContent!==a&&(d.textContent=a),{id:M,name:S,el:d,css:a}}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var q0={_loadedStyleNames:new Set,getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()}};let Cc=(()=>{class e{name="base";useStyle=Fe(vZ);theme=void 0;css=void 0;classes={};inlineStyles={};load=(t,r={},i=a=>a)=>{const a=i($0`${Ps(t,{dt:Wh})}`);return a?this.useStyle.use(U0(a),{name:this.name,...r}):{}};loadCSS=(t={})=>this.load(this.css,t);loadTheme=(t={},r="")=>this.load(this.theme,t,(i="")=>Vn.transformCSS(t.name||this.name,`${i}${$0`${r}`}`));loadGlobalCSS=(t={})=>this.load("\n.p-hidden-accessible {\n    border: 0;\n    clip: rect(0 0 0 0);\n    height: 1px;\n    margin: -1px;\n    overflow: hidden;\n    padding: 0;\n    position: absolute;\n    width: 1px;\n}\n\n.p-hidden-accessible input,\n.p-hidden-accessible select {\n    transform: scale(0);\n}\n\n.p-overflow-hidden {\n    overflow: hidden;\n    padding-right: dt('scrollbar.width');\n}\n",t);loadGlobalTheme=(t={},r="")=>this.load("\n    *,\n    ::before,\n    ::after {\n        box-sizing: border-box;\n    }\n\n    /* Non vue overlay animations */\n    .p-connected-overlay {\n        opacity: 0;\n        transform: scaleY(0.8);\n        transition:\n            transform 0.12s cubic-bezier(0, 0, 0.2, 1),\n            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .p-connected-overlay-visible {\n        opacity: 1;\n        transform: scaleY(1);\n    }\n\n    .p-connected-overlay-hidden {\n        opacity: 0;\n        transform: scaleY(1);\n        transition: opacity 0.1s linear;\n    }\n\n    /* Vue based overlay animations */\n    .p-connected-overlay-enter-from {\n        opacity: 0;\n        transform: scaleY(0.8);\n    }\n\n    .p-connected-overlay-leave-to {\n        opacity: 0;\n    }\n\n    .p-connected-overlay-enter-active {\n        transition:\n            transform 0.12s cubic-bezier(0, 0, 0.2, 1),\n            opacity 0.12s cubic-bezier(0, 0, 0.2, 1);\n    }\n\n    .p-connected-overlay-leave-active {\n        transition: opacity 0.1s linear;\n    }\n\n    /* Toggleable Content */\n    .p-toggleable-content-enter-from,\n    .p-toggleable-content-leave-to {\n        max-height: 0;\n    }\n\n    .p-toggleable-content-enter-to,\n    .p-toggleable-content-leave-from {\n        max-height: 1000px;\n    }\n\n    .p-toggleable-content-leave-active {\n        overflow: hidden;\n        transition: max-height 0.45s cubic-bezier(0, 1, 0, 1);\n    }\n\n    .p-toggleable-content-enter-active {\n        overflow: hidden;\n        transition: max-height 1s ease-in-out;\n    }\n\n    .p-disabled,\n    .p-disabled * {\n        cursor: default;\n        pointer-events: none;\n        user-select: none;\n    }\n\n    .p-disabled,\n    .p-component:disabled {\n        opacity: dt('disabled.opacity');\n    }\n\n    .pi {\n        font-size: dt('icon.size');\n    }\n\n    .p-icon {\n        width: dt('icon.size');\n        height: dt('icon.size');\n    }\n\n    .p-overlay-mask {\n        background: dt('mask.background');\n        color: dt('mask.color');\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n    }\n\n    .p-overlay-mask-enter {\n        animation: p-overlay-mask-enter-animation dt('mask.transition.duration') forwards;\n    }\n\n    .p-overlay-mask-leave {\n        animation: p-overlay-mask-leave-animation dt('mask.transition.duration') forwards;\n    }\n\n    @keyframes p-overlay-mask-enter-animation {\n        from {\n            background: transparent;\n        }\n        to {\n            background: dt('mask.background');\n        }\n    }\n    @keyframes p-overlay-mask-leave-animation {\n        from {\n            background: dt('mask.background');\n        }\n        to {\n            background: transparent;\n        }\n    }\n",t,(i="")=>Vn.transformCSS(t.name||this.name,`${i}${$0`${r}`}`));getCommonTheme=t=>Vn.getCommon(this.name,t);getComponentTheme=t=>Vn.getComponent(this.name,t);getDirectiveTheme=t=>Vn.getDirective(this.name,t);getPresetTheme=(t,r,i)=>Vn.getCustomPreset(this.name,t,r,i);getLayerOrderThemeCSS=()=>Vn.getLayerOrderCSS(this.name);getStyleSheet=(t="",r={})=>{if(this.css){const a=U0($0`${Ps(this.css,{dt:Wh})}${t}`),d=Object.entries(r).reduce((f,[_,S])=>f.push(`${_}="${S}"`)&&f,[]).join(" ");return`<style type="text/css" data-primeng-style-id="${this.name}" ${d}>${a}</style>`}return""};getCommonThemeStyleSheet=(t,r={})=>Vn.getCommonStyleSheet(this.name,t,r);getThemeStyleSheet=(t,r={})=>{let i=[Vn.getStyleSheet(this.name,t,r)];if(this.theme){const a="base"===this.name?"global-style":`${this.name}-style`,d=$0`${Ps(this.theme,{dt:Wh})}`,f=U0(Vn.transformCSS(a,d)),_=Object.entries(r).reduce((S,[M,k])=>S.push(`${M}="${k}"`)&&S,[]).join(" ");i.push(`<style type="text/css" data-primeng-style-id="${a}" ${_}>${f}</style>`)}return i.join("")};static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xZ=(()=>{class e{theme=kn(void 0);csp=kn({nonce:void 0});isThemeChanged=!1;document=Fe(Be);baseStyle=Fe(Cc);constructor(){Ub(()=>{Sc.on("theme:change",t=>{co(()=>{this.isThemeChanged=!0,this.theme.set(t)})})}),Ub(()=>{const t=this.theme();this.document&&t&&(this.isThemeChanged||this.onThemeChange(t),this.isThemeChanged=!1)})}ngOnDestroy(){Vn.clearLoadedStyleNames(),Sc.clear()}onThemeChange(t){Vn.setTheme(t),this.document&&this.loadCommonTheme()}loadCommonTheme(){if("none"!==this.theme()&&!Vn.isStyleNameLoaded("common")){const{primitive:t,semantic:r,global:i,style:a}=this.baseStyle.getCommonTheme?.()||{},d={nonce:this.csp?.()?.nonce};this.baseStyle.load(t?.css,{name:"primitive-variables",...d}),this.baseStyle.load(r?.css,{name:"semantic-variables",...d}),this.baseStyle.load(i?.css,{name:"global-variables",...d}),this.baseStyle.loadGlobalTheme({name:"global-style",...d},a),Vn.setLoadedStyleName("common")}}setThemeConfig(t){const{theme:r,csp:i}=t||{};r&&this.theme.set(r),i&&this.csp.set(i)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),uL=(()=>{class e extends xZ{ripple=kn(!1);platformId=Fe(dd);inputStyle=kn(null);inputVariant=kn(null);overlayAppendTo=kn("self");overlayOptions={};csp=kn({nonce:void 0});filterMatchModeOptions={text:[ls.STARTS_WITH,ls.CONTAINS,ls.NOT_CONTAINS,ls.ENDS_WITH,ls.EQUALS,ls.NOT_EQUALS],numeric:[ls.EQUALS,ls.NOT_EQUALS,ls.LESS_THAN,ls.LESS_THAN_OR_EQUAL_TO,ls.GREATER_THAN,ls.GREATER_THAN_OR_EQUAL_TO],date:[ls.DATE_IS,ls.DATE_IS_NOT,ls.DATE_BEFORE,ls.DATE_AFTER]};translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",completed:"Completed",upload:"Upload",cancel:"Cancel",pending:"Pending",fileSizeTypes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],chooseYear:"Choose Year",chooseMonth:"Choose Month",chooseDate:"Choose Date",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",prevHour:"Previous Hour",nextHour:"Next Hour",prevMinute:"Previous Minute",nextMinute:"Next Minute",prevSecond:"Previous Second",nextSecond:"Next Second",am:"am",pm:"pm",dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",searchMessage:"Search results are available",selectionMessage:"{0} items selected",emptySelectionMessage:"No selected item",emptySearchMessage:"No results found",emptyFilterMessage:"No results found",fileChosenMessage:"Files",noFileChosenMessage:"No file chosen",aria:{trueLabel:"True",falseLabel:"False",nullLabel:"Not Selected",star:"1 star",stars:"{star} stars",selectAll:"All items selected",unselectAll:"All items unselected",close:"Close",previous:"Previous",next:"Next",navigation:"Navigation",scrollTop:"Scroll Top",moveTop:"Move Top",moveUp:"Move Up",moveDown:"Move Down",moveBottom:"Move Bottom",moveToTarget:"Move to Target",moveToSource:"Move to Source",moveAllToTarget:"Move All to Target",moveAllToSource:"Move All to Source",pageLabel:"{page}",firstPageLabel:"First Page",lastPageLabel:"Last Page",nextPageLabel:"Next Page",prevPageLabel:"Previous Page",rowsPerPageLabel:"Rows per page",previousPageLabel:"Previous Page",jumpToPageDropdownLabel:"Jump to Page Dropdown",jumpToPageInputLabel:"Jump to Page Input",selectRow:"Row Selected",unselectRow:"Row Unselected",expandRow:"Row Expanded",collapseRow:"Row Collapsed",showFilterMenu:"Show Filter Menu",hideFilterMenu:"Hide Filter Menu",filterOperator:"Filter Operator",filterConstraint:"Filter Constraint",editRow:"Row Edit",saveEdit:"Save Edit",cancelEdit:"Cancel Edit",listView:"List View",gridView:"Grid View",slide:"Slide",slideNumber:"{slideNumber}",zoomImage:"Zoom Image",zoomIn:"Zoom In",zoomOut:"Zoom Out",rotateRight:"Rotate Right",rotateLeft:"Rotate Left",listLabel:"Option List",selectColor:"Select a color",removeLabel:"Remove",browseFiles:"Browse Files",maximizeLabel:"Maximize"}};zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100};translationSource=new ii;translationObserver=this.translationSource.asObservable();getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}setConfig(t){const{csp:r,ripple:i,inputStyle:a,inputVariant:d,theme:f,overlayOptions:_,translation:S,filterMatchModeOptions:M,overlayAppendTo:k}=t||{};r&&this.csp.set(r),k&&this.overlayAppendTo.set(k),i&&this.ripple.set(i),a&&this.inputStyle.set(a),d&&this.inputVariant.set(d),_&&(this.overlayOptions=_),S&&this.setTranslation(S),M&&(this.filterMatchModeOptions=M),f&&this.setThemeConfig({theme:f,csp:r})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const wZ=new Ye("PRIME_NG_CONFIG");var hie={primitive:{borderRadius:{none:"0",xs:"2px",sm:"4px",md:"6px",lg:"8px",xl:"12px"},emerald:{50:"#E8F6F1",100:"#C5EBE1",200:"#9EDFCF",300:"#76D3BD",400:"#58C9AF",500:"#3BBFA1",600:"#35AF94",700:"#2D9B83",800:"#268873",900:"#1A6657",950:"#0d3329"},green:{50:"#E8F5E9",100:"#C8E6C9",200:"#A5D6A7",300:"#81C784",400:"#66BB6A",500:"#4CAF50",600:"#43A047",700:"#388E3C",800:"#2E7D32",900:"#1B5E20",950:"#0e2f10"},lime:{50:"#F9FBE7",100:"#F0F4C3",200:"#E6EE9C",300:"#DCE775",400:"#D4E157",500:"#CDDC39",600:"#C0CA33",700:"#AFB42B",800:"#9E9D24",900:"#827717",950:"#413c0c"},red:{50:"#FFEBEE",100:"#FFCDD2",200:"#EF9A9A",300:"#E57373",400:"#EF5350",500:"#F44336",600:"#E53935",700:"#D32F2F",800:"#C62828",900:"#B71C1C",950:"#5c0e0e"},orange:{50:"#FFF3E0",100:"#FFE0B2",200:"#FFCC80",300:"#FFB74D",400:"#FFA726",500:"#FF9800",600:"#FB8C00",700:"#F57C00",800:"#EF6C00",900:"#E65100",950:"#732900"},amber:{50:"#FFF8E1",100:"#FFECB3",200:"#FFE082",300:"#FFD54F",400:"#FFCA28",500:"#FFC107",600:"#FFB300",700:"#FFA000",800:"#FF8F00",900:"#FF6F00",950:"#803800"},yellow:{50:"#FFFDE7",100:"#FFF9C4",200:"#FFF59D",300:"#FFF176",400:"#FFEE58",500:"#FFEB3B",600:"#FDD835",700:"#FBC02D",800:"#F9A825",900:"#F57F17",950:"#7b400c"},teal:{50:"#E0F2F1",100:"#B2DFDB",200:"#80CBC4",300:"#4DB6AC",400:"#26A69A",500:"#009688",600:"#00897B",700:"#00796B",800:"#00695C",900:"#004D40",950:"#002720"},cyan:{50:"#E0F7FA",100:"#B2EBF2",200:"#80DEEA",300:"#4DD0E1",400:"#26C6DA",500:"#00BCD4",600:"#00ACC1",700:"#0097A7",800:"#00838F",900:"#006064",950:"#003032"},sky:{50:"#E1F5FE",100:"#B3E5FC",200:"#81D4FA",300:"#4FC3F7",400:"#29B6F6",500:"#03A9F4",600:"#039BE5",700:"#0288D1",800:"#0277BD",900:"#01579B",950:"#012c4e"},blue:{50:"#E3F2FD",100:"#BBDEFB",200:"#90CAF9",300:"#64B5F6",400:"#42A5F5",500:"#2196F3",600:"#1E88E5",700:"#1976D2",800:"#1565C0",900:"#0D47A1",950:"#072451"},indigo:{50:"#E8EAF6",100:"#C5CAE9",200:"#9FA8DA",300:"#7986CB",400:"#5C6BC0",500:"#3F51B5",600:"#3949AB",700:"#303F9F",800:"#283593",900:"#1A237E",950:"#0d123f"},violet:{50:"#EDE7F6",100:"#D1C4E9",200:"#B39DDB",300:"#9575CD",400:"#7E57C2",500:"#673AB7",600:"#5E35B1",700:"#512DA8",800:"#4527A0",900:"#311B92",950:"#190e49"},purple:{50:"#F3E5F5",100:"#E1BEE7",200:"#CE93D8",300:"#BA68C8",400:"#AB47BC",500:"#9C27B0",600:"#8E24AA",700:"#7B1FA2",800:"#6A1B9A",900:"#4A148C",950:"#250a46"},fuchsia:{50:"#FDE6F3",100:"#FBC1E3",200:"#F897D1",300:"#F56DBF",400:"#F34DB2",500:"#F12DA5",600:"#E0289D",700:"#CC2392",800:"#B81E88",900:"#951777",950:"#4b0c3c"},pink:{50:"#FCE4EC",100:"#F8BBD0",200:"#F48FB1",300:"#F06292",400:"#EC407A",500:"#E91E63",600:"#D81B60",700:"#C2185B",800:"#AD1457",900:"#880E4F",950:"#440728"},rose:{50:"#FFF0F0",100:"#FFD9D9",200:"#FFC0C0",300:"#FFA7A7",400:"#FF8E8E",500:"#FF7575",600:"#FF5252",700:"#FF3838",800:"#F71C1C",900:"#D50000",950:"#3E0000"},slate:{50:"#f8fafc",100:"#f1f5f9",200:"#e2e8f0",300:"#cbd5e1",400:"#94a3b8",500:"#64748b",600:"#475569",700:"#334155",800:"#1e293b",900:"#0f172a",950:"#020617"},gray:{50:"#f9fafb",100:"#f3f4f6",200:"#e5e7eb",300:"#d1d5db",400:"#9ca3af",500:"#6b7280",600:"#4b5563",700:"#374151",800:"#1f2937",900:"#111827",950:"#030712"},zinc:{50:"#fafafa",100:"#f4f4f5",200:"#e4e4e7",300:"#d4d4d8",400:"#a1a1aa",500:"#71717a",600:"#52525b",700:"#3f3f46",800:"#27272a",900:"#18181b",950:"#09090b"},neutral:{50:"#fafafa",100:"#f5f5f5",200:"#e5e5e5",300:"#d4d4d4",400:"#a3a3a3",500:"#737373",600:"#525252",700:"#404040",800:"#262626",900:"#171717",950:"#0a0a0a"},stone:{50:"#fafaf9",100:"#f5f5f4",200:"#e7e5e4",300:"#d6d3d1",400:"#a8a29e",500:"#78716c",600:"#57534e",700:"#44403c",800:"#292524",900:"#1c1917",950:"#0c0a09"}},semantic:{transitionDuration:"0.2s",focusRing:{width:"0",style:"none",color:"unset",offset:"0"},disabledOpacity:"0.38",iconSize:"1rem",anchorGutter:"0",primary:{50:"{emerald.50}",100:"{emerald.100}",200:"{emerald.200}",300:"{emerald.300}",400:"{emerald.400}",500:"{emerald.500}",600:"{emerald.600}",700:"{emerald.700}",800:"{emerald.800}",900:"{emerald.900}",950:"{emerald.950}"},formField:{paddingX:"0.75rem",paddingY:"0.75rem",sm:{fontSize:"0.875rem",paddingX:"0.625rem",paddingY:"0.625rem"},lg:{fontSize:"1.125rem",paddingX:"0.825rem",paddingY:"0.825rem"},borderRadius:"{border.radius.sm}",focusRing:{width:"2px",style:"solid",color:"{primary.color}",offset:"-2px",shadow:"none"},transitionDuration:"{transition.duration}"},list:{padding:"0.5rem 0",gap:"0",header:{padding:"0.75rem 1rem"},option:{padding:"0.75rem 1rem",borderRadius:"{border.radius.none}"},optionGroup:{padding:"0.75rem 1rem",fontWeight:"700"}},content:{borderRadius:"{border.radius.sm}"},mask:{transitionDuration:"0.15s"},navigation:{list:{padding:"0.5rem 0",gap:"0"},item:{padding:"0.75rem 1rem",borderRadius:"{border.radius.none}",gap:"0.5rem"},submenuLabel:{padding:"0.75rem 1rem",fontWeight:"700"},submenuIcon:{size:"0.875rem"}},overlay:{select:{borderRadius:"{border.radius.sm}",shadow:"0 5px 5px -3px rgba(0,0,0,.2), 0 8px 10px 1px rgba(0,0,0,.14), 0 3px 14px 2px rgba(0,0,0,.12)"},popover:{borderRadius:"{border.radius.sm}",padding:"1rem",shadow:"0 11px 15px -7px rgba(0,0,0,.2), 0 24px 38px 3px rgba(0,0,0,.14), 0 9px 46px 8px rgba(0,0,0,.12)"},modal:{borderRadius:"{border.radius.sm}",padding:"1.5rem",shadow:"0 11px 15px -7px rgba(0,0,0,.2), 0 24px 38px 3px rgba(0,0,0,.14), 0 9px 46px 8px rgba(0,0,0,.12)"},navigation:{shadow:"0 2px 4px -1px rgba(0,0,0,.2), 0 4px 5px 0 rgba(0,0,0,.14), 0 1px 10px 0 rgba(0,0,0,.12)"}},colorScheme:{light:{focusRing:{shadow:"0 0 1px 4px {surface.200}"},surface:{0:"#ffffff",50:"{slate.50}",100:"{slate.100}",200:"{slate.200}",300:"{slate.300}",400:"{slate.400}",500:"{slate.500}",600:"{slate.600}",700:"{slate.700}",800:"{slate.800}",900:"{slate.900}",950:"{slate.950}"},primary:{color:"{primary.500}",contrastColor:"#ffffff",hoverColor:"{primary.400}",activeColor:"{primary.300}"},highlight:{background:"color-mix(in srgb, {primary.color}, transparent 88%)",focusBackground:"color-mix(in srgb, {primary.color}, transparent 76%)",color:"{primary.700}",focusColor:"{primary.800}"},mask:{background:"rgba(0,0,0,0.32)",color:"{surface.200}"},formField:{background:"{surface.0}",disabledBackground:"{surface.300}",filledBackground:"{surface.100}",filledHoverBackground:"{surface.200}",filledFocusBackground:"{surface.100}",borderColor:"{surface.400}",hoverBorderColor:"{surface.900}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.800}",color:"{surface.900}",disabledColor:"{surface.600}",placeholderColor:"{surface.600}",invalidPlaceholderColor:"{red.800}",floatLabelColor:"{surface.600}",floatLabelFocusColor:"{primary.600}",floatLabelActiveColor:"{surface.600}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.600}",shadow:"none"},text:{color:"{surface.900}",hoverColor:"{surface.900}",mutedColor:"{surface.600}",hoverMutedColor:"{surface.600}"},content:{background:"{surface.0}",hoverBackground:"{surface.100}",borderColor:"{surface.300}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.0}",borderColor:"{surface.0}",color:"{text.color}"},popover:{background:"{surface.0}",borderColor:"{surface.0}",color:"{text.color}"},modal:{background:"{surface.0}",borderColor:"{surface.0}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.100}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.600}",focusColor:"{surface.600}"}},optionGroup:{background:"transparent",color:"{text.color}"}},navigation:{item:{focusBackground:"{surface.100}",activeBackground:"{surface.200}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.600}",focusColor:"{surface.600}",activeColor:"{surface.600}"}},submenuLabel:{background:"transparent",color:"{text.color}"},submenuIcon:{color:"{surface.600}",focusColor:"{surface.600}",activeColor:"{surface.600}"}}},dark:{focusRing:{shadow:"0 0 1px 4px {surface.700}"},surface:{0:"#ffffff",50:"{zinc.50}",100:"{zinc.100}",200:"{zinc.200}",300:"{zinc.300}",400:"{zinc.400}",500:"{zinc.500}",600:"{zinc.600}",700:"{zinc.700}",800:"{zinc.800}",900:"{zinc.900}",950:"{zinc.950}"},primary:{color:"{primary.400}",contrastColor:"{surface.900}",hoverColor:"{primary.300}",activeColor:"{primary.200}"},highlight:{background:"color-mix(in srgb, {primary.400}, transparent 84%)",focusBackground:"color-mix(in srgb, {primary.400}, transparent 76%)",color:"rgba(255,255,255,.87)",focusColor:"rgba(255,255,255,.87)"},mask:{background:"rgba(0,0,0,0.6)",color:"{surface.200}"},formField:{background:"{surface.950}",disabledBackground:"{surface.700}",filledBackground:"{surface.800}",filledHoverBackground:"{surface.700}",filledFocusBackground:"{surface.800}",borderColor:"{surface.600}",hoverBorderColor:"{surface.400}",focusBorderColor:"{primary.color}",invalidBorderColor:"{red.300}",color:"{surface.0}",disabledColor:"{surface.400}",placeholderColor:"{surface.400}",invalidPlaceholderColor:"{red.300}",floatLabelColor:"{surface.400}",floatLabelFocusColor:"{primary.color}",floatLabelActiveColor:"{surface.400}",floatLabelInvalidColor:"{form.field.invalid.placeholder.color}",iconColor:"{surface.400}",shadow:"none"},text:{color:"{surface.0}",hoverColor:"{surface.0}",mutedColor:"{surface.400}",hoverMutedColor:"{surface.400}"},content:{background:"{surface.900}",hoverBackground:"{surface.800}",borderColor:"{surface.700}",color:"{text.color}",hoverColor:"{text.hover.color}"},overlay:{select:{background:"{surface.900}",borderColor:"{surface.900}",color:"{text.color}"},popover:{background:"{surface.900}",borderColor:"{surface.900}",color:"{text.color}"},modal:{background:"{surface.900}",borderColor:"{surface.900}",color:"{text.color}"}},list:{option:{focusBackground:"{surface.800}",selectedBackground:"{highlight.background}",selectedFocusBackground:"{highlight.focus.background}",color:"{text.color}",focusColor:"{text.hover.color}",selectedColor:"{highlight.color}",selectedFocusColor:"{highlight.focus.color}",icon:{color:"{surface.400}",focusColor:"{surface.400}"}},optionGroup:{background:"transparent",color:"{text.muted.color}"}},navigation:{item:{focusBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{text.color}",focusColor:"{text.hover.color}",activeColor:"{text.hover.color}",icon:{color:"{surface.400}",focusColor:"{surface.400}",activeColor:"{surface.400}"}},submenuLabel:{background:"transparent",color:"{text.muted.color}"},submenuIcon:{color:"{surface.400}",focusColor:"{surface.400}",activeColor:"{surface.400}"}}}}},components:{accordion:{root:{transitionDuration:"{transition.duration}"},panel:{borderWidth:"0",borderColor:"{content.border.color}"},header:{color:"{text.color}",hoverColor:"{text.color}",activeColor:"{text.color}",activeHoverColor:"{text.color}",padding:"1.25rem",fontWeight:"600",borderRadius:"0",borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",hoverBackground:"{content.hover.background}",activeBackground:"{content.background}",activeHoverBackground:"{content.background}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.muted.color}",activeColor:"{text.muted.color}",activeHoverColor:"{text.muted.color}"},first:{topBorderRadius:"{content.border.radius}",borderWidth:"0"},last:{bottomBorderRadius:"{content.border.radius}",activeBottomBorderRadius:"0"}},content:{borderWidth:"0",borderColor:"{content.border.color}",background:"{content.background}",color:"{text.color}",padding:"0 1.25rem 1.25rem 1.25rem"},css:"\n.p-accordionpanel {\n    box-shadow: 0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12);\n    transition: margin dt('accordion.transition.duration');\n}\n\n.p-accordionpanel-active {\n    margin: 1rem 0;\n}\n\n.p-accordionpanel:first-child {\n    border-top-left-radius: dt('content.border.radius');\n    border-top-right-radius: dt('content.border.radius');\n    margin-top: 0;\n}\n\n.p-accordionpanel:last-child {\n    border-bottom-left-radius: dt('content.border.radius');\n    border-bottom-right-radius: dt('content.border.radius');\n    margin-bottom: 0;\n}\n\n.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},autocomplete:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},dropdown:{width:"3rem",sm:{width:"2.5rem"},lg:{width:"3.5rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},chip:{borderRadius:"{border.radius.sm}"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{chip:{focusBackground:"{surface.300}",focusColor:"{surface.950}"},dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.600}",focusColor:"{surface.0}"},dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"}}},css:"\n.p-autocomplete-dropdown:focus-visible {\n    background: dt('autocomplete.dropdown.hover.background');\n    border-color: dt('autocomplete.dropdown.hover.border.color');\n    color: dt('autocomplete.dropdown.hover.color');\n}\n\n.p-variant-filled.p-autocomplete-input-multiple {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('autocomplete.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('autocomplete.focus.border.color'), dt('autocomplete.focus.border.color')), linear-gradient(to bottom, dt('autocomplete.border.color'), dt('autocomplete.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-autocomplete:not(.p-disabled):hover .p-variant-filled.p-autocomplete-input-multiple {\n    background: dt('autocomplete.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('autocomplete.focus.border.color'), dt('autocomplete.focus.border.color')), linear-gradient(to bottom, dt('autocomplete.hover.border.color'), dt('autocomplete.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-autocomplete:not(.p-disabled).p-focus .p-variant-filled.p-autocomplete-input-multiple {\n    outline: 0 none;\n    background: dt('autocomplete.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('autocomplete.focus.border.color'), dt('autocomplete.focus.border.color')), linear-gradient(to bottom, dt('autocomplete.border.color'), dt('autocomplete.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-autocomplete:not(.p-disabled).p-focus:hover .p-variant-filled.p-autocomplete-input-multiple {\n    background-image: linear-gradient(to bottom, dt('autocomplete.focus.border.color'), dt('autocomplete.focus.border.color')), linear-gradient(to bottom, dt('autocomplete.hover.border.color'), dt('autocomplete.hover.border.color'));\n}\n\n.p-autocomplete.p-invalid .p-autocomplete-input-multiple {\n    background-image: linear-gradient(to bottom, dt('autocomplete.invalid.border.color'), dt('autocomplete.invalid.border.color')), linear-gradient(to bottom, dt('autocomplete.invalid.border.color'), dt('autocomplete.invalid.border.color'));\n}\n\n.p-autocomplete.p-invalid.p-focus .p-autocomplete-input-multiple  {\n    background-image: linear-gradient(to bottom, dt('autocomplete.invalid.border.color'), dt('autocomplete.invalid.border.color')), linear-gradient(to bottom, dt('autocomplete.invalid.border.color'), dt('autocomplete.invalid.border.color'));\n}\n\n.p-autocomplete-option {\n    transition: none;\n}\n"},avatar:{root:{width:"2rem",height:"2rem",fontSize:"1rem",background:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},icon:{size:"1rem"},group:{borderColor:"{content.background}",offset:"-0.75rem"},lg:{width:"3rem",height:"3rem",fontSize:"1.5rem",icon:{size:"1.5rem"},group:{offset:"-1rem"}},xl:{width:"4rem",height:"4rem",fontSize:"2rem",icon:{size:"2rem"},group:{offset:"-1.5rem"}},css:""},badge:{root:{borderRadius:"{border.radius.md}",padding:"0 0.5rem",fontSize:"0.75rem",fontWeight:"700",minWidth:"1.5rem",height:"1.5rem"},dot:{size:"0.5rem"},sm:{fontSize:"0.625rem",minWidth:"1.25rem",height:"1.25rem"},lg:{fontSize:"0.875rem",minWidth:"1.75rem",height:"1.75rem"},xl:{fontSize:"1rem",minWidth:"2rem",height:"2rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},css:""},blockui:{root:{borderRadius:"{content.border.radius}"},css:""},breadcrumb:{root:{padding:"1rem",background:"{content.background}",gap:"0.5rem",transitionDuration:"{transition.duration}"},item:{color:"{text.muted.color}",hoverColor:"{text.color}",borderRadius:"{content.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",hoverColor:"{navigation.item.icon.focus.color}"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},separator:{color:"{navigation.item.icon.color}"},css:""},button:{root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",gap:"0.5rem",paddingX:"1rem",paddingY:"0.625rem",iconOnlyWidth:"3rem",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}",iconOnlyWidth:"2.5rem"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}",iconOnlyWidth:"3.5rem"},label:{fontWeight:"500"},raisedShadow:"0 3px 1px -2px rgba(0,0,0,.2), 0 2px 2px 0 rgba(0,0,0,.14), 0 1px 5px 0 rgba(0,0,0,.12)",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"},badgeSize:"1rem",transitionDuration:"{form.field.transition.duration}"},colorScheme:{light:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",borderColor:"{surface.100}",hoverBorderColor:"{surface.200}",activeBorderColor:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}",focusRing:{color:"{surface.600}",shadow:"none"}},info:{background:"{sky.500}",hoverBackground:"{sky.400}",activeBackground:"{sky.300}",borderColor:"{sky.500}",hoverBorderColor:"{sky.400}",activeBorderColor:"{sky.300}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{sky.500}",shadow:"none"}},success:{background:"{green.500}",hoverBackground:"{green.400}",activeBackground:"{green.300}",borderColor:"{green.500}",hoverBorderColor:"{green.400}",activeBorderColor:"{green.300}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{green.500}",shadow:"none"}},warn:{background:"{orange.500}",hoverBackground:"{orange.400}",activeBackground:"{orange.300}",borderColor:"{orange.500}",hoverBorderColor:"{orange.400}",activeBorderColor:"{orange.300}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{orange.500}",shadow:"none"}},help:{background:"{purple.500}",hoverBackground:"{purple.400}",activeBackground:"{purple.300}",borderColor:"{purple.500}",hoverBorderColor:"{purple.400}",activeBorderColor:"{purple.300}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{purple.500}",shadow:"none"}},danger:{background:"{red.500}",hoverBackground:"{red.400}",activeBackground:"{red.300}",borderColor:"{red.500}",hoverBorderColor:"{red.400}",activeBorderColor:"{red.300}",color:"#ffffff",hoverColor:"#ffffff",activeColor:"#ffffff",focusRing:{color:"{red.500}",shadow:"none"}},contrast:{background:"{surface.950}",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.950}",hoverBorderColor:"{surface.800}",activeBorderColor:"{surface.700}",color:"{surface.0}",hoverColor:"{surface.0}",activeColor:"{surface.0}",focusRing:{color:"{surface.950}",shadow:"none"}}},outlined:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",borderColor:"{primary.color}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.600}",color:"{surface.600}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",borderColor:"{green.500}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",borderColor:"{sky.500}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",borderColor:"{orange.500}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",borderColor:"{purple.500}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",borderColor:"{red.500}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.950}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",borderColor:"{surface.900}",color:"{surface.900}"}},text:{primary:{hoverBackground:"{primary.50}",activeBackground:"{primary.100}",color:"{primary.color}"},secondary:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.600}"},success:{hoverBackground:"{green.50}",activeBackground:"{green.100}",color:"{green.500}"},info:{hoverBackground:"{sky.50}",activeBackground:"{sky.100}",color:"{sky.500}"},warn:{hoverBackground:"{orange.50}",activeBackground:"{orange.100}",color:"{orange.500}"},help:{hoverBackground:"{purple.50}",activeBackground:"{purple.100}",color:"{purple.500}"},danger:{hoverBackground:"{red.50}",activeBackground:"{red.100}",color:"{red.500}"},contrast:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.950}"},plain:{hoverBackground:"{surface.50}",activeBackground:"{surface.100}",color:"{surface.900}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}},dark:{root:{primary:{background:"{primary.color}",hoverBackground:"{primary.hover.color}",activeBackground:"{primary.active.color}",borderColor:"{primary.color}",hoverBorderColor:"{primary.hover.color}",activeBorderColor:"{primary.active.color}",color:"{primary.contrast.color}",hoverColor:"{primary.contrast.color}",activeColor:"{primary.contrast.color}",focusRing:{color:"{primary.color}",shadow:"none"}},secondary:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",borderColor:"{surface.800}",hoverBorderColor:"{surface.700}",activeBorderColor:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}",focusRing:{color:"{surface.300}",shadow:"none"}},info:{background:"{sky.400}",hoverBackground:"{sky.300}",activeBackground:"{sky.200}",borderColor:"{sky.400}",hoverBorderColor:"{sky.300}",activeBorderColor:"{sky.200}",color:"{sky.950}",hoverColor:"{sky.950}",activeColor:"{sky.950}",focusRing:{color:"{sky.400}",shadow:"none"}},success:{background:"{green.400}",hoverBackground:"{green.300}",activeBackground:"{green.200}",borderColor:"{green.400}",hoverBorderColor:"{green.300}",activeBorderColor:"{green.200}",color:"{green.950}",hoverColor:"{green.950}",activeColor:"{green.950}",focusRing:{color:"{green.400}",shadow:"none"}},warn:{background:"{orange.400}",hoverBackground:"{orange.300}",activeBackground:"{orange.200}",borderColor:"{orange.400}",hoverBorderColor:"{orange.300}",activeBorderColor:"{orange.200}",color:"{orange.950}",hoverColor:"{orange.950}",activeColor:"{orange.950}",focusRing:{color:"{orange.400}",shadow:"none"}},help:{background:"{purple.400}",hoverBackground:"{purple.300}",activeBackground:"{purple.200}",borderColor:"{purple.400}",hoverBorderColor:"{purple.300}",activeBorderColor:"{purple.200}",color:"{purple.950}",hoverColor:"{purple.950}",activeColor:"{purple.950}",focusRing:{color:"{purple.400}",shadow:"none"}},danger:{background:"{red.400}",hoverBackground:"{red.300}",activeBackground:"{red.200}",borderColor:"{red.400}",hoverBorderColor:"{red.300}",activeBorderColor:"{red.200}",color:"{red.950}",hoverColor:"{red.950}",activeColor:"{red.950}",focusRing:{color:"{red.400}",shadow:"none"}},contrast:{background:"{surface.0}",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{surface.0}",hoverBorderColor:"{surface.100}",activeBorderColor:"{surface.200}",color:"{surface.950}",hoverColor:"{surface.950}",activeColor:"{surface.950}",focusRing:{color:"{surface.0}",shadow:"none"}}},outlined:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",borderColor:"{primary.700}",color:"{primary.color}"},secondary:{hoverBackground:"rgba(255,255,255,0.04)",activeBackground:"rgba(255,255,255,0.16)",borderColor:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",borderColor:"{green.700}",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",borderColor:"{sky.700}",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",borderColor:"{orange.700}",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",borderColor:"{purple.700}",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",borderColor:"{red.700}",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.500}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{surface.600}",color:"{surface.0}"}},text:{primary:{hoverBackground:"color-mix(in srgb, {primary.color}, transparent 96%)",activeBackground:"color-mix(in srgb, {primary.color}, transparent 84%)",color:"{primary.color}"},secondary:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.400}"},success:{hoverBackground:"color-mix(in srgb, {green.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {green.400}, transparent 84%)",color:"{green.400}"},info:{hoverBackground:"color-mix(in srgb, {sky.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {sky.400}, transparent 84%)",color:"{sky.400}"},warn:{hoverBackground:"color-mix(in srgb, {orange.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {orange.400}, transparent 84%)",color:"{orange.400}"},help:{hoverBackground:"color-mix(in srgb, {purple.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {purple.400}, transparent 84%)",color:"{purple.400}"},danger:{hoverBackground:"color-mix(in srgb, {red.400}, transparent 96%)",activeBackground:"color-mix(in srgb, {red.400}, transparent 84%)",color:"{red.400}"},contrast:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"},plain:{hoverBackground:"{surface.800}",activeBackground:"{surface.700}",color:"{surface.0}"}},link:{color:"{primary.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"}}},css:"\n.p-button:focus-visible {\n    background: dt('button.primary.active.background');\n    border-color: dt('button.primary.active.background');\n}\n\n.p-button-secondary:focus-visible {\n    background: dt('button.secondary.active.background');\n    border-color: dt('button.secondary.active.background');\n}\n\n.p-button-success:focus-visible {\n    background: dt('button.success.active.background');\n    border-color: dt('button.success.active.background');\n}\n\n.p-button-info:focus-visible {\n    background: dt('button.info.active.background');\n    border-color: dt('button.info.active.background');\n}\n\n.p-button-warn:focus-visible {\n    background: dt('button.warn.active.background');\n    border-color: dt('button.warn.active.background');\n}\n\n.p-button-help:focus-visible {\n    background: dt('button.help.active.background');\n    border-color: dt('button.help.active.background');\n}\n\n.p-button-danger:focus-visible {\n    background: dt('button.danger.active.background');\n    border-color: dt('button.danger.active.background');\n}\n\n.p-button-contrast:focus-visible {\n    background: dt('button.contrast.active.background');\n    border-color: dt('button.contrast.active.background');\n}\n\n.p-button-link:focus-visible {\n    background: color-mix(in srgb, dt('primary.color'), transparent 84%);\n    border-color: transparent;\n}\n\n.p-button-text:focus-visible {\n    background: dt('button.text.primary.active.background');\n    border-color: transparent;\n}\n\n.p-button-secondary.p-button-text:focus-visible {\n    background: dt('button.text.secondary.active.background');\n    border-color: transparent;\n}\n\n.p-button-success.p-button-text:focus-visible {\n    background: dt('button.text.success.active.background');\n    border-color: transparent;\n}\n\n.p-button-info.p-button-text:focus-visible {\n    background: dt('button.text.info.active.background');\n    border-color: transparent;\n}\n\n.p-button-warn.p-button-text:focus-visible {\n    background: dt('button.text.warn.active.background');\n    border-color: transparent;\n}\n\n.p-button-help.p-button-text:focus-visible {\n    background: dt('button.text.help.active.background');\n    border-color: transparent;\n}\n\n.p-button-danger.p-button-text:focus-visible {\n    background: dt('button.text.danger.active.background');\n    border-color: transparent;\n}\n\n.p-button-contrast.p-button-text:focus-visible {\n    background: dt('button.text.contrast.active.background');\n    border-color: transparent;\n}\n\n.p-button-plain.p-button-text:focus-visible {\n    background: dt('button.text.plain.active.background');\n    border-color: transparent;\n}\n\n.p-button-outlined:focus-visible {\n    background: dt('button.outlined.primary.active.background');\n}\n\n.p-button-secondary.p-button-outlined:focus-visible {\n    background: dt('button.outlined.secondary.active.background');\n    border-color: dt('button.outlined.secondary.border.color');\n}\n\n.p-button-success.p-button-outlined:focus-visible {\n    background: dt('button.outlined.success.active.background');\n}\n\n.p-button-info.p-button-outlined:focus-visible {\n    background: dt('button.outlined.info.active.background');\n}\n\n.p-button-warn.p-button-outlined:focus-visible {\n    background: dt('button.outlined.warn.active.background');\n}\n\n.p-button-help.p-button-outlined:focus-visible {\n    background: dt('button.outlined.help.active.background');\n}\n\n.p-button-danger.p-button-outlined:focus-visible {\n    background: dt('button.outlined.danger.active.background');\n}\n\n.p-button-contrast.p-button-outlined:focus-visible {\n    background: dt('button.outlined.contrast.active.background');\n}\n\n.p-button-plain.p-button-outlined:focus-visible {\n    background: dt('button.outlined.plain.active.background');\n}\n"},datepicker:{root:{transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.popover.shadow}",padding:"0.5rem"},header:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",padding:"0 0 0.5rem 0"},title:{gap:"0.5rem",fontWeight:"700"},dropdown:{width:"3rem",sm:{width:"2.5rem"},lg:{width:"3.5rem"},borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",borderRadius:"{form.field.border.radius}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},inputIcon:{color:"{form.field.icon.color}"},selectMonth:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.5rem 0.75rem",borderRadius:"{content.border.radius}"},selectYear:{hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",padding:"0.5rem 0.75rem",borderRadius:"{content.border.radius}"},group:{borderColor:"{content.border.color}",gap:"{overlay.popover.padding}"},dayView:{margin:"0.5rem 0 0 0"},weekDay:{padding:"0.5rem",fontWeight:"700",color:"{content.color}"},date:{hoverBackground:"{content.hover.background}",selectedBackground:"{primary.color}",rangeSelectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{primary.contrast.color}",rangeSelectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",padding:"0.125rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},monthView:{margin:"0.5rem 0 0 0"},month:{padding:"0.625rem",borderRadius:"{content.border.radius}"},yearView:{margin:"0.5rem 0 0 0"},year:{padding:"0.625rem",borderRadius:"{content.border.radius}"},buttonbar:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}"},timePicker:{padding:"0.5rem 0 0 0",borderColor:"{content.border.color}",gap:"0.5rem",buttonGap:"0.25rem"},colorScheme:{light:{dropdown:{background:"{surface.100}",hoverBackground:"{surface.200}",activeBackground:"{surface.300}",color:"{surface.600}",hoverColor:"{surface.700}",activeColor:"{surface.800}"},today:{background:"{surface.200}",color:"{surface.900}"}},dark:{dropdown:{background:"{surface.800}",hoverBackground:"{surface.700}",activeBackground:"{surface.600}",color:"{surface.300}",hoverColor:"{surface.200}",activeColor:"{surface.100}"},today:{background:"{surface.700}",color:"{surface.0}"}}},css:"\n.p-datepicker-header {\n    justify-content: start;\n}\n\n.p-datepicker-title {\n    order: 1;\n}\n\n.p-datepicker-prev-button {\n    order: 2;\n    margin-inline-start: auto;\n}\n\n.p-datepicker-next-button {\n    order: 2;\n    margin-inline-start: 0.5rem;\n}\n\n.p-datepicker-select-month:focus-visible {\n    background: dt('datepicker.select.month.hover.background');\n    color: dt('datepicker.select.month.hover.color');\n    outline: 0 none;\n}\n\n.p-datepicker-select-year:focus-visible {\n    background: dt('datepicker.select.year.hover.background');\n    color: dt('datepicker.select.year.hover.color');\n    outline: 0 none;\n}\n\n.p-datepicker-dropdown:focus-visible {\n    outline: 0 none;\n    background: dt('datepicker.dropdown.hover.background');\n    border-color: dt('datepicker.dropdown.hover.border.color');\n    color: dt('datepicker.dropdown.hover.color');\n}\n"},card:{root:{background:"{content.background}",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"0 2px 1px -1px rgba(0,0,0,.2), 0 1px 1px 0 rgba(0,0,0,.14), 0 1px 3px 0 rgba(0,0,0,.12)"},body:{padding:"1.5rem",gap:"0.75rem"},caption:{gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"500"},subtitle:{color:"{text.muted.color}"},css:""},carousel:{root:{transitionDuration:"{transition.duration}"},content:{gap:"0.25rem"},indicatorList:{padding:"1rem",gap:"1rem"},indicator:{width:"1.25rem",height:"1.25rem",borderRadius:"50%",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},colorScheme:{light:{indicator:{background:"{surface.200}",hoverBackground:"{surface.300}",activeBackground:"{primary.color}"}},dark:{indicator:{background:"{surface.700}",hoverBackground:"{surface.600}",activeBackground:"{primary.color}"}}},css:"\n.p-carousel-indicator-button:hover {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 96%);\n}\n\n.p-carousel-indicator-button:focus-visible {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 96%);\n}\n\n.p-carousel-indicator-active .p-carousel-indicator-button:hover {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('carousel.indicator.active.background'), transparent 92%);\n}\n\n.p-carousel-indicator-active .p-carousel-indicator-button:focus-visible {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('carousel.indicator.active.background'), transparent 84%);\n}\n"},cascadeselect:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",mobileIndent:"1rem"},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",icon:{color:"{list.option.icon.color}",focusColor:"{list.option.icon.focus.color}",size:"0.875rem"}},clearIcon:{color:"{form.field.icon.color}"},css:"\n.p-cascadeselect.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('cascadeselect.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('cascadeselect.focus.border.color'), dt('cascadeselect.focus.border.color')), linear-gradient(to bottom, dt('cascadeselect.border.color'), dt('cascadeselect.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-cascadeselect.p-variant-filled:not(.p-disabled):hover {\n    background: dt('cascadeselect.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('cascadeselect.focus.border.color'), dt('cascadeselect.focus.border.color')), linear-gradient(to bottom, dt('cascadeselect.hover.border.color'), dt('cascadeselect.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-cascadeselect.p-variant-filled:not(.p-disabled).p-focus {\n    outline: 0 none;\n    background: dt('cascadeselect.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('cascadeselect.focus.border.color'), dt('cascadeselect.focus.border.color')), linear-gradient(to bottom, dt('cascadeselect.border.color'), dt('cascadeselect.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-cascadeselect.p-variant-filled:not(.p-disabled).p-focus:hover {\n    background-image: linear-gradient(to bottom, dt('cascadeselect.focus.border.color'), dt('cascadeselect.focus.border.color')), linear-gradient(to bottom, dt('cascadeselect.hover.border.color'), dt('cascadeselect.hover.border.color'));\n}\n\n.p-cascadeselect.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('cascadeselect.invalid.border.color'), dt('cascadeselect.invalid.border.color')), linear-gradient(to bottom, dt('cascadeselect.invalid.border.color'), dt('cascadeselect.invalid.border.color'));\n}\n\n.p-cascadeselect.p-variant-filled.p-invalid:not(.p-disabled).p-focus  {\n    background-image: linear-gradient(to bottom, dt('cascadeselect.invalid.border.color'), dt('cascadeselect.invalid.border.color')), linear-gradient(to bottom, dt('cascadeselect.invalid.border.color'), dt('cascadeselect.invalid.border.color'));\n}\n\n.p-cascadeselect-option {\n    transition: none;\n}\n"},checkbox:{root:{borderRadius:"{border.radius.xs}",width:"18px",height:"18px",background:"{form.field.background}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"},transitionDuration:"{form.field.transition.duration}",sm:{width:"14px",height:"14px"},lg:{width:"22px",height:"22px"}},icon:{size:"0.875rem",color:"{form.field.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"0.75rem"},lg:{size:"1rem"}},css:"\n.p-checkbox {\n    border-radius: 50%;\n    transition: box-shadow dt('checkbox.transition.duration');\n}\n\n.p-checkbox-box {\n    border-width: 2px;\n}\n\n.p-checkbox:not(.p-disabled):has(.p-checkbox-input:hover) {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 96%);\n}\n\n.p-checkbox:not(.p-disabled):has(.p-checkbox-input:focus-visible) {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 88%);\n}\n\n.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:hover) {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('checkbox.checked.background'), transparent 92%);\n}\n\n.p-checkbox-checked:not(.p-disabled):has(.p-checkbox-input:focus-visible) {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('checkbox.checked.background'), transparent 84%);\n}\n\n.p-checkbox-checked .p-checkbox-box:before  {\n    content: \"\";\n    position: absolute;\n    top: var(--p-md-check-icon-t);\n    left: 2px;\n    border-right: 2px solid transparent;\n    border-bottom: 2px solid transparent;\n    transform: rotate(45deg);\n    transform-origin: 0% 100%;\n    animation: p-md-check 125ms 50ms linear forwards;\n}\n\n.p-checkbox-checked .p-checkbox-icon {\n    display: none;\n}\n\n.p-checkbox {\n    --p-md-check-icon-t: 10px;\n    --p-md-check-icon-w: 6px;\n    --p-md-check-icon-h: 12px;\n}\n\n.p-checkbox-sm {\n    --p-md-check-icon-t: 8px;\n    --p-md-check-icon-w: 4px;\n    --p-md-check-icon-h: 10px;\n}\n\n.p-checkbox-lg {\n    --p-md-check-icon-t: 12px;\n    --p-md-check-icon-w: 8px;\n    --p-md-check-icon-h: 16px;\n}\n\n@keyframes p-md-check {\n    0%{\n      width: 0;\n      height: 0;\n      border-color: dt('checkbox.icon.checked.color');\n      transform: translate3d(0,0,0) rotate(45deg);\n    }\n    33%{\n      width: var(--p-md-check-icon-w);\n      height: 0;\n      transform: translate3d(0,0,0) rotate(45deg);\n    }\n    100%{\n      width: var(--p-md-check-icon-w);\n      height: var(--p-md-check-icon-h);\n      border-color: dt('checkbox.icon.checked.color');\n      transform: translate3d(0,calc(-1 * var(--p-md-check-icon-h)),0) rotate(45deg);\n    }\n}\n"},chip:{root:{borderRadius:"2rem",paddingX:"0.75rem",paddingY:"0.75rem",gap:"0.5rem",transitionDuration:"{transition.duration}"},image:{width:"2.25rem",height:"2.25rem"},icon:{size:"1rem"},removeIcon:{size:"1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}"}},colorScheme:{light:{root:{background:"{surface.200}",color:"{surface.900}"},icon:{color:"{surface.600}"},removeIcon:{color:"{surface.600}",focusRing:{shadow:"0 0 1px 4px {surface.300}"}}},dark:{root:{background:"{surface.700}",color:"{surface.0}"},icon:{color:"{surface.0}"},removeIcon:{color:"{surface.0}",focusRing:{shadow:"0 0 1px 4px {surface.600}"}}}},css:""},colorpicker:{root:{transitionDuration:"{transition.duration}"},preview:{width:"2rem",height:"2rem",borderRadius:"{form.field.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},panel:{shadow:"{overlay.popover.shadow}",borderRadius:"{overlay.popover.borderRadius}"},colorScheme:{light:{panel:{background:"{surface.800}",borderColor:"{surface.900}"},handle:{color:"{surface.0}"}},dark:{panel:{background:"{surface.900}",borderColor:"{surface.700}"},handle:{color:"{surface.0}"}}},css:""},confirmdialog:{icon:{size:"2rem",color:"{overlay.modal.color}"},content:{gap:"1rem"},css:""},confirmpopup:{root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"1rem"},icon:{size:"1.5rem",color:"{overlay.popover.color}"},footer:{gap:"0.5rem",padding:"0 {overlay.popover.padding} {overlay.popover.padding} {overlay.popover.padding}"},css:""},contextmenu:{root:{background:"{content.background}",borderColor:"transparent",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},css:""},dataview:{root:{borderColor:"transparent",borderWidth:"0",borderRadius:"0",padding:"0"},header:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",borderRadius:"0"},content:{background:"{content.background}",color:"{content.color}",borderColor:"transparent",borderWidth:"0",padding:"0",borderRadius:"0"},footer:{background:"{content.background}",color:"{content.color}",borderColor:"{content.border.color}",borderWidth:"1px 0 0 0",padding:"0.75rem 1rem",borderRadius:"0"},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"1px 0 0 0"},css:""},datatable:{root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{datatable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{datatable.border.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},footerCell:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{datatable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem",sm:{padding:"0.375rem 0.5rem"},lg:{padding:"1rem 1.25rem"}},dropPoint:{color:"{primary.color}"},columnResizer:{width:"0.5rem"},resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},rowToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},filter:{inlineGap:"0.5rem",overlaySelect:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},overlayPopover:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",shadow:"{overlay.popover.shadow}",padding:"{overlay.popover.padding}",gap:"0.5rem"},rule:{borderColor:"{content.border.color}"},constraintList:{padding:"{list.padding}",gap:"{list.gap}"},constraint:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",separator:{borderColor:"{content.border.color}"},padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"}},paginatorTop:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{datatable.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},row:{stripedBackground:"{surface.50}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},row:{stripedBackground:"{surface.950}"},bodyCell:{selectedBorderColor:"{primary.900}"}}},css:"\n.p-datatable-header-cell,\n.p-datatable-tbody > tr {\n    transition: none;\n}\n"},dialog:{root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",borderRadius:"{overlay.modal.border.radius}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}",gap:"0.5rem"},title:{fontSize:"1.25rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}",gap:"0.5rem"},css:""},divider:{root:{borderColor:"{content.border.color}"},content:{background:"{content.background}",color:"{text.color}"},horizontal:{margin:"1rem 0",padding:"0 1rem",content:{padding:"0 0.5rem"}},vertical:{margin:"0 1rem",padding:"0.5rem 0",content:{padding:"0.5rem 0"}},css:""},dock:{root:{background:"rgba(255, 255, 255, 0.1)",borderColor:"rgba(255, 255, 255, 0.2)",padding:"0.5rem",borderRadius:"{border.radius.xl}"},item:{borderRadius:"{content.border.radius}",padding:"0.5rem",size:"3rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},css:""},drawer:{root:{background:"{overlay.modal.background}",borderColor:"{overlay.modal.border.color}",color:"{overlay.modal.color}",shadow:"{overlay.modal.shadow}"},header:{padding:"{overlay.modal.padding}"},title:{fontSize:"1.5rem",fontWeight:"600"},content:{padding:"0 {overlay.modal.padding} {overlay.modal.padding} {overlay.modal.padding}"},footer:{padding:"{overlay.modal.padding}"},css:""},editor:{toolbar:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}"},toolbarItem:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}",padding:"{list.padding}"},overlayOption:{focusBackground:"{list.option.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},content:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},css:"\n.p-editor .p-editor-toolbar {\n    padding: 0.75rem\n}\n"},fieldset:{root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",padding:"0 1.25rem 1.25rem 1.25rem",transitionDuration:"{transition.duration}"},legend:{background:"{content.background}",hoverBackground:"{content.hover.background}",color:"{content.color}",hoverColor:"{content.hover.color}",borderRadius:"{content.border.radius}",borderWidth:"1px",borderColor:"transparent",padding:"0.75rem 1rem",gap:"0.5rem",fontWeight:"600",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},toggleIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}"},content:{padding:"0"},css:"\n.p-fieldset-toggle-button:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},fileupload:{root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},header:{background:"transparent",color:"{text.color}",padding:"1.25rem",borderColor:"unset",borderWidth:"0",borderRadius:"0",gap:"0.5rem"},content:{highlightBorderColor:"{primary.color}",padding:"0 1.25rem 1.25rem 1.25rem",gap:"1rem"},file:{padding:"1rem",gap:"1rem",borderColor:"{content.border.color}",info:{gap:"0.5rem"}},fileList:{gap:"0.5rem"},progressbar:{height:"0.25rem"},basic:{gap:"0.5rem"},css:""},iftalabel:{root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",top:"0.5rem",fontSize:"0.75rem",fontWeight:"400"},input:{paddingTop:"1.5rem",paddingBottom:"0.5rem"},css:""},floatlabel:{root:{color:"{form.field.float.label.color}",focusColor:"{form.field.float.label.focus.color}",activeColor:"{form.field.float.label.active.color}",invalidColor:"{form.field.float.label.invalid.color}",transitionDuration:"0.2s",positionX:"{form.field.padding.x}",positionY:"{form.field.padding.y}",fontWeight:"500",active:{fontSize:"0.75rem",fontWeight:"400"}},over:{active:{top:"-1.25rem"}},in:{input:{paddingTop:"1.5rem",paddingBottom:"0.5rem"},active:{top:"0.5rem"}},on:{borderRadius:"{border.radius.xs}",active:{background:"{form.field.background}",padding:"0 0.125rem"}},css:""},galleria:{root:{borderWidth:"1px",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",transitionDuration:"{transition.duration}"},navButton:{background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.100}",hoverColor:"{surface.0}",size:"3rem",gutter:"0.5rem",prev:{borderRadius:"50%"},next:{borderRadius:"50%"},focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},navIcon:{size:"1.5rem"},thumbnailsContent:{background:"{content.background}",padding:"1rem 0.25rem"},thumbnailNavButton:{size:"2rem",borderRadius:"50%",gutter:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},thumbnailNavButtonIcon:{size:"1rem"},caption:{background:"rgba(0, 0, 0, 0.5)",color:"{surface.100}",padding:"1rem"},indicatorList:{gap:"0.5rem",padding:"1rem"},indicatorButton:{width:"1rem",height:"1rem",activeBackground:"{primary.color}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},insetIndicatorList:{background:"rgba(0, 0, 0, 0.5)"},insetIndicatorButton:{background:"rgba(255, 255, 255, 0.4)",hoverBackground:"rgba(255, 255, 255, 0.6)",activeBackground:"rgba(255, 255, 255, 0.9)"},closeButton:{size:"3rem",gutter:"0.5rem",background:"rgba(255, 255, 255, 0.1)",hoverBackground:"rgba(255, 255, 255, 0.2)",color:"{surface.50}",hoverColor:"{surface.0}",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},closeButtonIcon:{size:"1.5rem"},colorScheme:{light:{thumbnailNavButton:{hoverBackground:"{surface.100}",color:"{surface.600}",hoverColor:"{surface.700}"},indicatorButton:{background:"{surface.200}",hoverBackground:"{surface.300}"}},dark:{thumbnailNavButton:{hoverBackground:"{surface.700}",color:"{surface.400}",hoverColor:"{surface.0}"},indicatorButton:{background:"{surface.700}",hoverBackground:"{surface.600}"}}},css:""},iconfield:{icon:{color:"{form.field.icon.color}"},css:""},image:{root:{transitionDuration:"{transition.duration}"},preview:{icon:{size:"1.5rem"},mask:{background:"{mask.background}",color:"{mask.color}"}},toolbar:{position:{left:"auto",right:"1rem",top:"1rem",bottom:"auto"},blur:"8px",background:"rgba(255,255,255,0.1)",borderColor:"rgba(255,255,255,0.2)",borderWidth:"1px",borderRadius:"30px",padding:".5rem",gap:"0.5rem"},action:{hoverBackground:"rgba(255,255,255,0.1)",color:"{surface.50}",hoverColor:"{surface.0}",size:"3rem",iconSize:"1.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},css:""},imagecompare:{handle:{size:"20px",hoverSize:"40px",background:"rgba(255,255,255,0.4)",hoverBackground:"rgba(255,255,255,0.6)",borderColor:"unset",hoverBorderColor:"unset",borderWidth:"0",borderRadius:"50%",transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"rgba(255,255,255,0.3)",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},css:""},inlinemessage:{root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",gap:"0.5rem"},text:{fontWeight:"500"},icon:{size:"1rem"},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {blue.500}, transparent 96%)"},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {green.500}, transparent 96%)"},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {yellow.500}, transparent 96%)"},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"0px 4px 8px 0px color-mix(in srgb, {red.500}, transparent 96%)"},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.500}, transparent 96%)"},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"0px 4px 8px 0px color-mix(in srgb, {surface.950}, transparent 96%)"}}},css:""},inplace:{root:{padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},transitionDuration:"{transition.duration}"},display:{hoverBackground:"{content.hover.background}",hoverColor:"{content.hover.color}"},css:""},inputchips:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}"},chip:{borderRadius:"{border.radius.sm}"},colorScheme:{light:{chip:{focusBackground:"{surface.200}",color:"{surface.800}"}},dark:{chip:{focusBackground:"{surface.700}",color:"{surface.0}"}}},css:""},inputgroup:{addon:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.icon.color}",borderRadius:"{form.field.border.radius}",padding:"0.75rem",minWidth:"3rem"},css:"\n.p-inputgroup:has(.p-variant-filled) .p-inputgroupaddon {\n    border-block-start-color: dt('inputtext.filled.background');\n    border-inline-color: dt('inputtext.filled.background');\n    background: dt('inputtext.filled.background') no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n}\n"},inputnumber:{root:{transitionDuration:"{transition.duration}"},button:{width:"3rem",borderRadius:"{form.field.border.radius}",verticalPadding:"{form.field.padding.y}"},colorScheme:{light:{button:{background:"transparent",hoverBackground:"{surface.100}",activeBackground:"{surface.200}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.500}",activeColor:"{surface.600}"}},dark:{button:{background:"transparent",hoverBackground:"{surface.800}",activeBackground:"{surface.700}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.border.color}",activeBorderColor:"{form.field.border.color}",color:"{surface.400}",hoverColor:"{surface.300}",activeColor:"{surface.200}"}}},css:"\n.p-inputnumber-stacked .p-inputnumber-button-group {\n    top: 2px;\n    right: 2px;\n    height: calc(100% - 4px);\n}\n\n.p-inputnumber-horizontal:has(.p-variant-filled) .p-inputnumber-button {\n    border-block-start-color: dt('inputtext.filled.background');\n    border-inline-color: dt('inputtext.filled.background');\n    background: dt('inputtext.filled.background') no-repeat;\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n}\n\n.p-inputnumber-vertical:has(.p-variant-filled) .p-inputnumber-button {\n    border-block-color: dt('inputtext.filled.background');\n    border-inline-color: dt('inputtext.filled.background');\n    background: dt('inputtext.filled.background') no-repeat;\n}\n\n.p-inputnumber-vertical:has(.p-variant-filled) .p-inputnumber-increment-button {\n    border-block-end: 1px solid dt('inputtext.border.color')\n}\n"},inputotp:{root:{gap:"0.5rem"},input:{width:"3rem",sm:{width:"2.5rem"},lg:{width:"3.5rem"}},css:""},inputtext:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},css:"\n.p-inputtext.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('inputtext.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('inputtext.focus.border.color'), dt('inputtext.focus.border.color')), linear-gradient(to bottom, dt('inputtext.border.color'), dt('inputtext.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-inputtext.p-variant-filled:enabled:hover {\n    background: dt('inputtext.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('inputtext.focus.border.color'), dt('inputtext.focus.border.color')), linear-gradient(to bottom, dt('inputtext.hover.border.color'), dt('inputtext.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-inputtext.p-variant-filled:enabled:focus {\n    outline: 0 none;\n    background: dt('inputtext.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('inputtext.focus.border.color'), dt('inputtext.focus.border.color')), linear-gradient(to bottom, dt('inputtext.border.color'), dt('inputtext.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-inputtext.p-variant-filled:enabled:hover:focus {\n    background-image: linear-gradient(to bottom, dt('inputtext.focus.border.color'), dt('inputtext.focus.border.color')), linear-gradient(to bottom, dt('inputtext.hover.border.color'), dt('inputtext.hover.border.color'));\n}\n\n.p-inputtext.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('inputtext.invalid.border.color'), dt('inputtext.invalid.border.color')), linear-gradient(to bottom, dt('inputtext.invalid.border.color'), dt('inputtext.invalid.border.color'));\n}\n\n.p-inputtext.p-variant-filled.p-invalid:enabled:focus {\n    background-image: linear-gradient(to bottom, dt('inputtext.invalid.border.color'), dt('inputtext.invalid.border.color')), linear-gradient(to bottom, dt('inputtext.invalid.border.color'), dt('inputtext.invalid.border.color'));\n}\n\n.p-inputtext.p-variant-filled:disabled {\n    background: dt('inputtext.disabled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('inputtext.border.color'), dt('inputtext.border.color')), linear-gradient(to bottom, dt('inputtext.border.color'), dt('inputtext.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n"},knob:{root:{transitionDuration:"{transition.duration}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},value:{background:"{primary.color}"},range:{background:"{content.border.color}"},text:{color:"{text.muted.color}"},css:""},listbox:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",borderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",shadow:"{form.field.shadow}",borderRadius:"{form.field.border.radius}",transitionDuration:"{form.field.transition.duration}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},colorScheme:{light:{option:{stripedBackground:"{surface.50}"}},dark:{option:{stripedBackground:"{surface.900}"}}},css:"\n.p-listbox-option {\n    transition: none;\n}\n"},megamenu:{root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",verticalOrientation:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},horizontalOrientation:{padding:"0.5rem 0.75rem",gap:"0.5rem"},transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},overlay:{padding:"0",background:"{content.background}",borderColor:"transparent",borderRadius:"{content.border.radius}",color:"{content.color}",shadow:"{overlay.navigation.shadow}",gap:"0.5rem"},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background.}",color:"{navigation.submenu.label.color}"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"2.5rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},css:"\n.p-megamenu-button:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},menu:{root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenuLabel:{padding:"{navigation.submenu.label.padding}",fontWeight:"{navigation.submenu.label.font.weight}",background:"{navigation.submenu.label.background}",color:"{navigation.submenu.label.color}"},separator:{borderColor:"{content.border.color}"},css:"\n.p-menu-overlay {\n    border-color: transparent;\n}\n"},menubar:{root:{background:"{content.background}",borderColor:"{content.border.color}",borderRadius:"{content.border.radius}",color:"{content.color}",gap:"0.5rem",padding:"0.5rem 0.75rem",transitionDuration:"{transition.duration}"},baseItem:{borderRadius:"{content.border.radius}",padding:"{navigation.item.padding}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}",background:"{content.background}",borderColor:"transparent",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",mobileIndent:"1rem",icon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"}},separator:{borderColor:"{content.border.color}"},mobileButton:{borderRadius:"50%",size:"2.5rem",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",hoverBackground:"{content.hover.background}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},css:"\n.p-menubar-button:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},message:{root:{borderRadius:"{content.border.radius}",borderWidth:"0",transitionDuration:"{transition.duration}"},content:{padding:"1rem 1.25rem",gap:"0.5rem",sm:{padding:"0.625rem 0.625rem"},lg:{padding:"0.825rem 0.825rem"}},text:{fontSize:"1rem",fontWeight:"500",sm:{fontSize:"0.875rem"},lg:{fontSize:"1.125rem"}},icon:{size:"1.25rem",sm:{size:"1rem"},lg:{size:"1.5rem"}},closeButton:{width:"2rem",height:"2rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem",sm:{size:"0.875rem"},lg:{size:"1.125rem"}},outlined:{root:{borderWidth:"1px"}},simple:{content:{padding:"0"}},colorScheme:{light:{info:{background:"color-mix(in srgb, {blue.50}, transparent 5%)",borderColor:"{blue.200}",color:"{blue.600}",shadow:"none",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}},outlined:{color:"{blue.600}",borderColor:"{blue.600}"},simple:{color:"{blue.600}"}},success:{background:"color-mix(in srgb, {green.50}, transparent 5%)",borderColor:"{green.200}",color:"{green.600}",shadow:"none",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}},outlined:{color:"{green.600}",borderColor:"{green.600}"},simple:{color:"{green.600}"}},warn:{background:"color-mix(in srgb,{yellow.50}, transparent 5%)",borderColor:"{yellow.200}",color:"{yellow.900}",shadow:"none",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}},outlined:{color:"{yellow.900}",borderColor:"{yellow.900}"},simple:{color:"{yellow.900}"}},error:{background:"color-mix(in srgb, {red.50}, transparent 5%)",borderColor:"{red.200}",color:"{red.600}",shadow:"none",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}},outlined:{color:"{red.600}",borderColor:"{red.600}"},simple:{color:"{red.600}"}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",shadow:"none",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}},outlined:{color:"{surface.600}",borderColor:"{surface.600}"},simple:{color:"{surface.600}"}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",shadow:"none",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}},outlined:{color:"{surface.950}",borderColor:"{surface.950}"},simple:{color:"{surface.950}"}}},dark:{info:{background:"color-mix(in srgb, {blue.500}, transparent 84%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{blue.500}",shadow:"none",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}},outlined:{color:"{blue.500}",borderColor:"{blue.500}"},simple:{color:"{blue.500}"}},success:{background:"color-mix(in srgb, {green.500}, transparent 84%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{green.500}",shadow:"none",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}},outlined:{color:"{green.500}",borderColor:"{green.500}"},simple:{color:"{green.500}"}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 84%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{yellow.500}",shadow:"none",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}},outlined:{color:"{yellow.500}",borderColor:"{yellow.500}"},simple:{color:"{yellow.500}"}},error:{background:"color-mix(in srgb, {red.500}, transparent 84%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{red.500}",shadow:"none",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}},outlined:{color:"{red.500}",borderColor:"{red.500}"},simple:{color:"{red.500}"}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",shadow:"none",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}},outlined:{color:"{surface.400}",borderColor:"{surface.400}"},simple:{color:"{surface.400}"}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",shadow:"none",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}},outlined:{color:"{surface.0}",borderColor:"{surface.0}"},simple:{color:"{surface.0}"}}}},css:""},metergroup:{root:{borderRadius:"{content.border.radius}",gap:"1rem"},meters:{background:"{content.border.color}",size:"0.5rem"},label:{gap:"0.5rem"},labelMarker:{size:"0.5rem"},labelIcon:{size:"1rem"},labelList:{verticalGap:"0.5rem",horizontalGap:"1rem"},css:""},multiselect:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}",gap:"0.75rem"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},chip:{borderRadius:"{border.radius.sm}"},clearIcon:{color:"{form.field.icon.color}"},emptyMessage:{padding:"{list.option.padding}"},css:"\n.p-multiselect.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('multiselect.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('multiselect.focus.border.color'), dt('multiselect.focus.border.color')), linear-gradient(to bottom, dt('multiselect.border.color'), dt('multiselect.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-multiselect.p-variant-filled:not(.p-disabled):hover {\n    background: dt('multiselect.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('multiselect.focus.border.color'), dt('multiselect.focus.border.color')), linear-gradient(to bottom, dt('multiselect.hover.border.color'), dt('multiselect.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-multiselect.p-variant-filled:not(.p-disabled).p-focus {\n    outline: 0 none;\n    background: dt('multiselect.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('multiselect.focus.border.color'), dt('multiselect.focus.border.color')), linear-gradient(to bottom, dt('multiselect.border.color'), dt('multiselect.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-multiselect.p-variant-filled:not(.p-disabled).p-focus:hover {\n    background-image: linear-gradient(to bottom, dt('multiselect.focus.border.color'), dt('multiselect.focus.border.color')), linear-gradient(to bottom, dt('multiselect.hover.border.color'), dt('multiselect.hover.border.color'));\n}\n\n.p-multiselect.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('multiselect.invalid.border.color'), dt('multiselect.invalid.border.color')), linear-gradient(to bottom, dt('multiselect.invalid.border.color'), dt('multiselect.invalid.border.color'));\n}\n\n.p-multiselect.p-variant-filled.p-invalid:not(.p-disabled).p-focus  {\n    background-image: linear-gradient(to bottom, dt('multiselect.invalid.border.color'), dt('multiselect.invalid.border.color')), linear-gradient(to bottom, dt('multiselect.invalid.border.color'), dt('multiselect.invalid.border.color'));\n}\n\n.p-multiselect-option {\n    transition: none;\n}\n"},orderlist:{root:{gap:"1.125rem"},controls:{gap:"0.5rem"},css:""},organizationchart:{root:{gutter:"0.75rem",transitionDuration:"{transition.duration}"},node:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{content.border.color}",color:"{content.color}",selectedColor:"{highlight.color}",hoverColor:"{content.hover.color}",padding:"1rem 1.25rem",toggleablePadding:"1rem 1.25rem 1.5rem 1.25rem",borderRadius:"{content.border.radius}"},nodeToggleButton:{background:"{content.background}",hoverBackground:"{content.hover.background}",borderColor:"{content.border.color}",color:"{text.muted.color}",hoverColor:"{text.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},connector:{color:"{content.border.color}",borderRadius:"{content.border.radius}",height:"24px"},css:""},overlaybadge:{root:{outline:{width:"2px",color:"{content.background}"}},css:""},popover:{root:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",color:"{overlay.popover.color}",borderRadius:"{overlay.popover.border.radius}",shadow:"{overlay.popover.shadow}",gutter:"10px",arrowOffset:"1.25rem"},content:{padding:"{overlay.popover.padding}"},css:""},paginator:{root:{padding:"0.5rem 1rem",gap:"0.25rem",borderRadius:"{content.border.radius}",background:"{content.background}",color:"{content.color}",transitionDuration:"{transition.duration}"},navButton:{background:"transparent",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}",width:"2.5rem",height:"2.5rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},currentPageReport:{color:"{text.muted.color}"},jumpToPageInput:{maxWidth:"2.5rem"},css:""},password:{meter:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:".75rem"},icon:{color:"{form.field.icon.color}"},overlay:{background:"{overlay.popover.background}",borderColor:"{overlay.popover.border.color}",borderRadius:"{overlay.popover.border.radius}",color:"{overlay.popover.color}",padding:"{overlay.popover.padding}",shadow:"{overlay.popover.shadow}"},content:{gap:"0.5rem"},colorScheme:{light:{strength:{weakBackground:"{red.500}",mediumBackground:"{amber.500}",strongBackground:"{green.500}"}},dark:{strength:{weakBackground:"{red.400}",mediumBackground:"{amber.400}",strongBackground:"{green.400}"}}},css:""},panel:{root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}"},header:{background:"transparent",color:"{text.color}",padding:"1.25rem",borderColor:"{content.border.color}",borderWidth:"0",borderRadius:"0"},toggleableHeader:{padding:"0.5rem 1.25rem"},title:{fontWeight:"600"},content:{padding:"0 1.25rem 1.25rem 1.25rem"},footer:{padding:"0 1.25rem 1.25rem 1.25rem"},css:""},panelmenu:{root:{gap:"0",transitionDuration:"{transition.duration}"},panel:{background:"{content.background}",borderColor:"{content.border.color}",borderWidth:"0",color:"{content.color}",padding:"0",borderRadius:"0",first:{borderWidth:"0",topBorderRadius:"{content.border.radius}"},last:{borderWidth:"0",bottomBorderRadius:"{content.border.radius}"}},item:{focusBackground:"{navigation.item.focus.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",gap:"0.5rem",padding:"{navigation.item.padding}",borderRadius:"{content.border.radius}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}"}},submenu:{indent:"1rem"},submenuIcon:{color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}"},css:"\n.p-panelmenu-panel {\n    box-shadow: 0 0 0 1px dt('panelmenu.panel.border.color');\n    transition: margin dt('panelmenu.transition.duration');\n}\n\n.p-panelmenu-panel:has(.p-panelmenu-header-active) {\n    margin: 1rem 0;\n}\n\n.p-panelmenu-panel:first-child {\n    border-top-left-radius: dt('content.border.radius');\n    border-top-right-radius: dt('content.border.radius');\n    margin-top: 0;\n}\n\n.p-panelmenu-panel:last-child {\n    border-bottom-left-radius: dt('content.border.radius');\n    border-bottom-right-radius: dt('content.border.radius');\n    margin-bottom: 0;\n}\n\n.p-accordionpanel:not(.p-disabled) .p-accordionheader:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},picklist:{root:{gap:"1.125rem"},controls:{gap:"0.5rem"},css:""},progressbar:{root:{background:"{content.border.color}",borderRadius:"{content.border.radius}",height:"1rem"},value:{background:"{primary.color}"},label:{color:"{primary.contrast.color}",fontSize:"0.75rem",fontWeight:"600"},css:""},progressspinner:{colorScheme:{light:{root:{colorOne:"{red.500}",colorTwo:"{blue.500}",colorThree:"{green.500}",colorFour:"{yellow.500}"}},dark:{root:{colorOne:"{red.400}",colorTwo:"{blue.400}",colorThree:"{green.400}",colorFour:"{yellow.400}"}}},css:""},radiobutton:{root:{width:"20px",height:"20px",background:"{form.field.background}",checkedBackground:"{primary.contrast.color}",checkedHoverBackground:"{primary.contrast.color}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",checkedBorderColor:"{primary.color}",checkedHoverBorderColor:"{primary.color}",checkedFocusBorderColor:"{primary.color}",checkedDisabledBorderColor:"{form.field.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",shadow:"{form.field.shadow}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"},transitionDuration:"{form.field.transition.duration}",sm:{width:"16px",height:"16px"},lg:{width:"24px",height:"24px"}},icon:{size:"10px",checkedColor:"{primary.color}",checkedHoverColor:"{primary.color}",disabledColor:"{form.field.disabled.color}",sm:{size:"8px"},lg:{size:"12px"}}},rating:{root:{gap:"0.5rem",transitionDuration:"{transition.duration}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},icon:{size:"1.125rem",color:"{text.muted.color}",hoverColor:"{primary.color}",activeColor:"{primary.color}"},css:"\n.p-rating:not(.p-disabled):not(.p-readonly) .p-rating-option:hover {\n    background: color-mix(in srgb, dt('rating.icon.color'), transparent 96%);\n    box-shadow: 0 0 1px 8px color-mix(in srgb, dt('rating.icon.color'), transparent 96%);\n}\n\n.p-rating:not(.p-disabled):not(.p-readonly) .p-rating-option-active:hover {\n    background: color-mix(in srgb, dt('rating.icon.active.color'), transparent 92%);\n    box-shadow: 0 0 1px 8px color-mix(in srgb, dt('rating.icon.active.color'), transparent 92%);\n}\n\n.p-rating-option.p-focus-visible {\n    background: color-mix(in srgb, dt('rating.icon.active.color'), transparent 84%);\n    box-shadow: 0 0 1px 8px color-mix(in srgb, dt('rating.icon.active.color'), transparent 84%);\n}\n"},ripple:{colorScheme:{light:{root:{background:"rgba(0,0,0,0.1)"}},dark:{root:{background:"rgba(255,255,255,0.3)"}}},css:""},scrollpanel:{root:{transitionDuration:"{transition.duration}"},bar:{size:"9px",borderRadius:"{border.radius.sm}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},colorScheme:{light:{bar:{background:"{surface.200}"}},dark:{bar:{background:"{surface.700}"}}},css:""},select:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},list:{padding:"{list.padding}",gap:"{list.gap}",header:{padding:"{list.header.padding}"}},option:{focusBackground:"{list.option.focus.background}",selectedBackground:"{list.option.selected.background}",selectedFocusBackground:"{list.option.selected.focus.background}",color:"{list.option.color}",focusColor:"{list.option.focus.color}",selectedColor:"{list.option.selected.color}",selectedFocusColor:"{list.option.selected.focus.color}",padding:"{list.option.padding}",borderRadius:"{list.option.border.radius}"},optionGroup:{background:"{list.option.group.background}",color:"{list.option.group.color}",fontWeight:"{list.option.group.font.weight}",padding:"{list.option.group.padding}"},clearIcon:{color:"{form.field.icon.color}"},checkmark:{color:"{list.option.color}",gutterStart:"-0.375rem",gutterEnd:"0.375rem"},emptyMessage:{padding:"{list.option.padding}"},css:"\n.p-select.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('select.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('select.focus.border.color'), dt('select.focus.border.color')), linear-gradient(to bottom, dt('select.border.color'), dt('select.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-select.p-variant-filled:not(.p-disabled):hover {\n    background: dt('select.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('select.focus.border.color'), dt('select.focus.border.color')), linear-gradient(to bottom, dt('select.hover.border.color'), dt('select.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-select.p-variant-filled:not(.p-disabled).p-focus {\n    outline: 0 none;\n    background: dt('select.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('select.focus.border.color'), dt('select.focus.border.color')), linear-gradient(to bottom, dt('select.border.color'), dt('select.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-select.p-variant-filled:not(.p-disabled).p-focus:hover {\n    background-image: linear-gradient(to bottom, dt('select.focus.border.color'), dt('select.focus.border.color')), linear-gradient(to bottom, dt('select.hover.border.color'), dt('select.hover.border.color'));\n}\n\n.p-select.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('select.invalid.border.color'), dt('select.invalid.border.color')), linear-gradient(to bottom, dt('select.invalid.border.color'), dt('select.invalid.border.color'));\n}\n\n.p-select.p-variant-filled.p-invalid:not(.p-disabled).p-focus  {\n    background-image: linear-gradient(to bottom, dt('select.invalid.border.color'), dt('select.invalid.border.color')), linear-gradient(to bottom, dt('select.invalid.border.color'), dt('select.invalid.border.color'));\n}\n\n.p-select-option {\n    transition: none;\n}\n"},selectbutton:{root:{borderRadius:"{form.field.border.radius}"},colorScheme:{light:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}},dark:{root:{invalidBorderColor:"{form.field.invalid.border.color}"}}},css:""},skeleton:{root:{borderRadius:"{content.border.radius}"},colorScheme:{light:{root:{background:"{surface.200}",animationBackground:"rgba(255,255,255,0.4)"}},dark:{root:{background:"rgba(255, 255, 255, 0.06)",animationBackground:"rgba(255, 255, 255, 0.04)"}}},css:""},slider:{root:{transitionDuration:"{transition.duration}"},track:{background:"{content.border.color}",borderRadius:"{border.radius.xs}",size:"2px"},range:{background:"{primary.color}"},handle:{width:"18px",height:"18px",borderRadius:"50%",background:"{primary.color}",hoverBackground:"{primary.color}",content:{borderRadius:"50%",background:"{primary.color}",hoverBackground:"{primary.color}",width:"18px",height:"18px",shadow:"0px 2px 1px -1px rgba(0, 0, 0, .2), 0px 1px 1px 0px rgba(0, 0, 0, .14), 0px 1px 3px 0px rgba(0, 0, 0, .12)"},focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},css:"\n.p-slider-handle {\n    transition: box-shadow dt('slider.transition.duration');\n}\n\n.p-slider:not(.p-disabled) .p-slider-handle:hover {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('slider.handle.background'), transparent 92%);\n}\n\n.p-slider-handle:focus-visible,\n.p-slider:not(.p-disabled) .p-slider-handle:focus:hover {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('slider.handle.background'), transparent 84%);\n}\n"},speeddial:{root:{gap:"0.5rem",transitionDuration:"{transition.duration}"},css:""},splitter:{root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",transitionDuration:"{transition.duration}"},gutter:{background:"{content.border.color}"},handle:{size:"24px",background:"transparent",borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},css:""},splitbutton:{root:{borderRadius:"{form.field.border.radius}",roundedBorderRadius:"2rem",raisedShadow:"0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},css:""},stepper:{root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}",activeBackground:"{primary.color}",margin:"0 0 0 1.625rem",size:"2px"},step:{padding:"0.5rem",gap:"1rem"},stepHeader:{padding:"0.75rem 1rem",borderRadius:"{content.border.radius}",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"},gap:"0.5rem"},stepTitle:{color:"{text.muted.color}",activeColor:"{text.color}",fontWeight:"500"},stepNumber:{activeBackground:"{primary.color}",activeBorderColor:"{primary.color}",activeColor:"{primary.contrast.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"none"},steppanels:{padding:"0.875rem 0.5rem 1.125rem 0.5rem"},steppanel:{background:"{content.background}",color:"{content.color}",padding:"0",indent:"1rem"},colorScheme:{light:{stepNumber:{background:"{surface.400}",borderColor:"{surface.400}",color:"{surface.0}"}},dark:{stepNumber:{background:"{surface.200}",borderColor:"{surface.200}",color:"{surface.900}"}}},css:"\n.p-step-header:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},steps:{root:{transitionDuration:"{transition.duration}"},separator:{background:"{content.border.color}"},itemLink:{borderRadius:"{content.border.radius}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},itemLabel:{color:"{text.muted.color}",activeColor:"{primary.color}",fontWeight:"500"},itemNumber:{background:"{content.background}",activeBackground:"{content.background}",borderColor:"{content.border.color}",activeBorderColor:"{content.border.color}",color:"{text.muted.color}",activeColor:"{primary.color}",size:"2rem",fontSize:"1.143rem",fontWeight:"500",borderRadius:"50%",shadow:"0px 0.5px 0px 0px rgba(0, 0, 0, 0.06), 0px 1px 1px 0px rgba(0, 0, 0, 0.12)"},css:""},tabmenu:{root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},item:{background:"transparent",hoverBackground:"transparent",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.125rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},itemIcon:{color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},activeBar:{height:"1px",bottom:"-1px",background:"{primary.color}"},css:""},tabs:{root:{transitionDuration:"{transition.duration}"},tablist:{borderWidth:"0 0 1px 0",background:"{content.background}",borderColor:"{content.border.color}"},tab:{background:"transparent",hoverBackground:"{content.hover.background}",activeBackground:"transparent",borderWidth:"0 0 1px 0",borderColor:"{content.border.color}",hoverBorderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.color}",hoverColor:"{text.color}",activeColor:"{primary.color}",padding:"1rem 1.25rem",fontWeight:"600",margin:"0 0 -1px 0",gap:"0.5rem",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},tabpanel:{background:"{content.background}",color:"{content.color}",padding:"1.25rem 1.25rem 1.25rem 1.25rem",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",width:"3rem",shadow:"none",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"}},activeBar:{height:"2px",bottom:"-1px",background:"{primary.color}"},css:"\n.p-tabs-scrollable .p-tab {\n    flex-grow: 0\n}\n\n.p-tab-active {\n    --p-ripple-background: color-mix(in srgb, dt('primary.color'), transparent 90%);\n}\n\n.p-tab:not(.p-disabled):focus-visible {\n    background: dt('navigation.item.active.background');\n}\n\n.p-tablist-nav-button:focus-visible {\n    background: dt('navigation.item.active.background');\n}\n"},tabview:{root:{transitionDuration:"{transition.duration}"},tabList:{background:"{content.background}",borderColor:"{content.border.color}"},tab:{borderColor:"{content.border.color}",activeBorderColor:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",activeColor:"{primary.color}"},tabPanel:{background:"{content.background}",color:"{content.color}"},navButton:{background:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}"},colorScheme:{light:{navButton:{shadow:"0px 0px 10px 50px rgba(255, 255, 255, 0.6)"}},dark:{navButton:{shadow:"0px 0px 10px 50px color-mix(in srgb, {content.background}, transparent 50%)"}}},css:""},textarea:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},css:"\n.p-textarea.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('textarea.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('textarea.focus.border.color'), dt('textarea.focus.border.color')), linear-gradient(to bottom, dt('textarea.border.color'), dt('textarea.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-textarea.p-variant-filled:enabled:hover {\n    background: dt('textarea.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('textarea.focus.border.color'), dt('textarea.focus.border.color')), linear-gradient(to bottom, dt('textarea.hover.border.color'), dt('textarea.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-textarea.p-variant-filled:enabled:focus {\n    outline: 0 none;\n    background: dt('textarea.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('textarea.focus.border.color'), dt('textarea.focus.border.color')), linear-gradient(to bottom, dt('textarea.border.color'), dt('textarea.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-textarea.p-variant-filled:enabled:hover:focus {\n    background-image: linear-gradient(to bottom, dt('textarea.focus.border.color'), dt('textarea.focus.border.color')), linear-gradient(to bottom, dt('textarea.hover.border.color'), dt('textarea.hover.border.color'));\n}\n\n.p-textarea.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('textarea.invalid.border.color'), dt('textarea.invalid.border.color')), linear-gradient(to bottom, dt('textarea.invalid.border.color'), dt('textarea.invalid.border.color'));\n}\n\n.p-textarea.p-variant-filled.p-invalid:enabled:focus {\n    background-image: linear-gradient(to bottom, dt('textarea.invalid.border.color'), dt('textarea.invalid.border.color')), linear-gradient(to bottom, dt('textarea.invalid.border.color'), dt('textarea.invalid.border.color'));\n}\n"},tieredmenu:{root:{background:"{content.background}",borderColor:"{content.border.color}",color:"{content.color}",borderRadius:"{content.border.radius}",shadow:"{overlay.navigation.shadow}",transitionDuration:"{transition.duration}"},list:{padding:"{navigation.list.padding}",gap:"{navigation.list.gap}"},item:{focusBackground:"{navigation.item.focus.background}",activeBackground:"{navigation.item.active.background}",color:"{navigation.item.color}",focusColor:"{navigation.item.focus.color}",activeColor:"{navigation.item.active.color}",padding:"{navigation.item.padding}",borderRadius:"{navigation.item.border.radius}",gap:"{navigation.item.gap}",icon:{color:"{navigation.item.icon.color}",focusColor:"{navigation.item.icon.focus.color}",activeColor:"{navigation.item.icon.active.color}"}},submenu:{mobileIndent:"1rem"},submenuIcon:{size:"{navigation.submenu.icon.size}",color:"{navigation.submenu.icon.color}",focusColor:"{navigation.submenu.icon.focus.color}",activeColor:"{navigation.submenu.icon.active.color}"},separator:{borderColor:"{content.border.color}"},css:"\n.p-tieredmenu-overlay {\n    border-color: transparent;\n}\n"},tag:{root:{fontSize:"0.875rem",fontWeight:"700",padding:"0.25rem 0.5rem",gap:"0.25rem",borderRadius:"{content.border.radius}",roundedBorderRadius:"{border.radius.xl}"},icon:{size:"0.75rem"},colorScheme:{light:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.100}",color:"{surface.600}"},success:{background:"{green.500}",color:"{surface.0}"},info:{background:"{sky.500}",color:"{surface.0}"},warn:{background:"{orange.500}",color:"{surface.0}"},danger:{background:"{red.500}",color:"{surface.0}"},contrast:{background:"{surface.950}",color:"{surface.0}"}},dark:{primary:{background:"{primary.color}",color:"{primary.contrast.color}"},secondary:{background:"{surface.800}",color:"{surface.300}"},success:{background:"{green.400}",color:"{green.950}"},info:{background:"{sky.400}",color:"{sky.950}"},warn:{background:"{orange.400}",color:"{orange.950}"},danger:{background:"{red.400}",color:"{red.950}"},contrast:{background:"{surface.0}",color:"{surface.950}"}}},css:""},terminal:{root:{background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",height:"18rem",padding:"{form.field.padding.y} {form.field.padding.x}",borderRadius:"{form.field.border.radius}"},prompt:{gap:"0.25rem"},commandResponse:{margin:"2px 0"},css:""},timeline:{event:{minHeight:"5rem"},horizontal:{eventContent:{padding:"1rem 0"}},vertical:{eventContent:{padding:"0 1rem"}},eventMarker:{size:"1.5rem",borderRadius:"50%",borderWidth:"2px",background:"{primary.color}",content:{borderRadius:"50%",size:"0",background:"{primary.color}",insetShadow:"none"}},eventConnector:{color:"{content.border.color}",size:"2px"},colorScheme:{light:{eventMarker:{borderColor:"{surface.0}"}},dark:{eventMarker:{borderColor:"{surface.900}"}}},css:""},togglebutton:{root:{padding:"0.75rem 1rem",borderRadius:"{form.field.border.radius}",gap:"0.5rem",fontWeight:"500",background:"{form.field.background}",borderColor:"{form.field.border.color}",color:"{form.field.color}",hoverColor:"{form.field.color}",checkedColor:"{form.field.color}",checkedBorderColor:"{form.field.border.color}",disabledBackground:"{form.field.disabled.background}",disabledBorderColor:"{form.field.disabled.background}",disabledColor:"{form.field.disabled.color}",invalidBorderColor:"{form.field.invalid.border.color}",focusRing:{width:"0",style:"none",offset:"0",color:"unset",shadow:"none"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",padding:"0.625rem 0.75rem"},lg:{fontSize:"{form.field.lg.font.size}",padding:"0.875rem 1.25rem"}},icon:{color:"{text.muted.color}",hoverColor:"{text.muted.color}",checkedColor:"{text.muted.color}",disabledColor:"{form.field.disabled.color}"},content:{checkedBackground:"transparent",checkedShadow:"none",padding:"0",borderRadius:"0",sm:{padding:"0"},lg:{padding:"0"}},colorScheme:{light:{root:{hoverBackground:"{surface.100}",checkedBackground:"{surface.200}"}},dark:{root:{hoverBackground:"{surface.800}",checkedBackground:"{surface.700}"}}},css:"\n.p-togglebutton:focus-visible {\n    background: dt('togglebutton.hover.background');\n}\n"},toggleswitch:{root:{width:"2.75rem",height:"1rem",borderRadius:"30px",gap:"0px",shadow:"none",focusRing:{width:"0",style:"none",color:"unset",offset:"0",shadow:"none"},borderWidth:"1px",borderColor:"transparent",hoverBorderColor:"transparent",checkedBorderColor:"transparent",checkedHoverBorderColor:"transparent",invalidBorderColor:"{form.field.invalid.border.color}",transitionDuration:"{form.field.transition.duration}",slideDuration:"0.2s"},handle:{borderRadius:"50%",size:"1.5rem"},colorScheme:{light:{root:{background:"{surface.300}",disabledBackground:"{surface.400}",hoverBackground:"{surface.300}",checkedBackground:"{primary.200}",checkedHoverBackground:"{primary.200}"},handle:{background:"{surface.0}",disabledBackground:"{surface.200}",hoverBackground:"{surface.0}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.color}",color:"{text.muted.color}",hoverColor:"{text.color}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}"}},dark:{root:{background:"{surface.700}",disabledBackground:"{surface.600}",hoverBackground:"{surface.700}",checkedBackground:"{primary.color}",checkedHoverBackground:"{primary.color}"},handle:{background:"{surface.400}",disabledBackground:"{surface.500}",hoverBackground:"{surface.300}",checkedBackground:"{primary.200}",checkedHoverBackground:"{primary.200}",color:"{surface.800}",hoverColor:"{surface.900}",checkedColor:"{primary.contrast.color}",checkedHoverColor:"{primary.contrast.color}"}}},css:"\n.p-toggleswitch-handle {\n    box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover) .p-toggleswitch-handle {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 96%), 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible) .p-toggleswitch-handle {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('text.color'), transparent 88%), 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:hover).p-toggleswitch-checked .p-toggleswitch-handle {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('toggleswitch.handle.checked.background'), transparent 92%), 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n\n.p-toggleswitch:not(.p-disabled):has(.p-toggleswitch-input:focus-visible).p-toggleswitch-checked .p-toggleswitch-handle {\n    box-shadow: 0 0 1px 10px color-mix(in srgb, dt('toggleswitch.handle.checked.background'), transparent 84%), 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n}\n"},tree:{root:{background:"{content.background}",color:"{content.color}",padding:"1rem",gap:"2px",indent:"2rem",transitionDuration:"{transition.duration}"},node:{padding:"0.5rem 0.75rem",borderRadius:"{border.radius.xs}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{text.color}",hoverColor:"{text.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"},gap:"0.5rem"},nodeIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedColor:"{highlight.color}"},nodeToggleButton:{borderRadius:"50%",size:"2rem",hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",selectedHoverColor:"{primary.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},loadingIcon:{size:"2rem"},filter:{margin:"0 0 0.75rem 0"},css:"\n.p-tree-node-content {\n    transition: none;\n}\n"},treeselect:{root:{background:"{form.field.background}",disabledBackground:"{form.field.disabled.background}",filledBackground:"{form.field.filled.background}",filledHoverBackground:"{form.field.filled.hover.background}",filledFocusBackground:"{form.field.filled.focus.background}",borderColor:"{form.field.border.color}",hoverBorderColor:"{form.field.hover.border.color}",focusBorderColor:"{form.field.focus.border.color}",invalidBorderColor:"{form.field.invalid.border.color}",color:"{form.field.color}",disabledColor:"{form.field.disabled.color}",placeholderColor:"{form.field.placeholder.color}",invalidPlaceholderColor:"{form.field.invalid.placeholder.color}",shadow:"{form.field.shadow}",paddingX:"{form.field.padding.x}",paddingY:"{form.field.padding.y}",borderRadius:"{form.field.border.radius}",focusRing:{width:"{form.field.focus.ring.width}",style:"{form.field.focus.ring.style}",color:"{form.field.focus.ring.color}",offset:"{form.field.focus.ring.offset}",shadow:"{form.field.focus.ring.shadow}"},transitionDuration:"{form.field.transition.duration}",sm:{fontSize:"{form.field.sm.font.size}",paddingX:"{form.field.sm.padding.x}",paddingY:"{form.field.sm.padding.y}"},lg:{fontSize:"{form.field.lg.font.size}",paddingX:"{form.field.lg.padding.x}",paddingY:"{form.field.lg.padding.y}"}},dropdown:{width:"2.5rem",color:"{form.field.icon.color}"},overlay:{background:"{overlay.select.background}",borderColor:"{overlay.select.border.color}",borderRadius:"{overlay.select.border.radius}",color:"{overlay.select.color}",shadow:"{overlay.select.shadow}"},tree:{padding:"{list.padding}"},emptyMessage:{padding:"{list.option.padding}"},chip:{borderRadius:"{border.radius.sm}"},clearIcon:{color:"{form.field.icon.color}"},css:"\n.p-treeselect.p-variant-filled {\n    border-bottom-left-radius: 0;\n    border-bottom-right-radius: 0;\n    border: 1px solid transparent;\n    background: dt('treeselect.filled.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('treeselect.focus.border.color'), dt('treeselect.focus.border.color')), linear-gradient(to bottom, dt('treeselect.border.color'), dt('treeselect.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    transition: background-size 0.3s cubic-bezier(0.64, 0.09, 0.08, 1);\n}\n\n.p-treeselect.p-variant-filled:not(.p-disabled):hover {\n    background: dt('treeselect.filled.hover.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('treeselect.focus.border.color'), dt('treeselect.focus.border.color')), linear-gradient(to bottom, dt('treeselect.hover.border.color'), dt('treeselect.hover.border.color'));\n    background-size: 0 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-treeselect.p-variant-filled:not(.p-disabled).p-focus {\n    outline: 0 none;\n    background: dt('treeselect.filled.focus.background') no-repeat;\n    background-image: linear-gradient(to bottom, dt('treeselect.focus.border.color'), dt('treeselect.focus.border.color')), linear-gradient(to bottom, dt('treeselect.border.color'), dt('treeselect.border.color'));\n    background-size: 100% 2px, 100% 1px;\n    background-position: 50% 100%, 50% 100%;\n    background-origin: border-box;\n    border-color: transparent;\n}\n\n.p-treeselect.p-variant-filled:not(.p-disabled).p-focus:hover {\n    background-image: linear-gradient(to bottom, dt('treeselect.focus.border.color'), dt('treeselect.focus.border.color')), linear-gradient(to bottom, dt('treeselect.hover.border.color'), dt('treeselect.hover.border.color'));\n}\n\n.p-treeselect.p-variant-filled.p-invalid {\n    background-image: linear-gradient(to bottom, dt('treeselect.invalid.border.color'), dt('treeselect.invalid.border.color')), linear-gradient(to bottom, dt('treeselect.invalid.border.color'), dt('treeselect.invalid.border.color'));\n}\n\n.p-treeselect.p-variant-filled.p-invalid:not(.p-disabled).p-focus  {\n    background-image: linear-gradient(to bottom, dt('treeselect.invalid.border.color'), dt('treeselect.invalid.border.color')), linear-gradient(to bottom, dt('treeselect.invalid.border.color'), dt('treeselect.invalid.border.color'));\n}\n"},treetable:{root:{transitionDuration:"{transition.duration}"},header:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},headerCell:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",borderColor:"{treetable.border.color}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",gap:"0.5rem",padding:"0.75rem 1rem",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},columnTitle:{fontWeight:"600"},row:{background:"{content.background}",hoverBackground:"{content.hover.background}",selectedBackground:"{highlight.background}",color:"{content.color}",hoverColor:"{content.hover.color}",selectedColor:"{highlight.color}",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"-1px",shadow:"{focus.ring.shadow}"}},bodyCell:{borderColor:"{treetable.border.color}",padding:"0.75rem 1rem",gap:"0.5rem"},footerCell:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",padding:"0.75rem 1rem"},columnFooter:{fontWeight:"600"},footer:{background:"{content.background}",borderColor:"{treetable.border.color}",color:"{content.color}",borderWidth:"0 0 1px 0",padding:"0.75rem 1rem"},columnResizer:{width:"0.5rem"},resizeIndicator:{width:"1px",color:"{primary.color}"},sortIcon:{color:"{text.muted.color}",hoverColor:"{text.hover.muted.color}",size:"0.875rem"},loadingIcon:{size:"2rem"},nodeToggleButton:{hoverBackground:"{content.hover.background}",selectedHoverBackground:"{content.background}",color:"{text.muted.color}",hoverColor:"{text.color}",selectedHoverColor:"{primary.color}",size:"1.75rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",color:"{focus.ring.color}",offset:"{focus.ring.offset}",shadow:"{focus.ring.shadow}"}},paginatorTop:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},paginatorBottom:{borderColor:"{content.border.color}",borderWidth:"0 0 1px 0"},colorScheme:{light:{root:{borderColor:"{content.border.color}"},bodyCell:{selectedBorderColor:"{primary.100}"}},dark:{root:{borderColor:"{surface.800}"},bodyCell:{selectedBorderColor:"{primary.900}"}}}},toast:{root:{width:"25rem",borderRadius:"{content.border.radius}",borderWidth:"0",transitionDuration:"{transition.duration}"},icon:{size:"1.25rem"},content:{padding:"{overlay.popover.padding}",gap:"0.5rem"},text:{gap:"0.5rem"},summary:{fontWeight:"500",fontSize:"1rem"},detail:{fontWeight:"500",fontSize:"0.875rem"},closeButton:{width:"2rem",height:"2rem",borderRadius:"50%",focusRing:{width:"{focus.ring.width}",style:"{focus.ring.style}",offset:"{focus.ring.offset}"}},closeIcon:{size:"1rem"},colorScheme:{light:{root:{blur:"0"},info:{background:"{blue.50}",borderColor:"{blue.200}",color:"{blue.600}",detailColor:"{surface.700}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{blue.100}",focusRing:{color:"{blue.600}",shadow:"none"}}},success:{background:"{green.50}",borderColor:"{green.200}",color:"{green.600}",detailColor:"{surface.700}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{green.100}",focusRing:{color:"{green.600}",shadow:"none"}}},warn:{background:"{yellow.50}",borderColor:"{yellow.200}",color:"{yellow.900}",detailColor:"{surface.700}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{yellow.100}",focusRing:{color:"{yellow.600}",shadow:"none"}}},error:{background:"{red.50}",borderColor:"{red.200}",color:"{red.600}",detailColor:"{surface.700}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{red.100}",focusRing:{color:"{red.600}",shadow:"none"}}},secondary:{background:"{surface.100}",borderColor:"{surface.200}",color:"{surface.600}",detailColor:"{surface.700}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{surface.200}",focusRing:{color:"{surface.600}",shadow:"none"}}},contrast:{background:"{surface.900}",borderColor:"{surface.950}",color:"{surface.50}",detailColor:"{surface.0}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{surface.800}",focusRing:{color:"{surface.50}",shadow:"none"}}}},dark:{root:{blur:"10px"},info:{background:"color-mix(in srgb, {blue.500}, transparent 36%)",borderColor:"color-mix(in srgb, {blue.700}, transparent 64%)",color:"{surface.0}",detailColor:"{blue.100}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{blue.500}",shadow:"none"}}},success:{background:"color-mix(in srgb, {green.500}, transparent 36%)",borderColor:"color-mix(in srgb, {green.700}, transparent 64%)",color:"{surface.0}",detailColor:"{green.100}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{green.500}",shadow:"none"}}},warn:{background:"color-mix(in srgb, {yellow.500}, transparent 36%)",borderColor:"color-mix(in srgb, {yellow.700}, transparent 64%)",color:"{surface.0}",detailColor:"{yellow.50}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{yellow.500}",shadow:"none"}}},error:{background:"color-mix(in srgb, {red.500}, transparent 36%)",borderColor:"color-mix(in srgb, {red.700}, transparent 64%)",color:"{surface.0}",detailColor:"{red.100}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"rgba(255, 255, 255, 0.05)",focusRing:{color:"{red.500}",shadow:"none"}}},secondary:{background:"{surface.800}",borderColor:"{surface.700}",color:"{surface.300}",detailColor:"{surface.0}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{surface.700}",focusRing:{color:"{surface.300}",shadow:"none"}}},contrast:{background:"{surface.0}",borderColor:"{surface.100}",color:"{surface.950}",detailColor:"{surface.950}",shadow:"0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)",closeButton:{hoverBackground:"{surface.100}",focusRing:{color:"{surface.950}",shadow:"none"}}}}},css:""},toolbar:{root:{color:"{content.color}",borderRadius:"{content.border.radius}",gap:"0.5rem",padding:"1rem"},colorScheme:{light:{root:{background:"{surface.100}",borderColor:"{surface.100}"}},dark:{root:{background:"{surface.800}",borderColor:"{surface.800}"}}},css:""},tooltip:{root:{background:"{surface.600}",color:"{surface.0}",maxWidth:"12.5rem",gutter:"0.25rem",shadow:"{overlay.popover.shadow}",padding:"0.5rem 0.75rem",borderRadius:"{overlay.popover.border.radius}"},css:""},virtualscroller:{loader:{mask:{background:"{content.background}",color:"{text.muted.color}"},icon:{size:"2rem"}},css:""}}};const fie={providers:[function tn(){return jl([(e=()=>{Fe(wr)},jl([{provide:Gs,multi:!0,useValue:e}]))]);var e}(),function yj(){return _o("NgZoneless"),jl([{provide:xi,useExisting:sE},{provide:Fn,useClass:dS},{provide:Js,useValue:!0},{provide:pl,useValue:!1},[]])}(),function bH(e,...n){return jl([{provide:L0,multi:!0,useValue:e},[],{provide:Ug,useFactory:GR,deps:[Nd]},{provide:wS,multi:!0,useFactory:HR},n.map(t=>t.\u0275providers)])}([]),function CW(){return _o("NgEagerAnimations"),[...EW]}(),function SZ(...e){const n=e?.map(r=>({provide:wZ,useValue:r,multi:!1}));return jl([...n,xS(()=>{const r=Fe(uL);e?.forEach(i=>r.setConfig(i))})])}({theme:{preset:hie}})]};var U1=Dc(44),$1={};function G1(e="pui_id_"){return Object.hasOwn($1,e)||($1[e]=0),$1[e]++,`${e}${$1[e]}`}function W0(...e){if(e){let n=[];for(let t=0;t<e.length;t++){let r=e[t];if(!r)continue;let i=typeof r;if("string"===i||"number"===i)n.push(r);else if("object"===i){let a=Array.isArray(r)?[W0(...r)]:Object.entries(r).map(([d,f])=>f?d:void 0);n=a.length?n.concat(a.filter(d=>!!d)):n}}return n.join(" ").trim()}}let dL=(()=>{class e extends Cc{name="common";static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Lu=(()=>{class e{document=Fe(Be);platformId=Fe(dd);el=Fe(os);injector=Fe(qe);cd=Fe(Rb);renderer=Fe(U_);config=Fe(uL);baseComponentStyle=Fe(dL);baseStyle=Fe(Cc);scopedStyleEl;rootEl;dt;get styleOptions(){return{nonce:this.config?.csp().nonce}}get _name(){return this.constructor.name.replace(/^_/,"").toLowerCase()}get componentStyle(){return this._componentStyle}attrSelector=G1("pc");themeChangeListeners=[];_getHostInstance(t){if(t)return t?this.hostName?t.name===this.hostName?t:this._getHostInstance(t.parentInstance):t.parentInstance:void 0}_getOptionValue(t,r="",i={}){return ON(t,r,i)}ngOnInit(){this.document&&(this._loadCoreStyles(),this._loadStyles())}ngAfterViewInit(){this.rootEl=this.el?.nativeElement,this.rootEl&&this.rootEl?.setAttribute(this.attrSelector,"")}ngOnChanges(t){if(this.document&&!function C7(e){return"server"===e}(this.platformId)){const{dt:r}=t;r&&r.currentValue&&(this._loadScopedThemeStyles(r.currentValue),this._themeChangeListener(()=>this._loadScopedThemeStyles(r.currentValue)))}}ngOnDestroy(){this._unloadScopedThemeStyles(),this.themeChangeListeners.forEach(t=>Sc.off("theme:change",t))}_loadStyles(){const t=()=>{q0.isStyleNameLoaded("base")||(this.baseStyle.loadGlobalCSS(this.styleOptions),q0.setLoadedStyleName("base")),this._loadThemeStyles()};t(),this._themeChangeListener(()=>t())}_loadCoreStyles(){!q0.isStyleNameLoaded("base")&&this.componentStyle?.name&&(this.baseComponentStyle.loadCSS(this.styleOptions),this.componentStyle&&this.componentStyle?.loadCSS(this.styleOptions),q0.setLoadedStyleName(this.componentStyle?.name))}_loadThemeStyles(){if(!Vn.isStyleNameLoaded("common")){const{primitive:t,semantic:r,global:i,style:a}=this.componentStyle?.getCommonTheme?.()||{};this.baseStyle.load(t?.css,{name:"primitive-variables",...this.styleOptions}),this.baseStyle.load(r?.css,{name:"semantic-variables",...this.styleOptions}),this.baseStyle.load(i?.css,{name:"global-variables",...this.styleOptions}),this.baseStyle.loadGlobalTheme({name:"global-style",...this.styleOptions},a),Vn.setLoadedStyleName("common")}if(!Vn.isStyleNameLoaded(this.componentStyle?.name)&&this.componentStyle?.name){const{css:t,style:r}=this.componentStyle?.getComponentTheme?.()||{};this.componentStyle?.load(t,{name:`${this.componentStyle?.name}-variables`,...this.styleOptions}),this.componentStyle?.loadTheme({name:`${this.componentStyle?.name}-style`,...this.styleOptions},r),Vn.setLoadedStyleName(this.componentStyle?.name)}if(!Vn.isStyleNameLoaded("layer-order")){const t=this.componentStyle?.getLayerOrderThemeCSS?.();this.baseStyle.load(t,{name:"layer-order",first:!0,...this.styleOptions}),Vn.setLoadedStyleName("layer-order")}this.dt&&(this._loadScopedThemeStyles(this.dt),this._themeChangeListener(()=>this._loadScopedThemeStyles(this.dt)))}_loadScopedThemeStyles(t){const{css:r}=this.componentStyle?.getPresetTheme?.(t,`[${this.attrSelector}]`)||{},i=this.componentStyle?.load(r,{name:`${this.attrSelector}-${this.componentStyle?.name}`,...this.styleOptions});this.scopedStyleEl=i?.el}_unloadScopedThemeStyles(){this.scopedStyleEl?.remove()}_themeChangeListener(t=()=>{}){q0.clearLoadedStyleNames(),Sc.on("theme:change",t),this.themeChangeListeners.push(t)}cx(t,r={}){return W0(this._getOptionValue(this.$style?.classes,t,{instance:this,...r}))}sx(t="",r=!0,i={}){if(r)return this._getOptionValue(this.$style?.inlineStyles,t,{instance:this,...i})}get parent(){return this.parentInstance}get $style(){return this.parent?this.parent.componentStyle:this.componentStyle}cn=W0;static \u0275fac=function(r){return new(r||e)};static \u0275dir=qi({type:e,inputs:{dt:"dt"},features:[Mu([dL,Cc]),_l]})}return e})(),hL=(()=>{class e{static zindex=1e3;static calculatedScrollbarWidth=null;static calculatedScrollbarHeight=null;static browser;static addClass(t,r){t&&r&&(t.classList?t.classList.add(r):t.className+=" "+r)}static addMultipleClasses(t,r){if(t&&r)if(t.classList){let i=r.trim().split(" ");for(let a=0;a<i.length;a++)t.classList.add(i[a])}else{let i=r.split(" ");for(let a=0;a<i.length;a++)t.className+=" "+i[a]}}static removeClass(t,r){t&&r&&(t.classList?t.classList.remove(r):t.className=t.className.replace(new RegExp("(^|\\b)"+r.split(" ").join("|")+"(\\b|$)","gi")," "))}static removeMultipleClasses(t,r){t&&r&&[r].flat().filter(Boolean).forEach(i=>i.split(" ").forEach(a=>this.removeClass(t,a)))}static hasClass(t,r){return!(!t||!r)&&(t.classList?t.classList.contains(r):new RegExp("(^| )"+r+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(r){return r!==t})}static find(t,r){return Array.from(t.querySelectorAll(r))}static findSingle(t,r){return this.isElement(t)?t.querySelector(r):null}static index(t){let r=t.parentNode.childNodes,i=0;for(var a=0;a<r.length;a++){if(r[a]==t)return i;1==r[a].nodeType&&i++}return-1}static indexWithinGroup(t,r){let i=t.parentNode?t.parentNode.childNodes:[],a=0;for(var d=0;d<i.length;d++){if(i[d]==t)return a;i[d].attributes&&i[d].attributes[r]&&1==i[d].nodeType&&a++}return-1}static appendOverlay(t,r,i="self"){"self"!==i&&t&&r&&this.appendChild(t,r)}static alignOverlay(t,r,i="self",a=!0){t&&r&&(a&&(t.style.minWidth=`${e.getOuterWidth(r)}px`),"self"===i?this.relativePosition(t,r):this.absolutePosition(t,r))}static relativePosition(t,r,i=!0){const a=Ue=>{if(Ue)return"relative"===getComputedStyle(Ue).getPropertyValue("position")?Ue:a(Ue.parentElement)},d=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),f=r.offsetHeight,_=r.getBoundingClientRect(),S=this.getWindowScrollTop(),M=this.getWindowScrollLeft(),k=this.getViewport(),L=a(t)?.getBoundingClientRect()||{top:-1*S,left:-1*M};let G,Q,de="top";_.top+f+d.height>k.height?(G=_.top-L.top-d.height,de="bottom",_.top+G<0&&(G=-1*_.top)):(G=f+_.top-L.top,de="top");const _e=_.left+d.width-k.width;if(Q=d.width>k.width?-1*(_.left-L.left):_e>0?_.left-L.left-_e:_.left-L.left,t.style.top=G+"px",t.style.left=Q+"px",t.style.transformOrigin=de,i){const Ue=function z1(e){for(let n of document?.styleSheets)try{for(let t of n?.cssRules)for(let r of t?.style)if(e.test(r))return{name:r,value:t.style.getPropertyValue(r).trim()}}catch{}return null}(/-anchor-gutter$/)?.value;t.style.marginTop="bottom"===de?`calc(${Ue??"2px"} * -1)`:Ue??""}}static absolutePosition(t,r,i=!0){const a=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),d=a.height,f=a.width,_=r.offsetHeight,S=r.offsetWidth,M=r.getBoundingClientRect(),k=this.getWindowScrollTop(),F=this.getWindowScrollLeft(),L=this.getViewport();let G,Q;M.top+_+d>L.height?(G=M.top+k-d,t.style.transformOrigin="bottom",G<0&&(G=k)):(G=_+M.top+k,t.style.transformOrigin="top"),Q=M.left+f>L.width?Math.max(0,M.left+F+S-f):M.left+F,t.style.top=G+"px",t.style.left=Q+"px",i&&(t.style.marginTop="bottom"===origin?"calc(var(--p-anchor-gutter) * -1)":"calc(var(--p-anchor-gutter))")}static getParents(t,r=[]){return null===t.parentNode?r:this.getParents(t.parentNode,r.concat([t.parentNode]))}static getScrollableParents(t){let r=[];if(t){let i=this.getParents(t);const a=/(auto|scroll)/,d=f=>{let _=window.getComputedStyle(f,null);return a.test(_.getPropertyValue("overflow"))||a.test(_.getPropertyValue("overflowX"))||a.test(_.getPropertyValue("overflowY"))};for(let f of i){let _=1===f.nodeType&&f.dataset.scrollselectors;if(_){let S=_.split(",");for(let M of S){let k=this.findSingle(f,M);k&&d(k)&&r.push(k)}}9!==f.nodeType&&d(f)&&r.push(f)}}return r}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let r=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",r}static getHiddenElementDimensions(t){let r={};return t.style.visibility="hidden",t.style.display="block",r.width=t.offsetWidth,r.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",r}static scrollInView(t,r){let i=getComputedStyle(t).getPropertyValue("borderTopWidth"),a=i?parseFloat(i):0,d=getComputedStyle(t).getPropertyValue("paddingTop"),f=d?parseFloat(d):0,_=t.getBoundingClientRect(),M=r.getBoundingClientRect().top+document.body.scrollTop-(_.top+document.body.scrollTop)-a-f,k=t.scrollTop,F=t.clientHeight,L=this.getOuterHeight(r);M<0?t.scrollTop=k+M:M+L>F&&(t.scrollTop=k+M-F+L)}static fadeIn(t,r){t.style.opacity=0;let i=+new Date,a=0,d=function(){a=+t.style.opacity.replace(",",".")+((new Date).getTime()-i)/r,t.style.opacity=a,i=+new Date,+a<1&&(window.requestAnimationFrame&&requestAnimationFrame(d)||setTimeout(d,16))};d()}static fadeOut(t,r){var i=1,f=50/r;let _=setInterval(()=>{(i-=f)<=0&&(i=0,clearInterval(_)),t.style.opacity=i},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,r){var i=Element.prototype;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(d){return-1!==[].indexOf.call(document.querySelectorAll(d),this)}).call(t,r)}static getOuterWidth(t,r){let i=t.offsetWidth;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginLeft)+parseFloat(a.marginRight)}return i}static getHorizontalPadding(t){let r=getComputedStyle(t);return parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)}static getHorizontalMargin(t){let r=getComputedStyle(t);return parseFloat(r.marginLeft)+parseFloat(r.marginRight)}static innerWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r+=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static width(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight),r}static getInnerHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r+=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom),r}static getOuterHeight(t,r){let i=t.offsetHeight;if(r){let a=getComputedStyle(t);i+=parseFloat(a.marginTop)+parseFloat(a.marginBottom)}return i}static getHeight(t){let r=t.offsetHeight,i=getComputedStyle(t);return r-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom)+parseFloat(i.borderTopWidth)+parseFloat(i.borderBottomWidth),r}static getWidth(t){let r=t.offsetWidth,i=getComputedStyle(t);return r-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)+parseFloat(i.borderLeftWidth)+parseFloat(i.borderRightWidth),r}static getViewport(){let t=window,r=document,i=r.documentElement,a=r.getElementsByTagName("body")[0];return{width:t.innerWidth||i.clientWidth||a.clientWidth,height:t.innerHeight||i.clientHeight||a.clientHeight}}static getOffset(t){var r=t.getBoundingClientRect();return{top:r.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:r.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,r){let i=t.parentNode;if(!i)throw"Can't replace element";return i.replaceChild(r,t)}static getUserAgent(){if(navigator&&this.isClient())return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,r){if(this.isElement(r))r.appendChild(t);else{if(!(r&&r.el&&r.el.nativeElement))throw"Cannot append "+r+" to "+t;r.el.nativeElement.appendChild(t)}}static removeChild(t,r){if(this.isElement(r))r.removeChild(t);else{if(!r.el||!r.el.nativeElement)throw"Cannot remove "+t+" from "+r;r.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let r=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let r=document.createElement("div");r.className="p-scrollbar-measure",document.body.appendChild(r);let i=r.offsetWidth-r.clientWidth;return document.body.removeChild(r),this.calculatedScrollbarWidth=i,i}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let r=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=r,r}static invokeElementMethod(t,r,i){t[r].apply(t,i)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),r=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:r[1]||"",version:r[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,r){t&&document.activeElement!==t&&t.focus(r)}static getFocusableSelectorString(t=""){return`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        .p-inputtext:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t},\n        .p-button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${t}`}static getFocusableElements(t,r=""){let i=this.find(t,this.getFocusableSelectorString(r)),a=[];for(let d of i){const f=getComputedStyle(d);this.isVisible(d)&&"none"!=f.display&&"hidden"!=f.visibility&&a.push(d)}return a}static getFocusableElement(t,r=""){let i=this.findSingle(t,this.getFocusableSelectorString(r));if(i){const a=getComputedStyle(i);if(this.isVisible(i)&&"none"!=a.display&&"hidden"!=a.visibility)return i}return null}static getFirstFocusableElement(t,r=""){const i=this.getFocusableElements(t,r);return i.length>0?i[0]:null}static getLastFocusableElement(t,r){const i=this.getFocusableElements(t,r);return i.length>0?i[i.length-1]:null}static getNextFocusableElement(t,r=!1){const i=e.getFocusableElements(t);let a=0;if(i&&i.length>0){const d=i.indexOf(i[0].ownerDocument.activeElement);r?a=-1==d||0===d?i.length-1:d-1:-1!=d&&d!==i.length-1&&(a=d+1)}return i[a]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,r){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return r?.nextElementSibling;case"@prev":return r?.previousElementSibling;case"@parent":return r?.parentElement;case"@grandparent":return r?.parentElement.parentElement;default:const i=typeof t;if("string"===i)return document.querySelector(t);if("object"===i&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const d=(f=t)&&f.constructor&&f.call&&f.apply?t():t;return d&&9===d.nodeType||this.isExist(d)?d:null}var f}static isClient(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}static getAttribute(t,r){if(t){const i=t.getAttribute(r);return isNaN(i)?"true"===i||"false"===i?"true"===i:i:+i}}static calculateBodyScrollbarWidth(){return window.innerWidth-document.documentElement.offsetWidth}static blockBodyScroll(t="p-overflow-hidden"){document.body.style.setProperty("--scrollbar-width",this.calculateBodyScrollbarWidth()+"px"),this.addClass(document.body,t)}static unblockBodyScroll(t="p-overflow-hidden"){document.body.style.removeProperty("--scrollbar-width"),this.removeClass(document.body,t)}static createElement(t,r={},...i){if(t){const a=document.createElement(t);return this.setAttributes(a,r),a.append(...i),a}}static setAttribute(t,r="",i){this.isElement(t)&&null!=i&&t.setAttribute(r,i)}static setAttributes(t,r={}){if(this.isElement(t)){const i=(a,d)=>{const f=t?.$attrs?.[a]?[t?.$attrs?.[a]]:[];return[d].flat().reduce((_,S)=>{if(null!=S){const M=typeof S;if("string"===M||"number"===M)_.push(S);else if("object"===M){const k=Array.isArray(S)?i(a,S):Object.entries(S).map(([F,L])=>"style"!==a||!L&&0!==L?L?F:void 0:`${F.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${L}`);_=k.length?_.concat(k.filter(F=>!!F)):_}}return _},f)};Object.entries(r).forEach(([a,d])=>{if(null!=d){const f=a.match(/^on(.+)/);f?t.addEventListener(f[1].toLowerCase(),d):"pBind"===a?this.setAttributes(t,d):(d="class"===a?[...new Set(i("class",d))].join(" ").trim():"style"===a?i("style",d).join(";").trim():d,(t.$attrs=t.$attrs||{})&&(t.$attrs[a]=d),t.setAttribute(a,d))}})}}static isFocusableElement(t,r=""){return!!this.isElement(t)&&t.matches(`button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r},\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden])${r}`)}}return e})();class pie{element;listener;scrollableParents;constructor(n,t=()=>{}){this.element=n,this.listener=t}bindScrollListener(){this.scrollableParents=hL.getScrollableParents(this.element);for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let n=0;n<this.scrollableParents.length;n++)this.scrollableParents[n].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let gie=(()=>{class e extends Lu{autofocus=!1;focused=!1;platformId=Fe(dd);document=Fe(Be);host=Fe(os);ngAfterContentChecked(){!1===this.autofocus?this.host.nativeElement.removeAttribute("autofocus"):this.host.nativeElement.setAttribute("autofocus",!0),this.focused||this.autoFocus()}ngAfterViewChecked(){this.focused||this.autoFocus()}autoFocus(){gE(this.platformId)&&this.autofocus&&setTimeout(()=>{const t=hL.getFocusableElements(this.host?.nativeElement);0===t.length&&this.host.nativeElement.focus(),t.length>0&&t[0].focus(),this.focused=!0})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275dir=qi({type:e,selectors:[["","pAutoFocus",""]],inputs:{autofocus:[0,"pAutoFocus","autofocus"]},features:[Ms]})}return e})();const yie={root:({instance:e})=>["p-badge p-component",{"p-badge-circle":Pn(e.value())&&1===String(e.value()).length,"p-badge-dot":xc(e.value()),"p-badge-sm":"small"===e.size()||"small"===e.badgeSize(),"p-badge-lg":"large"===e.size()||"large"===e.badgeSize(),"p-badge-xl":"xlarge"===e.size()||"xlarge"===e.badgeSize(),"p-badge-info":"info"===e.severity(),"p-badge-success":"success"===e.severity(),"p-badge-warn":"warn"===e.severity(),"p-badge-danger":"danger"===e.severity(),"p-badge-secondary":"secondary"===e.severity(),"p-badge-contrast":"contrast"===e.severity()}]};let fL=(()=>{class e extends Cc{name="badge";theme="\n    \n    .p-badge {\n        display: inline-flex;\n        border-radius: dt('badge.border.radius');\n        align-items: center;\n        justify-content: center;\n        padding: dt('badge.padding');\n        background: dt('badge.primary.background');\n        color: dt('badge.primary.color');\n        font-size: dt('badge.font.size');\n        font-weight: dt('badge.font.weight');\n        min-width: dt('badge.min.width');\n        height: dt('badge.height');\n    }\n\n    .p-badge-dot {\n        width: dt('badge.dot.size');\n        min-width: dt('badge.dot.size');\n        height: dt('badge.dot.size');\n        border-radius: 50%;\n        padding: 0;\n    }\n\n    .p-badge-circle {\n        padding: 0;\n        border-radius: 50%;\n    }\n\n    .p-badge-secondary {\n        background: dt('badge.secondary.background');\n        color: dt('badge.secondary.color');\n    }\n\n    .p-badge-success {\n        background: dt('badge.success.background');\n        color: dt('badge.success.color');\n    }\n\n    .p-badge-info {\n        background: dt('badge.info.background');\n        color: dt('badge.info.color');\n    }\n\n    .p-badge-warn {\n        background: dt('badge.warn.background');\n        color: dt('badge.warn.color');\n    }\n\n    .p-badge-danger {\n        background: dt('badge.danger.background');\n        color: dt('badge.danger.color');\n    }\n\n    .p-badge-contrast {\n        background: dt('badge.contrast.background');\n        color: dt('badge.contrast.color');\n    }\n\n    .p-badge-sm {\n        font-size: dt('badge.sm.font.size');\n        min-width: dt('badge.sm.min.width');\n        height: dt('badge.sm.height');\n    }\n\n    .p-badge-lg {\n        font-size: dt('badge.lg.font.size');\n        min-width: dt('badge.lg.min.width');\n        height: dt('badge.lg.height');\n    }\n\n    .p-badge-xl {\n        font-size: dt('badge.xl.font.size');\n        min-width: dt('badge.xl.min.width');\n        height: dt('badge.xl.height');\n    }\n\n\n    /* For PrimeNG (directive)*/\n    .p-overlay-badge {\n        position: relative;\n    }\n\n    .p-overlay-badge > .p-badge {\n        position: absolute;\n        top: 0;\n        inset-inline-end: 0;\n        transform: translate(50%, -50%);\n        transform-origin: 100% 0;\n        margin: 0;\n    }\n";classes=yie;static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),pL=(()=>{class e extends Lu{styleClass=Id();badgeSize=Id();size=Id();severity=Id();value=Id();badgeDisabled=Id(!1,{transform:Hr});_componentStyle=Fe(fL);static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-badge"]],hostVars:4,hostBindings:function(r,i){2&r&&(cn(i.cn(i.cx("root"),i.styleClass())),HS("display",i.badgeDisabled()?"none":null))},inputs:{styleClass:[1,"styleClass"],badgeSize:[1,"badgeSize"],size:[1,"size"],severity:[1,"severity"],value:[1,"value"],badgeDisabled:[1,"badgeDisabled"]},features:[Mu([fL]),Ms],decls:1,vars:1,template:function(r,i){1&r&&Ed(0),2&r&&Iu(i.value())},dependencies:[Uh,bc],encapsulation:2,changeDetection:0})}return e})(),bie=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({imports:[pL,bc,bc]})}return e})();const wie=["*"],Sie={root:"p-fluid"};let gL=(()=>{class e extends Cc{name="fluid";classes=Sie;theme="\n    .p-progressbar {\n        display: block;\n        position: relative;\n        overflow: hidden;\n        height: dt('progressbar.height');\n        background: dt('progressbar.background');\n        border-radius: dt('progressbar.border.radius');\n    }\n\n    .p-progressbar-value {\n        margin: 0;\n        background: dt('progressbar.value.background');\n    }\n\n    .p-progressbar-label {\n        color: dt('progressbar.label.color');\n        font-size: dt('progressbar.label.font.size');\n        font-weight: dt('progressbar.label.font.weight');\n    }\n\n    .p-progressbar-determinate .p-progressbar-value {\n        height: 100%;\n        width: 0%;\n        position: absolute;\n        display: none;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        transition: width 1s ease-in-out;\n    }\n\n    .p-progressbar-determinate .p-progressbar-label {\n        display: inline-flex;\n    }\n\n    .p-progressbar-indeterminate .p-progressbar-value::before {\n        content: '';\n        position: absolute;\n        background: inherit;\n        inset-block-start: 0;\n        inset-inline-start: 0;\n        inset-block-end: 0;\n        will-change: inset-inline-start, inset-inline-end;\n        animation: p-progressbar-indeterminate-anim 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    }\n\n    .p-progressbar-indeterminate .p-progressbar-value::after {\n        content: '';\n        position: absolute;\n        background: inherit;\n        inset-block-start: 0;\n        inset-inline-start: 0;\n        inset-block-end: 0;\n        will-change: inset-inline-start, inset-inline-end;\n        animation: p-progressbar-indeterminate-anim-short 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite;\n        animation-delay: 1.15s;\n    }\n\n    @keyframes p-progressbar-indeterminate-anim {\n        0% {\n            inset-inline-start: -35%;\n            inset-inline-end: 100%;\n        }\n        60% {\n            inset-inline-start: 100%;\n            inset-inline-end: -90%;\n        }\n        100% {\n            inset-inline-start: 100%;\n            inset-inline-end: -90%;\n        }\n    }\n    @-webkit-keyframes p-progressbar-indeterminate-anim {\n        0% {\n            inset-inline-start: -35%;\n            inset-inline-end: 100%;\n        }\n        60% {\n            inset-inline-start: 100%;\n            inset-inline-end: -90%;\n        }\n        100% {\n            inset-inline-start: 100%;\n            inset-inline-end: -90%;\n        }\n    }\n\n    @keyframes p-progressbar-indeterminate-anim-short {\n        0% {\n            inset-inline-start: -200%;\n            inset-inline-end: 100%;\n        }\n        60% {\n            inset-inline-start: 107%;\n            inset-inline-end: -8%;\n        }\n        100% {\n            inset-inline-start: 107%;\n            inset-inline-end: -8%;\n        }\n    }\n    @-webkit-keyframes p-progressbar-indeterminate-anim-short {\n        0% {\n            inset-inline-start: -200%;\n            inset-inline-end: 100%;\n        }\n        60% {\n            inset-inline-start: 107%;\n            inset-inline-end: -8%;\n        }\n        100% {\n            inset-inline-start: 107%;\n            inset-inline-end: -8%;\n        }\n    }\n";static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),Cie=(()=>{class e extends Lu{_componentStyle=Fe(gL);static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-fluid"]],hostVars:2,hostBindings:function(r,i){2&r&&cn(i.cx("root"))},features:[Mu([gL]),Ms],ngContentSelectors:wie,decls:1,vars:0,template:function(r,i){1&r&&(bb(),xb(0))},dependencies:[Uh],encapsulation:2,changeDetection:0})}return e})();const Tie=["*"];let mL=(()=>{class e extends Cc{name="baseicon";css="\n.p-icon {\n    display: inline-block;\n    vertical-align: baseline;\n}\n\n.p-icon-spin {\n    -webkit-animation: p-icon-spin 2s infinite linear;\n    animation: p-icon-spin 2s infinite linear;\n}\n\n@-webkit-keyframes p-icon-spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(359deg);\n        transform: rotate(359deg);\n    }\n}\n\n@keyframes p-icon-spin {\n    0% {\n        -webkit-transform: rotate(0deg);\n        transform: rotate(0deg);\n    }\n    100% {\n        -webkit-transform: rotate(359deg);\n        transform: rotate(359deg);\n    }\n}\n";static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),hT=(()=>{class e extends Lu{spin=!1;_componentStyle=Fe(mL);getClassNames(){return W0("p-icon",{"p-icon-spin":this.spin})}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["ng-component"]],hostAttrs:["width","14","height","14","viewBox","0 0 14 14","fill","none","xmlns","http://www.w3.org/2000/svg"],hostVars:2,hostBindings:function(r,i){2&r&&cn(i.getClassNames())},inputs:{spin:[2,"spin","spin",Hr]},features:[Mu([mL]),Ms],ngContentSelectors:Tie,decls:1,vars:0,template:function(r,i){1&r&&(bb(),xb(0))},encapsulation:2,changeDetection:0})}return e})();const Die=["data-p-icon","spinner"];let kie=(()=>{class e extends hT{pathId;ngOnInit(){super.ngOnInit(),this.pathId="url(#"+G1()+")"}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["","data-p-icon","spinner"]],features:[Ms],attrs:Die,decls:5,vars:2,consts:[["d","M6.99701 14C5.85441 13.999 4.72939 13.7186 3.72012 13.1832C2.71084 12.6478 1.84795 11.8737 1.20673 10.9284C0.565504 9.98305 0.165424 8.89526 0.041387 7.75989C-0.0826496 6.62453 0.073125 5.47607 0.495122 4.4147C0.917119 3.35333 1.59252 2.4113 2.46241 1.67077C3.33229 0.930247 4.37024 0.413729 5.4857 0.166275C6.60117 -0.0811796 7.76026 -0.0520535 8.86188 0.251112C9.9635 0.554278 10.9742 1.12227 11.8057 1.90555C11.915 2.01493 11.9764 2.16319 11.9764 2.31778C11.9764 2.47236 11.915 2.62062 11.8057 2.73C11.7521 2.78503 11.688 2.82877 11.6171 2.85864C11.5463 2.8885 11.4702 2.90389 11.3933 2.90389C11.3165 2.90389 11.2404 2.8885 11.1695 2.85864C11.0987 2.82877 11.0346 2.78503 10.9809 2.73C9.9998 1.81273 8.73246 1.26138 7.39226 1.16876C6.05206 1.07615 4.72086 1.44794 3.62279 2.22152C2.52471 2.99511 1.72683 4.12325 1.36345 5.41602C1.00008 6.70879 1.09342 8.08723 1.62775 9.31926C2.16209 10.5513 3.10478 11.5617 4.29713 12.1803C5.48947 12.7989 6.85865 12.988 8.17414 12.7157C9.48963 12.4435 10.6711 11.7264 11.5196 10.6854C12.3681 9.64432 12.8319 8.34282 12.8328 7C12.8328 6.84529 12.8943 6.69692 13.0038 6.58752C13.1132 6.47812 13.2616 6.41667 13.4164 6.41667C13.5712 6.41667 13.7196 6.47812 13.8291 6.58752C13.9385 6.69692 14 6.84529 14 7C14 8.85651 13.2622 10.637 11.9489 11.9497C10.6356 13.2625 8.85432 14 6.99701 14Z","fill","currentColor"],[3,"id"],["width","14","height","14","fill","white"]],template:function(r,i){1&r&&(re(),e0(0,"g"),Dg(1,"path",0),t0(),e0(2,"defs")(3,"clipPath",1),Dg(4,"rect",2),t0()()),2&r&&(so("clip-path",i.pathId),bt(3),BS("id",i.pathId))},encapsulation:2})}return e})();const Rie={root:"p-ink"};let _L=(()=>{class e extends Cc{name="ripple";theme="\n    \n    .p-ink {\n        display: block;\n        position: absolute;\n        background: dt('ripple.background');\n        border-radius: 100%;\n        transform: scale(0);\n        pointer-events: none;\n    }\n\n    .p-ink-active {\n        animation: ripple 0.4s linear;\n    }\n\n    @keyframes ripple {\n        100% {\n            opacity: 0;\n            transform: scale(2.5);\n        }\n    }\n\n    /* For PrimeNG */\n    .p-ripple {\n        overflow: hidden;\n        position: relative;\n    }\n\n    .p-ripple-disabled .p-ink {\n        display: none !important;\n    }\n\n    @keyframes ripple {\n        100% {\n            opacity: 0;\n            transform: scale(2.5);\n        }\n    }\n";classes=Rie;static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),Lie=(()=>{class e extends Lu{zone=Fe(Fn);_componentStyle=Fe(_L);animationListener;mouseDownListener;timeout;constructor(){super(),Ub(()=>{gE(this.platformId)&&(this.config.ripple()?this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.renderer.listen(this.el.nativeElement,"mousedown",this.onMouseDown.bind(this))}):this.remove())})}ngAfterViewInit(){super.ngAfterViewInit()}onMouseDown(t){let r=this.getInk();if(!r||"none"===this.document.defaultView?.getComputedStyle(r,null).display)return;if(Yg(r,"p-ink-active"),!sL(r)&&!cL(r)){let f=Math.max(Il(this.el.nativeElement),Nu(this.el.nativeElement));r.style.height=f+"px",r.style.width=f+"px"}let i=function aL(e){if(e){let n=e.getBoundingClientRect();return{top:n.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:n.left+(window.pageXOffset||sT(document.documentElement)||sT(document.body)||0)}}return{top:"auto",left:"auto"}}(this.el.nativeElement),a=t.pageX-i.left+this.document.body.scrollTop-cL(r)/2,d=t.pageY-i.top+this.document.body.scrollLeft-sL(r)/2;this.renderer.setStyle(r,"top",d+"px"),this.renderer.setStyle(r,"left",a+"px"),function oT(e,n){if(e&&n){let t=r=>{G0(e,r)||(e.classList?e.classList.add(r):e.className+=" "+r)};[n].flat().filter(Boolean).forEach(r=>r.split(" ").forEach(t))}}(r,"p-ink-active"),this.timeout=setTimeout(()=>{let f=this.getInk();f&&Yg(f,"p-ink-active")},401)}getInk(){const t=this.el.nativeElement.children;for(let r=0;r<t.length;r++)if("string"==typeof t[r].className&&-1!==t[r].className.indexOf("p-ink"))return t[r];return null}resetInk(){let t=this.getInk();t&&Yg(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),Yg(t.currentTarget,"p-ink-active")}create(){let t=this.renderer.createElement("span");this.renderer.addClass(t,"p-ink"),this.renderer.appendChild(this.el.nativeElement,t),this.renderer.setAttribute(t,"aria-hidden","true"),this.renderer.setAttribute(t,"role","presentation"),this.animationListener||(this.animationListener=this.renderer.listen(t,"animationend",this.onAnimationEnd.bind(this)))}remove(){let t=this.getInk();t&&(this.mouseDownListener&&this.mouseDownListener(),this.animationListener&&this.animationListener(),this.mouseDownListener=null,this.animationListener=null,function mZ(e){var n;e&&("remove"in Element.prototype?e.remove():null==(n=e.parentNode)||n.removeChild(e))}(t))}ngOnDestroy(){this.config&&this.config.ripple()&&this.remove(),super.ngOnDestroy()}static \u0275fac=function(r){return new(r||e)};static \u0275dir=qi({type:e,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple"],features:[Mu([_L]),Ms]})}return e})();const Fie=["content"],Bie=["loadingicon"],zie=["icon"],jie=["*"],yL=e=>({class:e});function Vie(e,n){1&e&&gb(0)}function Uie(e,n){1&e&&Er(0,"span"),2&e&&(cn(et(3).cx("loadingIcon")),so("aria-hidden",!0)("data-pc-section","loadingicon"))}function $ie(e,n){if(1&e&&(re(),Er(0,"svg",7)),2&e){const t=et(3);cn(t.cn(t.cx("loadingIcon"),t.spinnerIconClass())),st("spin",!0),so("aria-hidden",!0)("data-pc-section","loadingicon")}}function Gie(e,n){if(1&e&&(yo(0),Nn(1,Uie,1,4,"span",3)(2,$ie,1,5,"svg",6),ao()),2&e){const t=et(2);bt(),st("ngIf",t.loadingIcon),bt(),st("ngIf",!t.loadingIcon)}}function Hie(e,n){}function qie(e,n){if(1&e&&Nn(0,Hie,0,0,"ng-template",8),2&e){const t=et(2);st("ngIf",t.loadingIconTemplate||t._loadingIconTemplate)}}function Wie(e,n){if(1&e&&(yo(0),Nn(1,Gie,3,2,"ng-container",2)(2,qie,1,1,null,5),ao()),2&e){const t=et();bt(),st("ngIf",!t.loadingIconTemplate&&!t._loadingIconTemplate),bt(),st("ngTemplateOutlet",t.loadingIconTemplate||t._loadingIconTemplate)("ngTemplateOutletContext",Td(3,yL,t.cx("loadingIcon")))}}function Zie(e,n){1&e&&Er(0,"span"),2&e&&(cn(et(2).cx("icon")),so("data-pc-section","icon"))}function Kie(e,n){}function Yie(e,n){if(1&e&&Nn(0,Kie,0,0,"ng-template",8),2&e){const t=et(2);st("ngIf",!t.icon&&(t.iconTemplate||t._iconTemplate))}}function Xie(e,n){if(1&e&&(yo(0),Nn(1,Zie,1,3,"span",3)(2,Yie,1,1,null,5),ao()),2&e){const t=et();bt(),st("ngIf",t.icon&&!t.iconTemplate&&!t._iconTemplate),bt(),st("ngTemplateOutlet",t.iconTemplate||t._iconTemplate)("ngTemplateOutletContext",Td(3,yL,t.cx("icon")))}}function Qie(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et();cn(t.cx("label")),so("aria-hidden",t.icon&&!t.label)("data-pc-section","label"),bt(),Iu(t.label)}}function Jie(e,n){if(1&e&&Er(0,"p-badge",9),2&e){const t=et();st("value",t.badge)("severity",t.badgeSeverity)}}const eoe={root:({instance:e})=>["p-button p-component",{"p-button-icon-only":(e.icon||e.buttonProps?.icon||e.iconTemplate||e._iconTemplate||e.loadingIcon||e.loadingIconTemplate||e._loadingIconTemplate)&&!e.label&&!e.buttonProps?.label,"p-button-vertical":("top"===e.iconPos||"bottom"===e.iconPos)&&e.label,"p-button-loading":e.loading||e.buttonProps?.loading,"p-button-link":e.link||e.buttonProps?.link,[`p-button-${e.severity||e.buttonProps?.severity}`]:e.severity||e.buttonProps?.severity,"p-button-raised":e.raised||e.buttonProps?.raised,"p-button-rounded":e.rounded||e.buttonProps?.rounded,"p-button-text":e.text||"text"===e.variant||e.buttonProps?.text||"text"===e.buttonProps?.variant,"p-button-outlined":e.outlined||"outlined"===e.variant||e.buttonProps?.outlined||"outlined"===e.buttonProps?.variant,"p-button-sm":"small"===e.size||"small"===e.buttonProps?.size,"p-button-lg":"large"===e.size||"large"===e.buttonProps?.size,"p-button-plain":e.plain||e.buttonProps?.plain,"p-button-fluid":e.hasFluid}],loadingIcon:"p-button-loading-icon",icon:({instance:e})=>["p-button-icon",{[`p-button-icon-${e.iconPos||e.buttonProps?.iconPos}`]:e.label||e.buttonProps?.label,"p-button-icon-left":("left"===e.iconPos||"left"===e.buttonProps?.iconPos)&&e.label||e.buttonProps?.label,"p-button-icon-right":("right"===e.iconPos||"right"===e.buttonProps?.iconPos)&&e.label||e.buttonProps?.label},e.icon,e.buttonProps?.icon],spinnerIcon:({instance:e})=>Object.entries(e.iconClass()).filter(([,n])=>!!n).reduce((n,[t])=>n+` ${t}`,"p-button-loading-icon"),label:"p-button-label"};let vL=(()=>{class e extends Cc{name="button";theme="\n    .p-button {\n        display: inline-flex;\n        cursor: pointer;\n        user-select: none;\n        align-items: center;\n        justify-content: center;\n        overflow: hidden;\n        position: relative;\n        color: dt('button.primary.color');\n        background: dt('button.primary.background');\n        border: 1px solid dt('button.primary.border.color');\n        padding: dt('button.padding.y') dt('button.padding.x');\n        font-size: 1rem;\n        font-family: inherit;\n        font-feature-settings: inherit;\n        transition:\n            background dt('button.transition.duration'),\n            color dt('button.transition.duration'),\n            border-color dt('button.transition.duration'),\n            outline-color dt('button.transition.duration'),\n            box-shadow dt('button.transition.duration');\n        border-radius: dt('button.border.radius');\n        outline-color: transparent;\n        gap: dt('button.gap');\n    }\n\n    .p-button:disabled {\n        cursor: default;\n    }\n\n    .p-button-icon-right {\n        order: 1;\n    }\n\n    .p-button-icon-right:dir(rtl) {\n        order: -1;\n    }\n\n    .p-button:not(.p-button-vertical) .p-button-icon:not(.p-button-icon-right):dir(rtl) {\n        order: 1;\n    }\n\n    .p-button-icon-bottom {\n        order: 2;\n    }\n\n    .p-button-icon-only {\n        width: dt('button.icon.only.width');\n        padding-inline-start: 0;\n        padding-inline-end: 0;\n        gap: 0;\n    }\n\n    .p-button-icon-only.p-button-rounded {\n        border-radius: 50%;\n        height: dt('button.icon.only.width');\n    }\n\n    .p-button-icon-only .p-button-label {\n        visibility: hidden;\n        width: 0;\n    }\n\n    .p-button-icon-only::after {\n        content: \"\0A0\";\n        visibility: hidden;\n        width: 0;\n    }\n\n    .p-button-sm {\n        font-size: dt('button.sm.font.size');\n        padding: dt('button.sm.padding.y') dt('button.sm.padding.x');\n    }\n\n    .p-button-sm .p-button-icon {\n        font-size: dt('button.sm.font.size');\n    }\n\n    .p-button-sm.p-button-icon-only {\n        width: dt('button.sm.icon.only.width');\n    }\n\n    .p-button-sm.p-button-icon-only.p-button-rounded {\n        height: dt('button.sm.icon.only.width');\n    }\n\n    .p-button-lg {\n        font-size: dt('button.lg.font.size');\n        padding: dt('button.lg.padding.y') dt('button.lg.padding.x');\n    }\n\n    .p-button-lg .p-button-icon {\n        font-size: dt('button.lg.font.size');\n    }\n\n    .p-button-lg.p-button-icon-only {\n        width: dt('button.lg.icon.only.width');\n    }\n\n    .p-button-lg.p-button-icon-only.p-button-rounded {\n        height: dt('button.lg.icon.only.width');\n    }\n\n    .p-button-vertical {\n        flex-direction: column;\n    }\n\n    .p-button-label {\n        font-weight: dt('button.label.font.weight');\n    }\n\n    .p-button-fluid {\n        width: 100%;\n    }\n\n    .p-button-fluid.p-button-icon-only {\n        width: dt('button.icon.only.width');\n    }\n\n    .p-button:not(:disabled):hover {\n        background: dt('button.primary.hover.background');\n        border: 1px solid dt('button.primary.hover.border.color');\n        color: dt('button.primary.hover.color');\n    }\n\n    .p-button:not(:disabled):active {\n        background: dt('button.primary.active.background');\n        border: 1px solid dt('button.primary.active.border.color');\n        color: dt('button.primary.active.color');\n    }\n\n    .p-button:focus-visible {\n        box-shadow: dt('button.primary.focus.ring.shadow');\n        outline: dt('button.focus.ring.width') dt('button.focus.ring.style') dt('button.primary.focus.ring.color');\n        outline-offset: dt('button.focus.ring.offset');\n    }\n\n    .p-button .p-badge {\n        min-width: dt('button.badge.size');\n        height: dt('button.badge.size');\n        line-height: dt('button.badge.size');\n    }\n\n    .p-button-raised {\n        box-shadow: dt('button.raised.shadow');\n    }\n\n    .p-button-rounded {\n        border-radius: dt('button.rounded.border.radius');\n    }\n\n    .p-button-secondary {\n        background: dt('button.secondary.background');\n        border: 1px solid dt('button.secondary.border.color');\n        color: dt('button.secondary.color');\n    }\n\n    .p-button-secondary:not(:disabled):hover {\n        background: dt('button.secondary.hover.background');\n        border: 1px solid dt('button.secondary.hover.border.color');\n        color: dt('button.secondary.hover.color');\n    }\n\n    .p-button-secondary:not(:disabled):active {\n        background: dt('button.secondary.active.background');\n        border: 1px solid dt('button.secondary.active.border.color');\n        color: dt('button.secondary.active.color');\n    }\n\n    .p-button-secondary:focus-visible {\n        outline-color: dt('button.secondary.focus.ring.color');\n        box-shadow: dt('button.secondary.focus.ring.shadow');\n    }\n\n    .p-button-success {\n        background: dt('button.success.background');\n        border: 1px solid dt('button.success.border.color');\n        color: dt('button.success.color');\n    }\n\n    .p-button-success:not(:disabled):hover {\n        background: dt('button.success.hover.background');\n        border: 1px solid dt('button.success.hover.border.color');\n        color: dt('button.success.hover.color');\n    }\n\n    .p-button-success:not(:disabled):active {\n        background: dt('button.success.active.background');\n        border: 1px solid dt('button.success.active.border.color');\n        color: dt('button.success.active.color');\n    }\n\n    .p-button-success:focus-visible {\n        outline-color: dt('button.success.focus.ring.color');\n        box-shadow: dt('button.success.focus.ring.shadow');\n    }\n\n    .p-button-info {\n        background: dt('button.info.background');\n        border: 1px solid dt('button.info.border.color');\n        color: dt('button.info.color');\n    }\n\n    .p-button-info:not(:disabled):hover {\n        background: dt('button.info.hover.background');\n        border: 1px solid dt('button.info.hover.border.color');\n        color: dt('button.info.hover.color');\n    }\n\n    .p-button-info:not(:disabled):active {\n        background: dt('button.info.active.background');\n        border: 1px solid dt('button.info.active.border.color');\n        color: dt('button.info.active.color');\n    }\n\n    .p-button-info:focus-visible {\n        outline-color: dt('button.info.focus.ring.color');\n        box-shadow: dt('button.info.focus.ring.shadow');\n    }\n\n    .p-button-warn {\n        background: dt('button.warn.background');\n        border: 1px solid dt('button.warn.border.color');\n        color: dt('button.warn.color');\n    }\n\n    .p-button-warn:not(:disabled):hover {\n        background: dt('button.warn.hover.background');\n        border: 1px solid dt('button.warn.hover.border.color');\n        color: dt('button.warn.hover.color');\n    }\n\n    .p-button-warn:not(:disabled):active {\n        background: dt('button.warn.active.background');\n        border: 1px solid dt('button.warn.active.border.color');\n        color: dt('button.warn.active.color');\n    }\n\n    .p-button-warn:focus-visible {\n        outline-color: dt('button.warn.focus.ring.color');\n        box-shadow: dt('button.warn.focus.ring.shadow');\n    }\n\n    .p-button-help {\n        background: dt('button.help.background');\n        border: 1px solid dt('button.help.border.color');\n        color: dt('button.help.color');\n    }\n\n    .p-button-help:not(:disabled):hover {\n        background: dt('button.help.hover.background');\n        border: 1px solid dt('button.help.hover.border.color');\n        color: dt('button.help.hover.color');\n    }\n\n    .p-button-help:not(:disabled):active {\n        background: dt('button.help.active.background');\n        border: 1px solid dt('button.help.active.border.color');\n        color: dt('button.help.active.color');\n    }\n\n    .p-button-help:focus-visible {\n        outline-color: dt('button.help.focus.ring.color');\n        box-shadow: dt('button.help.focus.ring.shadow');\n    }\n\n    .p-button-danger {\n        background: dt('button.danger.background');\n        border: 1px solid dt('button.danger.border.color');\n        color: dt('button.danger.color');\n    }\n\n    .p-button-danger:not(:disabled):hover {\n        background: dt('button.danger.hover.background');\n        border: 1px solid dt('button.danger.hover.border.color');\n        color: dt('button.danger.hover.color');\n    }\n\n    .p-button-danger:not(:disabled):active {\n        background: dt('button.danger.active.background');\n        border: 1px solid dt('button.danger.active.border.color');\n        color: dt('button.danger.active.color');\n    }\n\n    .p-button-danger:focus-visible {\n        outline-color: dt('button.danger.focus.ring.color');\n        box-shadow: dt('button.danger.focus.ring.shadow');\n    }\n\n    .p-button-contrast {\n        background: dt('button.contrast.background');\n        border: 1px solid dt('button.contrast.border.color');\n        color: dt('button.contrast.color');\n    }\n\n    .p-button-contrast:not(:disabled):hover {\n        background: dt('button.contrast.hover.background');\n        border: 1px solid dt('button.contrast.hover.border.color');\n        color: dt('button.contrast.hover.color');\n    }\n\n    .p-button-contrast:not(:disabled):active {\n        background: dt('button.contrast.active.background');\n        border: 1px solid dt('button.contrast.active.border.color');\n        color: dt('button.contrast.active.color');\n    }\n\n    .p-button-contrast:focus-visible {\n        outline-color: dt('button.contrast.focus.ring.color');\n        box-shadow: dt('button.contrast.focus.ring.shadow');\n    }\n\n    .p-button-outlined {\n        background: transparent;\n        border-color: dt('button.outlined.primary.border.color');\n        color: dt('button.outlined.primary.color');\n    }\n\n    .p-button-outlined:not(:disabled):hover {\n        background: dt('button.outlined.primary.hover.background');\n        border-color: dt('button.outlined.primary.border.color');\n        color: dt('button.outlined.primary.color');\n    }\n\n    .p-button-outlined:not(:disabled):active {\n        background: dt('button.outlined.primary.active.background');\n        border-color: dt('button.outlined.primary.border.color');\n        color: dt('button.outlined.primary.color');\n    }\n\n    .p-button-outlined.p-button-secondary {\n        border-color: dt('button.outlined.secondary.border.color');\n        color: dt('button.outlined.secondary.color');\n    }\n\n    .p-button-outlined.p-button-secondary:not(:disabled):hover {\n        background: dt('button.outlined.secondary.hover.background');\n        border-color: dt('button.outlined.secondary.border.color');\n        color: dt('button.outlined.secondary.color');\n    }\n\n    .p-button-outlined.p-button-secondary:not(:disabled):active {\n        background: dt('button.outlined.secondary.active.background');\n        border-color: dt('button.outlined.secondary.border.color');\n        color: dt('button.outlined.secondary.color');\n    }\n\n    .p-button-outlined.p-button-success {\n        border-color: dt('button.outlined.success.border.color');\n        color: dt('button.outlined.success.color');\n    }\n\n    .p-button-outlined.p-button-success:not(:disabled):hover {\n        background: dt('button.outlined.success.hover.background');\n        border-color: dt('button.outlined.success.border.color');\n        color: dt('button.outlined.success.color');\n    }\n\n    .p-button-outlined.p-button-success:not(:disabled):active {\n        background: dt('button.outlined.success.active.background');\n        border-color: dt('button.outlined.success.border.color');\n        color: dt('button.outlined.success.color');\n    }\n\n    .p-button-outlined.p-button-info {\n        border-color: dt('button.outlined.info.border.color');\n        color: dt('button.outlined.info.color');\n    }\n\n    .p-button-outlined.p-button-info:not(:disabled):hover {\n        background: dt('button.outlined.info.hover.background');\n        border-color: dt('button.outlined.info.border.color');\n        color: dt('button.outlined.info.color');\n    }\n\n    .p-button-outlined.p-button-info:not(:disabled):active {\n        background: dt('button.outlined.info.active.background');\n        border-color: dt('button.outlined.info.border.color');\n        color: dt('button.outlined.info.color');\n    }\n\n    .p-button-outlined.p-button-warn {\n        border-color: dt('button.outlined.warn.border.color');\n        color: dt('button.outlined.warn.color');\n    }\n\n    .p-button-outlined.p-button-warn:not(:disabled):hover {\n        background: dt('button.outlined.warn.hover.background');\n        border-color: dt('button.outlined.warn.border.color');\n        color: dt('button.outlined.warn.color');\n    }\n\n    .p-button-outlined.p-button-warn:not(:disabled):active {\n        background: dt('button.outlined.warn.active.background');\n        border-color: dt('button.outlined.warn.border.color');\n        color: dt('button.outlined.warn.color');\n    }\n\n    .p-button-outlined.p-button-help {\n        border-color: dt('button.outlined.help.border.color');\n        color: dt('button.outlined.help.color');\n    }\n\n    .p-button-outlined.p-button-help:not(:disabled):hover {\n        background: dt('button.outlined.help.hover.background');\n        border-color: dt('button.outlined.help.border.color');\n        color: dt('button.outlined.help.color');\n    }\n\n    .p-button-outlined.p-button-help:not(:disabled):active {\n        background: dt('button.outlined.help.active.background');\n        border-color: dt('button.outlined.help.border.color');\n        color: dt('button.outlined.help.color');\n    }\n\n    .p-button-outlined.p-button-danger {\n        border-color: dt('button.outlined.danger.border.color');\n        color: dt('button.outlined.danger.color');\n    }\n\n    .p-button-outlined.p-button-danger:not(:disabled):hover {\n        background: dt('button.outlined.danger.hover.background');\n        border-color: dt('button.outlined.danger.border.color');\n        color: dt('button.outlined.danger.color');\n    }\n\n    .p-button-outlined.p-button-danger:not(:disabled):active {\n        background: dt('button.outlined.danger.active.background');\n        border-color: dt('button.outlined.danger.border.color');\n        color: dt('button.outlined.danger.color');\n    }\n\n    .p-button-outlined.p-button-contrast {\n        border-color: dt('button.outlined.contrast.border.color');\n        color: dt('button.outlined.contrast.color');\n    }\n\n    .p-button-outlined.p-button-contrast:not(:disabled):hover {\n        background: dt('button.outlined.contrast.hover.background');\n        border-color: dt('button.outlined.contrast.border.color');\n        color: dt('button.outlined.contrast.color');\n    }\n\n    .p-button-outlined.p-button-contrast:not(:disabled):active {\n        background: dt('button.outlined.contrast.active.background');\n        border-color: dt('button.outlined.contrast.border.color');\n        color: dt('button.outlined.contrast.color');\n    }\n\n    .p-button-outlined.p-button-plain {\n        border-color: dt('button.outlined.plain.border.color');\n        color: dt('button.outlined.plain.color');\n    }\n\n    .p-button-outlined.p-button-plain:not(:disabled):hover {\n        background: dt('button.outlined.plain.hover.background');\n        border-color: dt('button.outlined.plain.border.color');\n        color: dt('button.outlined.plain.color');\n    }\n\n    .p-button-outlined.p-button-plain:not(:disabled):active {\n        background: dt('button.outlined.plain.active.background');\n        border-color: dt('button.outlined.plain.border.color');\n        color: dt('button.outlined.plain.color');\n    }\n\n    .p-button-text {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.primary.color');\n    }\n\n    .p-button-text:not(:disabled):hover {\n        background: dt('button.text.primary.hover.background');\n        border-color: transparent;\n        color: dt('button.text.primary.color');\n    }\n\n    .p-button-text:not(:disabled):active {\n        background: dt('button.text.primary.active.background');\n        border-color: transparent;\n        color: dt('button.text.primary.color');\n    }\n\n    .p-button-text.p-button-secondary {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.secondary.color');\n    }\n\n    .p-button-text.p-button-secondary:not(:disabled):hover {\n        background: dt('button.text.secondary.hover.background');\n        border-color: transparent;\n        color: dt('button.text.secondary.color');\n    }\n\n    .p-button-text.p-button-secondary:not(:disabled):active {\n        background: dt('button.text.secondary.active.background');\n        border-color: transparent;\n        color: dt('button.text.secondary.color');\n    }\n\n    .p-button-text.p-button-success {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.success.color');\n    }\n\n    .p-button-text.p-button-success:not(:disabled):hover {\n        background: dt('button.text.success.hover.background');\n        border-color: transparent;\n        color: dt('button.text.success.color');\n    }\n\n    .p-button-text.p-button-success:not(:disabled):active {\n        background: dt('button.text.success.active.background');\n        border-color: transparent;\n        color: dt('button.text.success.color');\n    }\n\n    .p-button-text.p-button-info {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.info.color');\n    }\n\n    .p-button-text.p-button-info:not(:disabled):hover {\n        background: dt('button.text.info.hover.background');\n        border-color: transparent;\n        color: dt('button.text.info.color');\n    }\n\n    .p-button-text.p-button-info:not(:disabled):active {\n        background: dt('button.text.info.active.background');\n        border-color: transparent;\n        color: dt('button.text.info.color');\n    }\n\n    .p-button-text.p-button-warn {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.warn.color');\n    }\n\n    .p-button-text.p-button-warn:not(:disabled):hover {\n        background: dt('button.text.warn.hover.background');\n        border-color: transparent;\n        color: dt('button.text.warn.color');\n    }\n\n    .p-button-text.p-button-warn:not(:disabled):active {\n        background: dt('button.text.warn.active.background');\n        border-color: transparent;\n        color: dt('button.text.warn.color');\n    }\n\n    .p-button-text.p-button-help {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.help.color');\n    }\n\n    .p-button-text.p-button-help:not(:disabled):hover {\n        background: dt('button.text.help.hover.background');\n        border-color: transparent;\n        color: dt('button.text.help.color');\n    }\n\n    .p-button-text.p-button-help:not(:disabled):active {\n        background: dt('button.text.help.active.background');\n        border-color: transparent;\n        color: dt('button.text.help.color');\n    }\n\n    .p-button-text.p-button-danger {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.danger.color');\n    }\n\n    .p-button-text.p-button-danger:not(:disabled):hover {\n        background: dt('button.text.danger.hover.background');\n        border-color: transparent;\n        color: dt('button.text.danger.color');\n    }\n\n    .p-button-text.p-button-danger:not(:disabled):active {\n        background: dt('button.text.danger.active.background');\n        border-color: transparent;\n        color: dt('button.text.danger.color');\n    }\n\n    .p-button-text.p-button-contrast {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.contrast.color');\n    }\n\n    .p-button-text.p-button-contrast:not(:disabled):hover {\n        background: dt('button.text.contrast.hover.background');\n        border-color: transparent;\n        color: dt('button.text.contrast.color');\n    }\n\n    .p-button-text.p-button-contrast:not(:disabled):active {\n        background: dt('button.text.contrast.active.background');\n        border-color: transparent;\n        color: dt('button.text.contrast.color');\n    }\n\n    .p-button-text.p-button-plain {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.text.plain.color');\n    }\n\n    .p-button-text.p-button-plain:not(:disabled):hover {\n        background: dt('button.text.plain.hover.background');\n        border-color: transparent;\n        color: dt('button.text.plain.color');\n    }\n\n    .p-button-text.p-button-plain:not(:disabled):active {\n        background: dt('button.text.plain.active.background');\n        border-color: transparent;\n        color: dt('button.text.plain.color');\n    }\n\n    .p-button-link {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.link.color');\n    }\n\n    .p-button-link:not(:disabled):hover {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.link.hover.color');\n    }\n\n    .p-button-link:not(:disabled):hover .p-button-label {\n        text-decoration: underline;\n    }\n\n    .p-button-link:not(:disabled):active {\n        background: transparent;\n        border-color: transparent;\n        color: dt('button.link.active.color');\n    }\n";classes=eoe;static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),noe=(()=>{class e extends Lu{type="button";iconPos="left";icon;badge;label;disabled;loading=!1;loadingIcon;raised=!1;rounded=!1;text=!1;plain=!1;severity;outlined=!1;link=!1;tabindex;size;variant;style;styleClass;badgeClass;badgeSeverity="secondary";ariaLabel;buttonProps;autofocus;fluid=Id(void 0,{transform:Hr});onClick=new Ci;onFocus=new Ci;onBlur=new Ci;contentTemplate;loadingIconTemplate;iconTemplate;templates;pcFluid=Fe(Cie,{optional:!0,host:!0,skipSelf:!0});get hasFluid(){return this.fluid()??!!this.pcFluid}_componentStyle=Fe(vL);_contentTemplate;_iconTemplate;_loadingIconTemplate;ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"content":default:this._contentTemplate=t.template;break;case"icon":this._iconTemplate=t.template;break;case"loadingicon":this._loadingIconTemplate=t.template}})}spinnerIconClass(){return Object.entries(this.iconClass()).filter(([,t])=>!!t).reduce((t,[r])=>t+` ${r}`,"p-button-loading-icon")}iconClass(){return{[`p-button-loading-icon pi-spin ${this.loadingIcon??""}`]:this.loading,"p-button-icon":!0,"p-button-icon-left":"left"===this.iconPos&&this.label,"p-button-icon-right":"right"===this.iconPos&&this.label,"p-button-icon-top":"top"===this.iconPos&&this.label,"p-button-icon-bottom":"bottom"===this.iconPos&&this.label}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-button"]],contentQueries:function(r,i,a){if(1&r&&(Tu(a,Fie,5),Tu(a,Bie,5),Tu(a,zie,5),Tu(a,MN,4)),2&r){let d;la(d=ca())&&(i.contentTemplate=d.first),la(d=ca())&&(i.loadingIconTemplate=d.first),la(d=ca())&&(i.iconTemplate=d.first),la(d=ca())&&(i.templates=d)}},inputs:{type:"type",iconPos:"iconPos",icon:"icon",badge:"badge",label:"label",disabled:[2,"disabled","disabled",Hr],loading:[2,"loading","loading",Hr],loadingIcon:"loadingIcon",raised:[2,"raised","raised",Hr],rounded:[2,"rounded","rounded",Hr],text:[2,"text","text",Hr],plain:[2,"plain","plain",Hr],severity:"severity",outlined:[2,"outlined","outlined",Hr],link:[2,"link","link",Hr],tabindex:[2,"tabindex","tabindex",Du],size:"size",variant:"variant",style:"style",styleClass:"styleClass",badgeClass:"badgeClass",badgeSeverity:"badgeSeverity",ariaLabel:"ariaLabel",buttonProps:"buttonProps",autofocus:[2,"autofocus","autofocus",Hr],fluid:[1,"fluid"]},outputs:{onClick:"onClick",onFocus:"onFocus",onBlur:"onBlur"},features:[Mu([vL]),Ms],ngContentSelectors:jie,decls:7,vars:15,consts:[["pRipple","",3,"click","focus","blur","ngStyle","disabled","pAutoFocus"],[4,"ngTemplateOutlet"],[4,"ngIf"],[3,"class",4,"ngIf"],[3,"value","severity",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["data-p-icon","spinner",3,"class","spin",4,"ngIf"],["data-p-icon","spinner",3,"spin"],[3,"ngIf"],[3,"value","severity"]],template:function(r,i){1&r&&(bb(),Pr(0,"button",0),fc("click",function(d){return i.onClick.emit(d)})("focus",function(d){return i.onFocus.emit(d)})("blur",function(d){return i.onBlur.emit(d)}),xb(1),Nn(2,Vie,1,0,"ng-container",1)(3,Wie,3,5,"ng-container",2)(4,Xie,3,5,"ng-container",2)(5,Qie,2,5,"span",3)(6,Jie,1,2,"p-badge",4),ti()),2&r&&(cn(i.cn(i.cx("root"),i.styleClass,null==i.buttonProps?null:i.buttonProps.styleClass)),st("ngStyle",i.style||(null==i.buttonProps?null:i.buttonProps.style))("disabled",i.disabled||i.loading||(null==i.buttonProps?null:i.buttonProps.disabled))("pAutoFocus",i.autofocus||(null==i.buttonProps?null:i.buttonProps.autofocus)),so("type",i.type||(null==i.buttonProps?null:i.buttonProps.type))("aria-label",i.ariaLabel||(null==i.buttonProps?null:i.buttonProps.ariaLabel))("data-pc-name","button")("data-pc-section","root")("tabindex",i.tabindex||(null==i.buttonProps?null:i.buttonProps.tabindex)),bt(2),st("ngTemplateOutlet",i.contentTemplate||i._contentTemplate),bt(),st("ngIf",i.loading),bt(),st("ngIf",!i.loading),bt(),st("ngIf",!i.contentTemplate&&!i._contentTemplate&&i.label),bt(),st("ngIf",!i.contentTemplate&&!i._contentTemplate&&i.badge))},dependencies:[Uh,e1,n1,t1,Lie,gie,kie,bie,pL,bc],encapsulation:2,changeDetection:0})}return e})(),roe=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({imports:[Uh,noe,bc,bc]})}return e})();const ioe=["data-p-icon","chevron-down"];let bL=(()=>{class e extends hT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["","data-p-icon","chevron-down"]],features:[Ms],attrs:ioe,decls:1,vars:0,consts:[["d","M7.01744 10.398C6.91269 10.3985 6.8089 10.378 6.71215 10.3379C6.61541 10.2977 6.52766 10.2386 6.45405 10.1641L1.13907 4.84913C1.03306 4.69404 0.985221 4.5065 1.00399 4.31958C1.02276 4.13266 1.10693 3.95838 1.24166 3.82747C1.37639 3.69655 1.55301 3.61742 1.74039 3.60402C1.92777 3.59062 2.11386 3.64382 2.26584 3.75424L7.01744 8.47394L11.769 3.75424C11.9189 3.65709 12.097 3.61306 12.2748 3.62921C12.4527 3.64535 12.6199 3.72073 12.7498 3.84328C12.8797 3.96582 12.9647 4.12842 12.9912 4.30502C13.0177 4.48162 12.9841 4.662 12.8958 4.81724L7.58083 10.1322C7.50996 10.2125 7.42344 10.2775 7.32656 10.3232C7.22968 10.3689 7.12449 10.3944 7.01744 10.398Z","fill","currentColor"]],template:function(r,i){1&r&&(re(),Dg(0,"path",0))},encapsulation:2})}return e})();const ooe=["data-p-icon","chevron-right"];let xL=(()=>{class e extends hT{static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["","data-p-icon","chevron-right"]],features:[Ms],attrs:ooe,decls:1,vars:0,consts:[["d","M4.38708 13C4.28408 13.0005 4.18203 12.9804 4.08691 12.9409C3.99178 12.9014 3.9055 12.8433 3.83313 12.7701C3.68634 12.6231 3.60388 12.4238 3.60388 12.2161C3.60388 12.0084 3.68634 11.8091 3.83313 11.6622L8.50507 6.99022L3.83313 2.31827C3.69467 2.16968 3.61928 1.97313 3.62287 1.77005C3.62645 1.56698 3.70872 1.37322 3.85234 1.22959C3.99596 1.08597 4.18972 1.00371 4.3928 1.00012C4.59588 0.996539 4.79242 1.07192 4.94102 1.21039L10.1669 6.43628C10.3137 6.58325 10.3962 6.78249 10.3962 6.99022C10.3962 7.19795 10.3137 7.39718 10.1669 7.54416L4.94102 12.7701C4.86865 12.8433 4.78237 12.9014 4.68724 12.9409C4.59212 12.9804 4.49007 13.0005 4.38708 13Z","fill","currentColor"]],template:function(r,i){1&r&&(re(),Dg(0,"path",0))},encapsulation:2})}return e})();var fT=function soe(){let e=[];const n=(a,d)=>{let f=e.length>0?e[e.length-1]:{key:a,value:d},_=f.value+(f.key===a?0:d)+2;return e.push({key:a,value:_}),_},t=a=>{e=e.filter(d=>d.value!==a)},i=a=>a&&parseInt(a.style.zIndex,10)||0;return{get:i,set:(a,d,f)=>{d&&(d.style.zIndex=String(n(a,f)))},clear:a=>{a&&(t(i(a)),a.style.zIndex="")},getCurrent:()=>e.length>0?e[e.length-1].value:0,generateZIndex:n,revertZIndex:t}}();const loe={root:"p-tooltip p-component",arrow:"p-tooltip-arrow",text:"p-tooltip-text"};let SL=(()=>{class e extends Cc{name="tooltip";theme="\n    .p-tooltip {\n        position: absolute;\n        display: none;\n        max-width: dt('tooltip.max.width');\n    }\n\n    .p-tooltip-right,\n    .p-tooltip-left {\n        padding: 0 dt('tooltip.gutter');\n    }\n\n    .p-tooltip-top,\n    .p-tooltip-bottom {\n        padding: dt('tooltip.gutter') 0;\n    }\n\n    .p-tooltip-text {\n        white-space: pre-line;\n        word-break: break-word;\n        background: dt('tooltip.background');\n        color: dt('tooltip.color');\n        padding: dt('tooltip.padding');\n        box-shadow: dt('tooltip.shadow');\n        border-radius: dt('tooltip.border.radius');\n    }\n\n    .p-tooltip-arrow {\n        position: absolute;\n        width: 0;\n        height: 0;\n        border-color: transparent;\n        border-style: solid;\n    }\n\n    .p-tooltip-right .p-tooltip-arrow {\n        margin-top: calc(-1 * dt('tooltip.gutter'));\n        border-width: dt('tooltip.gutter') dt('tooltip.gutter') dt('tooltip.gutter') 0;\n        border-right-color: dt('tooltip.background');\n    }\n\n    .p-tooltip-left .p-tooltip-arrow {\n        margin-top: calc(-1 * dt('tooltip.gutter'));\n        border-width: dt('tooltip.gutter') 0 dt('tooltip.gutter') dt('tooltip.gutter');\n        border-left-color: dt('tooltip.background');\n    }\n\n    .p-tooltip-top .p-tooltip-arrow {\n        margin-left: calc(-1 * dt('tooltip.gutter'));\n        border-width: dt('tooltip.gutter') dt('tooltip.gutter') 0 dt('tooltip.gutter');\n        border-top-color: dt('tooltip.background');\n        border-bottom-color: dt('tooltip.background');\n    }\n\n    .p-tooltip-bottom .p-tooltip-arrow {\n        margin-left: calc(-1 * dt('tooltip.gutter'));\n        border-width: 0 dt('tooltip.gutter') dt('tooltip.gutter') dt('tooltip.gutter');\n        border-top-color: dt('tooltip.background');\n        border-bottom-color: dt('tooltip.background');\n    }\n";classes=loe;static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),EL=(()=>{class e extends Lu{zone;viewContainer;tooltipPosition;tooltipEvent="hover";positionStyle;tooltipStyleClass;tooltipZIndex;escape=!0;showDelay;hideDelay;life;positionTop;positionLeft;autoHide=!0;fitContent=!0;hideOnEscape=!0;content;get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.deactivate()}tooltipOptions;appendTo=Id(void 0);$appendTo=Vh(()=>this.appendTo()||this.config.overlayAppendTo());_tooltipOptions={tooltipLabel:null,tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",positionStyle:null,tooltipStyleClass:null,tooltipZIndex:"auto",escape:!0,disabled:null,showDelay:null,hideDelay:null,positionTop:null,positionLeft:null,life:null,autoHide:!0,hideOnEscape:!0,id:G1("pn_id_")+"_tooltip"};_disabled;container;styleClass;tooltipText;showTimeout;hideTimeout;active;mouseEnterListener;mouseLeaveListener;containerMouseleaveListener;clickListener;focusListener;blurListener;documentEscapeListener;scrollHandler;resizeListener;_componentStyle=Fe(SL);interactionInProgress=!1;constructor(t,r){super(),this.zone=t,this.viewContainer=r}ngAfterViewInit(){super.ngAfterViewInit(),gE(this.platformId)&&this.zone.runOutsideAngular(()=>{const t=this.getOption("tooltipEvent");if(("hover"===t||"both"===t)&&(this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onInputClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("click",this.clickListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener)),"focus"===t||"both"===t){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let r=this.el.nativeElement.querySelector(".p-component");r||(r=this.getTarget(this.el.nativeElement)),r.addEventListener("focus",this.focusListener),r.addEventListener("blur",this.blurListener)}})}ngOnChanges(t){super.ngOnChanges(t),t.tooltipPosition&&this.setOption({tooltipPosition:t.tooltipPosition.currentValue}),t.tooltipEvent&&this.setOption({tooltipEvent:t.tooltipEvent.currentValue}),t.appendTo&&this.setOption({appendTo:t.appendTo.currentValue}),t.positionStyle&&this.setOption({positionStyle:t.positionStyle.currentValue}),t.tooltipStyleClass&&this.setOption({tooltipStyleClass:t.tooltipStyleClass.currentValue}),t.tooltipZIndex&&this.setOption({tooltipZIndex:t.tooltipZIndex.currentValue}),t.escape&&this.setOption({escape:t.escape.currentValue}),t.showDelay&&this.setOption({showDelay:t.showDelay.currentValue}),t.hideDelay&&this.setOption({hideDelay:t.hideDelay.currentValue}),t.life&&this.setOption({life:t.life.currentValue}),t.positionTop&&this.setOption({positionTop:t.positionTop.currentValue}),t.positionLeft&&this.setOption({positionLeft:t.positionLeft.currentValue}),t.disabled&&this.setOption({disabled:t.disabled.currentValue}),t.content&&(this.setOption({tooltipLabel:t.content.currentValue}),this.active&&(t.content.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),t.autoHide&&this.setOption({autoHide:t.autoHide.currentValue}),t.id&&this.setOption({id:t.id.currentValue}),t.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...t.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}isAutoHide(){return this.getOption("autoHide")}onMouseEnter(t){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(t){(this.isAutoHide()||!(G0(t.relatedTarget,"p-tooltip")||G0(t.relatedTarget,"p-tooltip-text")||G0(t.relatedTarget,"p-tooltip-arrow")))&&this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onInputClick(t){this.deactivate()}activate(){if(!this.interactionInProgress){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let t=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},t)}this.getOption("hideOnEscape")&&(this.documentEscapeListener=this.renderer.listen("document","keydown.escape",()=>{this.deactivate(),this.documentEscapeListener()})),this.interactionInProgress=!0}}deactivate(){this.interactionInProgress=!1,this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide(),this.documentEscapeListener&&this.documentEscapeListener()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div"),this.container.setAttribute("id",this.getOption("id")),this.container.setAttribute("role","tooltip");let t=document.createElement("div");t.className="p-tooltip-arrow",t.setAttribute("data-pc-section","arrow"),this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?iL(this.container,this.el.nativeElement):iL(this.getOption("appendTo"),this.container),this.container.style.display="none",this.fitContent&&(this.container.style.width="fit-content"),this.isAutoHide()?this.container.style.pointerEvents="none":(this.container.style.pointerEvents="unset",this.bindContainerMouseleaveListener())}bindContainerMouseleaveListener(){this.containerMouseleaveListener||(this.containerMouseleaveListener=this.renderer.listen(this.container??this.container.nativeElement,"mouseleave",r=>{this.deactivate()}))}unbindContainerMouseleaveListener(){this.containerMouseleaveListener&&(this.bindContainerMouseleaveListener(),this.containerMouseleaveListener=null)}show(){this.getOption("tooltipLabel")&&!this.getOption("disabled")&&(this.create(),this.el.nativeElement.closest("p-dialog")?setTimeout(()=>{this.container&&(this.container.style.display="inline-block"),this.container&&this.align()},100):(this.container.style.display="inline-block",this.align()),function lZ(e,n){if(e){e.style.opacity="0";let t=+new Date,r="0",i=function(){r=""+(+e.style.opacity+((new Date).getTime()-t)/n),e.style.opacity=r,t=+new Date,+r<1&&("requestAnimationFrame"in window?requestAnimationFrame(i):setTimeout(i,16))};i()}}(this.container,250),"auto"===this.getOption("tooltipZIndex")?fT.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&fT.clear(this.container),this.remove()}updateText(){const t=this.getOption("tooltipLabel");if(t instanceof hc){const r=this.viewContainer.createEmbeddedView(t);r.detectChanges(),r.rootNodes.forEach(i=>this.tooltipText.appendChild(i))}else this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(t))):this.tooltipText.innerHTML=t}align(){let t=this.getOption("tooltipPosition");const r={top:[this.alignTop,this.alignBottom,this.alignRight,this.alignLeft],bottom:[this.alignBottom,this.alignTop,this.alignRight,this.alignLeft],left:[this.alignLeft,this.alignRight,this.alignTop,this.alignBottom],right:[this.alignRight,this.alignLeft,this.alignTop,this.alignBottom]};for(let[i,a]of r[t].entries())if(0===i)a.call(this);else{if(!this.isOutOfBounds())break;a.call(this)}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+JN(),top:t.top+eL()}}return{left:0,top:0}}get activeElement(){return this.el.nativeElement.nodeName.startsWith("P-")?da(this.el.nativeElement,".p-component"):this.el.nativeElement}alignRight(){this.preAlign("right");const t=this.activeElement,r=Il(t),i=(Nu(t)-Nu(this.container))/2;this.alignTooltip(r,i);let a=this.getArrowElement();a.style.top="50%",a.style.right=null,a.style.bottom=null,a.style.left="0"}alignLeft(){this.preAlign("left");let t=this.getArrowElement(),r=Il(this.container),i=(Nu(this.el.nativeElement)-Nu(this.container))/2;this.alignTooltip(-r,i),t.style.top="50%",t.style.right="0",t.style.bottom=null,t.style.left=null}alignTop(){this.preAlign("top");let t=this.getArrowElement(),r=this.getHostOffset(),i=Il(this.container),a=(Il(this.el.nativeElement)-Il(this.container))/2,d=Nu(this.container);this.alignTooltip(a,-d);let f=r.left-this.getHostOffset().left+i/2;t.style.top=null,t.style.right=null,t.style.bottom="0",t.style.left=f+"px"}getArrowElement(){return da(this.container,'[data-pc-section="arrow"]')}alignBottom(){this.preAlign("bottom");let t=this.getArrowElement(),r=Il(this.container),i=this.getHostOffset(),a=(Il(this.el.nativeElement)-Il(this.container))/2,d=Nu(this.el.nativeElement);this.alignTooltip(a,d);let f=i.left-this.getHostOffset().left+r/2;t.style.top="0",t.style.right=null,t.style.bottom=null,t.style.left=f+"px"}alignTooltip(t,r){let i=this.getHostOffset(),d=i.top+r;this.container.style.left=i.left+t+this.getOption("positionLeft")+"px",this.container.style.top=d+this.getOption("positionTop")+"px"}setOption(t){this._tooltipOptions={...this._tooltipOptions,...t}}getOption(t){return this._tooltipOptions[t]}getTarget(t){return G0(t,"p-inputwrapper")?da(t,"input"):t}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let r="p-tooltip p-component p-tooltip-"+t;this.container.className=this.getOption("tooltipStyleClass")?r+" "+this.getOption("tooltipStyleClass"):r}isOutOfBounds(){let t=this.container.getBoundingClientRect(),r=t.top,i=t.left,a=Il(this.container),d=Nu(this.container),f=function j1(){let e=window,n=document,t=n.documentElement,r=n.getElementsByTagName("body")[0];return{width:e.innerWidth||t.clientWidth||r.clientWidth,height:e.innerHeight||t.clientHeight||r.clientHeight}}();return i+a>f.width||i<0||r<0||r+d>f.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new pie(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){const t=this.getOption("tooltipEvent");if(("hover"===t||"both"===t)&&(this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener)),"focus"===t||"both"===t){let r=this.el.nativeElement.querySelector(".p-component");r||(r=this.getTarget(this.el.nativeElement)),r.removeEventListener("focus",this.focusListener),r.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):function _Z(e,n){let t=rL(e);if(!t)throw new Error("Cannot remove "+n+" from "+e);t.removeChild(n)}(this.getOption("appendTo"),this.container)),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.unbindContainerMouseleaveListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),super.ngOnDestroy(),this.container&&fT.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.documentEscapeListener&&this.documentEscapeListener()}static \u0275fac=function(r){return new(r||e)(Xt(Fn),Xt(Sl))};static \u0275dir=qi({type:e,selectors:[["","pTooltip",""]],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:[2,"escape","escape",Hr],showDelay:[2,"showDelay","showDelay",Du],hideDelay:[2,"hideDelay","hideDelay",Du],life:[2,"life","life",Du],positionTop:[2,"positionTop","positionTop",Du],positionLeft:[2,"positionLeft","positionLeft",Du],autoHide:[2,"autoHide","autoHide",Hr],fitContent:[2,"fitContent","fitContent",Hr],hideOnEscape:[2,"hideOnEscape","hideOnEscape",Hr],content:[0,"pTooltip","content"],disabled:[0,"tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions",appendTo:[1,"appendTo"]},features:[Mu([SL]),Ms,_l]})}return e})(),pT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({})}return e})();const doe=["list"],gT=e=>({processedItem:e}),CL=()=>({exact:!1}),TL=e=>({$implicit:e});function hoe(e,n){if(1&e&&Er(0,"li",6),2&e){const t=et().$implicit,r=et();cn(r.cn(r.cx("separator"),r.getItemProp(t,"styleClass")))}}function foe(e,n){if(1&e&&(re(),Er(0,"svg",19)),2&e){const t=et(6).$implicit,r=et();cn(r.cn(r.cx("submenuIcon"),r.getItemProp(t,"icon"))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function poe(e,n){if(1&e&&(re(),Er(0,"svg",20)),2&e){const t=et(6).$implicit,r=et();cn(r.cn(r.cx("submenuIcon"),r.getItemProp(t,"icon"))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function goe(e,n){if(1&e&&(yo(0),Nn(1,foe,1,3,"svg",17)(2,poe,1,3,"svg",18),ao()),2&e){const t=et(5).$implicit,r=et();bt(),st("ngIf",r.isItemActive(t)),bt(),st("ngIf",!r.isItemActive(t))}}function moe(e,n){}function _oe(e,n){1&e&&Nn(0,moe,0,0,"ng-template")}function yoe(e,n){if(1&e&&(yo(0),Nn(1,goe,3,2,"ng-container",9)(2,_oe,1,0,null,16),ao()),2&e){const t=et(5);bt(),st("ngIf",!t.panelMenu.submenuIconTemplate&&!t.panelMenu._submenuIconTemplate),bt(),st("ngTemplateOutlet",t.panelMenu.submenuIconTemplate||t.panelMenu._submenuIconTemplate)}}function voe(e,n){if(1&e&&Er(0,"span",21),2&e){const t=et(4).$implicit,r=et();cn(r.cx("itemIcon",Td(3,gT,t))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function boe(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(4).$implicit,r=et();cn(r.cx("itemLabel")),bt(),Iu(r.getItemProp(t,"label"))}}function xoe(e,n){if(1&e&&Er(0,"span",22),2&e){const t=et(4).$implicit,r=et();cn(r.cx("itemLabel")),st("innerHTML",r.getItemProp(t,"label"),T_)}}function woe(e,n){if(1&e&&(Pr(0,"a",13),Nn(1,yoe,3,2,"ng-container",9)(2,voe,1,5,"span",14)(3,boe,2,3,"span",15)(4,xoe,1,3,"ng-template",null,1,Tb),ti()),2&e){const t=wb(5),r=et(3).$implicit,i=et();cn(i.cx("itemLink")),st("target",i.getItemProp(r,"target")),so("href",i.getItemProp(r,"url"),vv)("data-pc-section","action")("tabindex",i.parentExpanded?"0":"-1"),bt(),st("ngIf",i.isItemGroup(r)),bt(),st("ngIf",r.icon),bt(),st("ngIf",!1!==(null==r.item?null:r.item.escape))("ngIfElse",t)}}function Soe(e,n){if(1&e&&(re(),Er(0,"svg",19)),2&e){const t=et(6).$implicit,r=et();cn(r.cn(r.cx("submenuIcon"),r.getItemProp(t,"icon"))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function Eoe(e,n){if(1&e&&(re(),Er(0,"svg",20)),2&e){const t=et(6).$implicit,r=et();cn(r.cn(r.cx("submenuIcon"),r.getItemProp(t,"icon"))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function Coe(e,n){if(1&e&&(yo(0),Nn(1,Soe,1,3,"svg",17)(2,Eoe,1,3,"svg",18),ao()),2&e){const t=et(5).$implicit,r=et();bt(),st("ngIf",r.isItemActive(t)),bt(),st("ngIf",!r.isItemActive(t))}}function Toe(e,n){}function Ioe(e,n){1&e&&Nn(0,Toe,0,0,"ng-template")}function Moe(e,n){if(1&e&&(yo(0),Nn(1,Coe,3,2,"ng-container",9)(2,Ioe,1,0,null,16),ao()),2&e){const t=et(5);bt(),st("ngIf",!t.panelMenu.submenuIconTemplate&&!t.panelMenu._submenuIconTemplate),bt(),st("ngTemplateOutlet",t.panelMenu.submenuIconTemplate&&t.panelMenu._submenuIconTemplate)}}function Doe(e,n){if(1&e&&Er(0,"span",21),2&e){const t=et(4).$implicit,r=et();cn(r.cn(r.cx("itemIcon"),r.getItemProp(t,"icon"))),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function koe(e,n){if(1&e&&Er(0,"span",22),2&e){const t=et(4).$implicit,r=et();cn(r.cx("itemLabel")),st("innerHTML",r.getItemProp(t,"label"),T_)}}function Poe(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(4).$implicit,r=et();cn(r.cn(r.cx("badge"),r.getItemProp(t,"badgeStyleClass"))),bt(),Iu(t.badge)}}function Aoe(e,n){if(1&e&&(Pr(0,"a",23),Nn(1,Moe,3,2,"ng-container",9)(2,Doe,1,3,"span",14)(3,koe,1,3,"span",24)(4,Poe,2,3,"span",25),ti()),2&e){const t=et(3).$implicit,r=et();cn(r.cx("itemLink")),st("routerLink",r.getItemProp(t,"routerLink"))("queryParams",r.getItemProp(t,"queryParams"))("routerLinkActive","p-panelmenu-item-link-active")("routerLinkActiveOptions",r.getItemProp(t,"routerLinkActiveOptions")||QS(20,CL))("target",r.getItemProp(t,"target"))("fragment",r.getItemProp(t,"fragment"))("queryParamsHandling",r.getItemProp(t,"queryParamsHandling"))("preserveFragment",r.getItemProp(t,"preserveFragment"))("skipLocationChange",r.getItemProp(t,"skipLocationChange"))("replaceUrl",r.getItemProp(t,"replaceUrl"))("state",r.getItemProp(t,"state")),so("title",r.getItemProp(t,"title"))("data-pc-section","action")("tabindex",r.parentExpanded?"0":"-1"),bt(),st("ngIf",r.isItemGroup(t)),bt(),st("ngIf",t.icon),bt(),st("ngIf",r.getItemProp(t,"label")),bt(),st("ngIf",t.badge)}}function Roe(e,n){if(1&e&&(yo(0),Nn(1,woe,6,10,"a",11)(2,Aoe,5,21,"a",12),ao()),2&e){const t=et(2).$implicit,r=et();bt(),st("ngIf",!r.getItemProp(t,"routerLink")),bt(),st("ngIf",r.getItemProp(t,"routerLink"))}}function Noe(e,n){}function Loe(e,n){1&e&&Nn(0,Noe,0,0,"ng-template")}function Ooe(e,n){if(1&e&&(yo(0),Nn(1,Loe,1,0,null,26),ao()),2&e){const t=et(2).$implicit,r=et();bt(),st("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",Td(2,TL,t.item))}}function Foe(e,n){if(1&e){const t=ep();Pr(0,"p-panelmenu-sub",27),fc("itemToggle",function(i){return Fr(t),ki(et(3).onItemToggle(i))}),ti()}if(2&e){const t=et(2).$implicit,r=et();st("id",r.getItemId(t)+"_list")("panelId",r.panelId)("items",null==t?null:t.items)("itemTemplate",r.itemTemplate)("transitionOptions",r.transitionOptions)("focusedItemId",r.focusedItemId)("activeItemPath",r.activeItemPath)("level",r.level+1)("parentExpanded",!!r.parentExpanded&&r.isItemExpanded(t))}}function Boe(e,n){if(1&e){const t=ep();Pr(0,"li",7)(1,"div",8),fc("click",function(i){Fr(t);const a=et().$implicit;return ki(et().onItemClick(i,a))}),Nn(2,Roe,3,2,"ng-container",9)(3,Ooe,2,4,"ng-container",9),ti(),Pr(4,"div"),Nn(5,Foe,1,9,"p-panelmenu-sub",10),ti()()}if(2&e){const t=et(),r=t.$implicit,i=t.index,a=et();cn(a.cn(a.cx("item",Td(18,gT,r)),a.getItemProp(r,"styleClass"))),st("ngStyle",a.getItemProp(r,"style"))("pTooltip",a.getItemProp(r,"tooltip"))("tooltipOptions",a.getItemProp(r,"tooltipOptions")),so("id",a.getItemId(r))("aria-label",a.getItemProp(r,"label"))("aria-expanded",a.isItemGroup(r)?a.isItemActive(r):void 0)("aria-level",a.level+1)("aria-setsize",a.getAriaSetSize())("aria-posinset",a.getAriaPosInset(i))("data-p-disabled",a.isItemDisabled(r)),bt(),cn(a.cx("itemContent")),bt(),st("ngIf",!a.itemTemplate),bt(),st("ngIf",a.itemTemplate),bt(),st("@submenu",a.getAnimation(r)),bt(),st("ngIf",a.isItemVisible(r)&&a.isItemGroup(r)&&a.isItemExpanded(r))}}function zoe(e,n){if(1&e&&Nn(0,hoe,1,2,"li",4)(1,Boe,6,20,"li",5),2&e){const t=n.$implicit,r=et();st("ngIf",t.separator),bt(),st("ngIf",!t.separator&&r.isItemVisible(t))}}const joe=["submenu"],Voe=["submenuicon"],Uoe=["headericon"],$oe=["item"],Goe=["container"],Hoe=e=>({item:e});function qoe(e,n){1&e&&(re(),Er(0,"svg",17)),2&e&&cn(et(7).cx("headerIcon"))}function Woe(e,n){1&e&&(re(),Er(0,"svg",18)),2&e&&cn(et(7).cx("headerIcon"))}function Zoe(e,n){if(1&e&&(yo(0),Nn(1,qoe,1,2,"svg",15)(2,Woe,1,2,"svg",16),ao()),2&e){const t=et(5).$implicit,r=et();bt(),st("ngIf",r.isItemActive(t)),bt(),st("ngIf",!r.isItemActive(t))}}function Koe(e,n){}function Yoe(e,n){1&e&&Nn(0,Koe,0,0,"ng-template")}function Xoe(e,n){if(1&e&&(yo(0),Nn(1,Zoe,3,2,"ng-container",6)(2,Yoe,1,0,null,14),ao()),2&e){const t=et(5);bt(),st("ngIf",!t.headerIconTemplate&&!t._headerIconTemplate),bt(),st("ngTemplateOutlet",t.headerIconTemplate||t._headerIconTemplate)}}function Qoe(e,n){if(1&e&&Er(0,"span",4),2&e){const t=et(4).$implicit,r=et();cn(r.cn(r.cx("headerIcon"),t.icon)),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function Joe(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(4).$implicit,r=et();cn(r.cx("headerLabel")),bt(),Iu(r.getItemProp(t,"label"))}}function ese(e,n){if(1&e&&Er(0,"span",19),2&e){const t=et(4).$implicit,r=et();cn(r.cx("headerLabel")),st("innerHTML",r.getItemProp(t,"label"),T_)}}function tse(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(4).$implicit,r=et();cn(r.cn(r.cx("badge"),r.getItemProp(t,"badgeStyleClass"))),bt(),Iu(r.getItemProp(t,"badge"))}}function nse(e,n){if(1&e&&(Pr(0,"a",11),Nn(1,Xoe,3,2,"ng-container",6)(2,Qoe,1,3,"span",3)(3,Joe,2,3,"span",12)(4,ese,1,3,"ng-template",null,0,Tb)(6,tse,2,3,"span",13),ti()),2&e){const t=wb(5),r=et(3).$implicit,i=et();cn(i.cx("headerLink")),st("target",i.getItemProp(r,"target")),so("href",i.getItemProp(r,"url"),vv)("tabindex",-1)("title",i.getItemProp(r,"title"))("data-pc-section","headeraction"),bt(),st("ngIf",i.isItemGroup(r)),bt(),st("ngIf",r.icon),bt(),st("ngIf",!1!==i.getItemProp(r,"escape"))("ngIfElse",t),bt(3),st("ngIf",i.getItemProp(r,"badge"))}}function rse(e,n){if(1&e&&(yo(0),Nn(1,nse,7,12,"a",10),ao()),2&e){const t=et(2).$implicit,r=et();bt(),st("ngIf",!r.getItemProp(t,"routerLink"))}}function ise(e,n){1&e&&gb(0)}function ose(e,n){1&e&&(re(),Er(0,"svg",17)),2&e&&cn(et(6).cx("headerIcon"))}function sse(e,n){1&e&&(re(),Er(0,"svg",18)),2&e&&cn(et(6).cx("headerIcon"))}function ase(e,n){if(1&e&&(yo(0),Nn(1,ose,1,2,"svg",15)(2,sse,1,2,"svg",16),ao()),2&e){const t=et(4).$implicit,r=et();bt(),st("ngIf",r.isItemActive(t)),bt(),st("ngIf",!r.isItemActive(t))}}function lse(e,n){}function cse(e,n){1&e&&Nn(0,lse,0,0,"ng-template")}function use(e,n){if(1&e&&(yo(0),Nn(1,ase,3,2,"ng-container",6)(2,cse,1,0,null,14),ao()),2&e){const t=et(4);bt(),st("ngIf",!t.headerIconTemplate&&!t._headerIconTemplate),bt(),st("ngTemplateOutlet",t.headerIconTemplate||t._headerIconTemplate)}}function dse(e,n){if(1&e&&Er(0,"span",4),2&e){const t=et(3).$implicit,r=et();cn(r.cn(r.cx("headerIcon"),t.icon)),st("ngStyle",r.getItemProp(t,"iconStyle"))}}function hse(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(3).$implicit,r=et();cn(r.cx("headerLabel")),bt(),Iu(r.getItemProp(t,"label"))}}function fse(e,n){if(1&e&&Er(0,"span",19),2&e){const t=et(3).$implicit,r=et();cn(r.cx("headerLabel")),st("innerHTML",r.getItemProp(t,"label"),T_)}}function pse(e,n){if(1&e&&(Pr(0,"span"),Ed(1),ti()),2&e){const t=et(3).$implicit,r=et();cn(r.cn(r.cx("badge"),r.getItemProp(t,"badgeStyleClass"))),bt(),Iu(r.getItemProp(t,"badge"))}}function gse(e,n){if(1&e&&(Pr(0,"a",20),Nn(1,use,3,2,"ng-container",6)(2,dse,1,3,"span",3)(3,hse,2,3,"span",12)(4,fse,1,3,"ng-template",null,1,Tb)(6,pse,2,3,"span",13),ti()),2&e){const t=wb(5),r=et(2).$implicit,i=et();cn(i.cx("headerLink")),st("routerLink",i.getItemProp(r,"routerLink"))("queryParams",i.getItemProp(r,"queryParams"))("routerLinkActive","p-panelmenu-item-link-active")("routerLinkActiveOptions",i.getItemProp(r,"routerLinkActiveOptions")||QS(20,CL))("target",i.getItemProp(r,"target"))("fragment",i.getItemProp(r,"fragment"))("queryParamsHandling",i.getItemProp(r,"queryParamsHandling"))("preserveFragment",i.getItemProp(r,"preserveFragment"))("skipLocationChange",i.getItemProp(r,"skipLocationChange"))("replaceUrl",i.getItemProp(r,"replaceUrl"))("state",i.getItemProp(r,"state")),so("tabindex",-1)("data-pc-section","headeraction"),bt(),st("ngIf",i.isItemGroup(r)),bt(),st("ngIf",r.icon),bt(),st("ngIf",!1!==i.getItemProp(r,"escape"))("ngIfElse",t),bt(3),st("ngIf",i.getItemProp(r,"badge"))}}function mse(e,n){if(1&e){const t=ep();Pr(0,"div",21),fc("@rootItem.done",function(){return Fr(t),ki(et(3).onToggleDone())}),Pr(1,"div")(2,"p-panelMenuList",22),fc("headerFocus",function(i){return Fr(t),ki(et(3).updateFocusedHeader(i))}),ti()()()}if(2&e){const t=et(2),r=t.$implicit,i=t.index,a=et();cn(a.cx("contentContainer",Td(17,gT,r))),st("@rootItem",a.getAnimation(r)),so("id",a.getContentId(r,i))("aria-labelledby",a.getHeaderId(r,i))("data-pc-section","toggleablecontent"),bt(),cn(a.cx("content")),so("data-pc-section","menucontent"),bt(),st("panelId",a.getPanelId(i,r))("items",a.getItemProp(r,"items"))("itemTemplate",a.itemTemplate||a._itemTemplate)("transitionOptions",a.transitionOptions)("root",!0)("activeItem",a.activeItem())("tabindex",a.tabindex)("parentExpanded",a.isItemActive(r))}}function _se(e,n){if(1&e){const t=ep();Pr(0,"div",4)(1,"div",5),fc("click",function(i){Fr(t);const a=et(),d=a.$implicit,f=a.index;return ki(et().onHeaderClick(i,d,f))})("keydown",function(i){Fr(t);const a=et(),d=a.$implicit,f=a.index;return ki(et().onHeaderKeyDown(i,d,f))}),Pr(2,"div"),Nn(3,rse,2,1,"ng-container",6)(4,ise,1,0,"ng-container",7)(5,gse,7,21,"a",8),ti()(),Nn(6,mse,3,19,"div",9),ti()}if(2&e){const t=et(),r=t.$implicit,i=t.index,a=et();cn(a.cn(a.cx("panel"),a.getItemProp(r,"headerClass"))),st("ngStyle",a.getItemProp(r,"style")),so("data-pc-section","panel"),bt(),cn(a.cn(a.cx("header",Td(25,Hoe,r)),a.getItemProp(r,"styleClass"))),st("ngStyle",a.getItemProp(r,"style"))("pTooltip",a.getItemProp(r,"tooltip"))("tabindex",0)("tooltipOptions",a.getItemProp(r,"tooltipOptions")),so("id",a.getHeaderId(r,i))("aria-expanded",a.isItemActive(r))("aria-label",a.getItemProp(r,"label"))("aria-controls",a.getContentId(r,i))("aria-disabled",a.isItemDisabled(r))("data-p-highlight",a.isItemActive(r))("data-p-disabled",a.isItemDisabled(r))("data-pc-section","header"),bt(),cn(a.cx("headerContent")),bt(),st("ngIf",!a.itemTemplate&&!a._itemTemplate),bt(),st("ngTemplateOutlet",a.itemTemplate)("ngTemplateOutletContext",Td(27,TL,r)),bt(),st("ngIf",a.getItemProp(r,"routerLink")),bt(),st("ngIf",a.isItemGroup(r))}}function yse(e,n){if(1&e&&(yo(0),Nn(1,_se,7,29,"div",3),ao()),2&e){const t=n.$implicit,r=et();bt(),st("ngIf",r.isItemVisible(t))}}const bse={root:()=>["p-panelmenu p-component"],panel:"p-panelmenu-panel",header:({instance:e,item:n})=>["p-panelmenu-header",{"p-panelmenu-header-active":e.isItemActive(n)&&!!n.items,"p-disabled":e.isItemDisabled(n)}],headerContent:"p-panelmenu-header-content",headerLink:"p-panelmenu-header-link",headerIcon:"p-panelmenu-header-icon",headerLabel:"p-panelmenu-header-label",contentContainer:({instance:e,processedItem:n})=>["p-panelmenu-content-container",{"p-panelmenu-expanded":e.isItemActive(n)}],content:"p-panelmenu-content",rootList:"p-panelmenu-root-list",item:({instance:e,processedItem:n})=>["p-panelmenu-item",{"p-focus":e.isItemFocused(n)&&!e.isItemDisabled(n),"p-disabled":e.isItemDisabled(n)}],itemContent:"p-panelmenu-item-content",itemLink:"p-panelmenu-item-link",itemIcon:"p-panelmenu-item-icon",itemLabel:"p-panelmenu-item-label",submenuIcon:"p-panelmenu-submenu-icon",submenu:"p-panelmenu-submenu",separator:"p-menuitem-separator",badge:"p-menuitem-badge"};let q1=(()=>{class e extends Cc{name="panelmenu";theme="\n    \n    .p-panelmenu {\n        display: flex;\n        flex-direction: column;\n        gap: dt('panelmenu.gap');\n    }\n\n    .p-panelmenu-panel {\n        background: dt('panelmenu.panel.background');\n        border-width: dt('panelmenu.panel.border.width');\n        border-style: solid;\n        border-color: dt('panelmenu.panel.border.color');\n        color: dt('panelmenu.panel.color');\n        border-radius: dt('panelmenu.panel.border.radius');\n        padding: dt('panelmenu.panel.padding');\n    }\n\n    .p-panelmenu-panel:first-child {\n        border-width: dt('panelmenu.panel.first.border.width');\n        border-start-start-radius: dt('panelmenu.panel.first.top.border.radius');\n        border-start-end-radius: dt('panelmenu.panel.first.top.border.radius');\n    }\n\n    .p-panelmenu-panel:last-child {\n        border-width: dt('panelmenu.panel.last.border.width');\n        border-end-start-radius: dt('panelmenu.panel.last.bottom.border.radius');\n        border-end-end-radius: dt('panelmenu.panel.last.bottom.border.radius');\n    }\n\n    .p-panelmenu-header {\n        outline: 0 none;\n    }\n\n    .p-panelmenu-header-content {\n        border-radius: dt('panelmenu.item.border.radius');\n        transition:\n            background dt('panelmenu.transition.duration'),\n            color dt('panelmenu.transition.duration'),\n            outline-color dt('panelmenu.transition.duration'),\n            box-shadow dt('panelmenu.transition.duration');\n        outline-color: transparent;\n        color: dt('panelmenu.item.color');\n    }\n\n    .p-panelmenu-header-link {\n        display: flex;\n        gap: dt('panelmenu.item.gap');\n        padding: dt('panelmenu.item.padding');\n        align-items: center;\n        user-select: none;\n        cursor: pointer;\n        position: relative;\n        text-decoration: none;\n        color: inherit;\n    }\n\n    .p-panelmenu-header-icon,\n    .p-panelmenu-item-icon {\n        color: dt('panelmenu.item.icon.color');\n    }\n\n    .p-panelmenu-submenu-icon {\n        color: dt('panelmenu.submenu.icon.color');\n    }\n\n    .p-panelmenu-submenu-icon:dir(rtl) {\n        transform: rotate(180deg);\n    }\n\n    .p-panelmenu-header:not(.p-disabled):focus-visible .p-panelmenu-header-content {\n        background: dt('panelmenu.item.focus.background');\n        color: dt('panelmenu.item.focus.color');\n    }\n\n    .p-panelmenu-header:not(.p-disabled):focus-visible .p-panelmenu-header-content .p-panelmenu-header-icon {\n        color: dt('panelmenu.item.icon.focus.color');\n    }\n\n    .p-panelmenu-header:not(.p-disabled):focus-visible .p-panelmenu-header-content .p-panelmenu-submenu-icon {\n        color: dt('panelmenu.submenu.icon.focus.color');\n    }\n\n    .p-panelmenu-header:not(.p-disabled) .p-panelmenu-header-content:hover {\n        background: dt('panelmenu.item.focus.background');\n        color: dt('panelmenu.item.focus.color');\n    }\n\n    .p-panelmenu-header:not(.p-disabled) .p-panelmenu-header-content:hover .p-panelmenu-header-icon {\n        color: dt('panelmenu.item.icon.focus.color');\n    }\n\n    .p-panelmenu-header:not(.p-disabled) .p-panelmenu-header-content:hover .p-panelmenu-submenu-icon {\n        color: dt('panelmenu.submenu.icon.focus.color');\n    }\n\n    .p-panelmenu-submenu {\n        margin: 0;\n        padding: 0 0 0 dt('panelmenu.submenu.indent');\n        outline: 0;\n        list-style: none;\n    }\n\n    .p-panelmenu-submenu:dir(rtl) {\n        padding: 0 dt('panelmenu.submenu.indent') 0 0;\n    }\n\n    .p-panelmenu-item-link {\n        display: flex;\n        gap: dt('panelmenu.item.gap');\n        padding: dt('panelmenu.item.padding');\n        align-items: center;\n        user-select: none;\n        cursor: pointer;\n        text-decoration: none;\n        color: inherit;\n        position: relative;\n        overflow: hidden;\n    }\n\n    .p-panelmenu-item-label {\n        line-height: 1;\n    }\n\n    .p-panelmenu-item-content {\n        border-radius: dt('panelmenu.item.border.radius');\n        transition:\n            background dt('panelmenu.transition.duration'),\n            color dt('panelmenu.transition.duration'),\n            outline-color dt('panelmenu.transition.duration'),\n            box-shadow dt('panelmenu.transition.duration');\n        color: dt('panelmenu.item.color');\n        outline-color: transparent;\n    }\n\n    .p-panelmenu-item.p-focus > .p-panelmenu-item-content {\n        background: dt('panelmenu.item.focus.background');\n        color: dt('panelmenu.item.focus.color');\n    }\n\n    .p-panelmenu-item.p-focus > .p-panelmenu-item-content .p-panelmenu-item-icon {\n        color: dt('panelmenu.item.focus.color');\n    }\n\n    .p-panelmenu-item.p-focus > .p-panelmenu-item-content .p-panelmenu-submenu-icon {\n        color: dt('panelmenu.submenu.icon.focus.color');\n    }\n\n    .p-panelmenu-item:not(.p-disabled) > .p-panelmenu-item-content:hover {\n        background: dt('panelmenu.item.focus.background');\n        color: dt('panelmenu.item.focus.color');\n    }\n\n    .p-panelmenu-item:not(.p-disabled) > .p-panelmenu-item-content:hover .p-panelmenu-item-icon {\n        color: dt('panelmenu.item.icon.focus.color');\n    }\n\n    .p-panelmenu-item:not(.p-disabled) > .p-panelmenu-item-content:hover .p-panelmenu-submenu-icon {\n        color: dt('panelmenu.submenu.icon.focus.color');\n    }\n\n    /*For PrimeNG*/\n    .p-panelmenu-item:not(.ng-animating) {\n        overflow: hidden;\n    }\n\n    .p-panelmenu-panel {\n        overflow: hidden;\n    }\n\n    .p-panelmenu-root-list,\n    .p-panelmenu-submenu,\n    .p-panelmenu-item-link {\n        outline: 0 none;\n    }\n";classes=bse;static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275prov=at({token:e,factory:e.\u0275fac})}return e})(),wse=(()=>{class e extends Lu{panelId;focusedItemId;items;itemTemplate;level=0;activeItemPath;root;tabindex;transitionOptions;parentExpanded;itemToggle=new Ci;menuFocus=new Ci;menuBlur=new Ci;menuKeyDown=new Ci;listViewChild;panelMenu=Fe(zu(()=>mT));_componentStyle=Fe(q1);getItemId(t){return t.item?.id??`${this.panelId}_${t.key}`}getItemKey(t){return this.getItemId(t)}getItemClass(t){return{"p-panelmenu-item":!0,"p-disabled":this.isItemDisabled(t),"p-focus":this.isItemFocused(t)}}getItemProp(t,r,i){return t&&t.item?Ps(t.item[r],i):void 0}getItemLabel(t){return this.getItemProp(t,"label")}isItemExpanded(t){return t.expanded}isItemActive(t){return this.isItemExpanded(t)||this.activeItemPath.some(r=>r&&r.key===t.key)}isItemVisible(t){return!1!==this.getItemProp(t,"visible")}isItemDisabled(t){return this.getItemProp(t,"disabled")}isItemFocused(t){return this.focusedItemId===this.getItemId(t)}isItemGroup(t){return Pn(t.items)}getAnimation(t){return this.isItemActive(t)?{value:"visible",params:{transitionParams:this.transitionOptions,height:"*"}}:{value:"hidden",params:{transitionParams:this.transitionOptions,height:"0"}}}getAriaSetSize(){return this.items.filter(t=>this.isItemVisible(t)&&!this.getItemProp(t,"separator")).length}getAriaPosInset(t){return t-this.items.slice(0,t).filter(r=>this.isItemVisible(r)&&this.getItemProp(r,"separator")).length+1}onItemClick(t,r){this.isItemDisabled(r)||(this.getItemProp(r,"command",{originalEvent:t,item:r.item}),this.itemToggle.emit({processedItem:r,expanded:!this.isItemActive(r)}))}onItemToggle(t){this.itemToggle.emit(t)}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-panelMenuSub"],["p-panelmenu-sub"]],viewQuery:function(r,i){if(1&r&&l0(doe,5),2&r){let a;la(a=ca())&&(i.listViewChild=a.first)}},inputs:{panelId:"panelId",focusedItemId:"focusedItemId",items:"items",itemTemplate:"itemTemplate",level:[2,"level","level",Du],activeItemPath:"activeItemPath",root:[2,"root","root",Hr],tabindex:[2,"tabindex","tabindex",Du],transitionOptions:"transitionOptions",parentExpanded:[2,"parentExpanded","parentExpanded",Hr]},outputs:{itemToggle:"itemToggle",menuFocus:"menuFocus",menuBlur:"menuBlur",menuKeyDown:"menuKeyDown"},features:[Mu([q1]),Ms],decls:3,vars:7,consts:[["list",""],["htmlLabel",""],["role","tree",3,"focusin","focusout","keydown","tabindex"],["ngFor","",3,"ngForOf"],["role","separator",3,"class",4,"ngIf"],["role","treeitem",3,"class","ngStyle","pTooltip","tooltipOptions",4,"ngIf"],["role","separator"],["role","treeitem",3,"ngStyle","pTooltip","tooltipOptions"],[3,"click"],[4,"ngIf"],[3,"id","panelId","items","itemTemplate","transitionOptions","focusedItemId","activeItemPath","level","parentExpanded","itemToggle",4,"ngIf"],[3,"class","target",4,"ngIf"],[3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","class","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state",4,"ngIf"],[3,"target"],[3,"class","ngStyle",4,"ngIf"],[3,"class",4,"ngIf","ngIfElse"],[4,"ngTemplateOutlet"],["data-p-icon","chevron-down",3,"class","ngStyle",4,"ngIf"],["data-p-icon","chevron-right",3,"class","ngStyle",4,"ngIf"],["data-p-icon","chevron-down",3,"ngStyle"],["data-p-icon","chevron-right",3,"ngStyle"],[3,"ngStyle"],[3,"innerHTML"],[3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],[3,"class","innerHTML",4,"ngIf"],[3,"class",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"itemToggle","id","panelId","items","itemTemplate","transitionOptions","focusedItemId","activeItemPath","level","parentExpanded"]],template:function(r,i){if(1&r){const a=ep();Pr(0,"ul",2,0),fc("focusin",function(f){return Fr(a),ki(i.menuFocus.emit(f))})("focusout",function(f){return Fr(a),ki(i.menuBlur.emit(f))})("keydown",function(f){return Fr(a),ki(i.menuKeyDown.emit(f))}),Nn(2,zoe,2,2,"ng-template",3),ti()}2&r&&(cn(i.root?i.cn(i.cx("rootList"),i.cx("submenu")):i.cx("submenu")),st("tabindex",-1),so("aria-activedescendant",i.focusedItemId)("data-pc-section","menu")("aria-hidden",!i.parentExpanded),bt(2),st("ngForOf",i.items))},dependencies:[e,Uh,zE,e1,n1,t1,TC,O0,SC,pT,EL,bL,xL,bc],encapsulation:2,data:{animation:[KR("submenu",[C1("hidden",Wg({height:"0"})),C1("visible",Wg({height:"*"})),T1("visible <=> hidden",[E1("{{transitionParams}}")]),T1("void => *",E1(0))])]}})}return e})(),Sse=(()=>{class e extends Lu{panelId;id;items;itemTemplate;parentExpanded;expanded;transitionOptions;root;tabindex;activeItem;itemToggle=new Ci;headerFocus=new Ci;subMenuViewChild;searchTimeout;searchValue;focused;focusedItem=kn(null);activeItemPath=kn([]);processedItems=kn([]);visibleItems=Vh(()=>{const t=this.processedItems();return this.flatItems(t)});get focusedItemId(){const t=this.focusedItem();return t&&t.item?.id?t.item.id:Pn(this.focusedItem())?`${this.panelId}_${this.focusedItem().key}`:void 0}ngOnChanges(t){this.processedItems.set(this.createProcessedItems(t?.items?.currentValue||this.items||[]))}getItemProp(t,r){return t&&t.item?Ps(t.item[r]):void 0}getItemLabel(t){return this.getItemProp(t,"label")}isItemVisible(t){return!1!==this.getItemProp(t,"visible")}isItemDisabled(t){return this.getItemProp(t,"disabled")}isItemActive(t){return this.activeItemPath().some(r=>r.key===t.parentKey)}isItemGroup(t){return Pn(t.items)}isElementInPanel(t,r){const i=t.currentTarget.closest('[data-pc-section="panel"]');return i&&i.contains(r)}isItemMatched(t){return this.isValidItem(t)&&this.getItemLabel(t).toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase())}isVisibleItem(t){return!!t&&(0===t.level||this.isItemActive(t))&&this.isItemVisible(t)}isValidItem(t){return!!t&&!this.isItemDisabled(t)&&!t.separator}findFirstItem(){return this.visibleItems().find(t=>this.isValidItem(t))}findLastItem(){return NN(this.visibleItems(),t=>this.isValidItem(t))}findItemByEventTarget(t){let r=t;for(;r&&"li"!==r.tagName?.toLowerCase();)r=r?.parentNode;return r?.id&&this.visibleItems().find(i=>this.isValidItem(i)&&`${this.panelId}_${i.key}`===r.id)}createProcessedItems(t,r=0,i={},a=""){const d=[];return t&&t.forEach((f,_)=>{const S=(""!==a?a+"_":"")+_,M={icon:f.icon,expanded:f.expanded,separator:f.separator,item:f,index:_,level:r,key:S,parent:i,parentKey:a};M.items=this.createProcessedItems(f.items,r+1,M,S),d.push(M)}),d}findProcessedItemByItemKey(t,r,i=0){if((r=r||this.processedItems())&&r.length)for(let a=0;a<r.length;a++){const d=r[a];if(this.getItemProp(d,"key")===t)return d;const f=this.findProcessedItemByItemKey(t,d.items,i+1);if(f)return f}}flatItems(t,r=[]){return t&&t.forEach(i=>{this.isVisibleItem(i)&&(r.push(i),this.flatItems(i.items,r))}),r}changeFocusedItem(t){const{originalEvent:r,processedItem:i,focusOnNext:a,selfCheck:d,allowHeaderFocus:f=!0}=t;Pn(this.focusedItem())&&this.focusedItem().key!==i.key?(this.focusedItem.set(i),this.scrollInView()):f&&this.headerFocus.emit({originalEvent:r,focusOnNext:a,selfCheck:d})}scrollInView(){const t=da(this.subMenuViewChild.listViewChild.nativeElement,`li[id="${this.focusedItemId}"]`);t&&t.scrollIntoView&&t.scrollIntoView({block:"nearest",inline:"nearest"})}onFocus(t){if(!this.focused){this.focused=!0;const r=this.focusedItem()||(this.isElementInPanel(t,t.relatedTarget)?this.findItemByEventTarget(t.target)||this.findFirstItem():this.findLastItem());null!==t.relatedTarget&&this.focusedItem.set(r)}}onBlur(t){this.focused&&!this.el.nativeElement.contains(t.relatedTarget)&&(this.focused=!1,this.focusedItem.set(null),this.searchValue="")}onItemToggle(t){const{processedItem:r,expanded:i}=t;r.item&&(r.item.expanded=!r.item.expanded),this.processedItems.set(this.createProcessedItems(this.items||[],0,{},""));const a=this.activeItemPath().filter(d=>d.parentKey!==r.parentKey);i&&a.push(r),this.activeItemPath.set(a),this.focusedItem.set(r)}onKeyDown(t){const r=t.metaKey||t.ctrlKey;switch(t.code){case"ArrowDown":this.onArrowDownKey(t);break;case"ArrowUp":this.onArrowUpKey(t);break;case"ArrowLeft":this.onArrowLeftKey(t);break;case"ArrowRight":this.onArrowRightKey(t);break;case"Home":this.onHomeKey(t);break;case"End":this.onEndKey(t);break;case"Space":this.onSpaceKey(t);break;case"Enter":this.onEnterKey(t);break;case"Escape":case"Tab":case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!r&&function BW(e=""){return Pn(e)&&1===e.length&&!!e.match(/\S| /)}(t.key)&&this.searchItems(t,t.key)}}onArrowDownKey(t){const r=Pn(this.focusedItem())?this.findNextItem(this.focusedItem()):this.findFirstItem();this.changeFocusedItem({originalEvent:t,processedItem:r,focusOnNext:!0}),t.preventDefault()}onArrowUpKey(t){const r=Pn(this.focusedItem())?this.findPrevItem(this.focusedItem()):this.findLastItem();this.changeFocusedItem({originalEvent:t,processedItem:r,selfCheck:!0}),t.preventDefault()}onArrowLeftKey(t){if(Pn(this.focusedItem())){if(this.activeItemPath().some(i=>i.key===this.focusedItem().key)){const i=this.activeItemPath().filter(a=>a.key!==this.focusedItem().key);this.activeItemPath.set(i)}else{const i=Pn(this.focusedItem().parent)?this.focusedItem().parent:this.focusedItem();this.focusedItem.set(i)}t.preventDefault()}}onArrowRightKey(t){if(Pn(this.focusedItem())){if(this.isItemGroup(this.focusedItem()))if(this.activeItemPath().some(a=>a.key===this.focusedItem().key))this.onArrowDownKey(t);else{const a=this.activeItemPath().filter(d=>d.parentKey!==this.focusedItem().parentKey);a.push(this.focusedItem()),this.activeItemPath.set(a)}t.preventDefault()}}onHomeKey(t){this.changeFocusedItem({originalEvent:t,processedItem:this.findFirstItem(),allowHeaderFocus:!1}),t.preventDefault()}onEndKey(t){this.changeFocusedItem({originalEvent:t,processedItem:this.findLastItem(),focusOnNext:!0,allowHeaderFocus:!1}),t.preventDefault()}onEnterKey(t){if(Pn(this.focusedItem())){const r=da(this.subMenuViewChild.listViewChild.nativeElement,`li[id="${this.focusedItemId}"]`),i=r&&(da(r,'[data-pc-section="action"]')||da(r,"a,button"));i?i.click():r&&r.click()}t.preventDefault()}onSpaceKey(t){this.onEnterKey(t)}findNextItem(t){const r=this.visibleItems().findIndex(a=>a.key===t.key);return(r<this.visibleItems().length-1?this.visibleItems().slice(r+1).find(a=>this.isValidItem(a)):void 0)||t}findPrevItem(t){const r=this.visibleItems().findIndex(a=>a.key===t.key);return(r>0?NN(this.visibleItems().slice(0,r),a=>this.isValidItem(a)):void 0)||t}searchItems(t,r){this.searchValue=(this.searchValue||"")+r;let i=null,a=!1;if(Pn(this.focusedItem())){const d=this.visibleItems().findIndex(f=>f.key===this.focusedItem().key);i=this.visibleItems().slice(d).find(f=>this.isItemMatched(f)),i=xc(i)?this.visibleItems().slice(0,d).find(f=>this.isItemMatched(f)):i}else i=this.visibleItems().find(d=>this.isItemMatched(d));return Pn(i)&&(a=!0),xc(i)&&xc(this.focusedItem())&&(i=this.findFirstItem()),Pn(i)&&this.changeFocusedItem({originalEvent:t,processedItem:i,allowHeaderFocus:!1}),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),a}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-panelMenuList"],["p-panel-menu-list"]],viewQuery:function(r,i){if(1&r&&l0(joe,5),2&r){let a;la(a=ca())&&(i.subMenuViewChild=a.first)}},inputs:{panelId:"panelId",id:"id",items:"items",itemTemplate:"itemTemplate",parentExpanded:[2,"parentExpanded","parentExpanded",Hr],expanded:[2,"expanded","expanded",Hr],transitionOptions:"transitionOptions",root:[2,"root","root",Hr],tabindex:[2,"tabindex","tabindex",Du],activeItem:"activeItem"},outputs:{itemToggle:"itemToggle",headerFocus:"headerFocus"},features:[Ms,_l],decls:2,vars:10,consts:[["submenu",""],[3,"itemToggle","keydown","menuFocus","menuBlur","root","id","panelId","tabindex","itemTemplate","focusedItemId","activeItemPath","transitionOptions","items","parentExpanded"]],template:function(r,i){if(1&r){const a=ep();Pr(0,"p-panelmenu-sub",1,0),fc("itemToggle",function(f){return Fr(a),ki(i.onItemToggle(f))})("keydown",function(f){return Fr(a),ki(i.onKeyDown(f))})("menuFocus",function(f){return Fr(a),ki(i.onFocus(f))})("menuBlur",function(f){return Fr(a),ki(i.onBlur(f))}),ti()}2&r&&st("root",!0)("id",i.panelId+"_list")("panelId",i.panelId)("tabindex",i.tabindex)("itemTemplate",i.itemTemplate)("focusedItemId",i.focused?i.focusedItemId:void 0)("activeItemPath",i.activeItemPath())("transitionOptions",i.transitionOptions)("items",i.processedItems())("parentExpanded",i.parentExpanded)},dependencies:[Uh,wse,TC,pT,bc],encapsulation:2,changeDetection:0})}return e})(),mT=(()=>{class e extends Lu{model;styleClass;multiple=!1;transitionOptions="400ms cubic-bezier(0.86, 0, 0.07, 1)";id;tabindex=0;containerViewChild;submenuIconTemplate;headerIconTemplate;itemTemplate;templates;_submenuIconTemplate;_headerIconTemplate;_itemTemplate;animating;activeItem=kn(null);_componentStyle=Fe(q1);ngOnInit(){super.ngOnInit(),this.id=this.id||G1("pn_id_")}ngAfterContentInit(){this.templates?.forEach(t=>{switch(t.getType()){case"submenuicon":this._submenuIconTemplate=t.template;break;case"headericon":this._headerIconTemplate=t.template;break;default:this._itemTemplate=t.template}})}collapseAll(){for(let t of this.model)t.expanded&&(t.expanded=!1);this.cd.detectChanges()}onToggleDone(){this.animating=!1,this.cd.markForCheck()}changeActiveItem(t,r,i,a=!1){if(!this.isItemDisabled(r)){const d=a?r:this.activeItem&&function AN(e,n,t){return t?tT(e,t)===tT(n,t):AW(e,n)}(r,this.activeItem)?null:r;this.activeItem.set(d)}}getAnimation(t){return t.expanded?{value:"visible",params:{transitionParams:this.animating?this.transitionOptions:"0ms",height:"*"}}:{value:"hidden",params:{transitionParams:this.transitionOptions,height:"0"}}}getItemProp(t,r){return t?Ps(t[r]):void 0}getItemLabel(t){return this.getItemProp(t,"label")}isItemActive(t){return t.expanded}isItemVisible(t){return!1!==this.getItemProp(t,"visible")}isItemDisabled(t){return this.getItemProp(t,"disabled")}isItemGroup(t){return Pn(t.items)}getPanelId(t,r){return r&&r.id?r.id:`${this.id}_${t}`}getHeaderId(t,r){return t.id?t.id+"_header":`${this.getPanelId(r)}_header`}getContentId(t,r){return t.id?t.id+"_content":`${this.getPanelId(r)}_content`}updateFocusedHeader(t){const{originalEvent:r,focusOnNext:i,selfCheck:a}=t,d=r.currentTarget.closest('[data-pc-section="panel"]'),f=a?da(d,'[data-pc-section="header"]'):i?this.findNextHeader(d):this.findPrevHeader(d);f?this.changeFocusedHeader(r,f):i?this.onHeaderHomeKey(r):this.onHeaderEndKey(r)}changeFocusedHeader(t,r){r&&V1(r)}findNextHeader(t,r=!1){const a=da(r?t:t.nextElementSibling,'[data-pc-section="header"]');return a?H0(a,"data-p-disabled")?this.findNextHeader(a.parentElement):a:null}findPrevHeader(t,r=!1){const a=da(r?t:t.previousElementSibling,'[data-pc-section="header"]');return a?H0(a,"data-p-disabled")?this.findPrevHeader(a.parentElement):a:null}findFirstHeader(){return this.findNextHeader(this.containerViewChild.nativeElement.firstElementChild,!0)}findLastHeader(){return this.findPrevHeader(this.containerViewChild.nativeElement.lastElementChild,!0)}onHeaderClick(t,r,i){if(this.isItemDisabled(r))t.preventDefault();else{if(r.command&&r.command({originalEvent:t,item:r}),!this.multiple)for(let a of this.model)r!==a&&a.expanded&&(a.expanded=!1);r.expanded=!r.expanded,this.changeActiveItem(t,r,i),this.animating=!0,V1(t.currentTarget)}}onHeaderKeyDown(t,r,i){switch(t.code){case"ArrowDown":this.onHeaderArrowDownKey(t);break;case"ArrowUp":this.onHeaderArrowUpKey(t);break;case"Home":this.onHeaderHomeKey(t);break;case"End":this.onHeaderEndKey(t);break;case"Enter":case"Space":this.onHeaderEnterKey(t,r,i)}}onHeaderArrowDownKey(t){const r=!0===H0(t.currentTarget,"data-p-highlight")?da(t.currentTarget.nextElementSibling,'[data-pc-section="menu"]'):null;r?V1(r):this.updateFocusedHeader({originalEvent:t,focusOnNext:!0}),t.preventDefault()}onHeaderArrowUpKey(t){const r=this.findPrevHeader(t.currentTarget.parentElement)||this.findLastHeader(),i=!0===H0(r,"data-p-highlight")?da(r.nextElementSibling,'[data-pc-section="menu"]'):null;i?V1(i):this.updateFocusedHeader({originalEvent:t,focusOnNext:!1}),t.preventDefault()}onHeaderHomeKey(t){this.changeFocusedHeader(t,this.findFirstHeader()),t.preventDefault()}onHeaderEndKey(t){this.changeFocusedHeader(t,this.findLastHeader()),t.preventDefault()}onHeaderEnterKey(t,r,i){const a=da(t.currentTarget,'[data-pc-section="headeraction"]');a?a.click():this.onHeaderClick(t,r,i),t.preventDefault()}static \u0275fac=(()=>{let t;return function(i){return(t||(t=kr(e)))(i||e)}})();static \u0275cmp=ra({type:e,selectors:[["p-panelMenu"],["p-panelmenu"],["p-panel-menu"]],contentQueries:function(r,i,a){if(1&r&&(Tu(a,Voe,4),Tu(a,Uoe,4),Tu(a,$oe,4),Tu(a,MN,4)),2&r){let d;la(d=ca())&&(i.submenuIconTemplate=d.first),la(d=ca())&&(i.headerIconTemplate=d.first),la(d=ca())&&(i.itemTemplate=d.first),la(d=ca())&&(i.templates=d)}},viewQuery:function(r,i){if(1&r&&l0(Goe,5),2&r){let a;la(a=ca())&&(i.containerViewChild=a.first)}},hostAttrs:["data-pc-section","root","data-pc-name","panelmenu"],hostVars:2,hostBindings:function(r,i){2&r&&cn(i.cn(i.cx("root"),i.styleClass))},inputs:{model:"model",styleClass:"styleClass",multiple:[2,"multiple","multiple",Hr],transitionOptions:"transitionOptions",id:"id",tabindex:[2,"tabindex","tabindex",Du]},features:[Mu([q1]),Ms],decls:1,vars:1,consts:[["htmlLabel",""],["htmlRouteLabel",""],[4,"ngFor","ngForOf"],[3,"class","ngStyle",4,"ngIf"],[3,"ngStyle"],["role","button",3,"click","keydown","ngStyle","pTooltip","tabindex","tooltipOptions"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","class","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state",4,"ngIf"],["role","region",3,"class",4,"ngIf"],[3,"target","class",4,"ngIf"],[3,"target"],[3,"class",4,"ngIf","ngIfElse"],[3,"class",4,"ngIf"],[4,"ngTemplateOutlet"],["data-p-icon","chevron-down",3,"class",4,"ngIf"],["data-p-icon","chevron-right",3,"class",4,"ngIf"],["data-p-icon","chevron-down"],["data-p-icon","chevron-right"],[3,"innerHTML"],[3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],["role","region"],[3,"headerFocus","panelId","items","itemTemplate","transitionOptions","root","activeItem","tabindex","parentExpanded"]],template:function(r,i){1&r&&Nn(0,yse,2,1,"ng-container",2),2&r&&st("ngForOf",i.model)},dependencies:[Uh,zE,e1,n1,t1,Sse,TC,O0,SC,pT,EL,bL,xL,bc],encapsulation:2,data:{animation:[KR("rootItem",[C1("hidden",Wg({height:"0",visibility:"hidden"})),C1("visible",Wg({height:"*",visibility:"*"})),T1("visible <=> hidden",[E1("{{transitionParams}}")]),T1("void => *",E1(0))])]},changeDetection:0})}return e})(),Ese=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Sd({type:e});static \u0275inj=Fi({imports:[mT,bc,bc]})}return e})();var ML=.0066943799901413165,Z0=484813681109536e-20,Qe=Math.PI/2,ft=1e-10,jo=.017453292519943295,Ou=57.29577951308232,Jn=Math.PI/4,K0=2*Math.PI,Ni=3.14159265359;const Pse={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},Ase={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var DL=/[\s_\-\/\(\)]/g;function Kh(e,n){if(e[n])return e[n];for(var a,t=Object.keys(e),r=n.toLowerCase().replace(DL,""),i=-1;++i<t.length;)if((a=t[i]).toLowerCase().replace(DL,"")===r)return e[a]}function yT(e){var r,i,a,n={},t=e.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,_){var S=_.split("=");return S.push(!0),f[S[0].toLowerCase()]=S[1],f},{}),d={proj:"projName",datum:"datumCode",rf:function(f){n.rf=parseFloat(f)},lat_0:function(f){n.lat0=f*jo},lat_1:function(f){n.lat1=f*jo},lat_2:function(f){n.lat2=f*jo},lat_ts:function(f){n.lat_ts=f*jo},lon_0:function(f){n.long0=f*jo},lon_1:function(f){n.long1=f*jo},lon_2:function(f){n.long2=f*jo},alpha:function(f){n.alpha=parseFloat(f)*jo},gamma:function(f){n.rectified_grid_angle=parseFloat(f)*jo},lonc:function(f){n.longc=f*jo},x_0:function(f){n.x0=parseFloat(f)},y_0:function(f){n.y0=parseFloat(f)},k_0:function(f){n.k0=parseFloat(f)},k:function(f){n.k0=parseFloat(f)},a:function(f){n.a=parseFloat(f)},b:function(f){n.b=parseFloat(f)},r:function(f){n.a=n.b=parseFloat(f)},r_a:function(){n.R_A=!0},zone:function(f){n.zone=parseInt(f,10)},south:function(){n.utmSouth=!0},towgs84:function(f){n.datum_params=f.split(",").map(function(_){return parseFloat(_)})},to_meter:function(f){n.to_meter=parseFloat(f)},units:function(f){n.units=f;var _=Kh(Ase,f);_&&(n.to_meter=_.to_meter)},from_greenwich:function(f){n.from_greenwich=f*jo},pm:function(f){var _=Kh(Pse,f);n.from_greenwich=(_||parseFloat(f))*jo},nadgrids:function(f){"@null"===f?n.datumCode="none":n.nadgrids=f},axis:function(f){var _="ewnsud";3===f.length&&-1!==_.indexOf(f.substr(0,1))&&-1!==_.indexOf(f.substr(1,1))&&-1!==_.indexOf(f.substr(2,1))&&(n.axis=f)},approx:function(){n.approx=!0}};for(r in t)i=t[r],r in d?"function"==typeof(a=d[r])?a(i):n[a]=i:n[r]=i;return"string"==typeof n.datumCode&&"WGS84"!==n.datumCode&&(n.datumCode=n.datumCode.toLowerCase()),n}const kL=class Rse{static getId(n){const t=n.find(r=>Array.isArray(r)&&"ID"===r[0]);return t&&t.length>=3?{authority:t[1],code:parseInt(t[2],10)}:null}static convertUnit(n,t="unit"){if(!n||n.length<3)return{type:t,name:"unknown",conversion_factor:null};const r=n[1],i=parseFloat(n[2])||null,a=n.find(f=>Array.isArray(f)&&"ID"===f[0]);return{type:t,name:r,conversion_factor:i,id:a?{authority:a[1],code:parseInt(a[2],10)}:null}}static convertAxis(n){const t=n[1]||"Unknown";let r;const i=t.match(/^\((.)\)$/);if(i){const S=i[1].toUpperCase();if("E"===S)r="east";else if("N"===S)r="north";else{if("U"!==S)throw new Error(`Unknown axis abbreviation: ${S}`);r="up"}}else r=n[2]?n[2].toLowerCase():"unknown";const a=n.find(S=>Array.isArray(S)&&"ORDER"===S[0]),d=a?parseInt(a[1],10):null,f=n.find(S=>Array.isArray(S)&&("LENGTHUNIT"===S[0]||"ANGLEUNIT"===S[0]||"SCALEUNIT"===S[0]));return{name:t,direction:r,unit:this.convertUnit(f),order:d}}static extractAxes(n){return n.filter(t=>Array.isArray(t)&&"AXIS"===t[0]).map(t=>this.convertAxis(t)).sort((t,r)=>(t.order||0)-(r.order||0))}static convert(n,t={}){switch(n[0]){case"PROJCRS":t.type="ProjectedCRS",t.name=n[1],t.base_crs=n.find(L=>Array.isArray(L)&&"BASEGEOGCRS"===L[0])?this.convert(n.find(L=>Array.isArray(L)&&"BASEGEOGCRS"===L[0])):null,t.conversion=n.find(L=>Array.isArray(L)&&"CONVERSION"===L[0])?this.convert(n.find(L=>Array.isArray(L)&&"CONVERSION"===L[0])):null;const r=n.find(L=>Array.isArray(L)&&"CS"===L[0]);r&&(t.coordinate_system={type:r[1],axis:this.extractAxes(n)});const i=n.find(L=>Array.isArray(L)&&"LENGTHUNIT"===L[0]);if(i){const L=this.convertUnit(i);t.coordinate_system.unit=L}t.id=this.getId(n);break;case"BASEGEOGCRS":case"GEOGCRS":t.type="GeographicCRS",t.name=n[1];const a=n.find(L=>Array.isArray(L)&&("DATUM"===L[0]||"ENSEMBLE"===L[0]));if(a){const L=this.convert(a);"ENSEMBLE"===a[0]?t.datum_ensemble=L:t.datum=L;const G=n.find(Q=>Array.isArray(Q)&&"PRIMEM"===Q[0]);G&&"Greenwich"!==G[1]&&(L.prime_meridian={name:G[1],longitude:parseFloat(G[2])})}t.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(n)},t.id=this.getId(n);break;case"DATUM":t.type="GeodeticReferenceFrame",t.name=n[1],t.ellipsoid=n.find(L=>Array.isArray(L)&&"ELLIPSOID"===L[0])?this.convert(n.find(L=>Array.isArray(L)&&"ELLIPSOID"===L[0])):null;break;case"ENSEMBLE":t.type="DatumEnsemble",t.name=n[1],t.members=n.filter(L=>Array.isArray(L)&&"MEMBER"===L[0]).map(L=>({type:"DatumEnsembleMember",name:L[1],id:this.getId(L)}));const d=n.find(L=>Array.isArray(L)&&"ENSEMBLEACCURACY"===L[0]);d&&(t.accuracy=parseFloat(d[1]));const f=n.find(L=>Array.isArray(L)&&"ELLIPSOID"===L[0]);f&&(t.ellipsoid=this.convert(f)),t.id=this.getId(n);break;case"ELLIPSOID":t.type="Ellipsoid",t.name=n[1],t.semi_major_axis=parseFloat(n[2]),t.inverse_flattening=parseFloat(n[3]),n.find(L=>Array.isArray(L)&&"LENGTHUNIT"===L[0])&&this.convert(n.find(L=>Array.isArray(L)&&"LENGTHUNIT"===L[0]),t);break;case"CONVERSION":t.type="Conversion",t.name=n[1],t.method=n.find(L=>Array.isArray(L)&&"METHOD"===L[0])?this.convert(n.find(L=>Array.isArray(L)&&"METHOD"===L[0])):null,t.parameters=n.filter(L=>Array.isArray(L)&&"PARAMETER"===L[0]).map(L=>this.convert(L));break;case"METHOD":t.type="Method",t.name=n[1],t.id=this.getId(n);break;case"PARAMETER":t.type="Parameter",t.name=n[1],t.value=parseFloat(n[2]),t.unit=this.convertUnit(n.find(L=>Array.isArray(L)&&("LENGTHUNIT"===L[0]||"ANGLEUNIT"===L[0]||"SCALEUNIT"===L[0]))),t.id=this.getId(n);break;case"BOUNDCRS":t.type="BoundCRS";const S=n.find(L=>Array.isArray(L)&&"SOURCECRS"===L[0]);if(S){const L=S.find(G=>Array.isArray(G));t.source_crs=L?this.convert(L):null}const M=n.find(L=>Array.isArray(L)&&"TARGETCRS"===L[0]);if(M){const L=M.find(G=>Array.isArray(G));t.target_crs=L?this.convert(L):null}const k=n.find(L=>Array.isArray(L)&&"ABRIDGEDTRANSFORMATION"===L[0]);t.transformation=k?this.convert(k):null;break;case"ABRIDGEDTRANSFORMATION":if(t.type="Transformation",t.name=n[1],t.method=n.find(L=>Array.isArray(L)&&"METHOD"===L[0])?this.convert(n.find(L=>Array.isArray(L)&&"METHOD"===L[0])):null,t.parameters=n.filter(L=>Array.isArray(L)&&("PARAMETER"===L[0]||"PARAMETERFILE"===L[0])).map(L=>"PARAMETER"===L[0]?this.convert(L):"PARAMETERFILE"===L[0]?{name:L[1],value:L[2],id:{authority:"EPSG",code:8656}}:void 0),7===t.parameters.length){const L=t.parameters[6];"Scale difference"===L.name&&(L.value=Math.round(1e12*(L.value-1))/1e6)}t.id=this.getId(n);break;case"AXIS":t.coordinate_system||(t.coordinate_system={type:"unspecified",axis:[]}),t.coordinate_system.axis.push(this.convertAxis(n));break;case"LENGTHUNIT":const F=this.convertUnit(n,"LinearUnit");t.coordinate_system&&t.coordinate_system.axis&&t.coordinate_system.axis.forEach(L=>{L.unit||(L.unit=F)}),F.conversion_factor&&1!==F.conversion_factor&&t.semi_major_axis&&(t.semi_major_axis={value:t.semi_major_axis,unit:F});break;default:t.keyword=n[0]}return t}},Lse=class Nse extends kL{static convert(n,t={}){return super.convert(n,t),t.coordinate_system&&"Cartesian"===t.coordinate_system.subtype&&delete t.coordinate_system,t.usage&&delete t.usage,t}},Fse=class Ose extends kL{static convert(n,t={}){super.convert(n,t);const r=n.find(a=>Array.isArray(a)&&"CS"===a[0]);r&&(t.coordinate_system={subtype:r[1],axis:this.extractAxes(n)});const i=n.find(a=>Array.isArray(a)&&"USAGE"===a[0]);if(i){const a=i.find(_=>Array.isArray(_)&&"SCOPE"===_[0]),d=i.find(_=>Array.isArray(_)&&"AREA"===_[0]),f=i.find(_=>Array.isArray(_)&&"BBOX"===_[0]);t.usage={},a&&(t.usage.scope=a[1]),d&&(t.usage.area=d[1]),f&&(t.usage.bbox=f.slice(1))}return t}};var Y0=1,Use=/\s/,$se=/[A-Za-z]/,Gse=/[A-Za-z84_]/,Z1=/[,\]]/,NL=/[\d\.E\-\+]/;function jd(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Y0}function bT(e,n,t){Array.isArray(n)&&(t.unshift(n),n=null);var i=t.reduce(function(a,d){return Qg(d,a),a},n?{}:e);n&&(e[n]=i)}function Qg(e,n){if(Array.isArray(e)){var t=e.shift();if("PARAMETER"===t&&(t=e.shift()),1===e.length)return Array.isArray(e[0])?(n[t]={},void Qg(e[0],n[t])):void(n[t]=e[0]);if(e.length)if("TOWGS84"!==t){if("AXIS"===t)return t in n||(n[t]=[]),void n[t].push(e);var r;switch(Array.isArray(t)||(n[t]={}),t){case"UNIT":case"PRIMEM":case"VERT_DATUM":return n[t]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&Qg(e[2],n[t]));case"SPHEROID":case"ELLIPSOID":return n[t]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&Qg(e[3],n[t]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return e[0]=["name",e[0]],void bT(n,t,e);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return e[0]=["name",e[0]],bT(n,t,e),void(n[t].type=t);default:for(r=-1;++r<e.length;)if(!Array.isArray(e[r]))return Qg(e,n[t]);return bT(n,t,e)}}else n[t]=e;else n[t]=!0}else n[e]=!0}function Tc(e){return.017453292519943295*e}function LL(e){const n=(e.projName||"").toLowerCase().replace(/_/g," ");!e.long0&&e.longc&&("albers conic equal area"===n||"lambert azimuthal equal area"===n)&&(e.long0=e.longc),e.lat_ts||!e.lat1||"stereographic south pole"!==n&&"polar stereographic (variant b)"!==n?!e.lat_ts&&e.lat0&&("polar stereographic"===n||"polar stereographic (variant a)"===n)&&(e.lat_ts=e.lat0,e.lat0=Tc(e.lat0>0?90:-90),delete e.lat1):(e.lat0=Tc(e.lat1>0?90:-90),e.lat_ts=e.lat1,delete e.lat1)}function OL(e){let n={units:null,to_meter:void 0};return"string"==typeof e?(n.units=e.toLowerCase(),"metre"===n.units&&(n.units="meter"),"meter"===n.units&&(n.to_meter=1)):e&&e.name&&(n.units=e.name.toLowerCase(),"metre"===n.units&&(n.units="meter"),n.to_meter=e.conversion_factor),n}function FL(e){return"object"==typeof e?e.value*e.unit.conversion_factor:e}function BL(e,n){e.ellipsoid.radius?(n.a=e.ellipsoid.radius,n.rf=0):(n.a=FL(e.ellipsoid.semi_major_axis),void 0!==e.ellipsoid.inverse_flattening?n.rf=e.ellipsoid.inverse_flattening:void 0!==e.ellipsoid.semi_major_axis&&void 0!==e.ellipsoid.semi_minor_axis&&(n.rf=n.a/(n.a-FL(e.ellipsoid.semi_minor_axis))))}function K1(e,n={}){return e&&"object"==typeof e?"BoundCRS"===e.type?(K1(e.source_crs,n),e.transformation&&(e.transformation.method&&"NTv2"===e.transformation.method.name?n.nadgrids=e.transformation.parameters[0].value:n.datum_params=e.transformation.parameters.map(t=>t.value)),n):(Object.keys(e).forEach(t=>{const r=e[t];if(null!==r)switch(t){case"name":if(n.srsCode)break;n.name=r,n.srsCode=r;break;case"type":"GeographicCRS"===r?n.projName="longlat":"ProjectedCRS"===r&&e.conversion&&e.conversion.method&&(n.projName=e.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(n.ellps=r.ellipsoid.name,BL(r,n)),r.prime_meridian&&(n.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":n.ellps=r.name,BL(r,n);break;case"prime_meridian":n.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis)if(n.axis=r.axis.map(i=>{const a=i.direction;if("east"===a)return"e";if("north"===a)return"n";if("west"===a)return"w";if("south"===a)return"s";throw new Error(`Unknown axis direction: ${a}`)}).join("")+"u",r.unit){const{units:i,to_meter:a}=OL(r.unit);n.units=i,n.to_meter=a}else if(r.axis[0]&&r.axis[0].unit){const{units:i,to_meter:a}=OL(r.axis[0].unit);n.units=i,n.to_meter=a}break;case"id":r.authority&&r.code&&(n.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(n.projName=r.method.name),r.parameters&&r.parameters.forEach(i=>{const a=i.name.toLowerCase().replace(/\s+/g,"_"),d=i.value;n[a]=i.unit&&i.unit.conversion_factor?d*i.unit.conversion_factor:"degree"===i.unit?d*Math.PI/180:d});break;case"unit":r.name&&(n.units=r.name.toLowerCase(),"metre"===n.units&&(n.units="meter")),r.conversion_factor&&(n.to_meter=r.conversion_factor);break;case"base_crs":K1(r,n),n.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name}}),void 0!==n.latitude_of_false_origin&&(n.lat0=n.latitude_of_false_origin),void 0!==n.longitude_of_false_origin&&(n.long0=n.longitude_of_false_origin),void 0!==n.latitude_of_standard_parallel&&(n.lat0=n.latitude_of_standard_parallel,n.lat1=n.latitude_of_standard_parallel),void 0!==n.latitude_of_1st_standard_parallel&&(n.lat1=n.latitude_of_1st_standard_parallel),void 0!==n.latitude_of_2nd_standard_parallel&&(n.lat2=n.latitude_of_2nd_standard_parallel),void 0!==n.latitude_of_projection_centre&&(n.lat0=n.latitude_of_projection_centre),void 0!==n.longitude_of_projection_centre&&(n.longc=n.longitude_of_projection_centre),void 0!==n.easting_at_false_origin&&(n.x0=n.easting_at_false_origin),void 0!==n.northing_at_false_origin&&(n.y0=n.northing_at_false_origin),void 0!==n.latitude_of_natural_origin&&(n.lat0=n.latitude_of_natural_origin),void 0!==n.longitude_of_natural_origin&&(n.long0=n.longitude_of_natural_origin),void 0!==n.longitude_of_origin&&(n.long0=n.longitude_of_origin),void 0!==n.false_easting&&(n.x0=n.false_easting),n.easting_at_projection_centre&&(n.x0=n.easting_at_projection_centre),void 0!==n.false_northing&&(n.y0=n.false_northing),n.northing_at_projection_centre&&(n.y0=n.northing_at_projection_centre),void 0!==n.standard_parallel_1&&(n.lat1=n.standard_parallel_1),void 0!==n.standard_parallel_2&&(n.lat2=n.standard_parallel_2),void 0!==n.scale_factor_at_natural_origin&&(n.k0=n.scale_factor_at_natural_origin),void 0!==n.scale_factor_at_projection_centre&&(n.k0=n.scale_factor_at_projection_centre),void 0!==n.scale_factor_on_pseudo_standard_parallel&&(n.k0=n.scale_factor_on_pseudo_standard_parallel),void 0!==n.azimuth&&(n.alpha=n.azimuth),void 0!==n.azimuth_at_projection_centre&&(n.alpha=n.azimuth_at_projection_centre),n.angle_from_rectified_to_skew_grid&&(n.rectified_grid_angle=n.angle_from_rectified_to_skew_grid),LL(n),n):e}jd.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;Use.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case Y0:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},jd.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(Z1.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},jd.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Y0)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Y0,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},jd.prototype.number=function(e){if(!NL.test(e)){if(Z1.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},jd.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},jd.prototype.keyword=function(e){if(Gse.test(e))this.word+=e;else{if("["===e){var n=[];return n.push(this.word),this.level++,null===this.root?this.root=n:this.currentObject.push(n),this.stack.push(this.currentObject),this.currentObject=n,void(this.state=Y0)}if(!Z1.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},jd.prototype.neutral=function(e){if($se.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(NL.test(e))return this.word=e,void(this.state=3);if(!Z1.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},jd.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Wse=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function zL(e){for(var n=Object.keys(e),t=0,r=n.length;t<r;++t){var i=n[t];-1!==Wse.indexOf(i)&&Kse(e[i]),"object"==typeof e[i]&&zL(e[i])}}function Kse(e){if(e.AUTHORITY){var n=Object.keys(e.AUTHORITY)[0];n&&n in e.AUTHORITY&&(e.title=n+":"+e.AUTHORITY[n])}if("GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):e.projName="object"==typeof e.PROJECTION?Object.keys(e.PROJECTION)[0]:e.PROJECTION,e.AXIS){for(var t="",r=0,i=e.AXIS.length;r<i;++r){var a=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];-1!==a[0].indexOf("north")||("y"===a[0]||"lat"===a[0])&&"north"===a[1]?t+="n":-1!==a[0].indexOf("south")||("y"===a[0]||"lat"===a[0])&&"south"===a[1]?t+="s":-1!==a[0].indexOf("east")||("x"===a[0]||"lon"===a[0])&&"east"===a[1]?t+="e":(-1!==a[0].indexOf("west")||("x"===a[0]||"lon"===a[0])&&"west"===a[1])&&(t+="w")}2===t.length&&(t+="u"),3===t.length&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var d=e.GEOGCS;function f(M){return M*(e.to_meter||1)}"GEOGCS"===e.type&&(d=e),d&&(e.datumCode=d.DATUM?d.DATUM.name.toLowerCase():d.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_1949"===e.datumCode&&(e.datumCode="nzgd49"),("wgs_1984"===e.datumCode||"world_geodetic_system_1984"===e.datumCode)&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"belge_1972"===e.datumCode&&(e.datumCode="rnb72"),d.DATUM&&d.DATUM.SPHEROID&&(e.ellps=d.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=d.DATUM.SPHEROID.a,e.rf=parseFloat(d.DATUM.SPHEROID.rf,10)),d.DATUM&&d.DATUM.TOWGS84&&(e.datum_params=d.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),e.rectified_grid_angle&&(e.rectified_grid_angle=Tc(e.rectified_grid_angle)),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Tc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Tc],["x0","false_easting",f],["y0","false_northing",f],["long0","central_meridian",Tc],["lat0","latitude_of_origin",Tc],["lat0","standard_parallel_1",Tc],["lat1","standard_parallel_1",Tc],["lat2","standard_parallel_2",Tc],["azimuth","Azimuth"],["alpha","azimuth",Tc],["srsCode","name"]].forEach(function(M){return function Zse(e,n){var t=n[0],r=n[1];!(t in e)&&r in e&&(e[t]=e[r],3===n.length&&(e[t]=n[2](e[t])))}(e,M)}),LL(e)}function xT(e){if("object"==typeof e)return K1(e);const n=function jse(e){const n=e.toUpperCase();return n.includes("PROJCRS")||n.includes("GEOGCRS")||n.includes("BOUNDCRS")||n.includes("VERTCRS")||n.includes("LENGTHUNIT")||n.includes("ANGLEUNIT")||n.includes("SCALEUNIT")?"WKT2":(n.includes("PROJCS")||n.includes("GEOGCS")||n.includes("LOCAL_CS")||n.includes("VERT_CS")||n.includes("UNIT"),"WKT1")}(e);var t=function Hse(e){return new jd(e).output()}(e);if("WKT2"===n)return K1(function zse(e){return("2019"===function Bse(e){return e.find(n=>Array.isArray(n)&&"USAGE"===n[0])?"2019":(e.find(n=>Array.isArray(n)&&"CS"===n[0]),"2015")}(e)?Fse:Lse).convert(e)}(t));var r=t[0],i={};return Qg(t,i),zL(i),i[r]}function Ml(e){var n=this;if(2===arguments.length){var t=arguments[1];Ml[e]="string"==typeof t?"+"===t.charAt(0)?yT(arguments[1]):xT(arguments[1]):t}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(r){return Array.isArray(r)?Ml.apply(n,r):Ml(r)});if("string"==typeof e){if(e in Ml)return Ml[e]}else"EPSG"in e?Ml["EPSG:"+e.EPSG]=e:"ESRI"in e?Ml["ESRI:"+e.ESRI]=e:"IAU2000"in e?Ml["IAU2000:"+e.IAU2000]=e:console.log(e);return}}!function Cse(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var n=1;n<=60;++n)e("EPSG:"+(32600+n),"+proj=utm +zone="+n+" +datum=WGS84 +units=m"),e("EPSG:"+(32700+n),"+proj=utm +zone="+n+" +south +datum=WGS84 +units=m");e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}(Ml);const Y1=Ml;var Jse=["3857","900913","3785","102113"];function jL(e,n){var t,r;if(e=e||{},!n)return e;for(r in n)void 0!==(t=n[r])&&(e[r]=t);return e}function Fu(e,n,t){var r=e*n;return t/Math.sqrt(1-r*r)}function X0(e){return e<0?-1:1}function xt(e){return Math.abs(e)<=Ni?e:e-X0(e)*K0}function Ic(e,n,t){var r=e*t;return r=Math.pow((1-r)/(1+r),.5*e),Math.tan(.5*(Qe-n))/r}function Q0(e,n){for(var r,i,t=.5*e,a=Qe-2*Math.atan(n),d=0;d<=15;d++)if(r=e*Math.sin(a),a+=i=Qe-2*Math.atan(n*Math.pow((1-r)/(1+r),t))-a,Math.abs(i)<=1e-10)return a;return-9999}function VL(e){return e}var hae=[{init:function oae(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.k0=this.sphere?Math.cos(this.lat_ts):Fu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k0=this.k?this.k:1)},forward:function sae(e){var r,i,n=e.x,t=e.y;if(t*Ou>90&&t*Ou<-90&&n*Ou>180&&n*Ou<-180)return null;if(Math.abs(Math.abs(t)-Qe)<=ft)return null;if(this.sphere)r=this.x0+this.a*this.k0*xt(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(Jn+.5*t));else{var a=Math.sin(t),d=Ic(this.e,t,a);r=this.x0+this.a*this.k0*xt(n-this.long0),i=this.y0-this.a*this.k0*Math.log(d)}return e.x=r,e.y=i,e},inverse:function aae(e){var r,i,n=e.x-this.x0,t=e.y-this.y0;if(this.sphere)i=Qe-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var a=Math.exp(-t/(this.a*this.k0));if(-9999===(i=Q0(this.e,a)))return null}return r=xt(this.long0+n/(this.a*this.k0)),e.x=r,e.y=i,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"]},{init:function uae(){},forward:VL,inverse:VL,names:["longlat","identity"]}],mp={},Jg=[];function UL(e,n){var t=Jg.length;return e.names?(Jg[t]=e,e.names.forEach(function(r){mp[r.toLowerCase()]=t}),this):(console.log(n),!0)}function $L(e){return e.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}const gae={start:function pae(){hae.forEach(UL)},add:UL,get:function fae(e){if(!e)return!1;var n=e.toLowerCase();return typeof mp[n]<"u"&&Jg[mp[n]]||(n=$L(n))in mp&&Jg[mp[n]]?Jg[mp[n]]:void 0}},GL={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},_ae=GL.WGS84;var X1={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var bae in X1){var wT=X1[bae];wT.datumName&&(X1[wT.datumName]=wT)}const xae=X1;var ST={};function Tae(e,n){return ET.apply(this,arguments)}function ET(){return(ET=Jl(function*(e,n){for(var t=[],r=yield n.getImageCount(),i=r-1;i>=0;i--){var a=yield n.getImage(i),f=yield a.readRasters(),_=[a.getWidth(),a.getHeight()],S=a.getBoundingBox().map(HL),M=[a.fileDirectory.ModelPixelScale[0],a.fileDirectory.ModelPixelScale[1]].map(HL),k=S[0]+(_[0]-1)*M[0],F=S[3]-(_[1]-1)*M[1],L=f[0],G=f[1],Q=[];for(let we=_[1]-1;we>=0;we--)for(let Ue=_[0]-1;Ue>=0;Ue--){var de=we*_[0]+Ue;Q.push([-Yh(G[de]),Yh(L[de])])}t.push({del:M,lim:_,ll:[-k,F],cvs:Q})}var _e={header:{nSubgrids:r},subgrids:t};return ST[e]=_e,_e})).apply(this,arguments)}function Mae(e){if(0===e.length)return null;var n="@"===e[0];return n&&(e=e.slice(1)),"null"===e?{name:"null",mandatory:!n,grid:null,isNull:!0}:{name:e,mandatory:!n,grid:ST[e]||null,isNull:!1}}function HL(e){return e*Math.PI/180}function Yh(e){return e/3600*Math.PI/180}function CT(e,n,t){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(n,t)))}function Aae(e){return e.map(function(n){return[Yh(n.longitudeShift),Yh(n.latitudeShift)]})}function Rae(e,n,t){return{name:CT(e,n+8,n+16).trim(),parent:CT(e,n+24,n+24+8).trim(),lowerLatitude:e.getFloat64(n+72,t),upperLatitude:e.getFloat64(n+88,t),lowerLongitude:e.getFloat64(n+104,t),upperLongitude:e.getFloat64(n+120,t),latitudeInterval:e.getFloat64(n+136,t),longitudeInterval:e.getFloat64(n+152,t),gridNodeCount:e.getInt32(n+168,t)}}function Nae(e,n,t,r,i){var a=n+176,d=16;!1===i&&(d=8);for(var f=[],_=0;_<t.gridNodeCount;_++){var S={latitudeShift:e.getFloat32(a+_*d,r),longitudeShift:e.getFloat32(a+_*d+4,r)};!1!==i&&(S.latitudeAccuracy=e.getFloat32(a+_*d+8,r),S.longitudeAccuracy=e.getFloat32(a+_*d+12,r)),f.push(S)}return f}function em(e,n){if(!(this instanceof em))return new em(e);this.forward=null,this.inverse=null,this.init=null,this.names=null,n=n||function(S){if(S)throw S};var t=function rae(e){if(!function Yse(e){return"string"==typeof e}(e))return"projName"in e?e:xT(e);if(function Xse(e){return e in Y1}(e))return Y1[e];if(function Qse(e){return 0!==e.indexOf("+")&&-1!==e.indexOf("[")||"object"==typeof e&&!("srsCode"in e)}(e)){var n=xT(e);if(function eae(e){var n=Kh(e,"authority");if(n){var t=Kh(n,"epsg");return t&&Jse.indexOf(t)>-1}}(n))return Y1["EPSG:3857"];var t=function tae(e){var n=Kh(e,"extension");if(n)return Kh(n,"proj4")}(n);return t?yT(t):n}return function nae(e){return"+"===e[0]}(e)?yT(e):void 0}(e);if("object"==typeof t){var r=em.projections.get(t.projName);if(r){if(t.datumCode&&"none"!==t.datumCode){var i=Kh(xae,t.datumCode);i&&(t.datum_params=t.datum_params||(i.towgs84?i.towgs84.split(","):null),t.ellps=i.ellipse,t.datumName=i.datumName?i.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var a=function vae(e,n,t,r,i){if(!e){var a=Kh(GL,r);a||(a=_ae),e=a.a,n=a.b,t=a.rf}return t&&!n&&(n=(1-1/t)*e),(0===t||Math.abs(e-n)<ft)&&(i=!0,n=e),{a:e,b:n,rf:t,sphere:i}}(t.a,t.b,t.rf,t.ellps,t.sphere),d=function yae(e,n,t,r){var i=e*e,a=n*n,d=(i-a)/i,f=0;return r?(i=(e*=1-d*(.16666666666666666+d*(.04722222222222222+.022156084656084655*d)))*e,d=0):f=Math.sqrt(d),{es:d,e:f,ep2:(i-a)/a}}(a.a,a.b,0,t.R_A),f=function Iae(e){return void 0===e?null:e.split(",").map(Mae)}(t.nadgrids),_=t.datum||function wae(e,n,t,r,i,a,d){var f={};return f.datum_type=void 0===e||"none"===e?5:4,n&&(f.datum_params=n.map(parseFloat),(0!==f.datum_params[0]||0!==f.datum_params[1]||0!==f.datum_params[2])&&(f.datum_type=1),f.datum_params.length>3&&(0!==f.datum_params[3]||0!==f.datum_params[4]||0!==f.datum_params[5]||0!==f.datum_params[6])&&(f.datum_type=2,f.datum_params[3]*=Z0,f.datum_params[4]*=Z0,f.datum_params[5]*=Z0,f.datum_params[6]=f.datum_params[6]/1e6+1)),d&&(f.datum_type=3,f.grids=d),f.a=t,f.b=r,f.es=i,f.ep2=a,f}(t.datumCode,t.datum_params,a.a,a.b,d.es,d.ep2,f);jL(this,t),jL(this,r),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=d.es,this.e=d.e,this.ep2=d.ep2,this.datum=_,"init"in this&&"function"==typeof this.init&&this.init(),n(null,this)}else n("Could not get projection name from: "+e)}else n("Could not parse to valid json: "+e)}(em.projections=gae).start();const tm=em;function qL(e,n,t){var d,f,S,r=e.x,i=e.y,a=e.z?e.z:0;if(i<-Qe&&i>-1.001*Qe)i=-Qe;else if(i>Qe&&i<1.001*Qe)i=Qe;else{if(i<-Qe)return{x:-1/0,y:-1/0,z:e.z};if(i>Qe)return{x:1/0,y:1/0,z:e.z}}return r>Math.PI&&(r-=2*Math.PI),f=Math.sin(i),S=Math.cos(i),{x:((d=t/Math.sqrt(1-n*(f*f)))+a)*S*Math.cos(r),y:(d+a)*S*Math.sin(r),z:(d*(1-n)+a)*f}}function WL(e,n,t,r){var f,_,S,M,k,F,L,G,Q,de,_e,we,Ue,Bt,Wn,dt=e.x,ut=e.y,Ht=e.z?e.z:0;if(f=Math.sqrt(dt*dt+ut*ut),_=Math.sqrt(dt*dt+ut*ut+Ht*Ht),f/t<1e-12){if(Bt=0,_/t<1e-12)return Wn=-r,{x:e.x,y:e.y,z:e.z}}else Bt=Math.atan2(ut,dt);S=Ht/_,G=(M=f/_)*(1-n)*(k=1/Math.sqrt(1-n*(2-n)*M*M)),Q=S*k,Ue=0;do{Ue++,F=n*(L=t/Math.sqrt(1-n*Q*Q))/(L+(Wn=f*G+Ht*Q-L*(1-n*Q*Q))),we=(_e=S*(k=1/Math.sqrt(1-F*(2-F)*M*M)))*G-(de=M*(1-F)*k)*Q,G=de,Q=_e}while(we*we>1e-24&&Ue<30);return{x:Bt,y:Math.atan(_e/Math.abs(de)),z:Wn}}function Q1(e){return 1===e||2===e}function ZL(e,n,t){if(null===e.grids||0===e.grids.length)return console.log("Grid shift grids not found"),-1;var r={x:-t.x,y:t.y},i={x:Number.NaN,y:Number.NaN},a=[];e:for(var d=0;d<e.grids.length;d++){var f=e.grids[d];if(a.push(f.name),f.isNull){i=r;break}if(null!==f.grid)for(var _=f.grid.subgrids,S=0,M=_.length;S<M;S++){var k=_[S],F=(Math.abs(k.del[1])+Math.abs(k.del[0]))/1e4;if(!(k.ll[1]-F>r.y||k.ll[0]-F>r.x||k.ll[1]+(k.lim[1]-1)*k.del[1]+F<r.y||k.ll[0]+(k.lim[0]-1)*k.del[0]+F<r.x||(i=zae(r,n,k),isNaN(i.x))))break e}else if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1}return isNaN(i.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Ou+" "+r.y*Ou+" tried: '"+a+"'"),-1):(t.x=-i.x,t.y=i.y,0)}function zae(e,n,t){var r={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return r;var i={x:e.x,y:e.y};i.x-=t.ll[0],i.y-=t.ll[1],i.x=xt(i.x-Math.PI)+Math.PI;var a=KL(i,t);if(n){if(isNaN(a.x))return r;a.x=i.x-a.x,a.y=i.y-a.y;var _,S,d=9;do{if(S=KL(a,t),isNaN(S.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a.x+=(_={x:i.x-(S.x+a.x),y:i.y-(S.y+a.y)}).x,a.y+=_.y}while(d--&&Math.abs(_.x)>1e-12&&Math.abs(_.y)>1e-12);if(d<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=xt(a.x+t.ll[0]),r.y=a.y+t.ll[1]}else isNaN(a.x)||(r.x=e.x+a.x,r.y=e.y+a.y);return r}function KL(e,n){var d,t={x:e.x/n.del[0],y:e.y/n.del[1]},r_x=Math.floor(t.x),r_y=Math.floor(t.y),i_x=t.x-1*r_x,i_y=t.y-1*r_y,a={x:Number.NaN,y:Number.NaN};if(r_x<0||r_x>=n.lim[0]||r_y<0||r_y>=n.lim[1])return a;var f_x=n.cvs[d=r_y*n.lim[0]+r_x][0],f_y=n.cvs[d][1];d++;var __x=n.cvs[d][0],__y=n.cvs[d][1],S_x=n.cvs[d+=n.lim[0]][0],S_y=n.cvs[d][1];d--;var M_y=n.cvs[d][1],k=i_x*i_y,F=i_x*(1-i_y),L=(1-i_x)*(1-i_y),G=(1-i_x)*i_y;return a.x=L*f_x+F*__x+G*n.cvs[d][0]+k*S_x,a.y=L*f_y+F*__y+G*M_y+k*S_y,a}function YL(e,n,t){var d,f,_,r=t.x,i=t.y,a=t.z||0,S={};for(_=0;_<3;_++)if(!n||2!==_||void 0!==t.z)switch(0===_?(d=r,f=-1!=="ew".indexOf(e.axis[_])?"x":"y"):1===_?(d=i,f=-1!=="ns".indexOf(e.axis[_])?"y":"x"):(d=a,f="z"),e.axis[_]){case"e":case"n":S[f]=d;break;case"w":case"s":S[f]=-d;break;case"u":void 0!==t[f]&&(S.z=d);break;case"d":void 0!==t[f]&&(S.z=-d);break;default:return null}return S}function XL(e){var n={x:e[0],y:e[1]};return e.length>2&&(n.z=e[2]),e.length>3&&(n.m=e[3]),n}function QL(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function J1(e,n,t,r){var i,a=void 0!==(t=Array.isArray(t)?XL(t):{x:t.x,y:t.y,z:t.z,m:t.m}).z;if(function jae(e){QL(e.x),QL(e.y)}(t),e.datum&&n.datum&&function Vae(e,n){return(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==n.datumCode||(1===n.datum.datum_type||2===n.datum.datum_type||3===n.datum.datum_type)&&"WGS84"!==e.datumCode}(e,n)&&(t=J1(e,i=new tm("WGS84"),t,r),e=i),r&&"enu"!==e.axis&&(t=YL(e,!1,t)),"longlat"===e.projName)t={x:t.x*jo,y:t.y*jo,z:t.z||0};else if(e.to_meter&&(t={x:t.x*e.to_meter,y:t.y*e.to_meter,z:t.z||0}),!(t=e.inverse(t)))return;if(e.from_greenwich&&(t.x+=e.from_greenwich),t=function Bae(e,n,t){if(function Lae(e,n){return!(e.datum_type!==n.datum_type||e.a!==n.a||Math.abs(e.es-n.es)>5e-11)&&(1===e.datum_type?e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]:2!==e.datum_type||e.datum_params[0]===n.datum_params[0]&&e.datum_params[1]===n.datum_params[1]&&e.datum_params[2]===n.datum_params[2]&&e.datum_params[3]===n.datum_params[3]&&e.datum_params[4]===n.datum_params[4]&&e.datum_params[5]===n.datum_params[5]&&e.datum_params[6]===n.datum_params[6])}(e,n)||5===e.datum_type||5===n.datum_type)return t;var r=e.a,i=e.es;if(3===e.datum_type){if(0!==ZL(e,!1,t))return;r=6378137,i=ML}var d=n.a,f=n.b,_=n.es;return 3===n.datum_type&&(d=6378137,f=6356752.314,_=ML),i!==_||r!==d||Q1(e.datum_type)||Q1(n.datum_type)?(t=qL(t,i,r),Q1(e.datum_type)&&(t=function Oae(e,n,t){if(1===n)return{x:e.x+t[0],y:e.y+t[1],z:e.z+t[2]};if(2===n){var d=t[3],f=t[4],_=t[5],S=t[6];return{x:S*(e.x-_*e.y+f*e.z)+t[0],y:S*(_*e.x+e.y-d*e.z)+t[1],z:S*(-f*e.x+d*e.y+e.z)+t[2]}}}(t,e.datum_type,e.datum_params)),Q1(n.datum_type)&&(t=function Fae(e,n,t){if(1===n)return{x:e.x-t[0],y:e.y-t[1],z:e.z-t[2]};if(2===n){var d=t[3],f=t[4],_=t[5],S=t[6],M=(e.x-t[0])/S,k=(e.y-t[1])/S,F=(e.z-t[2])/S;return{x:M+_*k-f*F,y:-_*M+k+d*F,z:f*M-d*k+F}}}(t,n.datum_type,n.datum_params)),t=WL(t,_,d,f),3!==n.datum_type||0===ZL(n,!0,t)?t:void 0):t}(e.datum,n.datum,t))return n.from_greenwich&&(t={x:t.x-n.from_greenwich,y:t.y,z:t.z||0}),"longlat"===n.projName?t={x:t.x*Ou,y:t.y*Ou,z:t.z||0}:(t=n.forward(t),n.to_meter&&(t={x:t.x/n.to_meter,y:t.y/n.to_meter,z:t.z||0})),r&&"enu"!==n.axis?YL(n,!0,t):(t&&!a&&delete t.z,t)}var JL=tm("WGS84");function TT(e,n,t,r){var i,a,d;return Array.isArray(t)?(i=J1(e,n,t,r)||{x:NaN,y:NaN},t.length>2?typeof e.name<"u"&&"geocent"===e.name||typeof n.name<"u"&&"geocent"===n.name?"number"==typeof i.z?[i.x,i.y,i.z].concat(t.slice(3)):[i.x,i.y,t[2]].concat(t.slice(3)):[i.x,i.y].concat(t.slice(2)):[i.x,i.y]):(a=J1(e,n,t,r),2===(d=Object.keys(t)).length||d.forEach(function(f){if(typeof e.name<"u"&&"geocent"===e.name||typeof n.name<"u"&&"geocent"===n.name){if("x"===f||"y"===f||"z"===f)return}else if("x"===f||"y"===f)return;a[f]=t[f]}),a)}function ex(e){return e instanceof tm?e:"object"==typeof e&&"oProj"in e?e.oProj:tm(e)}const Gae={forward:rO,inverse:function Hae(e){var n=MT(aO(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat,n.lon,n.lat]:[n.left,n.bottom,n.right,n.top]},toPoint:iO};function rO(e,n){return n=n||5,function Zae(e,n){var t="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+function Kae(e,n,t){var r=sO(t);return function Yae(e,n,t){var r=t-1,i="AJSAJS".charCodeAt(r),a="AFAFAF".charCodeAt(r),d=i+e-1,f=a+n,_=!1;return d>90&&(d=d-90+65-1,_=!0),(73===d||i<73&&d>73||(d>73||i<73)&&_)&&d++,(79===d||i<79&&d>79||(d>79||i<79)&&_)&&73===++d&&d++,d>90&&(d=d-90+65-1),f>86?(f=f-86+65-1,_=!0):_=!1,(73===f||a<73&&f>73||(f>73||a<73)&&_)&&f++,(79===f||a<79&&f>79||(f>79||a<79)&&_)&&73===++f&&f++,f>86&&(f=f-86+65-1),String.fromCharCode(d)+String.fromCharCode(f)}(Math.floor(e/1e5),Math.floor(n/1e5)%20,r)}(e.easting,e.northing,e.zoneNumber)+t.substr(t.length-5,n)+r.substr(r.length-5,n)}(function qae(e){var f,_,S,M,k,Q,de,n=e.lat,t=e.lon,r=6378137,i=.00669438,a=.9996,L=IT(n),G=IT(t);de=Math.floor((t+180)/6)+1,180===t&&(de=60),n>=56&&n<64&&t>=3&&t<12&&(de=32),n>=72&&n<84&&(t>=0&&t<9?de=31:t>=9&&t<21?de=33:t>=21&&t<33?de=35:t>=33&&t<42&&(de=37)),Q=IT(6*(de-1)-180+3),f=i/(1-i),_=r/Math.sqrt(1-i*Math.sin(L)*Math.sin(L)),S=Math.tan(L)*Math.tan(L),M=f*Math.cos(L)*Math.cos(L);var _e=a*_*((k=Math.cos(L)*(G-Q))+(1-S+M)*k*k*k/6+(5-18*S+S*S+72*M-58*f)*k*k*k*k*k/120)+5e5,we=a*(r*(.9983242984503243*L-.002514607064228144*Math.sin(2*L)+2639046602129982e-21*Math.sin(4*L)-35*i*i*i/3072*Math.sin(6*L))+_*Math.tan(L)*(k*k/2+(5-S+9*M+4*M*M)*k*k*k*k/24+(61-58*S+S*S+600*M-330*f)*k*k*k*k*k*k/720));return n<0&&(we+=1e7),{northing:Math.round(we),easting:Math.round(_e),zoneNumber:de,zoneLetter:Wae(n)}}({lat:e[1],lon:e[0]}),n)}function iO(e){var n=MT(aO(e.toUpperCase()));return n.lat&&n.lon?[n.lon,n.lat]:[(n.left+n.right)/2,(n.top+n.bottom)/2]}function IT(e){return e*(Math.PI/180)}function oO(e){return e/Math.PI*180}function MT(e){var n=e.northing,t=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var _,M,k,F,L,G,de,_e,we,a=.9996,d=6378137,f=.00669438,S=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),Ue=t-5e5,dt=n;r<"N"&&(dt-=1e7),de=6*(i-1)-180+3,_=f/(1-f),we=(_e=dt/a/6367449.145945056)+(3*S/2-27*S*S*S/32)*Math.sin(2*_e)+(21*S*S/16-55*S*S*S*S/32)*Math.sin(4*_e)+151*S*S*S/96*Math.sin(6*_e),M=d/Math.sqrt(1-f*Math.sin(we)*Math.sin(we)),k=Math.tan(we)*Math.tan(we),F=_*Math.cos(we)*Math.cos(we),L=d*(1-f)/Math.pow(1-f*Math.sin(we)*Math.sin(we),1.5),G=Ue/(M*a);var ut=we-M*Math.tan(we)/L*(G*G/2-(5+3*k+10*F-4*F*F-9*_)*G*G*G*G/24+(61+90*k+298*F+45*k*k-252*_-3*F*F)*G*G*G*G*G*G/720);ut=oO(ut);var Bt,Ht=(G-(1+2*k+F)*G*G*G/6+(5-2*F+28*k-3*F*F+8*_+24*k*k)*G*G*G*G*G/120)/Math.cos(we);if(Ht=de+oO(Ht),e.accuracy){var Sn=MT({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});Bt={top:Sn.lat,right:Sn.lon,bottom:ut,left:Ht}}else Bt={lat:ut,lon:Ht};return Bt}function Wae(e){var n="Z";return 84>=e&&e>=72?n="X":72>e&&e>=64?n="W":64>e&&e>=56?n="V":56>e&&e>=48?n="U":48>e&&e>=40?n="T":40>e&&e>=32?n="S":32>e&&e>=24?n="R":24>e&&e>=16?n="Q":16>e&&e>=8?n="P":8>e&&e>=0?n="N":0>e&&e>=-8?n="M":-8>e&&e>=-16?n="L":-16>e&&e>=-24?n="K":-24>e&&e>=-32?n="J":-32>e&&e>=-40?n="H":-40>e&&e>=-48?n="G":-48>e&&e>=-56?n="F":-56>e&&e>=-64?n="E":-64>e&&e>=-72?n="D":-72>e&&e>=-80&&(n="C"),n}function sO(e){var n=e%6;return 0===n&&(n=6),n}function aO(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var i,n=e.length,t=null,r="",a=0;!/[A-Z]/.test(i=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;r+=i,a++}var d=parseInt(r,10);if(0===a||a+3>n)throw"MGRSPoint bad conversion from: "+e;var f=e.charAt(a++);if(f<="A"||"B"===f||"Y"===f||f>="Z"||"I"===f||"O"===f)throw"MGRSPoint zone letter "+f+" not handled: "+e;t=e.substring(a,a+=2);for(var _=sO(d),S=function Xae(e,n){for(var t="AJSAJS".charCodeAt(n-1),r=1e5,i=!1;t!==e.charCodeAt(0);){if(73===++t&&t++,79===t&&t++,t>90){if(i)throw"Bad character: "+e;t=65,i=!0}r+=1e5}return r}(t.charAt(0),_),M=function Qae(e,n){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var t="AFAFAF".charCodeAt(n-1),r=0,i=!1;t!==e.charCodeAt(0);){if(73===++t&&t++,79===t&&t++,t>86){if(i)throw"Bad character: "+e;t=65,i=!0}r+=1e5}return r}(t.charAt(1),_);M<Jae(f);)M+=2e6;var k=n-a;if(k%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var Q,de,_e,F=k/2,L=0,G=0;return F>0&&(Q=1e5/Math.pow(10,F),de=e.substring(a,a+F),L=parseFloat(de)*Q,_e=e.substring(a+F),G=parseFloat(_e)*Q),{easting:L+S,northing:G+M,zoneLetter:f,zoneNumber:d,accuracy:Q}}function Jae(e){var n;switch(e){case"C":n=11e5;break;case"D":n=2e6;break;case"E":n=28e5;break;case"F":n=37e5;break;case"G":n=46e5;break;case"H":n=55e5;break;case"J":n=64e5;break;case"K":n=73e5;break;case"L":n=82e5;break;case"M":n=91e5;break;case"N":n=0;break;case"P":n=8e5;break;case"Q":n=17e5;break;case"R":n=26e5;break;case"S":n=35e5;break;case"T":n=44e5;break;case"U":n=53e5;break;case"V":n=62e5;break;case"W":n=7e6;break;case"X":n=79e5;break;default:n=-1}if(n>=0)return n;throw"Invalid zone letter: "+e}function rm(e,n,t){if(!(this instanceof rm))return new rm(e,n,t);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"==typeof e)this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&typeof n>"u"){var r=e.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=e,this.y=n,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}rm.fromMGRS=function(e){return new rm(iO(e))},rm.prototype.toMGRS=function(e){return rO([this.x,this.y],e)};const ele=rm;var cO=.01953125,uO=.01068115234375;function DT(e){var n=[];n[0]=1-e*(.25+e*(.046875+e*(cO+e*uO))),n[1]=e*(.75-e*(.046875+e*(cO+e*uO)));var t=e*e;return n[2]=t*(.46875-e*(.013020833333333334+.007120768229166667*e)),n[3]=(t*=e)*(.3645833333333333-.005696614583333333*e),n[4]=t*e*.3076171875,n}function im(e,n,t,r){return r[0]*e-(t*=n)*(r[1]+(n*=n)*(r[2]+n*(r[3]+n*r[4])))}function kT(e,n,t){for(var r=1/(1-n),i=e,a=20;a;--a){var d=Math.sin(i),f=1-n*d*d;if(i-=f=(im(i,d,Math.cos(i),t)-e)*(f*Math.sqrt(f))*r,Math.abs(f)<ft)return i}return i}const tx={init:function dle(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=DT(this.es),this.ml0=im(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function hle(e){var i,a,d,t=e.y,r=xt(e.x-this.long0),f=Math.sin(t),_=Math.cos(t);if(this.es){var M=_*r,k=Math.pow(M,2),F=this.ep2*Math.pow(_,2),L=Math.pow(F,2),G=Math.abs(_)>ft?Math.tan(t):0,Q=Math.pow(G,2),de=Math.pow(Q,2);i=1-this.es*Math.pow(f,2),M/=Math.sqrt(i);var _e=im(t,f,_,this.en);a=this.a*(this.k0*M*(1+k/6*(1-Q+F+k/20*(5-18*Q+de+14*F-58*Q*F+k/42*(61+179*de-de*Q-479*Q)))))+this.x0,d=this.a*(this.k0*(_e-this.ml0+f*r*M/2*(1+k/12*(5-Q+9*F+4*L+k/30*(61+de-58*Q+270*F-330*Q*F+k/56*(1385+543*de-de*Q-3111*Q))))))+this.y0}else{var S=_*Math.sin(r);if(Math.abs(Math.abs(S)-1)<ft)return 93;if(a=.5*this.a*this.k0*Math.log((1+S)/(1-S))+this.x0,d=_*Math.cos(r)/Math.sqrt(1-Math.pow(S,2)),(S=Math.abs(d))>=1){if(S-1>ft)return 93;d=0}else d=Math.acos(d);t<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return e.x=a,e.y=d,e},inverse:function fle(e){var n,t,r,i,a=1/this.a*(e.x-this.x0),d=1/this.a*(e.y-this.y0);if(this.es)if(t=kT(n=this.ml0+d/this.k0,this.es,this.en),Math.abs(t)<Qe){var k=Math.sin(t),F=Math.cos(t),L=Math.abs(F)>ft?Math.tan(t):0,G=this.ep2*Math.pow(F,2),Q=Math.pow(G,2),de=Math.pow(L,2),_e=Math.pow(de,2);n=1-this.es*Math.pow(k,2);var we=a*Math.sqrt(n)/this.k0,Ue=Math.pow(we,2);r=t-(n*=L)*Ue/(1-this.es)*.5*(1-Ue/12*(5+3*de-9*G*de+G-4*Q-Ue/30*(61+90*de-252*G*de+45*_e+46*G-Ue/56*(1385+3633*de+4095*_e+1574*_e*de)))),i=xt(this.long0+we*(1-Ue/6*(1+2*de+G-Ue/20*(5+28*de+24*_e+8*G*de+6*G-Ue/42*(61+662*de+1320*_e+720*_e*de))))/F)}else r=Qe*X0(d),i=0;else{var f=Math.exp(a/this.k0),_=.5*(f-1/f),M=Math.cos(this.lat0+d/this.k0);n=Math.sqrt((1-Math.pow(M,2))/(1+Math.pow(_,2))),r=Math.asin(n),d<0&&(r=-r),i=0===_&&0===M?0:xt(Math.atan2(_,M)+this.long0)}return e.x=i,e.y=r,e},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function dO(e){var n=Math.exp(e);return(n-1/n)/2}function pa(e,n){e=Math.abs(e),n=Math.abs(n);var t=Math.max(e,n),r=Math.min(e,n)/(t||1);return t*Math.sqrt(1+Math.pow(r,2))}function PT(e,n){for(var d,t=2*Math.cos(2*n),r=e.length-1,i=e[r],a=0;--r>=0;)d=t*i-a+e[r],a=i,i=d;return n+d*Math.sin(2*n)}function hO(e,n,t){for(var G,Q,r=Math.sin(n),i=Math.cos(n),a=dO(t),d=function yle(e){var n=Math.exp(e);return(n+1/n)/2}(t),f=2*i*d,_=-2*r*a,S=e.length-1,M=e[S],k=0,F=0,L=0;--S>=0;)G=F,Q=k,M=f*(F=M)-G-_*(k=L)+e[S],L=_*F-Q+f*k;return[(f=r*d)*M-(_=i*a)*L,f*L+_*M]}const nx={init:function vle(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tx.init.apply(this),this.forward=tx.forward,this.inverse=tx.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),n=e/(2-e),t=n;this.cgb[0]=n*(2+n*(-2/3+n*(n*(116/45+n*(26/45+n*(-2854/675)))-2))),this.cbg[0]=n*(n*(2/3+n*(4/3+n*(-82/45+n*(32/45+n*(4642/4725)))))-2),this.cgb[1]=(t*=n)*(7/3+n*(n*(-227/45+n*(2704/315+n*(2323/945)))-1.6)),this.cbg[1]=t*(5/3+n*(-16/15+n*(-13/9+n*(904/315+n*(-1522/945))))),this.cgb[2]=(t*=n)*(56/15+n*(-136/35+n*(-1262/105+n*(73814/2835)))),this.cbg[2]=t*(-26/15+n*(34/21+n*(1.6+n*(-12686/2835)))),this.cgb[3]=(t*=n)*(4279/630+n*(-332/35+n*(-399572/14175))),this.cbg[3]=t*(1237/630+n*(n*(-24832/14175)-2.4)),this.cgb[4]=(t*=n)*(4174/315+n*(-144838/6237)),this.cbg[4]=t*(-734/315+n*(109598/31185)),this.cgb[5]=(t*=n)*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(n,2),this.Qn=this.k0/(1+n)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=n*(n*(2/3+n*(-37/96+n*(1/360+n*(81/512+n*(-96199/604800)))))-.5),this.gtu[0]=n*(.5+n*(-2/3+n*(5/16+n*(41/180+n*(-127/288+n*(7891/37800)))))),this.utg[1]=t*(-1/48+n*(-1/15+n*(437/1440+n*(-46/105+n*(1118711/3870720))))),this.gtu[1]=t*(13/48+n*(n*(557/1440+n*(281/630+n*(-1983433/1935360)))-.6)),this.utg[2]=(t*=n)*(-17/480+n*(37/840+n*(209/4480+n*(-5569/90720)))),this.gtu[2]=t*(61/240+n*(-103/140+n*(15061/26880+n*(167603/181440)))),this.utg[3]=(t*=n)*(-4397/161280+n*(11/504+n*(830251/7257600))),this.gtu[3]=t*(49561/161280+n*(-179/168+n*(6601661/7257600))),this.utg[4]=(t*=n)*(-4583/161280+n*(108847/3991680)),this.gtu[4]=t*(34729/80640+n*(-3418889/1995840)),this.utg[5]=(t*=n)*(-20648693/638668800),this.gtu[5]=.6650675310896665*t;var r=PT(this.cbg,this.lat0);this.Zb=-this.Qn*(r+function _le(e,n){for(var d,t=2*Math.cos(n),r=e.length-1,i=e[r],a=0;--r>=0;)d=t*i-a+e[r],a=i,i=d;return Math.sin(n)*d}(this.gtu,2*r))},forward:function ble(e){var n=xt(e.x-this.long0),t=e.y;t=PT(this.cbg,t);var r=Math.sin(t),i=Math.cos(t),a=Math.sin(n),d=Math.cos(n);t=Math.atan2(r,d*i),n=Math.atan2(a*i,pa(r,i*d)),n=function mle(e){var n=Math.abs(e);return n=function gle(e){var n=1+e,t=n-1;return 0===t?e:e*Math.log(n)/t}(n*(1+n/(pa(1,n)+1))),e<0?-n:n}(Math.tan(n));var _,S,f=hO(this.gtu,2*t,2*n);return t+=f[0],n+=f[1],Math.abs(n)<=2.623395162778?(_=this.a*(this.Qn*n)+this.x0,S=this.a*(this.Qn*t+this.Zb)+this.y0):(_=1/0,S=1/0),e.x=_,e.y=S,e},inverse:function xle(e){var r,i,n=1/this.a*(e.x-this.x0),t=1/this.a*(e.y-this.y0);if(t=(t-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var a=hO(this.utg,2*t,2*n);t+=a[0],n+=a[1],n=Math.atan(dO(n));var d=Math.sin(t),f=Math.cos(t),_=Math.sin(n),S=Math.cos(n);t=Math.atan2(d*S,pa(_,S*f)),r=xt((n=Math.atan2(_,S*f))+this.long0),i=PT(this.cgb,t)}else r=1/0,i=1/0;return e.x=r,e.y=i,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]},Ile={init:function Cle(){var e=function Sle(e,n){if(void 0===e){if((e=Math.floor(30*(xt(n)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e}(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*jo,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,nx.init.apply(this),this.forward=nx.forward,this.inverse=nx.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function AT(e,n){return Math.pow((1-e)/(1+e),n)}const RT={init:function Dle(){var e=Math.sin(this.lat0),n=Math.cos(this.lat0);n*=n,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*n*n/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Jn)/(Math.pow(Math.tan(.5*this.lat0+Jn),this.C)*AT(this.e*e,this.ratexp))},forward:function kle(e){var n=e.x,t=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Jn),this.C)*AT(this.e*Math.sin(t),this.ratexp))-Qe,e.x=this.C*n,e},inverse:function Ple(e){for(var t=e.x/this.C,r=e.y,i=Math.pow(Math.tan(.5*r+Jn)/this.K,1/this.C),a=20;a>0&&(r=2*Math.atan(i*AT(this.e*Math.sin(e.y),-.5*this.e))-Qe,!(Math.abs(r-e.y)<1e-14));--a)e.y=r;return a?(e.x=t,e.y=r,e):null},names:["gauss"]},Fle={init:function Rle(){RT.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function Nle(e){var n,t,r,i;return e.x=xt(e.x-this.long0),RT.forward.apply(this,[e]),n=Math.sin(e.y),t=Math.cos(e.y),r=Math.cos(e.x),e.x=(i=this.k0*this.R2/(1+this.sinc0*n+this.cosc0*t*r))*t*Math.sin(e.x),e.y=i*(this.cosc0*n-this.sinc0*t*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function Lle(e){var n,t,r,i,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=pa(e.x,e.y)){var d=2*Math.atan2(a,this.R2);n=Math.sin(d),t=Math.cos(d),i=Math.asin(t*this.sinc0+e.y*n*this.cosc0/a),r=Math.atan2(e.x*n,a*this.cosc0*t-e.y*this.sinc0*n)}else i=this.phic0,r=0;return e.x=r,e.y=i,RT.inverse.apply(this,[e]),e.x=xt(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function NT(e,n,t){return n*=t,Math.tan(.5*(Qe+e))*Math.pow((1-n)/(1+n),.5*t)}const Ule={init:function Ble(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ft&&(this.k0=.5*(1+X0(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ft&&(this.con=this.lat0>0?1:-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ft&&Math.abs(Math.cos(this.lat_ts))>ft&&(this.k0=.5*this.cons*Fu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ic(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Fu(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(NT(this.lat0,this.sinlat0,this.e))-Qe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function zle(e){var a,d,f,_,S,M,n=e.x,t=e.y,r=Math.sin(t),i=Math.cos(t),k=xt(n-this.long0);return Math.abs(Math.abs(n-this.long0)-Math.PI)<=ft&&Math.abs(t+this.lat0)<=ft?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*r+this.coslat0*i*Math.cos(k)),e.x=this.a*a*i*Math.sin(k)+this.x0,e.y=this.a*a*(this.coslat0*r-this.sinlat0*i*Math.cos(k))+this.y0,e):(d=2*Math.atan(NT(t,r,this.e))-Qe,_=Math.cos(d),f=Math.sin(d),Math.abs(this.coslat0)<=ft?(S=Ic(this.e,t*this.con,this.con*r),e.x=this.x0+(M=2*this.a*this.k0*S/this.cons)*Math.sin(n-this.long0),e.y=this.y0-this.con*M*Math.cos(n-this.long0),e):(Math.abs(this.sinlat0)<ft?(a=2*this.a*this.k0/(1+_*Math.cos(k)),e.y=a*f):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*_*Math.cos(k))),e.y=a*(this.cosX0*f-this.sinX0*_*Math.cos(k))+this.y0),e.x=a*_*Math.sin(k)+this.x0,e))},inverse:function jle(e){e.x-=this.x0,e.y-=this.y0;var n,t,i,a,d=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var f=2*Math.atan(d/(2*this.a*this.k0));return n=this.long0,t=this.lat0,d<=ft?(e.x=n,e.y=t,e):(t=Math.asin(Math.cos(f)*this.sinlat0+e.y*Math.sin(f)*this.coslat0/d),n=Math.abs(this.coslat0)<ft?xt(this.lat0>0?this.long0+Math.atan2(e.x,-1*e.y):this.long0+Math.atan2(e.x,e.y)):xt(this.long0+Math.atan2(e.x*Math.sin(f),d*this.coslat0*Math.cos(f)-e.y*this.sinlat0*Math.sin(f))),e.x=n,e.y=t,e)}if(Math.abs(this.coslat0)<=ft){if(d<=ft)return t=this.lat0,e.x=n=this.long0,e.y=t,e;e.x*=this.con,e.y*=this.con,t=this.con*Q0(this.e,d*this.cons/(2*this.a*this.k0)),n=this.con*xt(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(d*this.cosX0/(2*this.a*this.k0*this.ms1)),n=this.long0,d<=ft?a=this.X0:(a=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/d),n=xt(this.long0+Math.atan2(e.x*Math.sin(i),d*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),t=-1*Q0(this.e,Math.tan(.5*(Qe+a)));return e.x=n,e.y=t,e},names:["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"],ssfn_:NT},Wle={init:function $le(){var e=this.lat0;this.lambda0=this.long0;var n=Math.sin(e),t=this.a,i=1/this.rf,a=2*i-Math.pow(i,2),d=this.e=Math.sqrt(a);this.R=this.k0*t*Math.sqrt(1-a)/(1-a*Math.pow(n,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(n/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),_=Math.log(Math.tan(Math.PI/4+e/2)),S=Math.log((1+d*n)/(1-d*n));this.K=f-this.alpha*_+this.alpha*d/2*S},forward:function Gle(e){var n=Math.log(Math.tan(Math.PI/4-e.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=2*(Math.atan(Math.exp(-this.alpha*(n+t)+this.K))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),d=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(a))),f=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,e.x=this.R*d+this.x0,e},inverse:function Hle(e){for(var r=(e.x-this.x0)/this.R,i=2*(Math.atan(Math.exp((e.y-this.y0)/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),d=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),f=this.lambda0+d/this.alpha,_=0,S=a,M=-1e3,k=0;Math.abs(S-M)>1e-7;){if(++k>20)return;_=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(S))/2)),M=S,S=2*Math.atan(Math.exp(_))-Math.PI/2}return e.x=f,e.y=S,e},names:["somerc"]};var om=1e-7;const Jle={init:function Kle(){var e,n,t,r,i,a,d,f,_,S,k,M=0,F=0,L=0,G=0,Q=0,de=0,_e=0;this.no_off=function Zle(e){var n=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t="object"==typeof e.projName?Object.keys(e.projName)[0]:e.projName;return"no_uoff"in e||"no_off"in e||-1!==n.indexOf(t)||-1!==n.indexOf($L(t))}(this),this.no_rot="no_rot"in this;var we=!1;"alpha"in this&&(we=!0);var Ue=!1;if("rectified_grid_angle"in this&&(Ue=!0),we&&(_e=this.alpha),Ue&&(M=this.rectified_grid_angle),we||Ue)F=this.longc;else if(L=this.long1,Q=this.lat1,G=this.long2,de=this.lat2,Math.abs(Q-de)<=om||(e=Math.abs(Q))<=om||Math.abs(e-Qe)<=om||Math.abs(Math.abs(this.lat0)-Qe)<=om||Math.abs(Math.abs(de)-Qe)<=om)throw new Error;var dt=1-this.es;n=Math.sqrt(dt),Math.abs(this.lat0)>ft?(f=Math.sin(this.lat0),t=Math.cos(this.lat0),e=1-this.es*f*f,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/dt),this.A=this.B*this.k0*n/e,(i=(r=this.B*n/(t*Math.sqrt(e)))*r-1)<=0?i=0:(i=Math.sqrt(i),this.lat0<0&&(i=-i)),this.E=i+=r,this.E*=Math.pow(Ic(this.e,this.lat0,f),this.B)):(this.B=1/n,this.A=this.k0,this.E=r=i=1),we||Ue?(we?(k=Math.asin(Math.sin(_e)/r),Ue||(M=_e)):(k=M,_e=Math.asin(r*Math.sin(k))),this.lam0=F-Math.asin(.5*(i-1/i)*Math.tan(k))/this.B):(a=Math.pow(Ic(this.e,Q,Math.sin(Q)),this.B),d=Math.pow(Ic(this.e,de,Math.sin(de)),this.B),i=this.E/a,_=(d-a)/(d+a),S=((S=this.E*this.E)-d*a)/(S+d*a),(e=L-G)<-Math.PI?G-=K0:e>Math.PI&&(G+=K0),this.lam0=xt(.5*(L+G)-Math.atan(S*Math.tan(.5*this.B*(L-G))/_)/this.B),k=Math.atan(2*Math.sin(this.B*xt(L-this.lam0))/(i-1/i)),M=_e=Math.asin(r*Math.sin(k))),this.singam=Math.sin(k),this.cosgam=Math.cos(k),this.sinrot=Math.sin(M),this.cosrot=Math.cos(M),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(_e))),this.lat0<0&&(this.u_0=-this.u_0)),i=.5*k,this.v_pole_n=this.ArB*Math.log(Math.tan(Jn-i)),this.v_pole_s=this.ArB*Math.log(Math.tan(Jn+i))},forward:function Yle(e){var t,r,i,a,d,f,_,S,n={};if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Qe)>ft){if(t=.5*((d=this.E/Math.pow(Ic(this.e,e.y,Math.sin(e.y)),this.B))-(f=1/d)),r=.5*(d+f),a=Math.sin(this.B*e.x),i=(t*this.singam-a*this.cosgam)/r,Math.abs(Math.abs(i)-1)<ft)throw new Error;S=.5*this.ArB*Math.log((1-i)/(1+i)),f=Math.cos(this.B*e.x),_=Math.abs(f)<om?this.A*e.x:this.ArB*Math.atan2(t*this.cosgam+a*this.singam,f)}else S=e.y>0?this.v_pole_n:this.v_pole_s,_=this.ArB*e.y;return this.no_rot?(n.x=_,n.y=S):(n.x=S*this.cosrot+(_-=this.u_0)*this.sinrot,n.y=_*this.cosrot-S*this.sinrot),n.x=this.a*n.x+this.x0,n.y=this.a*n.y+this.y0,n},inverse:function Xle(e){var n,t,r,i,a,d,f,_={};if(e.x=1/this.a*(e.x-this.x0),e.y=1/this.a*(e.y-this.y0),this.no_rot?(t=e.y,n=e.x):(t=e.x*this.cosrot-e.y*this.sinrot,n=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=.5*((r=Math.exp(-this.BrA*t))-1/r),a=.5*(r+1/r),f=((d=Math.sin(this.BrA*n))*this.cosgam+i*this.singam)/a,Math.abs(Math.abs(f)-1)<ft)_.x=0,_.y=f<0?-Qe:Qe;else{if(_.y=this.E/Math.sqrt((1+f)/(1-f)),_.y=Q0(this.e,Math.pow(_.y,1/this.B)),_.y===1/0)throw new Error;_.x=-this.rB*Math.atan2(i*this.cosgam-d*this.singam,Math.cos(this.BrA*n))}return _.x+=this.lam0,_},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]},ice={init:function ece(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ft)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var n=Math.sin(this.lat1),t=Math.cos(this.lat1),r=Fu(this.e,n,t),i=Ic(this.e,this.lat1,n),a=Math.sin(this.lat2),d=Math.cos(this.lat2),f=Fu(this.e,a,d),_=Ic(this.e,this.lat2,a),S=Math.abs(Math.abs(this.lat0)-Qe)<ft?0:Ic(this.e,this.lat0,Math.sin(this.lat0));this.ns=Math.abs(this.lat1-this.lat2)>ft?Math.log(r/f)/Math.log(i/_):n,isNaN(this.ns)&&(this.ns=n),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(S,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function tce(e){var n=e.x,t=e.y;Math.abs(2*Math.abs(t)-Math.PI)<=ft&&(t=X0(t)*(Qe-2*ft));var i,a,r=Math.abs(Math.abs(t)-Qe);if(r>ft)i=Ic(this.e,t,Math.sin(t)),a=this.a*this.f0*Math.pow(i,this.ns);else{if((r=t*this.ns)<=0)return null;a=0}var d=this.ns*xt(n-this.long0);return e.x=this.k0*(a*Math.sin(d))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(d))+this.y0,e},inverse:function nce(e){var n,t,r,i,a,d=(e.x-this.x0)/this.k0,f=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(n=Math.sqrt(d*d+f*f),t=1):(n=-Math.sqrt(d*d+f*f),t=-1);var _=0;if(0!==n&&(_=Math.atan2(t*d,t*f)),0!==n||this.ns>0){if(t=1/this.ns,r=Math.pow(n/(this.a*this.f0),t),-9999===(i=Q0(this.e,r)))return null}else i=-Qe;return a=xt(_/this.ns+this.long0),e.x=a,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]},cce={init:function oce(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function sce(e){var n,t,r,i,a,d,f,S=e.y,M=xt(e.x-this.long0);return n=Math.pow((1+this.e*Math.sin(S))/(1-this.e*Math.sin(S)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(S/2+this.s45),this.alfa)/n)-this.s45),r=-M*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(r)),a=Math.asin(Math.cos(t)*Math.sin(r)/Math.cos(i)),d=this.n*a,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=f*Math.cos(d)/1,e.x=f*Math.sin(d)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function ace(e){var n,t,r,i,d,f,_,S=e.x;e.x=e.y,e.y=S,this.czech||(e.y*=-1,e.x*=-1),d=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/d,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),n=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),t=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(n)),e.x=this.long0-t/this.alfa,f=n,_=0;var M=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(n/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-e.y)<1e-10&&(_=1),f=e.y,M+=1}while(0===_&&M<15);return M>=15?null:e},names:["Krovak","krovak"]};function As(e,n,t,r,i){return e*i-n*Math.sin(2*i)+t*Math.sin(4*i)-r*Math.sin(6*i)}function ty(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function ny(e){return.375*e*(1+.25*e*(1+.46875*e))}function ry(e){return.05859375*e*e*(1+.75*e)}function iy(e){return e*e*e*(35/3072)}function LT(e,n,t){var r=n*t;return e/Math.sqrt(1-r*r)}function Xh(e){return Math.abs(e)<Qe?e:e-X0(e)*Math.PI}function rx(e,n,t,r,i){var a,d;a=e/n;for(var f=0;f<15;f++)if(a+=d=(e-(n*a-t*Math.sin(2*a)+r*Math.sin(4*a)-i*Math.sin(6*a)))/(n-2*t*Math.cos(2*a)+4*r*Math.cos(4*a)-6*i*Math.cos(6*a)),Math.abs(d)<=1e-10)return a;return NaN}const pce={init:function uce(){this.sphere||(this.e0=ty(this.es),this.e1=ny(this.es),this.e2=ry(this.es),this.e3=iy(this.es),this.ml0=this.a*As(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function dce(e){var n,t,r=e.x,i=e.y;if(r=xt(r-this.long0),this.sphere)n=this.a*Math.asin(Math.cos(i)*Math.sin(r)),t=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var a=Math.sin(i),d=Math.cos(i),f=LT(this.a,this.e,a),_=Math.tan(i)*Math.tan(i),S=r*Math.cos(i),M=S*S,k=this.es*d*d/(1-this.es);n=f*S*(1-M*_*(1/6-(8-_+8*k)*M/120)),t=this.a*As(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+f*a/d*M*(.5+(5-_+6*k)*M/24)}return e.x=n+this.x0,e.y=t+this.y0,e},inverse:function hce(e){e.x-=this.x0,e.y-=this.y0;var r,i,n=e.x/this.a,t=e.y/this.a;if(this.sphere){var a=t+this.lat0;r=Math.asin(Math.sin(a)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(a))}else{var f=rx(this.ml0/this.a+t,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-Qe)<=ft)return e.x=this.long0,e.y=Qe,t<0&&(e.y*=-1),e;var _=LT(this.a,this.e,Math.sin(f)),S=_*_*_/this.a/this.a*(1-this.es),M=Math.pow(Math.tan(f),2),k=n*this.a/_,F=k*k;r=f-_*Math.tan(f)/S*k*k*(.5-(1+3*M)*k*k/24),i=k*(1-F*(M/3+(1+3*M)*M*F/15))/Math.cos(f)}return e.x=xt(i+this.long0),e.y=Xh(r),e},names:["Cassini","Cassini_Soldner","cass"]};function Qh(e,n){var t;return e>1e-7?(1-e*e)*(n/(1-(t=e*n)*t)-.5/e*Math.log((1-t)/(1+t))):2*n}const Ice={init:function gce(){var n,e=Math.abs(this.lat0);if(this.mode=Math.abs(e-Qe)<ft?this.lat0<0?1:2:Math.abs(e)<ft?3:4,this.es>0)switch(this.qp=Qh(this.e,1),this.mmf=.5/(1-this.es),this.apa=function Ece(e){var n,t=[];return t[0]=.3333333333333333*e,t[0]+=.17222222222222222*(n=e*e),t[1]=.06388888888888888*n,t[0]+=.10257936507936508*(n*=e),t[1]+=.0664021164021164*n,t[2]=.016415012942191543*n,t}(this.es),this.mode){case 2:case 1:this.dd=1;break;case 3:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case 4:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=Qh(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else 4===this.mode&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function mce(e){var n,t,r,i,a,d,f,_,S,M,k=e.x,F=e.y;if(k=xt(k-this.long0),this.sphere){if(a=Math.sin(F),M=Math.cos(F),r=Math.cos(k),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((t=this.mode===this.EQUIT?1+M*r:1+this.sinph0*a+this.cosph0*M*r)<=ft)return null;n=(t=Math.sqrt(2/t))*M*Math.sin(k),t*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*M*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(F+this.lat0)<ft)return null;t=Jn-.5*F,n=(t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)))*Math.sin(k),t*=r}}else{switch(f=0,_=0,S=0,r=Math.cos(k),i=Math.sin(k),a=Math.sin(F),d=Qh(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=d/this.qp,_=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:S=1+this.sinb1*f+this.cosb1*_*r;break;case this.EQUIT:S=1+_*r;break;case this.N_POLE:S=Qe+F,d=this.qp-d;break;case this.S_POLE:S=F-Qe,d=this.qp+d}if(Math.abs(S)<ft)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:S=Math.sqrt(2/S),t=this.mode===this.OBLIQ?this.ymf*S*(this.cosb1*f-this.sinb1*_*r):(S=Math.sqrt(2/(1+_*r)))*f*this.ymf,n=this.xmf*S*_*i;break;case this.N_POLE:case this.S_POLE:d>=0?(n=(S=Math.sqrt(d))*i,t=r*(this.mode===this.S_POLE?S:-S)):n=t=0}}return e.x=this.a*n+this.x0,e.y=this.a*t+this.y0,e},inverse:function _ce(e){e.x-=this.x0,e.y-=this.y0;var r,i,a,d,f,_,S,n=e.x/this.a,t=e.y/this.a;if(this.sphere){var k,M=0,F=0;if((i=.5*(k=Math.sqrt(n*n+t*t)))>1)return null;switch(i=2*Math.asin(i),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(F=Math.sin(i),M=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(k)<=ft?0:Math.asin(t*F/k),n*=F,t=M*k;break;case this.OBLIQ:i=Math.abs(k)<=ft?this.lat0:Math.asin(M*this.sinph0+t*F*this.cosph0/k),n*=F*this.cosph0,t=(M-Math.sin(i)*this.sinph0)*k;break;case this.N_POLE:t=-t,i=Qe-i;break;case this.S_POLE:i-=Qe}r=0!==t||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(n,t):0}else{if(S=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,t*=this.dd,(_=Math.sqrt(n*n+t*t))<ft)return e.x=this.long0,e.y=this.lat0,e;d=2*Math.asin(.5*_/this.rq),a=Math.cos(d),n*=d=Math.sin(d),this.mode===this.OBLIQ?(f=this.qp*(S=a*this.sinb1+t*d*this.cosb1/_),t=_*this.cosb1*a-t*this.sinb1*d):(f=this.qp*(S=t*d/_),t=_*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),!(f=n*n+t*t))return e.x=this.long0,e.y=this.lat0,e;S=1-f/this.qp,this.mode===this.S_POLE&&(S=-S)}r=Math.atan2(n,t),i=function Cce(e,n){var t=e+e;return e+n[0]*Math.sin(t)+n[1]*Math.sin(t+t)+n[2]*Math.sin(t+t+t)}(Math.asin(S),this.apa)}return e.x=xt(this.long0+r),e.y=i,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Jh(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}const Rce={init:function Mce(){Math.abs(this.lat1+this.lat2)<ft||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Fu(this.e3,this.sin_po,this.cos_po),this.qs1=Qh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Fu(this.e3,this.sin_po,this.cos_po),this.qs2=Qh(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Qh(this.e3,this.sin_po),this.ns0=Math.abs(this.lat1-this.lat2)>ft?(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function Dce(e){var n=e.x,t=e.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var r=Qh(this.e3,this.sin_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,a=this.ns0*xt(n-this.long0),d=i*Math.sin(a)+this.x0,f=this.rh-i*Math.cos(a)+this.y0;return e.x=d,e.y=f,e},inverse:function kce(e){var n,r,i,a,d;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),i=0,0!==n&&(i=Math.atan2(r*e.x,r*e.y)),r=n*this.ns0/this.a,d=this.sphere?Math.asin((this.c-r*r)/(2*this.ns0)):this.phi1z(this.e3,(this.c-r*r)/this.ns0),a=xt(i/this.ns0+this.long0),e.x=a,e.y=d,e},names:["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"],phi1z:function Pce(e,n){var t,i,a,d,f=Jh(.5*n);if(e<ft)return f;for(var _=e*e,S=1;S<=25;S++)if(f+=d=.5*(a=1-(i=e*(t=Math.sin(f)))*i)*a/Math.cos(f)*(n/(1-_)-t/a+.5/e*Math.log((1-i)/(1+i))),Math.abs(d)<=1e-7)return f;return null}},Bce={init:function Nce(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function Lce(e){var n,t,r,i,d,f,_,M=e.y;return r=xt(e.x-this.long0),n=Math.sin(M),t=Math.cos(M),i=Math.cos(r),(d=this.sin_p14*n+this.cos_p14*t*i)>0||Math.abs(d)<=ft?(f=this.x0+1*this.a*t*Math.sin(r)/d,_=this.y0+1*this.a*(this.cos_p14*n-this.sin_p14*t*i)/d):(f=this.x0+this.infinity_dist*t*Math.sin(r),_=this.y0+this.infinity_dist*(this.cos_p14*n-this.sin_p14*t*i)),e.x=f,e.y=_,e},inverse:function Oce(e){var n,t,r,i,a,d;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(n=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(n,this.rc),t=Math.sin(i),d=Jh((r=Math.cos(i))*this.sin_p14+e.y*t*this.cos_p14/n),a=Math.atan2(e.x*t,n*this.cos_p14*r-e.y*this.sin_p14*t),a=xt(this.long0+a)):(d=this.phic0,a=0),e.x=a,e.y=d,e},names:["gnom"]},Gce={init:function jce(){this.sphere||(this.k0=Fu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function Vce(e){var r,i,t=e.y,a=xt(e.x-this.long0);if(this.sphere)r=this.x0+this.a*a*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var d=Qh(this.e,Math.sin(t));r=this.x0+this.a*this.k0*a,i=this.y0+this.a*d*.5/this.k0}return e.x=r,e.y=i,e},inverse:function Uce(e){var n,t;return e.x-=this.x0,e.y-=this.y0,this.sphere?(n=xt(this.long0+e.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(t=function zce(e,n){var t=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(n)-t)<1e-6)return n<0?-1*Qe:Qe;for(var i,a,d,f,r=Math.asin(.5*n),_=0;_<30;_++)if(a=Math.sin(r),d=Math.cos(r),f=e*a,r+=i=Math.pow(1-f*f,2)/(2*d)*(n/(1-e*e)-a/(1-f*f)+.5/e*Math.log((1-f)/(1+f))),Math.abs(i)<=1e-10)return r;return NaN}(this.e,2*e.y*this.k0/this.a),n=xt(this.long0+e.x/(this.a*this.k0))),e.x=n,e.y=t,e},names:["cea"]},Kce={init:function Hce(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function qce(e){var t=e.y,r=xt(e.x-this.long0),i=Xh(t-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*i,e},inverse:function Wce(e){var t=e.y;return e.x=xt(this.long0+(e.x-this.x0)/(this.a*this.rc)),e.y=Xh(this.lat0+(t-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"]},eue={init:function Yce(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ty(this.es),this.e1=ny(this.es),this.e2=ry(this.es),this.e3=iy(this.es),this.ml0=this.a*As(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function Xce(e){var r,i,a,t=e.y,d=xt(e.x-this.long0);if(a=d*Math.sin(t),this.sphere)Math.abs(t)<=ft?(r=this.a*d,i=-1*this.a*this.lat0):(r=this.a*Math.sin(a)/Math.tan(t),i=this.a*(Xh(t-this.lat0)+(1-Math.cos(a))/Math.tan(t)));else if(Math.abs(t)<=ft)r=this.a*d,i=-1*this.ml0;else{var f=LT(this.a,this.e,Math.sin(t))/Math.tan(t);r=f*Math.sin(a),i=this.a*As(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+f*(1-Math.cos(a))}return e.x=r+this.x0,e.y=i+this.y0,e},inverse:function Qce(e){var n,t,r,i,a,d,f,_,S;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=ft)n=xt(r/this.a+this.long0),t=0;else{var M;for(f=r*r/this.a/this.a+(d=this.lat0+i/this.a)*d,_=d,a=20;a;--a)if(_+=S=-1*(d*(_*(M=Math.tan(_))+1)-_-.5*(_*_+f)*M)/((_-d)/M-1),Math.abs(S)<=ft){t=_;break}n=xt(this.long0+Math.asin(r*Math.tan(_)/this.a)/Math.sin(t))}else if(Math.abs(i+this.ml0)<=ft)t=0,n=xt(this.long0+r/this.a);else{var k,F,L,G,Q;for(f=r*r/this.a/this.a+(d=(this.ml0+i)/this.a)*d,_=d,a=20;a;--a)if(Q=this.e*Math.sin(_),k=Math.sqrt(1-Q*Q)*Math.tan(_),F=this.a*As(this.e0,this.e1,this.e2,this.e3,_),L=this.e0-2*this.e1*Math.cos(2*_)+4*this.e2*Math.cos(4*_)-6*this.e3*Math.cos(6*_),_-=S=(d*(k*(G=F/this.a)+1)-G-.5*k*(G*G+f))/(this.es*Math.sin(2*_)*(G*G+f-2*d*G)/(4*k)+(d-G)*(k*L-2/Math.sin(2*_))-L),Math.abs(S)<=ft){t=_;break}k=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),n=xt(this.long0+Math.asin(r*k/this.a)/Math.sin(t))}return e.x=n,e.y=t,e},names:["Polyconic","American_Polyconic","poly"]},oue={init:function tue(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function nue(e){var n,d=(e.y-this.lat0)/Z0*1e-5,f=e.x-this.long0,_=1,S=0;for(n=1;n<=10;n++)S+=this.A[n]*(_*=d);var Q,M=S,k=f,F=1,L=0,de=0,_e=0;for(n=1;n<=6;n++)Q=L*M+F*k,de=de+this.B_re[n]*(F=F*M-L*k)-this.B_im[n]*(L=Q),_e=_e+this.B_im[n]*F+this.B_re[n]*L;return e.x=_e*this.a+this.x0,e.y=de*this.a+this.y0,e},inverse:function rue(e){var n,k,d=(e.y-this.y0)/this.a,f=(e.x-this.x0)/this.a,_=1,S=0,F=0,L=0;for(n=1;n<=6;n++)k=S*d+_*f,F=F+this.C_re[n]*(_=_*d-S*f)-this.C_im[n]*(S=k),L=L+this.C_im[n]*_+this.C_re[n]*S;for(var G=0;G<this.iterations;G++){var we,Q=F,de=L,Ue=d,dt=f;for(n=2;n<=6;n++)we=de*F+Q*L,Ue+=(n-1)*(this.B_re[n]*(Q=Q*F-de*L)-this.B_im[n]*(de=we)),dt+=(n-1)*(this.B_im[n]*Q+this.B_re[n]*de);Q=1,de=0;var ut=this.B_re[1],Ht=this.B_im[1];for(n=2;n<=6;n++)we=de*F+Q*L,ut+=n*(this.B_re[n]*(Q=Q*F-de*L)-this.B_im[n]*(de=we)),Ht+=n*(this.B_im[n]*Q+this.B_re[n]*de);var Bt=ut*ut+Ht*Ht;F=(Ue*ut+dt*Ht)/Bt,L=(dt*ut-Ue*Ht)/Bt}var Sn=F,Wn=L,Ki=1,Yi=0;for(n=1;n<=9;n++)Yi+=this.D[n]*(Ki*=Sn);var uo=this.lat0+Yi*Z0*1e5;return e.x=this.long0+Wn,e.y=uo,e},names:["New_Zealand_Map_Grid","nzmg"]},uue={init:function sue(){},forward:function aue(e){var t=e.y,r=xt(e.x-this.long0),i=this.x0+this.a*r,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return e.x=i,e.y=a,e},inverse:function lue(e){e.x-=this.x0,e.y-=this.y0;var n=xt(this.long0+e.x/this.a),t=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=n,e.y=t,e},names:["Miller_Cylindrical","mill"]},mue={init:function hue(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=DT(this.es)},forward:function fue(e){var n,t,r=e.x,i=e.y;if(r=xt(r-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(i),d=20;d;--d){var f=(this.m*i+Math.sin(i)-a)/(this.m+Math.cos(i));if(i-=f,Math.abs(f)<ft)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;n=this.a*this.C_x*r*(this.m+Math.cos(i)),t=this.a*this.C_y*i}else{var _=Math.sin(i),S=Math.cos(i);t=this.a*im(i,_,S,this.en),n=this.a*r*S/Math.sqrt(1-this.es*_*_)}return e.x=n,e.y=t,e},inverse:function pue(e){var n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,n=e.y/this.a,this.sphere?(n/=this.C_y,r/=this.C_x*(this.m+Math.cos(n)),this.m?n=Jh((this.m*n+Math.sin(n))/this.n):1!==this.n&&(n=Jh(Math.sin(n)/this.n)),r=xt(r+this.long0),n=Xh(n)):(n=kT(e.y/this.a,this.es,this.en),(i=Math.abs(n))<Qe?(i=Math.sin(n),r=xt(this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(n)))):i-ft<Qe&&(r=this.long0)),e.x=r,e.y=n,e},names:["Sinusoidal","sinu"]},xue={init:function _ue(){},forward:function yue(e){for(var t=e.y,r=xt(e.x-this.long0),i=t,a=Math.PI*Math.sin(t);;){var d=-(i+Math.sin(i)-a)/(1+Math.cos(i));if(i+=d,Math.abs(d)<ft)break}i/=2,Math.PI/2-Math.abs(t)<ft&&(r=0);var f=.900316316158*this.a*r*Math.cos(i)+this.x0,_=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=f,e.y=_,e},inverse:function vue(e){var n,t;e.x-=this.x0,e.y-=this.y0,t=e.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),n=Math.asin(t);var r=xt(this.long0+e.x/(.900316316158*this.a*Math.cos(n)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),t=(2*n+Math.sin(2*n))/Math.PI,Math.abs(t)>1&&(t=1);var i=Math.asin(t);return e.x=r,e.y=i,e},names:["Mollweide","moll"]},Tue={init:function wue(){Math.abs(this.lat1+this.lat2)<ft||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=ty(this.es),this.e1=ny(this.es),this.e2=ry(this.es),this.e3=iy(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=Fu(this.e,this.sin_phi,this.cos_phi),this.ml1=As(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ft?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=Fu(this.e,this.sin_phi,this.cos_phi),this.ml2=As(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=As(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function Sue(e){var r,n=e.x,t=e.y;if(this.sphere)r=this.a*(this.g-t);else{var i=As(this.e0,this.e1,this.e2,this.e3,t);r=this.a*(this.g-i)}var a=this.ns*xt(n-this.long0),d=this.x0+r*Math.sin(a),f=this.y0+this.rh-r*Math.cos(a);return e.x=d,e.y=f,e},inverse:function Eue(e){var n,t,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1);var a=0;return 0!==t&&(a=Math.atan2(n*e.x,n*e.y)),this.sphere?(i=xt(this.long0+a/this.ns),r=Xh(this.g-t/this.a),e.x=i,e.y=r,e):(r=rx(this.g-t/this.a,this.e0,this.e1,this.e2,this.e3),i=xt(this.long0+a/this.ns),e.x=i,e.y=r,e)},names:["Equidistant_Conic","eqdc"]},Pue={init:function Iue(){this.R=this.a},forward:function Mue(e){var i,a,t=e.y,r=xt(e.x-this.long0);Math.abs(t)<=ft&&(i=this.x0+this.R*r,a=this.y0);var d=Jh(2*Math.abs(t/Math.PI));(Math.abs(r)<=ft||Math.abs(Math.abs(t)-Qe)<=ft)&&(i=this.x0,a=t>=0?this.y0+Math.PI*this.R*Math.tan(.5*d):this.y0+Math.PI*this.R*-Math.tan(.5*d));var f=.5*Math.abs(Math.PI/r-r/Math.PI),_=f*f,S=Math.sin(d),M=Math.cos(d),k=M/(S+M-1),L=k*(2/S-1),G=L*L,Q=Math.PI*this.R*(f*(k-G)+Math.sqrt(_*(k-G)*(k-G)-(G+_)*(k*k-G)))/(G+_);r<0&&(Q=-Q),i=this.x0+Q;var de=_+k;return Q=Math.PI*this.R*(L*de-f*Math.sqrt((G+_)*(_+1)-de*de))/(G+_),a=t>=0?this.y0+Q:this.y0-Q,e.x=i,e.y=a,e},inverse:function Due(e){var n,t,r,i,a,d,f,_,S,M,k,F;return e.x-=this.x0,e.y-=this.y0,k=Math.PI*this.R,a=(r=e.x/k)*r+(i=e.y/k)*i,k=3*(i*i/(_=-2*(d=-Math.abs(i)*(1+a))+1+2*i*i+a*a)+(2*(f=d-2*i*i+r*r)*f*f/_/_/_-9*d*f/_/_)/27)/(S=(d-f*f/3/_)/_)/(M=2*Math.sqrt(-S/3)),Math.abs(k)>1&&(k=k>=0?1:-1),F=Math.acos(k)/3,t=e.y>=0?(-M*Math.cos(F+Math.PI/3)-f/3/_)*Math.PI:-(-M*Math.cos(F+Math.PI/3)-f/3/_)*Math.PI,n=Math.abs(r)<ft?this.long0:xt(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(r*r-i*i)+a*a))/2/r),e.x=n,e.y=t,e},names:["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"]},Bue={init:function Nue(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))},forward:function Lue(e){var d,f,_,S,M,k,F,L,G,Q,de,n=e.x,t=e.y,r=Math.sin(e.y),i=Math.cos(e.y),a=xt(n-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=ft?(e.x=this.x0+this.a*(Qe-t)*Math.sin(a),e.y=this.y0-this.a*(Qe-t)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=ft?(e.x=this.x0+this.a*(Qe+t)*Math.sin(a),e.y=this.y0+this.a*(Qe+t)*Math.cos(a),e):(G=this.sin_p12*r+this.cos_p12*i*Math.cos(a),L=(F=Math.acos(G))?F/Math.sin(F):1,e.x=this.x0+this.a*L*i*Math.sin(a),e.y=this.y0+this.a*L*(this.cos_p12*r-this.sin_p12*i*Math.cos(a)),e):(d=ty(this.es),f=ny(this.es),_=ry(this.es),S=iy(this.es),Math.abs(this.sin_p12-1)<=ft?(M=this.a*As(d,f,_,S,Qe),k=this.a*As(d,f,_,S,t),e.x=this.x0+(M-k)*Math.sin(a),e.y=this.y0-(M-k)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=ft?(M=this.a*As(d,f,_,S,Qe),k=this.a*As(d,f,_,S,t),e.x=this.x0+(M+k)*Math.sin(a),e.y=this.y0+(M+k)*Math.cos(a),e):Math.abs(n)<ft&&Math.abs(t-this.lat0)<ft?(e.x=e.y=0,e):(Q=function Aue(e,n,t,r,i,a){const d=r-n,f=Math.atan((1-a)*Math.tan(e)),_=Math.atan((1-a)*Math.tan(t)),S=Math.sin(f),M=Math.cos(f),k=Math.sin(_),F=Math.cos(_);let G,de,_e,we,Ue,dt,ut,Ht,Bt,Sn,Wn,Ki,Yi,uo,us,L=d,Q=100;do{if(de=Math.sin(L),_e=Math.cos(L),we=Math.sqrt(F*de*(F*de)+(M*k-S*F*_e)*(M*k-S*F*_e)),0===we)return{azi1:0,s12:0};Ue=S*k+M*F*_e,dt=Math.atan2(we,Ue),ut=M*F*de/we,Ht=1-ut*ut,Bt=0!==Ht?Ue-2*S*k/Ht:0,Sn=a/16*Ht*(4+a*(4-3*Ht)),G=L,L=d+(1-Sn)*a*ut*(dt+Sn*we*(Bt+Sn*Ue*(2*Bt*Bt-1)))}while(Math.abs(L-G)>1e-12&&--Q>0);return 0===Q?{azi1:NaN,s12:NaN}:(Wn=Ht*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),Ki=1+Wn/16384*(4096+Wn*(Wn*(320-175*Wn)-768)),Yi=Wn/1024*(256+Wn*(Wn*(74-47*Wn)-128)),uo=Yi*we*(Bt+Yi/4*(Ue*(2*Bt*Bt-1)-Yi/6*Bt*(4*we*we-3)*(4*Bt*Bt-3))),us=i*(1-a)*Ki*(dt-uo),{azi1:Math.atan2(F*de,M*k-S*F*_e),s12:us})}(this.lat0,this.long0,t,n,this.a,this.f),de=Q.azi1,e.x=Q.s12*Math.sin(de),e.y=Q.s12*Math.cos(de),e))},inverse:function Oue(e){var n,t,r,i,a,d,f,_,S,M,k,F,G,Q,de;return e.x-=this.x0,e.y-=this.y0,this.sphere?(n=Math.sqrt(e.x*e.x+e.y*e.y))>2*Qe*this.a?void 0:(t=n/this.a,r=Math.sin(t),i=Math.cos(t),a=this.long0,Math.abs(n)<=ft?d=this.lat0:(d=Jh(i*this.sin_p12+e.y*r*this.cos_p12/n),f=Math.abs(this.lat0)-Qe,a=Math.abs(f)<=ft?xt(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)):xt(this.long0+Math.atan2(e.x*r,n*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=a,e.y=d,e):(_=ty(this.es),S=ny(this.es),M=ry(this.es),k=iy(this.es),Math.abs(this.sin_p12-1)<=ft?(d=rx(((F=this.a*As(_,S,M,k,Qe))-(n=Math.sqrt(e.x*e.x+e.y*e.y)))/this.a,_,S,M,k),a=xt(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=d,e):Math.abs(this.sin_p12+1)<=ft?(F=this.a*As(_,S,M,k,Qe),d=rx(((n=Math.sqrt(e.x*e.x+e.y*e.y))-F)/this.a,_,S,M,k),a=xt(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=d,e):(G=Math.atan2(e.x,e.y),Q=Math.sqrt(e.x*e.x+e.y*e.y),de=function Rue(e,n,t,r,i,a){const d=Math.atan((1-a)*Math.tan(e)),f=Math.sin(d),_=Math.cos(d),S=Math.sin(t),M=Math.cos(t),k=Math.atan2(f,_*M),F=_*S,L=1-F*F,G=L*(i*i-i*(1-a)*(i*(1-a)))/(i*(1-a)*(i*(1-a))),Q=1+G/16384*(4096+G*(G*(320-175*G)-768)),de=G/1024*(256+G*(G*(74-47*G)-128));let we,dt,ut,Ht,Bt,_e=r/(i*(1-a)*Q),Ue=100;do{dt=Math.cos(2*k+_e),ut=Math.sin(_e),Ht=Math.cos(_e),Bt=de*ut*(dt+de/4*(Ht*(2*dt*dt-1)-de/6*dt*(4*ut*ut-3)*(4*dt*dt-3))),we=_e,_e=r/(i*(1-a)*Q)+Bt}while(Math.abs(_e-we)>1e-12&&--Ue>0);if(0===Ue)return{lat2:NaN,lon2:NaN};const Sn=f*ut-_*Ht*M,Yi=a/16*L*(4+a*(4-3*L));return{lat2:Math.atan2(f*Ht+_*ut*M,(1-a)*Math.sqrt(F*F+Sn*Sn)),lon2:n+(Math.atan2(ut*S,_*Ht-f*ut*M)-(1-Yi)*a*F*(_e+Yi*ut*(dt+Yi*Ht*(2*dt*dt-1))))}}(this.lat0,this.long0,G,Q,this.a,this.f),e.x=de.lon2,e.y=de.lat2,e))},names:["Azimuthal_Equidistant","aeqd"]},$ue={init:function zue(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function jue(e){var n,t,r,i,d,f,_,M=e.y;return r=xt(e.x-this.long0),n=Math.sin(M),t=Math.cos(M),i=Math.cos(r),((d=this.sin_p14*n+this.cos_p14*t*i)>0||Math.abs(d)<=ft)&&(f=1*this.a*t*Math.sin(r),_=this.y0+1*this.a*(this.cos_p14*n-this.sin_p14*t*i)),e.x=f,e.y=_,e},inverse:function Vue(e){var n,t,r,i,a,d,f;return e.x-=this.x0,e.y-=this.y0,t=Jh((n=Math.sqrt(e.x*e.x+e.y*e.y))/this.a),r=Math.sin(t),i=Math.cos(t),d=this.long0,Math.abs(n)<=ft?(f=this.lat0,e.x=d,e.y=f,e):(f=Jh(i*this.sin_p14+e.y*r*this.cos_p14/n),a=Math.abs(this.lat0)-Qe,Math.abs(a)<=ft?(d=xt(this.lat0>=0?this.long0+Math.atan2(e.x,-e.y):this.long0-Math.atan2(-e.x,e.y)),e.x=d,e.y=f,e):(d=xt(this.long0+Math.atan2(e.x*r,n*this.cos_p14*i-e.y*this.sin_p14*r)),e.x=d,e.y=f,e))},names:["ortho"]};function ox(e,n,t,r){var i;return e<ft?(r.value=1,i=0):(i=Math.atan2(n,t),Math.abs(i)<=Jn?r.value=1:i>Jn&&i<=Qe+Jn?(r.value=2,i-=Qe):i>Qe+Jn||i<=-(Qe+Jn)?(r.value=3,i=i>=0?i-Ni:i+Ni):(r.value=4,i+=Qe)),i}function sm(e,n){var t=e+n;return t<-Ni?t+=K0:t>+Ni&&(t-=K0),t}const Zue={init:function Gue(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face=this.lat0>=Qe-Jn/2?5:this.lat0<=-(Qe-Jn/2)?6:Math.abs(this.long0)<=Jn?1:Math.abs(this.long0)<=Qe+Jn?this.long0>0?2:4:3,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function Hue(e){var t,r,i,a,d,f,n={x:0,y:0},_={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,r=e.x,5===this.face)a=Qe-t,r>=Jn&&r<=Qe+Jn?(_.value=1,i=r-Qe):r>Qe+Jn||r<=-(Qe+Jn)?(_.value=2,i=r>0?r-Ni:r+Ni):r>-(Qe+Jn)&&r<=-Jn?(_.value=3,i=r+Qe):(_.value=4,i=r);else if(6===this.face)a=Qe+t,r>=Jn&&r<=Qe+Jn?(_.value=1,i=-r+Qe):r<Jn&&r>=-Jn?(_.value=2,i=-r):r<-Jn&&r>=-(Qe+Jn)?(_.value=3,i=-r-Qe):(_.value=4,i=r>0?-r+Ni:-r-Ni);else{var S,M,k,F,L,G;2===this.face?r=sm(r,+Qe):3===this.face?r=sm(r,+Ni):4===this.face&&(r=sm(r,-Qe)),F=Math.sin(t),L=Math.cos(t),G=Math.sin(r),S=L*Math.cos(r),M=L*G,k=F,1===this.face?i=ox(a=Math.acos(S),k,M,_):2===this.face?i=ox(a=Math.acos(M),k,-S,_):3===this.face?i=ox(a=Math.acos(-S),k,-M,_):4===this.face?i=ox(a=Math.acos(-M),k,S,_):(a=i=0,_.value=1)}return f=Math.atan(12/Ni*(i+Math.acos(Math.sin(i)*Math.cos(Jn))-Qe)),d=Math.sqrt((1-Math.cos(a))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(i))))),2===_.value?f+=Qe:3===_.value?f+=Ni:4===_.value&&(f+=1.5*Ni),n.x=d*Math.cos(f),n.y=d*Math.sin(f),n.x=n.x*this.a+this.x0,n.y=n.y*this.a+this.y0,e.x=n.x,e.y=n.y,e},inverse:function que(e){var t,r,i,a,d,f,_,S,M,Q,de,_e,n={lam:0,phi:0},k={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,r=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?k.value=1:e.y>=0&&e.y>=Math.abs(e.x)?(k.value=2,t-=Qe):e.x<0&&-e.x>=Math.abs(e.y)?(k.value=3,t=t<0?t+Ni:t-Ni):(k.value=4,t+=Qe),M=Ni/12*Math.tan(t),d=Math.sin(M)/(Math.cos(M)-1/Math.sqrt(2)),f=Math.atan(d),(_=1-(i=Math.cos(t))*i*(a=Math.tan(r))*a*(1-Math.cos(Math.atan(1/Math.cos(f)))))<-1?_=-1:_>1&&(_=1),5===this.face)S=Math.acos(_),n.phi=Qe-S,n.lam=1===k.value?f+Qe:2===k.value?f<0?f+Ni:f-Ni:3===k.value?f-Qe:f;else if(6===this.face)S=Math.acos(_),n.phi=S-Qe,n.lam=1===k.value?-f+Qe:2===k.value?-f:3===k.value?-f-Qe:f<0?-f-Ni:-f+Ni;else{var F,L,G;M=(F=_)*F,L=(M+=(G=M>=1?0:Math.sqrt(1-M)*Math.sin(f))*G)>=1?0:Math.sqrt(1-M),2===k.value?(M=L,L=-G,G=M):3===k.value?(L=-L,G=-G):4===k.value&&(M=L,L=G,G=-M),2===this.face?(M=F,F=-L,L=M):3===this.face?(F=-F,L=-L):4===this.face&&(M=F,F=L,L=-M),n.phi=Math.acos(-G)-Qe,n.lam=Math.atan2(L,F),2===this.face?n.lam=sm(n.lam,-Qe):3===this.face?n.lam=sm(n.lam,-Ni):4===this.face&&(n.lam=sm(n.lam,+Qe))}return 0!==this.es&&(Q=n.phi<0?1:0,de=Math.tan(n.phi),_e=this.b/Math.sqrt(de*de+this.one_minus_f_squared),n.phi=Math.atan(Math.sqrt(this.a*this.a-_e*_e)/(this.one_minus_f*_e)),Q&&(n.phi=-n.phi)),n.lam+=this.long0,e.x=n.lam,e.y=n.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]};var zT=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],oy=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],mO=Ou/5,Kue=1/mO,sx=function(e,n){return e[0]+n*(e[1]+n*(e[2]+n*e[3]))};const nde={init:function Que(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function Jue(e){var n=xt(e.x-this.long0),t=Math.abs(e.y),r=Math.floor(t*mO);r<0?r=0:r>=18&&(r=17);var i={x:sx(zT[r],t=Ou*(t-Kue*r))*n,y:sx(oy[r],t)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*.8487+this.x0,i.y=i.y*this.a*1.3523+this.y0,i},inverse:function ede(e){var n={x:(e.x-this.x0)/(.8487*this.a),y:Math.abs(e.y-this.y0)/(1.3523*this.a)};if(n.y>=1)n.x/=zT[18][0],n.y=e.y<0?-Qe:Qe;else{var t=Math.floor(18*n.y);for(t<0?t=0:t>=18&&(t=17);;)if(oy[t][0]>n.y)--t;else{if(!(oy[t+1][0]<=n.y))break;++t}var r=oy[t],i=5*(n.y-r[0])/(oy[t+1][0]-r[0]);i=function Xue(e,n,t,r){for(var i=n;r;--r){var a=e(i);if(i-=a,Math.abs(a)<t)break}return i}(function(a){return(sx(r,a)-n.y)/function(e,n){return e[1]+n*(2*e[2]+3*n*e[3])}(r,a)},i,ft,100),n.x/=sx(zT[t],i),n.y=(5*t+i)*jo,e.y<0&&(n.y=-n.y)}return n.x=xt(n.x+this.long0),n},names:["Robinson","robin"]},ade={init:function rde(){this.name="geocent"},forward:function ide(e){return qL(e,this.es,this.a)},inverse:function ode(e){return WL(e,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]};var sy={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};const hde={init:function lde(){if(Object.keys(sy).forEach(function(t){if(typeof this[t]>"u")this[t]=sy[t].def;else{if(sy[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);sy[t].num&&(this[t]=parseFloat(this[t]))}sy[t].degrees&&(this[t]=this[t]*jo)}.bind(this)),Math.abs(Math.abs(this.lat0)-Qe)<ft?this.mode=this.lat0<0?1:0:Math.abs(this.lat0)<ft?this.mode=2:(this.mode=3,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,n=this.azi;this.cg=Math.cos(n),this.sg=Math.sin(n),this.cw=Math.cos(e),this.sw=Math.sin(e)},forward:function cde(e){e.x-=this.long0;var i,a,d,f,n=Math.sin(e.y),t=Math.cos(e.y),r=Math.cos(e.x);switch(this.mode){case 3:a=this.sinph0*n+this.cosph0*t*r;break;case 2:a=t*r;break;case 1:a=-n;break;case 0:a=n}switch(i=(a=this.pn1/(this.p-a))*t*Math.sin(e.x),this.mode){case 3:a*=this.cosph0*n-this.sinph0*t*r;break;case 2:a*=n;break;case 0:a*=-t*r;break;case 1:a*=t*r}return i=(i*this.cg-a*this.sg)*this.cw*(f=1/((d=a*this.cg+i*this.sg)*this.sw*this.h1+this.cw)),a=d*f,e.x=i*this.a,e.y=a*this.a,e},inverse:function ude(e){e.x/=this.a,e.y/=this.a;var t,r,i,n={x:e.x,y:e.y};e.x=(t=this.pn1*e.x*(i=1/(this.pn1-e.y*this.sw)))*this.cg+(r=this.pn1*e.y*this.cw*i)*this.sg,e.y=r*this.cg-t*this.sg;var a=pa(e.x,e.y);if(Math.abs(a)<ft)n.x=0,n.y=e.y;else{var d,f;switch(f=1-a*a*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/a+a/this.pn1),d=Math.sqrt(1-f*f),this.mode){case 3:n.y=Math.asin(d*this.sinph0+e.y*f*this.cosph0/a),e.y=(d-this.sinph0*Math.sin(n.y))*a,e.x*=f*this.cosph0;break;case 2:n.y=Math.asin(e.y*f/a),e.y=d*a,e.x*=f;break;case 0:n.y=Math.asin(d),e.y=-e.y;break;case 1:n.y=-Math.asin(d)}n.x=Math.atan2(e.x,e.y)}return e.x=n.x+this.long0,e.y=n.y,e},names:["Tilted_Perspective","tpers"]},_de={init:function fde(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var e=1-this.es,n=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=n,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function pde(e){var r,i,a,d,n=e.x,t=e.y;if(n-=this.long0,"ellipse"===this.shape){t=Math.atan(this.radius_p2*Math.tan(t));var f=this.radius_p/pa(this.radius_p*Math.cos(t),Math.sin(t));if(i=f*Math.cos(n)*Math.cos(t),a=f*Math.sin(n)*Math.cos(t),d=f*Math.sin(t),(this.radius_g-i)*i-a*a-d*d*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;r=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/pa(d,r)),e.y=this.radius_g_1*Math.atan(d/r)):(e.x=this.radius_g_1*Math.atan(a/r),e.y=this.radius_g_1*Math.atan(d/pa(a,r)))}else"sphere"===this.shape&&(r=Math.cos(t),i=Math.cos(n)*r,a=Math.sin(n)*r,d=Math.sin(t),r=this.radius_g-i,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/pa(d,r)),e.y=this.radius_g_1*Math.atan(d/r)):(e.x=this.radius_g_1*Math.atan(a/r),e.y=this.radius_g_1*Math.atan(d/pa(a,r))));return e.x=e.x*this.a,e.y=e.y*this.a,e},inverse:function gde(e){var i,a,d,f,n=-1,t=0,r=0;if(e.x=e.x/this.a,e.y=e.y/this.a,"ellipse"===this.shape){this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),t=Math.tan(e.x/this.radius_g_1)*pa(1,r)):(t=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*pa(1,t));var _=r/this.radius_p;if((d=(a=2*this.radius_g*n)*a-4*(i=t*t+_*_+n*n)*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-a-Math.sqrt(d))/(2*i),n=this.radius_g+f*n,t*=f,r*=f,e.x=Math.atan2(t,n),e.y=Math.atan(r*Math.cos(e.x)/n),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if("sphere"===this.shape){if(this.flip_axis?(r=Math.tan(e.y/this.radius_g_1),t=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+r*r)):(t=Math.tan(e.x/this.radius_g_1),r=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+t*t)),(d=(a=2*this.radius_g*n)*a-4*(i=t*t+r*r+n*n)*this.C)<0)return e.x=Number.NaN,e.y=Number.NaN,e;f=(-a-Math.sqrt(d))/(2*i),n=this.radius_g+f*n,t*=f,r*=f,e.x=Math.atan2(t,n),e.y=Math.atan(r*Math.cos(e.x)/n)}return e.x=e.x+this.long0,e},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};var ay=1.340264,ly=-.081106,cy=893e-6,uy=.003796,ax=Math.sqrt(3)/2;const wde={init:function yde(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function vde(e){var n=xt(e.x-this.long0),r=Math.asin(ax*Math.sin(e.y)),i=r*r,a=i*i*i;return e.x=n*Math.cos(r)/(ax*(ay+3*ly*i+a*(7*cy+9*uy*i))),e.y=r*(ay+ly*i+a*(cy+uy*i)),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function bde(e){e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a;var i,a,_,S,r=e.y;for(S=0;S<12&&(r-=_=(r*(ay+ly*(i=r*r)+(a=i*i*i)*(cy+uy*i))-e.y)/(ay+3*ly*i+a*(7*cy+9*uy*i)),!(Math.abs(_)<1e-9));++S);return e.x=ax*e.x*(ay+3*ly*(i=r*r)+(a=i*i*i)*(7*cy+9*uy*i))/Math.cos(r),e.y=Math.asin(Math.sin(r)/ax),e.x=xt(e.x+this.long0),e},names:["eqearth","Equal Earth","Equal_Earth"]};var dy=1e-10;function Ede(e){var r,i,a,n=xt(e.x-(this.long0||0)),t=e.y;return r=this.am1+this.m1-im(t,i=Math.sin(t),a=Math.cos(t),this.en),i=a*n/(r*Math.sqrt(1-this.es*i*i)),e.x=r*Math.sin(i),e.y=this.am1-r*Math.cos(i),e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Cde(e){var n,t,r,i;if(e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a,t=pa(e.x,e.y=this.am1-e.y),i=kT(this.am1+this.m1-t,this.es,this.en),(n=Math.abs(i))<Qe)n=Math.sin(i),r=t*Math.atan2(e.x,e.y)*Math.sqrt(1-this.es*n*n)/Math.cos(i);else{if(!(Math.abs(n-Qe)<=dy))throw new Error;r=0}return e.x=xt(r+(this.long0||0)),e.y=Xh(i),e}function Tde(e){var r,i,n=xt(e.x-(this.long0||0)),t=e.y;return i=this.cphi1+this.phi1-t,Math.abs(i)>dy?(e.x=i*Math.sin(r=n*Math.cos(t)/i),e.y=this.cphi1-i*Math.cos(r)):e.x=e.y=0,e.x=this.a*e.x+(this.x0||0),e.y=this.a*e.y+(this.y0||0),e}function Ide(e){e.x=(e.x-(this.x0||0))/this.a,e.y=(e.y-(this.y0||0))/this.a;var n,t,r=pa(e.x,e.y=this.cphi1-e.y);if(t=this.cphi1+this.phi1-r,Math.abs(t)>Qe)throw new Error;return n=Math.abs(Math.abs(t)-Qe)<=dy?0:r*Math.atan2(e.x,e.y)/Math.cos(t),e.x=xt(n+(this.long0||0)),e.y=Xh(t),e}const Dde={init:function Sde(){var e;if(this.phi1=this.lat1,Math.abs(this.phi1)<dy)throw new Error;this.es?(this.en=DT(this.es),this.m1=im(this.phi1,this.am1=Math.sin(this.phi1),e=Math.cos(this.phi1),this.en),this.am1=e/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Cde,this.forward=Ede):(this.cphi1=Math.abs(this.phi1)+dy>=Qe?0:1/Math.tan(this.phi1),this.inverse=Ide,this.forward=Tde)},names:["bonne","Bonne (Werner lat_1=90)"]},_O=Object.assign(function Uae(e,n,t){var r,i,d,a=!1;return typeof n>"u"?(i=ex(e),r=JL,a=!0):(typeof n.x<"u"||Array.isArray(n))&&(t=n,i=ex(e),r=JL,a=!0),r||(r=ex(e)),i||(i=ex(n)),t?TT(r,i,t):(d={forward:function(f,_){return TT(r,i,f,_)},inverse:function(f,_){return TT(i,r,f,_)}},a&&(d.oProj=i),d)},{defaultDatum:"WGS84",Proj:tm,WGS84:new tm("WGS84"),Point:ele,toPoint:XL,defs:Y1,nadgrid:function Eae(e,n,t){return n instanceof ArrayBuffer?function Cae(e,n,t){var r=!0;void 0!==t&&!1===t.includeErrorFields&&(r=!1);var i=new DataView(n),a=function Dae(e){var n=e.getInt32(8,!1);return 11!==n&&(11!==(n=e.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(i),d=function kae(e,n){return{nFields:e.getInt32(8,n),nSubgridFields:e.getInt32(24,n),nSubgrids:e.getInt32(40,n),shiftType:CT(e,56,64).trim(),fromSemiMajorAxis:e.getFloat64(120,n),fromSemiMinorAxis:e.getFloat64(136,n),toSemiMajorAxis:e.getFloat64(152,n),toSemiMinorAxis:e.getFloat64(168,n)}}(i,a),f=function Pae(e,n,t,r){for(var i=176,a=[],d=0;d<n.nSubgrids;d++){var f=Rae(e,i,t),_=Nae(e,i,f,t,r),S=Math.round(1+(f.upperLongitude-f.lowerLongitude)/f.longitudeInterval),M=Math.round(1+(f.upperLatitude-f.lowerLatitude)/f.latitudeInterval);a.push({ll:[Yh(f.lowerLongitude),Yh(f.lowerLatitude)],del:[Yh(f.longitudeInterval),Yh(f.latitudeInterval)],lim:[S,M],count:f.gridNodeCount,cvs:Aae(_)});var k=16;!1===r&&(k=8),i+=176+f.gridNodeCount*k}return a}(i,d,a,r),_={header:d,subgrids:f};return ST[e]=_,_}(e,n,t):{ready:Tae(e,n)}},transform:J1,mgrs:Gae,version:"__VERSION__"});!function kde(e){e.Proj.projections.add(tx),e.Proj.projections.add(nx),e.Proj.projections.add(Ile),e.Proj.projections.add(Fle),e.Proj.projections.add(Ule),e.Proj.projections.add(Wle),e.Proj.projections.add(Jle),e.Proj.projections.add(ice),e.Proj.projections.add(cce),e.Proj.projections.add(pce),e.Proj.projections.add(Ice),e.Proj.projections.add(Rce),e.Proj.projections.add(Bce),e.Proj.projections.add(Gce),e.Proj.projections.add(Kce),e.Proj.projections.add(eue),e.Proj.projections.add(oue),e.Proj.projections.add(uue),e.Proj.projections.add(mue),e.Proj.projections.add(xue),e.Proj.projections.add(Tue),e.Proj.projections.add(Pue),e.Proj.projections.add(Bue),e.Proj.projections.add($ue),e.Proj.projections.add(Zue),e.Proj.projections.add(nde),e.Proj.projections.add(ade),e.Proj.projections.add(hde),e.Proj.projections.add(_de),e.Proj.projections.add(wde),e.Proj.projections.add(Dde)}(_O);const hy=_O;let Pde=(()=>{class e{STANDARD_CRS="EPSG:3857";constructor(){hy.defs("EPSG:4326","+proj=longlat +datum=WGS84 +no_defs"),hy.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext +no_defs"),hy.defs("EPSG:22175","+proj=tmerc +lat_0=0 +lon_0=-57 +k=1 +x_0=5500000 +y_0=0 +ellps=GRS80 +units=m +no_defs")}KNOWN_CRS={"EPSG:3857":{epsg:"EPSG:3857",name:"Web Mercator",isWebMercator:!0},"EPSG:4326":{epsg:"EPSG:4326",name:"WGS84 Geographic",isWebMercator:!1},"EPSG:22183":{epsg:"EPSG:22183",name:"POSGAR 98 / Argentina 3",isWebMercator:!1},"EPSG:5343":{epsg:"EPSG:5343",name:"POSGAR 2007 / Argentina 3",isWebMercator:!1}};getStandardCRS(){return this.STANDARD_CRS}isWebMercatorCompatible(t){if(!t)return!0;const r=this.KNOWN_CRS[t.toUpperCase()];return!!r&&r.isWebMercator}getCRSInfo(t){return t?this.KNOWN_CRS[t.toUpperCase()]||null:this.KNOWN_CRS[this.STANDARD_CRS]}extractFirstCoordinate(t){if(!t||!t.coordinates)return null;switch(t.type){case"Point":return t.coordinates;case"LineString":case"MultiPoint":return t.coordinates[0];case"Polygon":case"MultiLineString":return t.coordinates[0][0];case"MultiPolygon":return t.coordinates[0][0][0];default:return null}}detectCRSFromCoordinates(t,r){return Math.abs(t)>180&&Math.abs(r)>90?"EPSG:3857":t>=-75&&t<=-53&&r>=-55&&r<=-21?"EPSG:4326":t>1e6&&t<8e6&&r>1e6&&r<8e6?"EPSG:22183":"EPSG:4326"}transformGeoJSON(t,r){var i=this;return Jl(function*(a,d,f="EPSG:4326"){if(d?.toUpperCase()===f?.toUpperCase())return(yield fetch(a)).json();try{const S=yield(yield fetch(a)).json();try{const M=i.extractFirstCoordinate(S.features?.[0]?.geometry);M&&hy(d,f,M)}catch{}return i.transformGeoJSONCoordinates(S,d,f)}catch(_){throw console.error(`Error transformando GeoJSON de ${d} a ${f}:`,_),_}}).apply(this,arguments)}transformGeoJSONCoordinates(t,r,i){const a=JSON.parse(JSON.stringify(t));return a.features&&a.features.forEach(d=>{d.geometry&&this.transformGeometry(d.geometry,r,i)}),a.crs&&("EPSG:4326"===i?delete a.crs:a.crs={type:"name",properties:{name:`urn:ogc:def:crs:${i}`}}),a}transformGeometry(t,r,i){if(t.coordinates)switch(t.type){case"Point":t.coordinates=this.transformCoordinate(t.coordinates,r,i);break;case"LineString":case"MultiPoint":t.coordinates=t.coordinates.map(a=>this.transformCoordinate(a,r,i));break;case"Polygon":case"MultiLineString":t.coordinates=t.coordinates.map(a=>a.map(d=>this.transformCoordinate(d,r,i)));break;case"MultiPolygon":t.coordinates=t.coordinates.map(a=>a.map(d=>d.map(f=>this.transformCoordinate(f,r,i))))}}transformCoordinate(t,r,i){try{let a=t;return"EPSG:22175"===r&&(a=[-Math.abs(t[0]),-Math.abs(t[1])]),hy(r,i,a)}catch(a){return console.warn(`Error transformando coordenada de ${r} a ${i}:`,a),t}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ade=(()=>{class e{coordinateSystemService;constructor(t){this.coordinateSystemService=t}getAvailableLayers(){return this.layerMetadata.filter(t=>t.enabled)}getDefaultLayer(){return this.layerMetadata[0].id}getSources(){return{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'},esriWorldImagery:{type:"raster",tiles:["https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"Tiles \xa9 Esri \u2014 Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"},googleSatellite:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"],tileSize:256,maxzoom:21,attribution:"\xa9 Google Maps"},argenMap:{type:"raster",tiles:["https://wms.ign.gob.ar/geoserver/gwc/service/tms/1.0.0/capabaseargenmap@EPSG%3A3857@png/{z}/{x}/{y}.png"],tileSize:256,maxzoom:21,attribution:"\xa9 IGN Argentina",scheme:"tms"},googleMaps:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"],tileSize:256,maxzoom:21,attribution:"\xa9 Google Maps"},googleHybrid:{type:"raster",tiles:["https://mt1.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}"],tileSize:256,maxzoom:21,attribution:"\xa9 Google Maps"},esriTransportation:{type:"raster",tiles:["https://server.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}"],tileSize:256,attribution:"\xa9 Esri"},comisarias:{type:"geojson",data:"assets/json/comisarias.geojson"},escuelas:{type:"geojson",data:"assets/json/escuelas.geojson"},partidos:{type:"geojson",data:"assets/json/partidos.geojson"},hidro:{type:"geojson",data:"assets/json/hidro.geojson"},localidades:{type:"geojson",data:"assets/json/localidades.geojson"},provincias:{type:"geojson",data:"assets/json/provincias.geojson"},rutas:{type:"geojson",data:"assets/json/rutas.geojson"}}}getLayers(){return[{id:"osm-tiles",type:"raster",source:"osm"},{id:"esri-satellite-tiles",type:"raster",source:"esriWorldImagery",layout:{visibility:"none"}},{id:"google-satellite-tiles",type:"raster",source:"googleSatellite",layout:{visibility:"none"}},{id:"argenmap-tiles",type:"raster",source:"argenMap",layout:{visibility:"none"}},{id:"google-maps-tiles",type:"raster",source:"googleMaps",layout:{visibility:"none"}},{id:"google-hybrid-tiles",type:"raster",source:"googleHybrid",layout:{visibility:"none"}},{id:"esri-transportation-tiles",type:"raster",source:"esriTransportation",layout:{visibility:"none"}},{id:"comisarias",type:"circle",source:"comisarias",layout:{visibility:"none"},paint:{"circle-radius":6,"circle-color":"#00b300","circle-stroke-width":2,"circle-stroke-color":"#ffffff"}},{id:"escuelas",type:"circle",source:"escuelas",layout:{visibility:"none"},paint:{"circle-radius":6,"circle-color":"#b37400ff","circle-stroke-width":2,"circle-stroke-color":"#ffffff"}},{id:"partidos",type:"fill",source:"partidos",layout:{visibility:"none"},paint:{"fill-color":"#3388ff","fill-opacity":.3,"fill-outline-color":"#2255aa"}},{id:"hidro",type:"line",source:"hidro",layout:{visibility:"none"},paint:{"line-color":"#0000ff","line-width":2}},{id:"localidades",type:"circle",source:"localidades",layout:{visibility:"none"},paint:{"circle-radius":6,"circle-color":"rgba(44, 187, 0, 1)"}},{id:"provincias",type:"fill",source:"provincias",layout:{visibility:"none"},paint:{"fill-color":"#3388ff","fill-opacity":.3,"fill-outline-color":"#aa2276ff"}},{id:"rutas",type:"line",source:"rutas",layout:{visibility:"none"},paint:{"line-color":"#ff0000","line-width":2}}]}layerMetadata=[{id:"osm-tiles",sourceId:"osm",displayName:"OpenStreetMap",enabled:!0},{id:"esri-satellite-tiles",sourceId:"esriWorldImagery",displayName:"Sat\xe9lite (Esri)",enabled:!0},{id:"argenmap-tiles",sourceId:"argenMap",displayName:"ArgenMap (IGN)",enabled:!0},{id:"google-maps-tiles",sourceId:"googleMaps",displayName:"Google Maps",enabled:!0},{id:"google-hybrid-tiles",sourceId:"googleHybrid",displayName:"Google H\xedbrido",enabled:!0},{id:"google-satellite-tiles",sourceId:"googleSatellite",displayName:"Google Sat\xe9lite",enabled:!0},{id:"esri-transportation-tiles",sourceId:"esriTransportation",displayName:"Esri Transporte",enabled:!0}];overlayMetadata=[{id:"comisarias",sourceId:"comisarias",displayName:"Comisar\xedas",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"escuelas",sourceId:"escuelas",displayName:"Escuelas",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"partidos",sourceId:"partidos",displayName:"Partidos",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"hidro",sourceId:"hidro",displayName:"Hidrograf\xeda",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"localidades",sourceId:"localidades",displayName:"Localidades",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"provincias",sourceId:"provincias",displayName:"Provincias",enabled:!0,visible:!1,crs:"EPSG:4326"},{id:"rutas",sourceId:"rutas",displayName:"Rutas",enabled:!0,visible:!1,crs:"EPSG:4326"}];getAvailableOverlays(){return this.overlayMetadata.filter(t=>t.enabled)}getMapStyle(){return{version:8,sources:this.getSources(),layers:this.getLayers()}}static \u0275fac=function(r){return new(r||e)(kt(Pde))};static \u0275prov=at({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();const Rde=["mapContainer"];let Nde=(()=>{class e{layersService;mapContainer;map;currentLayerId="";availableLayers=[];availableOverlays=[];constructor(t){this.layersService=t}items;ngOnInit(){this.availableLayers=this.layersService.getAvailableLayers(),this.availableOverlays=this.layersService.getAvailableOverlays(),this.currentLayerId=this.layersService.getDefaultLayer(),this.items=[{label:"Capas base",icon:"pi pi-map",items:this.availableLayers.map(t=>({label:t.displayName,icon:"pi pi-map",id:t.id,command:()=>this.switchToLayer(t.id)}))},{label:"Capas superpuestas",icon:"pi pi-images",items:this.availableOverlays.map(t=>({label:t.displayName,icon:"pi pi-image",id:t.id,command:()=>this.toggleOverlay(t.id,!t.visible)}))}],this.initializeMap()}initializeMap(){var t=this;return Jl(function*(){const r=t.layersService.getMapStyle();t.map=new U1.Map({container:t.mapContainer.nativeElement,style:r,center:[-58.3816,-34.6037],zoom:5,attributionControl:!1}),t.map.addControl(new U1.NavigationControl({visualizePitch:!0}),"top-right"),t.map.addControl(new U1.AttributionControl,"bottom-left"),t.map.on("click",i=>{const a=t.availableOverlays.filter(M=>"visible"===t.map.getLayoutProperty(M.id,"visibility")).map(M=>M.id);if(0===a.length)return;const d=t.map.queryRenderedFeatures(i.point,{layers:a});if(!d.length)return;const _=d[0].properties;let S="<table>";for(const M in _)S+=`<tr><th style="text-align:left; padding-right:8px;">${M}</th><td>${_[M]}</td></tr>`;S+="</table>",(new U1.Popup).setLngLat(i.lngLat).setHTML(S).addTo(t.map)})})()}switchToLayer(t){this.map&&(this.availableLayers.forEach(r=>{this.map.setLayoutProperty(r.id,"visibility","none")}),this.map.setLayoutProperty(t,"visibility","visible"),this.currentLayerId=t)}toggleOverlay(t,r){if(!this.map)return;this.map.setLayoutProperty(t,"visibility",r?"visible":"none");const i=this.availableOverlays.find(a=>a.id===t);i&&(i.visible=r)}ngOnDestroy(){this.map?.remove()}static \u0275fac=function(r){return new(r||e)(Xt(Ade))};static \u0275cmp=ra({type:e,selectors:[["app-mapa"]],viewQuery:function(r,i){if(1&r&&l0(Rde,7),2&r){let a;la(a=ca())&&(i.mapContainer=a.first)}},decls:5,vars:1,consts:[["mapContainer",""],[1,"mapa-overlay-layout"],[1,"map-container"],[1,"menu-overlay"],[1,"w-full","md:w-20rem",3,"model"]],template:function(r,i){1&r&&(Pr(0,"div",1),Er(1,"div",2,0),Pr(3,"div",3),Er(4,"p-panelmenu",4),ti()()),2&r&&(bt(4),st("model",i.items))},dependencies:[roe,Ese,mT],styles:["[_nghost-%COMP%]   .mapa-overlay-layout[_ngcontent-%COMP%]{position:relative;width:100vw;height:100vh}.menu-overlay[_ngcontent-%COMP%]{position:absolute;top:25px;left:10px;z-index:1000}[_nghost-%COMP%]{display:block;width:100%;height:100vh}.map-container[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]     .maplibregl-popup-content{background:#23272f;color:#fff;border-radius:10px;font-size:1.1em;box-shadow:0 2px 12px #00000040;padding:16px 20px;max-width:740px;min-width:420px;overflow-x:auto;word-break:break-word}[_nghost-%COMP%]     .maplibregl-popup-tip{border-top-color:#23272f!important}[_nghost-%COMP%]     .maplibregl-popup-content table{width:100%;border-collapse:collapse}[_nghost-%COMP%]     .maplibregl-popup-content th, [_nghost-%COMP%]     .maplibregl-popup-content td{padding:4px 8px;border-bottom:1px solid #444}[_nghost-%COMP%]     .maplibregl-popup-content th{font-weight:700;color:#90caf9;background:transparent}[_nghost-%COMP%]     .maplibregl-popup-content tr:last-child td{border-bottom:none}"]})}return e})();(function x9(e,n){return Yj({rootComponent:e,...tA(n)})})((()=>{class e{title="mapLibre";static \u0275fac=function(r){return new(r||e)};static \u0275cmp=ra({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(r,i){1&r&&Er(0,"app-mapa")},dependencies:[Nde],encapsulation:2})}return e})(),fie).catch(e=>console.error(e))},44:function(cm){cm.exports=function(){"use strict";var $d={},Dc={};function Bu(W,y,gt){if(Dc[W]=gt,"index"===W){var kl="var sharedModule = {}; ("+Dc.shared+")(sharedModule); ("+Dc.worker+")(sharedModule);",Xi={};return Dc.shared(Xi),Dc.index($d,Xi),typeof window<"u"&&$d.setWorkerUrl(window.URL.createObjectURL(new Blob([kl],{type:"text/javascript"}))),$d}}return Bu("shared",0,function(W){function y(c,s,l,h){return new(l||(l=Promise))(function(g,x){function w(A){try{T(h.next(A))}catch(N){x(N)}}function C(A){try{T(h.throw(A))}catch(N){x(N)}}function T(A){var N;A.done?g(A.value):(N=A.value,N instanceof l?N:new l(function(B){B(N)})).then(w,C)}T((h=h.apply(c,s||[])).next())})}function gt(c,s){this.x=c,this.y=s}function kl(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Xi,ma;"function"==typeof SuppressedError&&SuppressedError,gt.prototype={clone(){return new gt(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,s){return this.clone()._rotateAround(c,s)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const s=c.x-this.x,l=c.y-this.y;return s*s+l*l},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,s){return Math.atan2(this.x*s-this.y*c,this.x*c+this.y*s)},_matMult(c){const s=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=s,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const s=Math.cos(c),l=Math.sin(c),h=l*this.x+s*this.y;return this.x=s*this.x-l*this.y,this.y=h,this},_rotateAround(c,s){const l=Math.cos(c),h=Math.sin(c),g=s.y+h*(this.x-s.x)+l*(this.y-s.y);return this.x=s.x+l*(this.x-s.x)-h*(this.y-s.y),this.y=g,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:gt},gt.convert=function(c){if(c instanceof gt)return c;if(Array.isArray(c))return new gt(+c[0],+c[1]);if(void 0!==c.x&&void 0!==c.y)return new gt(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var Re=kl(function(){if(ma)return Xi;function c(s,l,h,g){this.cx=3*s,this.bx=3*(h-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=h,this.p2y=g}return ma=1,Xi=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(void 0===l&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var h=s,g=0;g<8;g++){var x=this.sampleCurveX(h)-s;if(Math.abs(x)<l)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=x/w}var C=0,T=1;for(h=s,g=0;g<20&&(x=this.sampleCurveX(h),!(Math.abs(x-s)<l));g++)s>x?C=h:T=h,h=.5*(T-C)+C;return h},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},Xi}());let Ns,Vo;function Yn(){return null==Ns&&(Ns=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),Ns}function zt(){if(null==Vo&&(Vo=!1,Yn())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let h=0;h<25;h++){const g=4*h;s.fillStyle=`rgb(${g},${g+1},${g+2})`,s.fillRect(h%5,Math.floor(h/5),1,1)}const l=s.getImageData(0,0,5,5).data;for(let h=0;h<100;h++)if(h%4!=3&&l[h]!==h){Vo=!0;break}}}return Vo||!1}var Tr=1e-6,ni=typeof Float32Array<"u"?Float32Array:Array;function Uo(){var c=new ni(9);return ni!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function Ls(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function xo(){var c=new ni(3);return ni!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function kc(c){return Math.hypot(c[0],c[1],c[2])}function Qa(c,s,l){var h=new ni(3);return h[0]=c,h[1]=s,h[2]=l,h}function Pc(c,s,l){return c[0]=s[0]+l[0],c[1]=s[1]+l[1],c[2]=s[2]+l[2],c}function $o(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c[2]=s[2]*l,c}function Ja(c,s,l){var h=s[0],g=s[1],x=s[2],w=l[0],C=l[1],T=l[2];return c[0]=g*T-x*C,c[1]=x*w-h*T,c[2]=h*C-g*w,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var wo,So=kc;function _a(c,s,l){var h=s[0],g=s[1],x=s[2],w=s[3];return c[0]=l[0]*h+l[4]*g+l[8]*x+l[12]*w,c[1]=l[1]*h+l[5]*g+l[9]*x+l[13]*w,c[2]=l[2]*h+l[6]*g+l[10]*x+l[14]*w,c[3]=l[3]*h+l[7]*g+l[11]*x+l[15]*w,c}function Os(){var c=new ni(4);return ni!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function ds(c,s,l,h){var g=.5*Math.PI/180;s*=g,l*=g,h*=g;var x=Math.sin(s),w=Math.cos(s),C=Math.sin(l),T=Math.cos(l),A=Math.sin(h),N=Math.cos(h);return c[0]=x*T*N-w*C*A,c[1]=w*C*N+x*T*A,c[2]=w*T*A-x*C*N,c[3]=w*T*N+x*C*A,c}function el(){var c=new ni(2);return ni!=Float32Array&&(c[0]=0,c[1]=0),c}function Ac(c,s){var l=new ni(2);return l[0]=c,l[1]=s,l}xo(),wo=new ni(4),ni!=Float32Array&&(wo[0]=0,wo[1]=0,wo[2]=0,wo[3]=0),xo(),Qa(1,0,0),Qa(0,1,0),Os(),Os(),Uo(),el();const En=8192;function ya(c,s,l){return s*(En/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function Qi(c,s){return(c%s+s)%s}function Pl(c,s,l){return c*(1-l)+s*l}function Fs(c){if(c<=0)return 0;if(c>=1)return 1;const s=c*c,l=s*c;return 4*(c<.5?l:3*(c-s)+l-.75)}function ho(c,s,l,h){const g=new Re(c,s,l,h);return x=>g.solve(x)}const Go=ho(.25,.1,.25,1);function Nr(c,s,l){return Math.min(l,Math.max(s,c))}function Rc(c,s,l){const h=l-s,g=((c-s)%h+h)%h+s;return g===s?l:g}function Ho(c,...s){for(const l of s)for(const h in l)c[h]=l[h];return c}let qo=1;function Al(c,s,l){const h={};for(const g in c)h[g]=s.call(this,c[g],g,c);return h}function Nc(c,s,l){const h={};for(const g in c)s.call(this,c[g],g,c)&&(h[g]=c[g]);return h}function Li(c){return Array.isArray(c)?c.map(Li):"object"==typeof c&&c?Al(c,Li):c}const Ir={};function Wr(c){Ir[c]||(typeof console<"u"&&console.warn(c),Ir[c]=!0)}function hs(c,s,l){return(l.y-c.y)*(s.x-c.x)>(s.y-c.y)*(l.x-c.x)}function Eo(c){return typeof WorkerGlobalScope<"u"&&void 0!==c&&c instanceof WorkerGlobalScope}let tl=null;function va(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Wo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Lc(c,s,l,h,g){return y(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const x=new VideoFrame(c,{timestamp:0});try{const w=x?.format;if(!w||!w.startsWith("BGR")&&!w.startsWith("RGB"))throw new Error(`Unrecognized format ${w}`);const C=w.startsWith("BGR"),T=new Uint8ClampedArray(h*g*4);if(yield x.copyTo(T,function(A,N,B,V,$){const H=4*Math.max(-N,0),K=(Math.max(0,B)-B)*V*4+H,te=4*V,ie=Math.max(0,N),xe=Math.max(0,B);return{rect:{x:ie,y:xe,width:Math.min(A.width,N+V)-ie,height:Math.min(A.height,B+$)-xe},layout:[{offset:K,stride:te}]}}(c,s,l,h,g)),C)for(let A=0;A<T.length;A+=4){const N=T[A];T[A]=T[A+2],T[A+2]=N}return T}finally{x.close()}})}let An,Bs;function zs(c,s,l,h){return c.addEventListener(s,l,h),{unsubscribe:()=>{c.removeEventListener(s,l,h)}}}function ba(c){return c*Math.PI/180}function Mr(c){return c/Math.PI*180}const xa={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},wa={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Rl="AbortError";function ye(){return new Error(Rl)}const Z={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Y(c){return Z.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const X="global-dispatcher";class ce extends Error{constructor(s,l,h,g){super(`AJAXError: ${l} (${s}): ${h}`),this.status=s,this.statusText=l,this.url=h,this.body=g}}const me=()=>Eo(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,Se=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const h=Y(c.url);if(h)return h(c,s);if(Eo(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:X},s)}if(!(/^file:/.test(l=c.url)||/^file:/.test(me())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,g){return y(this,void 0,void 0,function*(){const x=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:me(),signal:g.signal});let w,C;"json"!==h.type||x.headers.has("Accept")||x.headers.set("Accept","application/json");try{w=yield fetch(x)}catch(A){throw new ce(0,A.message,h.url,new Blob)}if(!w.ok){const A=yield w.blob();throw new ce(w.status,w.statusText,h.url,A)}C="arrayBuffer"===h.type||"image"===h.type?w.arrayBuffer():"json"===h.type?w.json():w.text();const T=yield C;if(g.signal.aborted)throw ye();return{data:T,cacheControl:w.headers.get("Cache-Control"),expires:w.headers.get("Expires")}})}(c,s);if(Eo(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:X},s)}var l,h,g;return h=c,g=s,new Promise((x,w)=>{var C;const T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),"arrayBuffer"!==h.type&&"image"!==h.type||(T.responseType="arraybuffer");for(const A in h.headers)T.setRequestHeader(A,h.headers[A]);"json"===h.type&&(T.responseType="text",!(null===(C=h.headers)||void 0===C)&&C.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials="include"===h.credentials,T.onerror=()=>{w(new Error(T.statusText))},T.onload=()=>{if(!g.signal.aborted)if((T.status>=200&&T.status<300||0===T.status)&&null!==T.response){let A=T.response;if("json"===h.type)try{A=JSON.parse(T.response)}catch(N){return void w(N)}x({data:A,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{const A=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});w(new ce(T.status,T.statusText,h.url,A))}},g.signal.addEventListener("abort",()=>{T.abort(),w(ye())}),T.send(h.body)})};function De(c){if(!c||c.indexOf("://")<=0||0===c.indexOf("data:image/")||0===c.indexOf("blob:"))return!0;const s=new URL(c),l=window.location;return s.protocol===l.protocol&&s.host===l.host}function ve(c,s,l){l[c]&&-1!==l[c].indexOf(s)||(l[c]=l[c]||[],l[c].push(s))}function Oe(c,s,l){if(l&&l[c]){const h=l[c].indexOf(s);-1!==h&&l[c].splice(h,1)}}class Ge{constructor(s,l={}){Ho(this,l),this.type=s}}class je extends Ge{constructor(s,l={}){super("error",Ho({error:s},l))}}class yt{on(s,l){return this._listeners=this._listeners||{},ve(s,l,this._listeners),{unsubscribe:()=>{this.off(s,l)}}}off(s,l){return Oe(s,l,this._listeners),Oe(s,l,this._oneTimeListeners),this}once(s,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ve(s,l,this._oneTimeListeners),this):new Promise(h=>this.once(s,h))}fire(s,l){"string"==typeof s&&(s=new Ge(s,l||{}));const h=s.type;if(this.listens(h)){s.target=this;const g=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const C of g)C.call(this,s);const x=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const C of x)Oe(h,C,this._oneTimeListeners),C.call(this,s);const w=this._eventedParent;w&&(Ho(s,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),w.fire(s))}else s instanceof je&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,l){return this._eventedParent=s,this._eventedParentData=l,this}}var Ee={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Ut=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function sn(c,s){const l={};for(const h in c)"ref"!==h&&(l[h]=c[h]);return Ut.forEach(h=>{h in s&&(l[h]=s[h])}),l}function St(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let l=0;l<c.length;l++)if(!St(c[l],s[l]))return!1;return!0}if("object"==typeof c&&null!==c&&null!==s){if("object"!=typeof s||Object.keys(c).length!==Object.keys(s).length)return!1;for(const l in c)if(!St(c[l],s[l]))return!1;return!0}return c===s}function Qt(c,s){c.push(s)}function Un(c,s,l){Qt(l,{command:"addSource",args:[c,s[c]]})}function ri(c,s,l){Qt(s,{command:"removeSource",args:[c]}),l[c]=!0}function Lr(c,s,l,h){ri(c,l,h),Un(c,s,l)}function Zn(c,s,l){let h;for(h in c[l])if(Object.prototype.hasOwnProperty.call(c[l],h)&&"data"!==h&&!St(c[l][h],s[l][h]))return!1;for(h in s[l])if(Object.prototype.hasOwnProperty.call(s[l],h)&&"data"!==h&&!St(c[l][h],s[l][h]))return!1;return!0}function un(c,s,l,h,g,x){c=c||{},s=s||{};for(const w in c)Object.prototype.hasOwnProperty.call(c,w)&&(St(c[w],s[w])||l.push({command:x,args:[h,w,s[w],g]}));for(const w in s)Object.prototype.hasOwnProperty.call(s,w)&&!Object.prototype.hasOwnProperty.call(c,w)&&(St(c[w],s[w])||l.push({command:x,args:[h,w,s[w],g]}))}function mn(c){return c.id}function _n(c,s){return c[s.id]=s,c}class Ze{constructor(s,l,h,g){this.message=(s?`${s}: `:"")+h,g&&(this.identifier=g),null!=l&&l.__line__&&(this.line=l.__line__)}}function Oi(c,...s){for(const l of s)for(const h in l)c[h]=l[h];return c}class _r extends Error{constructor(s,l){super(l),this.message=l,this.key=s}}class nl{constructor(s,l=[]){this.parent=s,this.bindings={};for(const[h,g]of l)this.bindings[h]=g}concat(s){return new nl(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const ii={kind:"null"},ot={kind:"number"},jt={kind:"string"},an={kind:"boolean"},mi={kind:"color"},Le={kind:"projectionDefinition"},rl={kind:"object"},Lt={kind:"value"},tr={kind:"collator"},Nl={kind:"formatted"},ef={kind:"padding"},dn={kind:"colorArray"},Oc={kind:"numberArray"},Cn={kind:"resolvedImage"},Fc={kind:"variableAnchorOffsetCollection"};function Co(c,s){return{kind:"array",itemType:c,N:s}}function Gn(c){if("array"===c.kind){const s=Gn(c.itemType);return"number"==typeof c.N?`array<${s}, ${c.N}>`:"value"===c.itemType.kind?"array":`array<${s}>`}return c.kind}const zu=[ii,ot,jt,an,mi,Le,Nl,rl,Co(Lt),ef,Oc,dn,Cn,Fc];function Yt(c,s){if("error"===s.kind)return null;if("array"===c.kind){if("array"===s.kind&&(0===s.N&&"value"===s.itemType.kind||!Yt(c.itemType,s.itemType))&&("number"!=typeof c.N||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if("value"===c.kind)for(const l of zu)if(!Yt(l,s))return null}return`Expected ${Gn(c)} but found ${Gn(s)} instead.`}function Bc(c,s){return s.some(l=>l.kind===c.kind)}function Zr(c,s){return s.some(l=>"null"===l?null===c:"array"===l?Array.isArray(c):"object"===l?c&&!Array.isArray(c)&&"object"==typeof c:l===typeof c)}function Ll(c,s){return"array"===c.kind&&"array"===s.kind?c.itemType.kind===s.itemType.kind&&"number"==typeof c.N:c.kind===s.kind}const Sa=4/29,ju=6/29,hm=3*ju*ju,gy=ju*ju*ju,fm=Math.PI/180,pm=180/Math.PI;function yp(c){return(c%=360)<0&&(c+=360),c}function zc([c,s,l,h]){let g,x;const w=_i((.2225045*(c=vp(c))+.7168786*(s=vp(s))+.0606169*(l=vp(l)))/1);c===s&&s===l?g=x=w:(g=_i((.4360747*c+.3850649*s+.1430804*l)/.96422),x=_i((.0139322*c+.0971045*s+.7141733*l)/.82521));const C=116*w-16;return[C<0?0:C,500*(g-w),200*(w-x),h]}function vp(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function _i(c){return c>gy?Math.pow(c,1/3):c/hm+Sa}function It([c,s,l,h]){let g=(c+16)/116,x=isNaN(s)?g:g+s/500,w=isNaN(l)?g:g-l/200;return g=1*xp(g),x=.96422*xp(x),w=.82521*xp(w),[bp(3.1338561*x-1.6168667*g-.4906146*w),bp(-.9787684*x+1.9161415*g+.033454*w),bp(.0719453*x-.2289914*g+1.4052427*w),h]}function bp(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function xp(c){return c>ju?c*c*c:hm*(c-Sa)}const gm=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function Vu(c,s){return gm(c,s)?c[s]:void 0}function Gd(c){return parseInt(c.padEnd(2,c),16)/255}function at(c,s){return hn(s?c/100:c,0,1)}function hn(c,s,l){return Math.min(Math.max(s,c),l)}function Fi(c){return!c.some(Number.isNaN)}const fs={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ea(c,s,l){return c+l*(s-c)}function Ol(c,s,l){return c.map((h,g)=>Ea(h,s[g],l))}class ln{constructor(s,l,h,g=1,x=!0){this.r=s,this.g=l,this.b=h,this.a=g,x||(this.r*=g,this.g*=g,this.b*=g,g||this.overwriteGetter("rgb",[s,l,h,g]))}static parse(s){if(s instanceof ln)return s;if("string"!=typeof s)return;const l=function(h){if("transparent"===(h=h.toLowerCase().trim()))return[0,0,0,0];const g=Vu(fs,h);if(g){const[w,C,T]=g;return[w/255,C/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){const w=h.length<6?1:2;let C=1;return[Gd(h.slice(C,C+=w)),Gd(h.slice(C,C+=w)),Gd(h.slice(C,C+=w)),Gd(h.slice(C,C+w)||"ff")]}if(h.startsWith("rgb")){const w=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[C,T,A,N,B,V,$,H,K,te,ie,xe]=w,he=[N||" ",$||" ",te].join("");if("  "===he||"  /"===he||",,"===he||",,,"===he){const pe=[A,V,K].join(""),Me="%%%"===pe?100:""===pe?255:0;if(Me){const Ne=[hn(+T/Me,0,1),hn(+B/Me,0,1),hn(+H/Me,0,1),ie?at(+ie,xe):1];if(Fi(Ne))return Ne}}return}}const x=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[w,C,T,A,N,B,V,$,H]=x,K=[T||" ",N||" ",V].join("");if("  "===K||"  /"===K||",,"===K||",,,"===K){const te=[+C,hn(+A,0,100),hn(+B,0,100),$?at(+$,H):1];if(Fi(te))return function([ie,xe,he,pe]){function Me(Ne){const Ve=(Ne+ie/30)%12,rt=xe*Math.min(he,1-he);return he-rt*Math.max(-1,Math.min(Ve-3,9-Ve,1))}return ie=yp(ie),xe/=100,he/=100,[Me(0),Me(8),Me(4),pe]}(te)}}}(s);return l?new ln(...l,!1):void 0}get rgb(){const{r:s,g:l,b:h,a:g}=this,x=g||1/0;return this.overwriteGetter("rgb",[s/x,l/x,h/x,g])}get hcl(){return this.overwriteGetter("hcl",function(s){const[l,h,g,x]=zc(s),w=Math.sqrt(h*h+g*g);return[Math.round(1e4*w)?yp(Math.atan2(g,h)*pm):NaN,w,l,x]}(this.rgb))}get lab(){return this.overwriteGetter("lab",zc(this.rgb))}overwriteGetter(s,l){return Object.defineProperty(this,s,{value:l}),l}toString(){const[s,l,h,g]=this.rgb;return`rgba(${[s,l,h].map(x=>Math.round(255*x)).join(",")},${g})`}static interpolate(s,l,h,g="rgb"){switch(g){case"rgb":{const[x,w,C,T]=Ol(s.rgb,l.rgb,h);return new ln(x,w,C,T,!1)}case"hcl":{const[x,w,C,T]=s.hcl,[A,N,B,V]=l.hcl;let $,H;if(isNaN(x)||isNaN(A))isNaN(x)?isNaN(A)?$=NaN:($=A,1!==C&&0!==C||(H=N)):($=x,1!==B&&0!==B||(H=w));else{let he=A-x;A>x&&he>180?he-=360:A<x&&x-A>180&&(he+=360),$=x+h*he}const[K,te,ie,xe]=function([he,pe,Me,Ne]){return he=isNaN(he)?0:he*fm,It([Me,Math.cos(he)*pe,Math.sin(he)*pe,Ne])}([$,H??Ea(w,N,h),Ea(C,B,h),Ea(T,V,h)]);return new ln(K,te,ie,xe,!1)}case"lab":{const[x,w,C,T]=It(Ol(s.lab,l.lab,h));return new ln(x,w,C,T,!1)}}}}ln.black=new ln(0,0,0,1),ln.white=new ln(1,1,1,1),ln.transparent=new ln(0,0,0,0),ln.red=new ln(1,0,0,1);class js{constructor(s,l,h){this.sensitivity=s?l?"variant":"case":l?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,l){return this.collator.compare(s,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Fl=["bottom","center","top"];class jc{constructor(s,l,h,g,x,w){this.text=s,this.image=l,this.scale=h,this.fontStack=g,this.textColor=x,this.verticalAlign=w}}class Ye{constructor(s){this.sections=s}static fromString(s){return new Ye([new jc(s,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(s=>0!==s.text.length||s.image&&0!==s.image.name.length)}static factory(s){return s instanceof Ye?s:Ye.fromString(s)}toString(){return 0===this.sections.length?"":this.sections.map(s=>s.text).join("")}}class Kr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Kr)return s;if("number"==typeof s)return new Kr([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const l of s)if("number"!=typeof l)return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Kr(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,h){return new Kr(Ol(s.values,l.values,h))}}class oi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof oi)return s;if("number"==typeof s)return new oi([s]);if(Array.isArray(s)){for(const l of s)if("number"!=typeof l)return;return new oi(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,h){return new oi(Ol(s.values,l.values,h))}}class yr{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof yr)return s;if("string"==typeof s){const h=ln.parse(s);return h?new yr([h]):void 0}if(!Array.isArray(s))return;const l=[];for(const h of s){if("string"!=typeof h)return;const g=ln.parse(h);if(!g)return;l.push(g)}return new yr(l)}toString(){return JSON.stringify(this.values)}static interpolate(s,l,h,g="rgb"){const x=[];if(s.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let w=0;w<s.values.length;w++)x.push(ln.interpolate(s.values[w],l.values[w],h,g));return new yr(x)}}class Tn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const wp=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ji{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Ji)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let l=0;l<s.length;l+=2){const h=s[l],g=s[l+1];if("string"!=typeof h||!wp.has(h)||!Array.isArray(g)||2!==g.length||"number"!=typeof g[0]||"number"!=typeof g[1])return}return new Ji(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,l,h){const g=s.values,x=l.values;if(g.length!==x.length)throw new Tn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${l.toString()}`);const w=[];for(let C=0;C<g.length;C+=2){if(g[C]!==x[C])throw new Tn(`Cannot interpolate values containing mismatched anchors. from[${C}]: ${g[C]}, to[${C}]: ${x[C]}`);w.push(g[C]);const[T,A]=g[C+1],[N,B]=x[C+1];w.push([Ea(T,N,h),Ea(A,B,h)])}return new Ji(w)}}class To{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new To({name:s,available:!1}):null}}class Yr{constructor(s,l,h){this.from=s,this.to=l,this.transition=h}static interpolate(s,l,h){return new Yr(s,l,h)}static parse(s){return s instanceof Yr?s:Array.isArray(s)&&3===s.length&&"string"==typeof s[0]&&"string"==typeof s[1]&&"number"==typeof s[2]?new Yr(s[0],s[1],s[2]):"object"==typeof s&&"string"==typeof s.from&&"string"==typeof s.to&&"number"==typeof s.transition?new Yr(s.from,s.to,s.transition):"string"==typeof s?new Yr(s,s,1):void 0}}function nr(c,s,l,h){return"number"==typeof c&&c>=0&&c<=255&&"number"==typeof s&&s>=0&&s<=255&&"number"==typeof l&&l>=0&&l<=255?void 0===h||"number"==typeof h&&h>=0&&h<=1?null:`Invalid rgba value [${[c,s,l,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof h?[c,s,l,h]:[c,s,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Vc(c){if(null===c||"string"==typeof c||"boolean"==typeof c||"number"==typeof c||c instanceof Yr||c instanceof ln||c instanceof js||c instanceof Ye||c instanceof Kr||c instanceof oi||c instanceof yr||c instanceof Ji||c instanceof To)return!0;if(Array.isArray(c)){for(const s of c)if(!Vc(s))return!1;return!0}if("object"==typeof c){for(const s in c)if(!Vc(c[s]))return!1;return!0}return!1}function Ot(c){if(null===c)return ii;if("string"==typeof c)return jt;if("boolean"==typeof c)return an;if("number"==typeof c)return ot;if(c instanceof ln)return mi;if(c instanceof Yr)return Le;if(c instanceof js)return tr;if(c instanceof Ye)return Nl;if(c instanceof Kr)return ef;if(c instanceof oi)return Oc;if(c instanceof yr)return dn;if(c instanceof Ji)return Fc;if(c instanceof To)return Cn;if(Array.isArray(c)){const s=c.length;let l;for(const h of c){const g=Ot(h);if(l){if(l===g)continue;l=Lt;break}l=g}return Co(l||Lt,s)}return rl}function Jt(c){const s=typeof c;return null===c?"":"string"===s||"number"===s||"boolean"===s?String(c):c instanceof ln||c instanceof Yr||c instanceof Ye||c instanceof Kr||c instanceof oi||c instanceof yr||c instanceof Ji||c instanceof To?c.toString():JSON.stringify(c)}class Ca{constructor(s,l){this.type=s,this.value=l}static parse(s,l){if(2!==s.length)return l.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!Vc(s[1]))return l.error("invalid value");const h=s[1];let g=Ot(h);const x=l.expectedType;return"array"!==g.kind||0!==g.N||!x||"array"!==x.kind||"number"==typeof x.N&&0!==x.N||(g=x),new Ca(g,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const xn={string:jt,number:ot,boolean:an,object:rl};class eo{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let h,g=1;const x=s[0];if("array"===x){let C,T;if(s.length>2){const A=s[1];if("string"!=typeof A||!(A in xn)||"object"===A)return l.error('The item type argument of "array" must be one of string, number, boolean',1);C=xn[A],g++}else C=Lt;if(s.length>3){if(null!==s[2]&&("number"!=typeof s[2]||s[2]<0||s[2]!==Math.floor(s[2])))return l.error('The length argument to "array" must be a positive integer literal',2);T=s[2],g++}h=Co(C,T)}else{if(!xn[x])throw new Error(`Types doesn't contain name = ${x}`);h=xn[x]}const w=[];for(;g<s.length;g++){const C=l.parse(s[g],g,Lt);if(!C)return null;w.push(C)}return new eo(h,w)}evaluate(s){for(let l=0;l<this.args.length;l++){const h=this.args[l].evaluate(s);if(!Yt(this.type,Ot(h)))return h;if(l===this.args.length-1)throw new Tn(`Expected value to be of type ${Gn(this.type)}, but found ${Gn(Ot(h))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Zo={"to-boolean":an,"to-color":mi,"to-number":ot,"to-string":jt};class Vs{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const h=s[0];if(!Zo[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if(("to-boolean"===h||"to-string"===h)&&2!==s.length)return l.error("Expected one argument.");const g=Zo[h],x=[];for(let w=1;w<s.length;w++){const C=l.parse(s[w],w,Lt);if(!C)return null;x.push(C)}return new Vs(g,x)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let l,h;for(const g of this.args){if(l=g.evaluate(s),h=null,l instanceof ln)return l;if("string"==typeof l){const x=s.parseColor(l);if(x)return x}else if(Array.isArray(l)&&(h=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:nr(l[0],l[1],l[2],l[3]),!h))return new ln(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Tn(h||`Could not parse color from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const h of this.args){l=h.evaluate(s);const g=Kr.parse(l);if(g)return g}throw new Tn(`Could not parse padding from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const h of this.args){l=h.evaluate(s);const g=oi.parse(l);if(g)return g}throw new Tn(`Could not parse numberArray from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const h of this.args){l=h.evaluate(s);const g=yr.parse(l);if(g)return g}throw new Tn(`Could not parse colorArray from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const h of this.args){l=h.evaluate(s);const g=Ji.parse(l);if(g)return g}throw new Tn(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof l?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const h of this.args){if(l=h.evaluate(s),null===l)return 0;const g=Number(l);if(!isNaN(g))return g}throw new Tn(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return Ye.fromString(Jt(this.args[0].evaluate(s)));case"resolvedImage":return To.fromString(Jt(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return Jt(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Hd=["Unknown","Point","LineString","Polygon"];class qd{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Hd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let l=this._parseColorCache.get(s);return l||(l=ln.parse(s),this._parseColorCache.set(s,l)),l}}class Ko{constructor(s,l,h=[],g,x=new nl,w=[]){this.registry=s,this.path=h,this.key=h.map(C=>`[${C}]`).join(""),this.scope=x,this.errors=w,this.expectedType=g,this._isConstant=l}parse(s,l,h,g,x={}){return l?this.concat(l,h,g)._parse(s,x):this._parse(s,x)}_parse(s,l){function h(g,x,w){return"assert"===w?new eo(x,[g]):"coerce"===w?new Vs(x,[g]):g}if(null!==s&&"string"!=typeof s&&"boolean"!=typeof s&&"number"!=typeof s||(s=["literal",s]),Array.isArray(s)){if(0===s.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=s[0];if("string"!=typeof g)return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const x=this.registry[g];if(x){let w=x.parse(s,this);if(!w)return null;if(this.expectedType){const C=this.expectedType,T=w.type;if("string"!==C.kind&&"number"!==C.kind&&"boolean"!==C.kind&&"object"!==C.kind&&"array"!==C.kind||"value"!==T.kind){if("projectionDefinition"===C.kind&&["string","array"].includes(T.kind)||["color","formatted","resolvedImage"].includes(C.kind)&&["value","string"].includes(T.kind)||["padding","numberArray"].includes(C.kind)&&["value","number","array"].includes(T.kind)||"colorArray"===C.kind&&["value","string","array"].includes(T.kind)||"variableAnchorOffsetCollection"===C.kind&&["value","array"].includes(T.kind))w=h(w,C,l.typeAnnotation||"coerce");else if(this.checkSubtype(C,T))return null}else w=h(w,C,l.typeAnnotation||"assert")}if(!(w instanceof Ca)&&"resolvedImage"!==w.type.kind&&this._isConstant(w)){const C=new qd;try{w=new Ca(w.type,w.evaluate(C))}catch(T){return this.error(T.message),null}}return w}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===s?"'undefined' value invalid. Use null instead.":"object"==typeof s?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,l,h){const g="number"==typeof s?this.path.concat(s):this.path,x=h?this.scope.concat(h):this.scope;return new Ko(this.registry,this._isConstant,g,l||null,x,this.errors)}error(s,...l){const h=`${this.key}${l.map(g=>`[${g}]`).join("")}`;this.errors.push(new _r(h,s))}checkSubtype(s,l){const h=Yt(s,l);return h&&this.error(h),h}}class Ta{constructor(s,l){this.type=l.type,this.bindings=[].concat(s),this.result=l}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const l of this.bindings)s(l[1]);s(this.result)}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const h=[];for(let x=1;x<s.length-1;x+=2){const w=s[x];if("string"!=typeof w)return l.error(`Expected string, but found ${typeof w} instead.`,x);if(/[^a-zA-Z0-9_]/.test(w))return l.error("Variable names must contain only alphanumeric characters or '_'.",x);const C=l.parse(s[x+1],x+1);if(!C)return null;h.push([w,C])}const g=l.parse(s[s.length-1],s.length-1,l.expectedType,h);return g?new Ta(h,g):null}outputDefined(){return this.result.outputDefined()}}class Uu{constructor(s,l){this.type=l.type,this.name=s,this.boundExpression=l}static parse(s,l){if(2!==s.length||"string"!=typeof s[1])return l.error("'var' expression requires exactly one string literal argument.");const h=s[1];return l.scope.has(h)?new Uu(h,l.scope.get(h)):l.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Zt{constructor(s,l,h){this.type=s,this.index=l,this.input=h}static parse(s,l){if(3!==s.length)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const h=l.parse(s[1],1,ot),g=l.parse(s[2],2,Co(l.expectedType||Lt));return h&&g?new Zt(g.type.itemType,h,g):null}evaluate(s){const l=this.index.evaluate(s),h=this.input.evaluate(s);if(l<0)throw new Tn(`Array index out of bounds: ${l} < 0.`);if(l>=h.length)throw new Tn(`Array index out of bounds: ${l} > ${h.length-1}.`);if(l!==Math.floor(l))throw new Tn(`Array index must be an integer, but found ${l} instead.`);return h[l]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class yn{constructor(s,l){this.type=an,this.needle=s,this.haystack=l}static parse(s,l){if(3!==s.length)return l.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const h=l.parse(s[1],1,Lt),g=l.parse(s[2],2,Lt);return h&&g?Bc(h.type,[an,jt,ot,ii,Lt])?new yn(h,g):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(h.type)} instead`):null}evaluate(s){const l=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!h)return!1;if(!Zr(l,["boolean","string","number","null"]))throw new Tn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(Ot(l))} instead.`);if(!Zr(h,["string","array"]))throw new Tn(`Expected second argument to be of type array or string, but found ${Gn(Ot(h))} instead.`);return h.indexOf(l)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class Us{constructor(s,l,h){this.type=ot,this.needle=s,this.haystack=l,this.fromIndex=h}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const h=l.parse(s[1],1,Lt),g=l.parse(s[2],2,Lt);if(!h||!g)return null;if(!Bc(h.type,[an,jt,ot,ii,Lt]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(h.type)} instead`);if(4===s.length){const x=l.parse(s[3],3,ot);return x?new Us(h,g,x):null}return new Us(h,g)}evaluate(s){const l=this.needle.evaluate(s),h=this.haystack.evaluate(s);if(!Zr(l,["boolean","string","number","null"]))throw new Tn(`Expected first argument to be of type boolean, string, number or null, but found ${Gn(Ot(l))} instead.`);let g;if(this.fromIndex&&(g=this.fromIndex.evaluate(s)),Zr(h,["string"])){const x=h.indexOf(l,g);return-1===x?-1:[...h.slice(0,x)].length}if(Zr(h,["array"]))return h.indexOf(l,g);throw new Tn(`Expected second argument to be of type array or string, but found ${Gn(Ot(h))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class yi{constructor(s,l,h,g,x,w){this.inputType=s,this.type=l,this.input=h,this.cases=g,this.outputs=x,this.otherwise=w}static parse(s,l){if(s.length<5)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return l.error("Expected an even number of arguments.");let h,g;l.expectedType&&"value"!==l.expectedType.kind&&(g=l.expectedType);const x={},w=[];for(let A=2;A<s.length-1;A+=2){let N=s[A];const B=s[A+1];Array.isArray(N)||(N=[N]);const V=l.concat(A);if(0===N.length)return V.error("Expected at least one branch label.");for(const H of N){if("number"!=typeof H&&"string"!=typeof H)return V.error("Branch labels must be numbers or strings.");if("number"==typeof H&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof H&&Math.floor(H)!==H)return V.error("Numeric branch labels must be integer values.");if(h){if(V.checkSubtype(h,Ot(H)))return null}else h=Ot(H);if(void 0!==x[String(H)])return V.error("Branch labels must be unique.");x[String(H)]=w.length}const $=l.parse(B,A,g);if(!$)return null;g=g||$.type,w.push($)}const C=l.parse(s[1],1,Lt);if(!C)return null;const T=l.parse(s[s.length-1],s.length-1,g);return T?"value"!==C.type.kind&&l.concat(1).checkSubtype(h,C.type)?null:new yi(h,g,C,x,w,T):null}evaluate(s){const l=this.input.evaluate(s);return(Ot(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class il{constructor(s,l,h){this.type=s,this.branches=l,this.otherwise=h}static parse(s,l){if(s.length<4)return l.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return l.error("Expected an odd number of arguments.");let h;l.expectedType&&"value"!==l.expectedType.kind&&(h=l.expectedType);const g=[];for(let w=1;w<s.length-1;w+=2){const C=l.parse(s[w],w,an);if(!C)return null;const T=l.parse(s[w+1],w+1,h);if(!T)return null;g.push([C,T]),h=h||T.type}const x=l.parse(s[s.length-1],s.length-1,h);if(!x)return null;if(!h)throw new Error("Can't infer output type");return new il(h,g,x)}evaluate(s){for(const[l,h]of this.branches)if(l.evaluate(s))return h.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[l,h]of this.branches)s(l),s(h);s(this.otherwise)}outputDefined(){return this.branches.every(([s,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Uc{constructor(s,l,h,g){this.type=s,this.input=l,this.beginIndex=h,this.endIndex=g}static parse(s,l){if(s.length<=2||s.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const h=l.parse(s[1],1,Lt),g=l.parse(s[2],2,ot);if(!h||!g)return null;if(!Bc(h.type,[Co(Lt),jt,Lt]))return l.error(`Expected first argument to be of type array or string, but found ${Gn(h.type)} instead`);if(4===s.length){const x=l.parse(s[3],3,ot);return x?new Uc(h.type,h,g,x):null}return new Uc(h.type,h,g)}evaluate(s){const l=this.input.evaluate(s),h=this.beginIndex.evaluate(s);let g;if(this.endIndex&&(g=this.endIndex.evaluate(s)),Zr(l,["string"]))return[...l].slice(h,g).join("");if(Zr(l,["array"]))return l.slice(h,g);throw new Tn(`Expected first argument to be of type array or string, but found ${Gn(Ot(l))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function ps(c,s){const l=c.length-1;let h,g,x=0,w=l,C=0;for(;x<=w;)if(C=Math.floor((x+w)/2),h=c[C],g=c[C+1],h<=s){if(C===l||s<g)return C;x=C+1}else{if(!(h>s))throw new Tn("Input is not a number.");w=C-1}return 0}class ur{constructor(s,l,h){this.type=s,this.input=l,this.labels=[],this.outputs=[];for(const[g,x]of h)this.labels.push(g),this.outputs.push(x)}static parse(s,l){if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");const h=l.parse(s[1],1,ot);if(!h)return null;const g=[];let x=null;l.expectedType&&"value"!==l.expectedType.kind&&(x=l.expectedType);for(let w=1;w<s.length;w+=2){const C=1===w?-1/0:s[w],T=s[w+1],A=w,N=w+1;if("number"!=typeof C)return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(g.length&&g[g.length-1][0]>=C)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const B=l.parse(T,N,x);if(!B)return null;x=x||B.type,g.push([C,B])}return new ur(x,h,g)}evaluate(s){const l=this.labels,h=this.outputs;if(1===l.length)return h[0].evaluate(s);const g=this.input.evaluate(s);if(g<=l[0])return h[0].evaluate(s);const x=l.length;return g>=l[x-1]?h[x-1].evaluate(s):h[ps(l,g)].evaluate(s)}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}var Wd,nf,$c=function mm(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}(function(){if(nf)return Wd;function c(s,l,h,g){this.cx=3*s,this.bx=3*(h-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(g-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=l,this.p2x=h,this.p2y=g}return nf=1,Wd=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,l){if(void 0===l&&(l=1e-6),s<0)return 0;if(s>1)return 1;for(var h=s,g=0;g<8;g++){var x=this.sampleCurveX(h)-s;if(Math.abs(x)<l)return h;var w=this.sampleCurveDerivativeX(h);if(Math.abs(w)<1e-6)break;h-=x/w}var C=0,T=1;for(h=s,g=0;g<20&&(x=this.sampleCurveX(h),!(Math.abs(x-s)<l));g++)s>x?C=h:T=h,h=.5*(T-C)+C;return h},solve:function(s,l){return this.sampleCurveY(this.solveCurveX(s,l))}},Wd}());class vi{constructor(s,l,h,g,x){this.type=s,this.operator=l,this.interpolation=h,this.input=g,this.labels=[],this.outputs=[];for(const[w,C]of x)this.labels.push(w),this.outputs.push(C)}static interpolationFactor(s,l,h,g){let x=0;if("exponential"===s.name)x=Gc(l,s.base,h,g);else if("linear"===s.name)x=Gc(l,1,h,g);else if("cubic-bezier"===s.name){const w=s.controlPoints;x=new $c(w[0],w[1],w[2],w[3]).solve(Gc(l,1,h,g))}return x}static parse(s,l){let[h,g,x,...w]=s;if(!Array.isArray(g)||0===g.length)return l.error("Expected an interpolation type expression.",1);if("linear"===g[0])g={name:"linear"};else if("exponential"===g[0]){const A=g[1];if("number"!=typeof A)return l.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:A}}else{if("cubic-bezier"!==g[0])return l.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const A=g.slice(1);if(4!==A.length||A.some(N=>"number"!=typeof N||N<0||N>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:A}}}if(s.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(x=l.parse(x,2,ot),!x)return null;const C=[];let T=null;"interpolate-hcl"!==h&&"interpolate-lab"!==h||l.expectedType==dn?l.expectedType&&"value"!==l.expectedType.kind&&(T=l.expectedType):T=mi;for(let A=0;A<w.length;A+=2){const N=w[A],B=w[A+1],V=A+3,$=A+4;if("number"!=typeof N)return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(C.length&&C[C.length-1][0]>=N)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const H=l.parse(B,$,T);if(!H)return null;T=T||H.type,C.push([N,H])}return Ll(T,ot)||Ll(T,Le)||Ll(T,mi)||Ll(T,ef)||Ll(T,Oc)||Ll(T,dn)||Ll(T,Fc)||Ll(T,Co(ot))?new vi(T,h,g,x,C):l.error(`Type ${Gn(T)} is not interpolatable.`)}evaluate(s){const l=this.labels,h=this.outputs;if(1===l.length)return h[0].evaluate(s);const g=this.input.evaluate(s);if(g<=l[0])return h[0].evaluate(s);const x=l.length;if(g>=l[x-1])return h[x-1].evaluate(s);const w=ps(l,g),C=vi.interpolationFactor(this.interpolation,g,l[w],l[w+1]),T=h[w].evaluate(s),A=h[w+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ea(T,A,C);case"color":return ln.interpolate(T,A,C);case"padding":return Kr.interpolate(T,A,C);case"colorArray":return yr.interpolate(T,A,C);case"numberArray":return oi.interpolate(T,A,C);case"variableAnchorOffsetCollection":return Ji.interpolate(T,A,C);case"array":return Ol(T,A,C);case"projectionDefinition":return Yr.interpolate(T,A,C)}case"interpolate-hcl":switch(this.type.kind){case"color":return ln.interpolate(T,A,C,"hcl");case"colorArray":return yr.interpolate(T,A,C,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ln.interpolate(T,A,C,"lab");case"colorArray":return yr.interpolate(T,A,C,"lab")}}}eachChild(s){s(this.input);for(const l of this.outputs)s(l)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Gc(c,s,l,h){const g=h-l,x=c-l;return 0===g?0:1===s?x/g:(Math.pow(s,x)-1)/(Math.pow(s,g)-1)}const $s={color:ln.interpolate,number:Ea,padding:Kr.interpolate,numberArray:oi.interpolate,colorArray:yr.interpolate,variableAnchorOffsetCollection:Ji.interpolate,array:Ol};class $u{constructor(s,l){this.type=s,this.args=l}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");let h=null;const g=l.expectedType;g&&"value"!==g.kind&&(h=g);const x=[];for(const C of s.slice(1)){const T=l.parse(C,1+x.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,x.push(T)}if(!h)throw new Error("No output type");const w=g&&x.some(C=>Yt(g,C.type));return new $u(w?Lt:h,x)}evaluate(s){let l,h=null,g=0;for(const x of this.args)if(g++,h=x.evaluate(s),h&&h instanceof To&&!h.available&&(l||(l=h.name),h=null,g===this.args.length&&(h=l)),null!==h)break;return h}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function Bl(c,s){return"=="===c||"!="===c?"boolean"===s.kind||"string"===s.kind||"number"===s.kind||"null"===s.kind||"value"===s.kind:"string"===s.kind||"number"===s.kind||"value"===s.kind}function Hc(c,s,l,h){return 0===h.compare(s,l)}function $n(c,s,l){const h="=="!==c&&"!="!==c;return class yO{constructor(x,w,C){this.type=an,this.lhs=x,this.rhs=w,this.collator=C,this.hasUntypedArgument="value"===x.type.kind||"value"===w.type.kind}static parse(x,w){if(3!==x.length&&4!==x.length)return w.error("Expected two or three arguments.");const C=x[0];let T=w.parse(x[1],1,Lt);if(!T)return null;if(!Bl(C,T.type))return w.concat(1).error(`"${C}" comparisons are not supported for type '${Gn(T.type)}'.`);let A=w.parse(x[2],2,Lt);if(!A)return null;if(!Bl(C,A.type))return w.concat(2).error(`"${C}" comparisons are not supported for type '${Gn(A.type)}'.`);if(T.type.kind!==A.type.kind&&"value"!==T.type.kind&&"value"!==A.type.kind)return w.error(`Cannot compare types '${Gn(T.type)}' and '${Gn(A.type)}'.`);h&&("value"===T.type.kind&&"value"!==A.type.kind?T=new eo(A.type,[T]):"value"!==T.type.kind&&"value"===A.type.kind&&(A=new eo(T.type,[A])));let N=null;if(4===x.length){if("string"!==T.type.kind&&"string"!==A.type.kind&&"value"!==T.type.kind&&"value"!==A.type.kind)return w.error("Cannot use collator to compare non-string types.");if(N=w.parse(x[3],3,tr),!N)return null}return new yO(T,A,N)}evaluate(x){const w=this.lhs.evaluate(x),C=this.rhs.evaluate(x);if(h&&this.hasUntypedArgument){const T=Ot(w),A=Ot(C);if(T.kind!==A.kind||"string"!==T.kind&&"number"!==T.kind)throw new Tn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${T.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const T=Ot(w),A=Ot(C);if("string"!==T.kind||"string"!==A.kind)return s(x,w,C)}return this.collator?l(x,w,C,this.collator.evaluate(x)):s(x,w,C)}eachChild(x){x(this.lhs),x(this.rhs),this.collator&&x(this.collator)}outputDefined(){return!0}}}const sf=$n("==",function(c,s,l){return s===l},Hc),af=$n("!=",function(c,s,l){return s!==l},function(c,s,l,h){return!Hc(0,s,l,h)}),my=$n("<",function(c,s,l){return s<l},function(c,s,l,h){return h.compare(s,l)<0}),Ia=$n(">",function(c,s,l){return s>l},function(c,s,l,h){return h.compare(s,l)>0}),lf=$n("<=",function(c,s,l){return s<=l},function(c,s,l,h){return h.compare(s,l)<=0}),_m=$n(">=",function(c,s,l){return s>=l},function(c,s,l,h){return h.compare(s,l)>=0});class Zd{constructor(s,l,h){this.type=tr,this.locale=h,this.caseSensitive=s,this.diacriticSensitive=l}static parse(s,l){if(2!==s.length)return l.error("Expected one argument.");const h=s[1];if("object"!=typeof h||Array.isArray(h))return l.error("Collator options argument must be an object.");const g=l.parse(void 0!==h["case-sensitive"]&&h["case-sensitive"],1,an);if(!g)return null;const x=l.parse(void 0!==h["diacritic-sensitive"]&&h["diacritic-sensitive"],1,an);if(!x)return null;let w=null;return h.locale&&(w=l.parse(h.locale,1,jt),!w)?null:new Zd(g,x,w)}evaluate(s){return new js(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class kt{constructor(s,l,h,g,x){this.type=jt,this.number=s,this.locale=l,this.currency=h,this.minFractionDigits=g,this.maxFractionDigits=x}static parse(s,l){if(3!==s.length)return l.error("Expected two arguments.");const h=l.parse(s[1],1,ot);if(!h)return null;const g=s[2];if("object"!=typeof g||Array.isArray(g))return l.error("NumberFormat options argument must be an object.");let x=null;if(g.locale&&(x=l.parse(g.locale,1,jt),!x))return null;let w=null;if(g.currency&&(w=l.parse(g.currency,1,jt),!w))return null;let C=null;if(g["min-fraction-digits"]&&(C=l.parse(g["min-fraction-digits"],1,ot),!C))return null;let T=null;return g["max-fraction-digits"]&&(T=l.parse(g["max-fraction-digits"],1,ot),!T)?null:new kt(h,x,w,C,T)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class ol{constructor(s){this.type=Nl,this.sections=s}static parse(s,l){if(s.length<2)return l.error("Expected at least one argument.");const h=s[1];if(!Array.isArray(h)&&"object"==typeof h)return l.error("First argument must be an image or text section.");const g=[];let x=!1;for(let w=1;w<=s.length-1;++w){const C=s[w];if(x&&"object"==typeof C&&!Array.isArray(C)){x=!1;let T=null;if(C["font-scale"]&&(T=l.parse(C["font-scale"],1,ot),!T))return null;let A=null;if(C["text-font"]&&(A=l.parse(C["text-font"],1,Co(jt)),!A))return null;let N=null;if(C["text-color"]&&(N=l.parse(C["text-color"],1,mi),!N))return null;let B=null;if(C["vertical-align"]){if("string"==typeof C["vertical-align"]&&!Fl.includes(C["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${C["vertical-align"]}' instead.`);if(B=l.parse(C["vertical-align"],1,jt),!B)return null}const V=g[g.length-1];V.scale=T,V.font=A,V.textColor=N,V.verticalAlign=B}else{const T=l.parse(s[w],1,Lt);if(!T)return null;const A=T.type.kind;if("string"!==A&&"value"!==A&&"null"!==A&&"resolvedImage"!==A)return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");x=!0,g.push({content:T,scale:null,font:null,textColor:null,verticalAlign:null})}}return new ol(g)}evaluate(s){return new Ye(this.sections.map(l=>{const h=l.content.evaluate(s);return Ot(h)===Cn?new jc("",h,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(s):null):new jc(Jt(h),null,l.scale?l.scale.evaluate(s):null,l.font?l.font.evaluate(s).join(","):null,l.textColor?l.textColor.evaluate(s):null,l.verticalAlign?l.verticalAlign.evaluate(s):null)}))}eachChild(s){for(const l of this.sections)s(l.content),l.scale&&s(l.scale),l.font&&s(l.font),l.textColor&&s(l.textColor),l.verticalAlign&&s(l.verticalAlign)}outputDefined(){return!1}}class Fe{constructor(s){this.type=Cn,this.input=s}static parse(s,l){if(2!==s.length)return l.error("Expected two arguments.");const h=l.parse(s[1],1,jt);return h?new Fe(h):l.error("No image name provided.")}evaluate(s){const l=this.input.evaluate(s),h=To.fromString(l);return h&&s.availableImages&&(h.available=s.availableImages.indexOf(l)>-1),h}eachChild(s){s(this.input)}outputDefined(){return!1}}class sl{constructor(s){this.type=ot,this.input=s}static parse(s,l){if(2!==s.length)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const h=l.parse(s[1],1);return h?"array"!==h.type.kind&&"string"!==h.type.kind&&"value"!==h.type.kind?l.error(`Expected argument of type string or array, but found ${Gn(h.type)} instead.`):new sl(h):null}evaluate(s){const l=this.input.evaluate(s);if("string"==typeof l)return[...l].length;if(Array.isArray(l))return l.length;throw new Tn(`Expected value to be of type string or array, but found ${Gn(Ot(l))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const gs=8192;function cf(c,s){const l=(180+c[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,g=Math.pow(2,s.z);return[Math.round(l*g*gs),Math.round(h*g*gs)]}function al(c,s){const l=Math.pow(2,s.z);return[(g=(c[0]/gs+s.x)/l,360*g-180),(h=(c[1]/gs+s.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,g}function Gu(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function ms(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function ym(c,s,l){const h=c[0]-s[0],g=c[1]-s[1],x=c[0]-l[0],w=c[1]-l[1];return h*w-x*g==0&&h*x<=0&&g*w<=0}function to(c,s,l,h){return(g=[h[0]-l[0],h[1]-l[1]])[0]*(x=[s[0]-c[0],s[1]-c[1]])[1]-g[1]*x[0]!=0&&!(!uf(c,s,l,h)||!uf(l,h,c,s));var g,x}function qc(c,s,l){for(const h of l)for(let g=0;g<h.length-1;++g)if(to(c,s,h[g],h[g+1]))return!0;return!1}function ll(c,s,l=!1){let h=!1;for(const C of s)for(let T=0;T<C.length-1;T++){if(ym(c,C[T],C[T+1]))return l;(x=C[T])[1]>(g=c)[1]!=(w=C[T+1])[1]>g[1]&&g[0]<(w[0]-x[0])*(g[1]-x[1])/(w[1]-x[1])+x[0]&&(h=!h)}var g,x,w;return h}function Hu(c,s){for(const l of s)if(ll(c,l))return!0;return!1}function Wc(c,s){for(const l of c)if(!ll(l,s))return!1;for(let l=0;l<c.length-1;++l)if(qc(c[l],c[l+1],s))return!1;return!0}function Sp(c,s){for(const l of s)if(Wc(c,l))return!0;return!1}function uf(c,s,l,h){const g=h[0]-l[0],x=h[1]-l[1],w=(c[0]-l[0])*x-g*(c[1]-l[1]),C=(s[0]-l[0])*x-g*(s[1]-l[1]);return w>0&&C<0||w<0&&C>0}function Zc(c,s,l){const h=[];for(let g=0;g<c.length;g++){const x=[];for(let w=0;w<c[g].length;w++){const C=cf(c[g][w],l);Gu(s,C),x.push(C)}h.push(x)}return h}function Kd(c,s,l){const h=[];for(let g=0;g<c.length;g++){const x=Zc(c[g],s,l);h.push(x)}return h}function cl(c,s,l,h){if(c[0]<l[0]||c[0]>l[2]){const g=.5*h;let x=c[0]-l[0]>g?-h:l[0]-c[0]>g?h:0;0===x&&(x=c[0]-l[2]>g?-h:l[2]-c[0]>g?h:0),c[0]+=x}Gu(s,c)}function Ep(c,s,l,h){const g=Math.pow(2,h.z)*gs,x=[h.x*gs,h.y*gs],w=[];for(const C of c)for(const T of C){const A=[T.x+x[0],T.y+x[1]];cl(A,s,l,g),w.push(A)}return w}function _s(c,s,l,h){const g=Math.pow(2,h.z)*gs,x=[h.x*gs,h.y*gs],w=[];for(const T of c){const A=[];for(const N of T){const B=[N.x+x[0],N.y+x[1]];Gu(s,B),A.push(B)}w.push(A)}if(s[2]-s[0]<=g/2){(C=s)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(const T of w)for(const A of T)cl(A,s,l,g)}var C;return w}class Rn{constructor(s,l){this.type=an,this.geojson=s,this.geometries=l}static parse(s,l){if(2!==s.length)return l.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Vc(s[1])){const h=s[1];if("FeatureCollection"===h.type){const g=[];for(const x of h.features){const{type:w,coordinates:C}=x.geometry;"Polygon"===w&&g.push(C),"MultiPolygon"===w&&g.push(...C)}if(g.length)return new Rn(h,{type:"MultiPolygon",coordinates:g})}else if("Feature"===h.type){const g=h.geometry.type;if("Polygon"===g||"MultiPolygon"===g)return new Rn(h,h.geometry)}else if("Polygon"===h.type||"MultiPolygon"===h.type)return new Rn(h,h)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(l,h){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if("Polygon"===h.type){const C=Zc(h.coordinates,x,w),T=Ep(l.geometry(),g,x,w);if(!ms(g,x))return!1;for(const A of T)if(!ll(A,C))return!1}if("MultiPolygon"===h.type){const C=Kd(h.coordinates,x,w),T=Ep(l.geometry(),g,x,w);if(!ms(g,x))return!1;for(const A of T)if(!Hu(A,C))return!1}return!0}(s,this.geometries);if("LineString"===s.geometryType())return function(l,h){const g=[1/0,1/0,-1/0,-1/0],x=[1/0,1/0,-1/0,-1/0],w=l.canonicalID();if("Polygon"===h.type){const C=Zc(h.coordinates,x,w),T=_s(l.geometry(),g,x,w);if(!ms(g,x))return!1;for(const A of T)if(!Wc(A,C))return!1}if("MultiPolygon"===h.type){const C=Kd(h.coordinates,x,w),T=_s(l.geometry(),g,x,w);if(!ms(g,x))return!1;for(const A of T)if(!Sp(A,C))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Gs=class{constructor(c=[],s=(l,h)=>l<h?-1:l>h?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(0===this.length)return;const c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:s,compare:l}=this,h=s[c];for(;c>0;){const g=c-1>>1,x=s[g];if(l(h,x)>=0)break;s[c]=x,c=g}s[c]=h}_down(c){const{data:s,compare:l}=this,h=this.length>>1,g=s[c];for(;c<h;){let x=1+(c<<1);const w=x+1;if(w<this.length&&l(s[w],s[x])<0&&(x=w),l(s[x],g)>=0)break;s[c]=s[x],c=x}s[c]=g}};function Yd(c,s,l=0,h=c.length-1,g=Xd){for(;h>l;){if(h-l>600){const T=h-l+1,A=s-l+1,N=Math.log(T),B=.5*Math.exp(2*N/3),V=.5*Math.sqrt(N*B*(T-B)/T)*(A-T/2<0?-1:1);Yd(c,s,Math.max(l,Math.floor(s-A*B/T+V)),Math.min(h,Math.floor(s+(T-A)*B/T+V)),g)}const x=c[s];let w=l,C=h;for(zl(c,l,s),g(c[h],x)>0&&zl(c,l,h);w<C;){for(zl(c,w,C),w++,C--;g(c[w],x)<0;)w++;for(;g(c[C],x)>0;)C--}0===g(c[l],x)?zl(c,l,C):(C++,zl(c,C,h)),C<=s&&(l=C+1),s<=C&&(h=C-1)}}function zl(c,s,l){const h=c[s];c[s]=c[l],c[l]=h}function Xd(c,s){return c<s?-1:c>s?1:0}function fo(c,s){if(c.length<=1)return[c];const l=[];let h,g;for(const x of c){const w=Ln(x);0!==w&&(x.area=Math.abs(w),void 0===g&&(g=w<0),g===w<0?(h&&l.push(h),h=[x]):h.push(x))}if(h&&l.push(h),s>1)for(let x=0;x<l.length;x++)l[x].length<=s||(Yd(l[x],s,1,l[x].length-1,Qd),l[x]=l[x].slice(0,s));return l}function Qd(c,s){return s.area-c.area}function Ln(c){let s=0;for(let l,h,g=0,x=c.length,w=x-1;g<x;w=g++)l=c[g],h=c[w],s+=(h.x-l.x)*(l.y+h.y);return s}const vm=1/298.257223563,Bi=vm*(2-vm),Io=Math.PI/180;class ul{constructor(s){const l=6378.137*Io*1e3,h=Math.cos(s*Io),g=1/(1-Bi*(1-h*h)),x=Math.sqrt(g);this.kx=l*x*h,this.ky=l*x*g*(1-Bi)}distance(s,l){const h=this.wrap(s[0]-l[0])*this.kx,g=(s[1]-l[1])*this.ky;return Math.sqrt(h*h+g*g)}pointOnLine(s,l){let h,g,x,w,C=1/0;for(let T=0;T<s.length-1;T++){let A=s[T][0],N=s[T][1],B=this.wrap(s[T+1][0]-A)*this.kx,V=(s[T+1][1]-N)*this.ky,$=0;0===B&&0===V||($=(this.wrap(l[0]-A)*this.kx*B+(l[1]-N)*this.ky*V)/(B*B+V*V),$>1?(A=s[T+1][0],N=s[T+1][1]):$>0&&(A+=B/this.kx*$,N+=V/this.ky*$)),B=this.wrap(l[0]-A)*this.kx,V=(l[1]-N)*this.ky;const H=B*B+V*V;H<C&&(C=H,h=A,g=N,x=T,w=$)}return{point:[h,g],index:x,t:Math.max(0,Math.min(1,w))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function jl(c,s){return s[0]-c[0]}function Jd(c){return c[1]-c[0]+1}function Ma(c,s){return c[1]>=c[0]&&c[1]<s}function wn(c,s){if(c[0]>c[1])return[null,null];const l=Jd(c);if(s){if(2===l)return[c,null];const g=Math.floor(l/2);return[[c[0],c[0]+g],[c[0]+g,c[1]]]}if(1===l)return[c,null];const h=Math.floor(l/2)-1;return[[c[0],c[0]+h],[c[0]+h+1,c[1]]]}function eh(c,s){if(!Ma(s,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let h=s[0];h<=s[1];++h)Gu(l,c[h]);return l}function Kc(c){const s=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const h of l)Gu(s,h);return s}function bm(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function qu(c,s,l){if(!bm(c)||!bm(s))return NaN;let h=0,g=0;return c[2]<s[0]&&(h=s[0]-c[2]),c[0]>s[2]&&(h=c[0]-s[2]),c[1]>s[3]&&(g=c[1]-s[3]),c[3]<s[1]&&(g=s[1]-c[3]),l.distance([0,0],[h,g])}function Vl(c,s,l){const h=l.pointOnLine(s,c);return l.distance(c,h.point)}function Wu(c,s,l,h,g){const x=Math.min(Vl(c,[l,h],g),Vl(s,[l,h],g)),w=Math.min(Vl(l,[c,s],g),Vl(h,[c,s],g));return Math.min(x,w)}function Cp(c,s,l,h,g){if(!Ma(s,c.length)||!Ma(h,l.length))return 1/0;let x=1/0;for(let w=s[0];w<s[1];++w){const C=c[w],T=c[w+1];for(let A=h[0];A<h[1];++A){const N=l[A],B=l[A+1];if(to(C,T,N,B))return 0;x=Math.min(x,Wu(C,T,N,B,g))}}return x}function Tp(c,s,l,h,g){if(!Ma(s,c.length)||!Ma(h,l.length))return NaN;let x=1/0;for(let w=s[0];w<=s[1];++w)for(let C=h[0];C<=h[1];++C)if(x=Math.min(x,g.distance(c[w],l[C])),0===x)return x;return x}function Da(c,s,l){if(ll(c,s,!0))return 0;let h=1/0;for(const g of s){const x=g[0],w=g[g.length-1];if(x!==w&&(h=Math.min(h,Vl(c,[w,x],l)),0===h))return h;const C=l.pointOnLine(g,c);if(h=Math.min(h,l.distance(c,C.point)),0===h)return h}return h}function Ip(c,s,l,h){if(!Ma(s,c.length))return NaN;for(let x=s[0];x<=s[1];++x)if(ll(c[x],l,!0))return 0;let g=1/0;for(let x=s[0];x<s[1];++x){const w=c[x],C=c[x+1];for(const T of l)for(let A=0,N=T.length,B=N-1;A<N;B=A++){const V=T[B],$=T[A];if(to(w,C,V,$))return 0;g=Math.min(g,Wu(w,C,V,$,h))}}return g}function th(c,s){for(const l of c)for(const h of l)if(ll(h,s,!0))return!0;return!1}function nh(c,s,l,h=1/0){const g=Kc(c),x=Kc(s);if(h!==1/0&&qu(g,x,l)>=h)return h;if(ms(g,x)){if(th(c,s))return 0}else if(th(s,c))return 0;let w=1/0;for(const C of c)for(let T=0,A=C.length,N=A-1;T<A;N=T++){const B=C[N],V=C[T];for(const $ of s)for(let H=0,K=$.length,te=K-1;H<K;te=H++){const ie=$[te],xe=$[H];if(to(B,V,ie,xe))return 0;w=Math.min(w,Wu(B,V,ie,xe,l))}}return w}function df(c,s,l,h,g,x){if(!x)return;const w=qu(eh(h,x),g,l);w<s&&c.push([w,x,[0,0]])}function Yc(c,s,l,h,g,x,w){if(!x||!w)return;const C=qu(eh(h,x),eh(g,w),l);C<s&&c.push([C,x,w])}function Xc(c,s,l,h,g=1/0){let x=Math.min(h.distance(c[0],l[0][0]),g);if(0===x)return x;const w=new Gs([[0,[0,c.length-1],[0,0]]],jl),C=Kc(l);for(;w.length>0;){const T=w.pop();if(T[0]>=x)continue;const A=T[1],N=s?50:100;if(Jd(A)<=N){if(!Ma(A,c.length))return NaN;if(s){const B=Ip(c,A,l,h);if(isNaN(B)||0===B)return B;x=Math.min(x,B)}else for(let B=A[0];B<=A[1];++B){const V=Da(c[B],l,h);if(x=Math.min(x,V),0===x)return 0}}else{const B=wn(A,s);df(w,x,h,c,C,B[0]),df(w,x,h,c,C,B[1])}}return x}function si(c,s,l,h,g,x=1/0){let w=Math.min(x,g.distance(c[0],l[0]));if(0===w)return w;const C=new Gs([[0,[0,c.length-1],[0,l.length-1]]],jl);for(;C.length>0;){const T=C.pop();if(T[0]>=w)continue;const A=T[1],N=T[2],B=s?50:100,V=h?50:100;if(Jd(A)<=B&&Jd(N)<=V){if(!Ma(A,c.length)&&Ma(N,l.length))return NaN;let $;if(s&&h)$=Cp(c,A,l,N,g),w=Math.min(w,$);else if(s&&!h){const H=c.slice(A[0],A[1]+1);for(let K=N[0];K<=N[1];++K)if($=Vl(l[K],H,g),w=Math.min(w,$),0===w)return w}else if(!s&&h){const H=l.slice(N[0],N[1]+1);for(let K=A[0];K<=A[1];++K)if($=Vl(c[K],H,g),w=Math.min(w,$),0===w)return w}else $=Tp(c,A,l,N,g),w=Math.min(w,$)}else{const $=wn(A,s),H=wn(N,h);Yc(C,w,g,c,l,$[0],H[0]),Yc(C,w,g,c,l,$[0],H[1]),Yc(C,w,g,c,l,$[1],H[0]),Yc(C,w,g,c,l,$[1],H[1])}}return w}function ka(c){return"MultiPolygon"===c.type?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):"MultiLineString"===c.type?c.coordinates.map(s=>({type:"LineString",coordinates:s})):"MultiPoint"===c.type?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class Pa{constructor(s,l){this.type=ot,this.geojson=s,this.geometries=l}static parse(s,l){if(2!==s.length)return l.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(Vc(s[1])){const h=s[1];if("FeatureCollection"===h.type)return new Pa(h,h.features.map(g=>ka(g.geometry)).flat());if("Feature"===h.type)return new Pa(h,ka(h.geometry));if("type"in h&&"coordinates"in h)return new Pa(h,ka(h))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(null!=s.geometry()&&null!=s.canonicalID()){if("Point"===s.geometryType())return function(l,h){const g=l.geometry(),x=g.flat().map(T=>al([T.x,T.y],l.canonical));if(0===g.length)return NaN;const w=new ul(x[0][1]);let C=1/0;for(const T of h){switch(T.type){case"Point":C=Math.min(C,si(x,!1,[T.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,si(x,!1,T.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Xc(x,!1,T.coordinates,w,C))}if(0===C)return C}return C}(s,this.geometries);if("LineString"===s.geometryType())return function(l,h){const g=l.geometry(),x=g.flat().map(T=>al([T.x,T.y],l.canonical));if(0===g.length)return NaN;const w=new ul(x[0][1]);let C=1/0;for(const T of h){switch(T.type){case"Point":C=Math.min(C,si(x,!0,[T.coordinates],!1,w,C));break;case"LineString":C=Math.min(C,si(x,!0,T.coordinates,!0,w,C));break;case"Polygon":C=Math.min(C,Xc(x,!0,T.coordinates,w,C))}if(0===C)return C}return C}(s,this.geometries);if("Polygon"===s.geometryType())return function(l,h){const g=l.geometry();if(0===g.length||0===g[0].length)return NaN;const x=fo(g,0).map(T=>T.map(A=>A.map(N=>al([N.x,N.y],l.canonical)))),w=new ul(x[0][0][0][1]);let C=1/0;for(const T of h)for(const A of x){switch(T.type){case"Point":C=Math.min(C,Xc([T.coordinates],!1,A,w,C));break;case"LineString":C=Math.min(C,Xc(T.coordinates,!0,A,w,C));break;case"Polygon":C=Math.min(C,nh(A,T.coordinates,w,C))}if(0===C)return C}return C}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Zu{constructor(s){this.type=Lt,this.key=s}static parse(s,l){if(2!==s.length)return l.error(`Expected 1 argument, but found ${s.length-1} instead.`);const h=s[1];return null==h?l.error("Global state property must be defined."):"string"!=typeof h?l.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new Zu(h)}evaluate(s){var l;const h=null===(l=s.globals)||void 0===l?void 0:l.globalState;return h&&0!==Object.keys(h).length?Vu(h,this.key):null}eachChild(){}outputDefined(){return!1}}const Qc={"==":sf,"!=":af,">":Ia,"<":my,">=":_m,"<=":lf,array:eo,at:Zt,boolean:eo,case:il,coalesce:$u,collator:Zd,format:ol,image:Fe,in:yn,"index-of":Us,interpolate:vi,"interpolate-hcl":vi,"interpolate-lab":vi,length:sl,let:Ta,literal:Ca,match:yi,number:eo,"number-format":kt,object:eo,slice:Uc,step:ur,string:eo,"to-boolean":Vs,"to-color":Vs,"to-number":Vs,"to-string":Vs,var:Uu,within:Rn,distance:Pa,"global-state":Zu};class Mo{constructor(s,l,h,g){this.name=s,this.type=l,this._evaluate=h,this.args=g}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,l){const h=s[0],g=Mo.definitions[h];if(!g)return l.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const x=Array.isArray(g)?g[0]:g.type,w=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,C=w.filter(([A])=>!Array.isArray(A)||A.length===s.length-1);let T=null;for(const[A,N]of C){T=new Ko(l.registry,rh,l.path,null,l.scope);const B=[];let V=!1;for(let $=1;$<s.length;$++){const H=s[$],K=Array.isArray(A)?A[$-1]:A.type,te=T.parse(H,1+B.length,K);if(!te){V=!0;break}B.push(te)}if(!V)if(Array.isArray(A)&&A.length!==B.length)T.error(`Expected ${A.length} arguments, but found ${B.length} instead.`);else{for(let $=0;$<B.length;$++){const H=Array.isArray(A)?A[$]:A.type,K=B[$];T.concat($+1).checkSubtype(H,K.type)}if(0===T.errors.length)return new Mo(h,x,N,B)}}if(1===C.length)l.errors.push(...T.errors);else{const A=(C.length?C:w).map(([B])=>{return V=B,Array.isArray(V)?`(${V.map(Gn).join(", ")})`:`(${Gn(V.type)}...)`;var V}).join(" | "),N=[];for(let B=1;B<s.length;B++){const V=l.parse(s[B],1+N.length);if(!V)return null;N.push(Gn(V.type))}l.error(`Expected arguments of type ${A}, but found (${N.join(", ")}) instead.`)}return null}static register(s,l){Mo.definitions=l;for(const h in l)s[h]=Mo}}function Jc(c,[s,l,h,g]){s=s.evaluate(c),l=l.evaluate(c),h=h.evaluate(c);const x=g?g.evaluate(c):1,w=nr(s,l,h,x);if(w)throw new Tn(w);return new ln(s/255,l/255,h/255,x,!1)}function Ul(c,s){return c in s}function hf(c,s){const l=s[c];return void 0===l?null:l}function $l(c){return{type:c}}function rh(c){if(c instanceof Uu)return rh(c.boundExpression);if(c instanceof Mo&&"error"===c.name||c instanceof Zd||c instanceof Rn||c instanceof Pa||c instanceof Zu)return!1;const s=c instanceof Vs||c instanceof eo;let l=!0;return c.eachChild(h=>{l=s?l&&rh(h):l&&h instanceof Ca}),!!l&&eu(c)&&tu(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function eu(c){if(c instanceof Mo&&("get"===c.name&&1===c.args.length||"feature-state"===c.name||"has"===c.name&&1===c.args.length||"properties"===c.name||"geometry-type"===c.name||"id"===c.name||/^filter-/.test(c.name))||c instanceof Rn||c instanceof Pa)return!1;let s=!0;return c.eachChild(l=>{s&&!eu(l)&&(s=!1)}),s}function Ii(c){if(c instanceof Mo&&"feature-state"===c.name)return!1;let s=!0;return c.eachChild(l=>{s&&!Ii(l)&&(s=!1)}),s}function tu(c,s){if(c instanceof Mo&&s.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild(h=>{l&&!tu(h,s)&&(l=!1)}),l}function xm(c){return{result:"success",value:c}}function rr(c){return{result:"error",value:c}}function He(c){return"data-driven"===c["property-type"]||"cross-faded-data-driven"===c["property-type"]}function Vt(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function dr(c){return!!c.expression&&c.expression.interpolated}function Pt(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":null===c?"null":typeof c}function Dr(c){return"object"==typeof c&&null!==c&&!Array.isArray(c)&&Ot(c)===rl}function Gl(c){return c}function nu(c,s){const l=c.stops&&"object"==typeof c.stops[0][0],h=l||!(l||void 0!==c.property),g=c.type||(dr(s)?"exponential":"interval"),x=function(N){switch(N.type){case"color":return ln.parse;case"padding":return Kr.parse;case"numberArray":return oi.parse;case"colorArray":return yr.parse;default:return null}}(s);if(x&&((c=Oi({},c)).stops&&(c.stops=c.stops.map(N=>[N[0],x(N[1])])),c.default=x(c.default?c.default:s.default)),c.colorSpace&&"rgb"!==(w=c.colorSpace)&&"hcl"!==w&&"lab"!==w)throw new Error(`Unknown color space: "${c.colorSpace}"`);var w;const C=function(N){switch(N){case"exponential":return nn;case"interval":return Yo;case"categorical":return Kn;case"identity":return Hl;default:throw new Error(`Unknown function type "${N}"`)}}(g);let T,A;if("categorical"===g){T=Object.create(null);for(const N of c.stops)T[N[0]]=N[1];A=typeof c.stops[0][0]}if(l){const N={},B=[];for(let H=0;H<c.stops.length;H++){const K=c.stops[H],te=K[0].zoom;void 0===N[te]&&(N[te]={zoom:te,type:c.type,property:c.property,default:c.default,stops:[]},B.push(te)),N[te].stops.push([K[0].value,K[1]])}const V=[];for(const H of B)V.push([N[H].zoom,nu(N[H],s)]);const $={name:"linear"};return{kind:"composite",interpolationType:$,interpolationFactor:vi.interpolationFactor.bind(void 0,$),zoomStops:V.map(H=>H[0]),evaluate:({zoom:H},K)=>nn({stops:V,base:c.base},s,H).evaluate(H,K)}}if(h){const N="exponential"===g?{name:"exponential",base:void 0!==c.base?c.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:vi.interpolationFactor.bind(void 0,N),zoomStops:c.stops.map(B=>B[0]),evaluate:({zoom:B})=>C(c,s,B,T,A)}}return{kind:"source",evaluate(N,B){const V=B&&B.properties?B.properties[c.property]:void 0;return void 0===V?gn(c.default,s.default):C(c,s,V,T,A)}}}function gn(c,s,l){return void 0!==c?c:void 0!==s?s:void 0!==l?l:void 0}function Kn(c,s,l,h,g){return gn(typeof l===g?h[l]:void 0,c.default,s.default)}function Yo(c,s,l){if("number"!==Pt(l))return gn(c.default,s.default);const h=c.stops.length;if(1===h||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[h-1][0])return c.stops[h-1][1];const g=ps(c.stops.map(x=>x[0]),l);return c.stops[g][1]}function nn(c,s,l){const h=void 0!==c.base?c.base:1;if("number"!==Pt(l))return gn(c.default,s.default);const g=c.stops.length;if(1===g||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[g-1][0])return c.stops[g-1][1];const x=ps(c.stops.map(N=>N[0]),l),w=function(N,B,V,$){const H=$-V,K=N-V;return 0===H?0:1===B?K/H:(Math.pow(B,K)-1)/(Math.pow(B,H)-1)}(l,h,c.stops[x][0],c.stops[x+1][0]),C=c.stops[x][1],T=c.stops[x+1][1],A=$s[s.type]||Gl;return"function"==typeof C.evaluate?{evaluate(...N){const B=C.evaluate.apply(void 0,N),V=T.evaluate.apply(void 0,N);if(void 0!==B&&void 0!==V)return A(B,V,w,c.colorSpace)}}:A(C,T,w,c.colorSpace)}function Hl(c,s,l){switch(s.type){case"color":l=ln.parse(l);break;case"formatted":l=Ye.fromString(l.toString());break;case"resolvedImage":l=To.fromString(l.toString());break;case"padding":l=Kr.parse(l);break;case"colorArray":l=yr.parse(l);break;case"numberArray":l=oi.parse(l);break;default:Pt(l)===s.type||"enum"===s.type&&s.values[l]||(l=void 0)}return gn(l,c.default,s.default)}Mo.register(Qc,{error:[{kind:"error"},[jt],(c,[s])=>{throw new Tn(s.evaluate(c))}],typeof:[jt,[Lt],(c,[s])=>Gn(Ot(s.evaluate(c)))],"to-rgba":[Co(ot,4),[mi],(c,[s])=>{const[l,h,g,x]=s.evaluate(c).rgb;return[255*l,255*h,255*g,x]}],rgb:[mi,[ot,ot,ot],Jc],rgba:[mi,[ot,ot,ot,ot],Jc],has:{type:an,overloads:[[[jt],(c,[s])=>Ul(s.evaluate(c),c.properties())],[[jt,rl],(c,[s,l])=>Ul(s.evaluate(c),l.evaluate(c))]]},get:{type:Lt,overloads:[[[jt],(c,[s])=>hf(s.evaluate(c),c.properties())],[[jt,rl],(c,[s,l])=>hf(s.evaluate(c),l.evaluate(c))]]},"feature-state":[Lt,[jt],(c,[s])=>hf(s.evaluate(c),c.featureState||{})],properties:[rl,[],c=>c.properties()],"geometry-type":[jt,[],c=>c.geometryType()],id:[Lt,[],c=>c.id()],zoom:[ot,[],c=>c.globals.zoom],"heatmap-density":[ot,[],c=>c.globals.heatmapDensity||0],elevation:[ot,[],c=>c.globals.elevation||0],"line-progress":[ot,[],c=>c.globals.lineProgress||0],accumulated:[Lt,[],c=>void 0===c.globals.accumulated?null:c.globals.accumulated],"+":[ot,$l(ot),(c,s)=>{let l=0;for(const h of s)l+=h.evaluate(c);return l}],"*":[ot,$l(ot),(c,s)=>{let l=1;for(const h of s)l*=h.evaluate(c);return l}],"-":{type:ot,overloads:[[[ot,ot],(c,[s,l])=>s.evaluate(c)-l.evaluate(c)],[[ot],(c,[s])=>-s.evaluate(c)]]},"/":[ot,[ot,ot],(c,[s,l])=>s.evaluate(c)/l.evaluate(c)],"%":[ot,[ot,ot],(c,[s,l])=>s.evaluate(c)%l.evaluate(c)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(c,[s,l])=>Math.pow(s.evaluate(c),l.evaluate(c))],sqrt:[ot,[ot],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[ot,[ot],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[ot,[ot],(c,[s])=>Math.log(s.evaluate(c))],log2:[ot,[ot],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[ot,[ot],(c,[s])=>Math.sin(s.evaluate(c))],cos:[ot,[ot],(c,[s])=>Math.cos(s.evaluate(c))],tan:[ot,[ot],(c,[s])=>Math.tan(s.evaluate(c))],asin:[ot,[ot],(c,[s])=>Math.asin(s.evaluate(c))],acos:[ot,[ot],(c,[s])=>Math.acos(s.evaluate(c))],atan:[ot,[ot],(c,[s])=>Math.atan(s.evaluate(c))],min:[ot,$l(ot),(c,s)=>Math.min(...s.map(l=>l.evaluate(c)))],max:[ot,$l(ot),(c,s)=>Math.max(...s.map(l=>l.evaluate(c)))],abs:[ot,[ot],(c,[s])=>Math.abs(s.evaluate(c))],round:[ot,[ot],(c,[s])=>{const l=s.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[ot,[ot],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[ot,[ot],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[an,[jt,Lt],(c,[s,l])=>c.properties()[s.value]===l.value],"filter-id-==":[an,[Lt],(c,[s])=>c.id()===s.value],"filter-type-==":[an,[jt],(c,[s])=>c.geometryType()===s.value],"filter-<":[an,[jt,Lt],(c,[s,l])=>{const h=c.properties()[s.value],g=l.value;return typeof h==typeof g&&h<g}],"filter-id-<":[an,[Lt],(c,[s])=>{const l=c.id(),h=s.value;return typeof l==typeof h&&l<h}],"filter->":[an,[jt,Lt],(c,[s,l])=>{const h=c.properties()[s.value],g=l.value;return typeof h==typeof g&&h>g}],"filter-id->":[an,[Lt],(c,[s])=>{const l=c.id(),h=s.value;return typeof l==typeof h&&l>h}],"filter-<=":[an,[jt,Lt],(c,[s,l])=>{const h=c.properties()[s.value],g=l.value;return typeof h==typeof g&&h<=g}],"filter-id-<=":[an,[Lt],(c,[s])=>{const l=c.id(),h=s.value;return typeof l==typeof h&&l<=h}],"filter->=":[an,[jt,Lt],(c,[s,l])=>{const h=c.properties()[s.value],g=l.value;return typeof h==typeof g&&h>=g}],"filter-id->=":[an,[Lt],(c,[s])=>{const l=c.id(),h=s.value;return typeof l==typeof h&&l>=h}],"filter-has":[an,[Lt],(c,[s])=>s.value in c.properties()],"filter-has-id":[an,[],c=>null!==c.id()&&void 0!==c.id()],"filter-type-in":[an,[Co(jt)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[an,[Co(Lt)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[an,[jt,Co(Lt)],(c,[s,l])=>l.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[an,[jt,Co(Lt)],(c,[s,l])=>function(h,g,x,w){for(;x<=w;){const C=x+w>>1;if(g[C]===h)return!0;g[C]>h?w=C-1:x=C+1}return!1}(c.properties()[s.value],l.value,0,l.value.length-1)],all:{type:an,overloads:[[[an,an],(c,[s,l])=>s.evaluate(c)&&l.evaluate(c)],[$l(an),(c,s)=>{for(const l of s)if(!l.evaluate(c))return!1;return!0}]]},any:{type:an,overloads:[[[an,an],(c,[s,l])=>s.evaluate(c)||l.evaluate(c)],[$l(an),(c,s)=>{for(const l of s)if(l.evaluate(c))return!0;return!1}]]},"!":[an,[an],(c,[s])=>!s.evaluate(c)],"is-supported-script":[an,[jt],(c,[s])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(s.evaluate(c))}],upcase:[jt,[jt],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[jt,[jt],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[jt,$l(Lt),(c,s)=>s.map(l=>Jt(l.evaluate(c))).join("")],"resolved-locale":[jt,[tr],(c,[s])=>s.evaluate(c).resolvedLocale()]});class ru{constructor(s,l){this.expression=s,this._warningHistory={},this._evaluator=new qd,this._defaultValue=l?function(h){if("color"===h.type&&Dr(h.default))return new ln(0,0,0,0);switch(h.type){case"color":return ln.parse(h.default)||null;case"padding":return Kr.parse(h.default)||null;case"numberArray":return oi.parse(h.default)||null;case"colorArray":return yr.parse(h.default)||null;case"variableAnchorOffsetCollection":return Ji.parse(h.default)||null;case"projectionDefinition":return Yr.parse(h.default)||null;default:return void 0===h.default?null:h.default}}(l):null,this._enumValues=l&&"enum"===l.type?l.values:null}evaluateWithoutErrorHandling(s,l,h,g,x,w){return this._evaluator.globals=s,this._evaluator.feature=l,this._evaluator.featureState=h,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w,this.expression.evaluate(this._evaluator)}evaluate(s,l,h,g,x,w){this._evaluator.globals=s,this._evaluator.feature=l||null,this._evaluator.featureState=h||null,this._evaluator.canonical=g,this._evaluator.availableImages=x||null,this._evaluator.formattedSection=w||null;try{const C=this.expression.evaluate(this._evaluator);if(null==C||"number"==typeof C&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new Tn(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console<"u"&&console.warn(C.message)),this._defaultValue}}}function Aa(c){return Array.isArray(c)&&c.length>0&&"string"==typeof c[0]&&c[0]in Qc}function ir(c,s){const l=new Ko(Qc,rh,[],s?function(g){const x={color:mi,string:jt,number:ot,enum:jt,boolean:an,formatted:Nl,padding:ef,numberArray:Oc,colorArray:dn,projectionDefinition:Le,resolvedImage:Cn,variableAnchorOffsetCollection:Fc};return"array"===g.type?Co(x[g.value]||Lt,g.length):x[g.type]}(s):void 0),h=l.parse(c,void 0,void 0,void 0,s&&"string"===s.type?{typeAnnotation:"coerce"}:void 0);return h?xm(new ru(h,s)):rr(l.errors)}class ys{constructor(s,l){this.kind=s,this._styleExpression=l,this.isStateDependent="constant"!==s&&!Ii(l.expression),this.globalStateRefs=Xo(l.expression)}evaluateWithoutErrorHandling(s,l,h,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,h,g,x,w)}evaluate(s,l,h,g,x,w){return this._styleExpression.evaluate(s,l,h,g,x,w)}}class dl{constructor(s,l,h,g){this.kind=s,this.zoomStops=h,this._styleExpression=l,this.isStateDependent="camera"!==s&&!Ii(l.expression),this.globalStateRefs=Xo(l.expression),this.interpolationType=g}evaluateWithoutErrorHandling(s,l,h,g,x,w){return this._styleExpression.evaluateWithoutErrorHandling(s,l,h,g,x,w)}evaluate(s,l,h,g,x,w){return this._styleExpression.evaluate(s,l,h,g,x,w)}interpolationFactor(s,l,h){return this.interpolationType?vi.interpolationFactor(this.interpolationType,s,l,h):0}}function Hs(c,s){const l=ir(c,s);if("error"===l.result)return l;const h=l.value.expression,g=eu(h);if(!g&&!He(s))return rr([new _r("","data expressions not supported")]);const x=tu(h,["zoom"]);if(!x&&!Vt(s))return rr([new _r("","zoom expressions not supported")]);const w=iu(h);return w||x?w instanceof _r?rr([w]):w instanceof vi&&!dr(s)?rr([new _r("",'"interpolate" expressions cannot be used with this property')]):xm(w?new dl(g?"camera":"composite",l.value,w.labels,w instanceof vi?w.interpolation:void 0):new ys(g?"constant":"source",l.value)):rr([new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ra{constructor(s,l){this._parameters=s,this._specification=l,Oi(this,nu(this._parameters,this._specification))}static deserialize(s){return new Ra(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function iu(c){let s=null;if(c instanceof Ta)s=iu(c.result);else if(c instanceof $u){for(const l of c.args)if(s=iu(l),s)break}else(c instanceof ur||c instanceof vi)&&c.input instanceof Mo&&"zoom"===c.input.name&&(s=c);return s instanceof _r||c.eachChild(l=>{const h=iu(l);h instanceof _r?s=h:!s&&h?s=new _r("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&h&&s!==h&&(s=new _r("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function Xo(c,s=new Set){return c instanceof Zu&&s.add(c.key),c.eachChild(l=>{Xo(l,s)}),s}function ou(c){if(!0===c||!1===c)return!0;if(!Array.isArray(c)||0===c.length)return!1;switch(c[0]){case"has":return c.length>=2&&"$id"!==c[1]&&"$type"!==c[1];case"in":return c.length>=3&&("string"!=typeof c[1]||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==c.length||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!ou(s)&&"boolean"!=typeof s)return!1;return!0;default:return!0}}const Na={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ai(c){if(null==c)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ou(c)||(c=La(c));const s=ir(c,Na);if("error"===s.result)throw new Error(s.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,h,g)=>s.value.evaluate(l,h,{},g),needGeometry:At(c),getGlobalStateRefs:()=>Xo(s.value.expression)}}function hl(c,s){return c<s?-1:c>s?1:0}function At(c){if(!Array.isArray(c))return!1;if("within"===c[0]||"distance"===c[0])return!0;for(let s=1;s<c.length;s++)if(At(c[s]))return!0;return!1}function La(c){if(!c)return!0;const s=c[0];return c.length<=1?"any"!==s:"=="===s?qs(c[1],c[2],"=="):"!="===s?Oa(qs(c[1],c[2],"==")):"<"===s||">"===s||"<="===s||">="===s?qs(c[1],c[2],s):"any"===s?(l=c.slice(1),["any"].concat(l.map(La))):"all"===s?["all"].concat(c.slice(1).map(La)):"none"===s?["all"].concat(c.slice(1).map(La).map(Oa)):"in"===s?Ws(c[1],c.slice(2)):"!in"===s?Oa(Ws(c[1],c.slice(2))):"has"===s?Ku(c[1]):"!has"!==s||Oa(Ku(c[1]));var l}function qs(c,s,l){switch(c){case"$type":return[`filter-type-${l}`,s];case"$id":return[`filter-id-${l}`,s];default:return[`filter-${l}`,c,s]}}function Ws(c,s){if(0===s.length)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(l=>typeof l!=typeof s[0])?["filter-in-large",c,["literal",s.sort(hl)]]:["filter-in-small",c,["literal",s]]}}function Ku(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function Oa(c){return["!",c]}function or(c){const s=typeof c;if("number"===s||"boolean"===s||"string"===s||null==c)return JSON.stringify(c);if(Array.isArray(c)){let g="[";for(const x of c)g+=`${or(x)},`;return`${g}]`}const l=Object.keys(c).sort();let h="{";for(let g=0;g<l.length;g++)h+=`${JSON.stringify(l[g])}:${or(c[l[g]])},`;return`${h}}`}function vr(c){let s="";for(const l of Ut)s+=`/${or(c[l])}`;return s}function Mi(c){const s=c.value;return s?[new Ze(c.key,s,"constants have been deprecated as of v8")]:[]}function hr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function bi(c){if(Array.isArray(c))return c.map(bi);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const l in c)s[l]=bi(c[l]);return s}return hr(c)}function Di(c){const s=c.key,l=c.value,h=c.valueSpec||{},g=c.objectElementValidators||{},x=c.style,w=c.styleSpec,C=c.validateSpec;let T=[];const A=Pt(l);if("object"!==A)return[new Ze(s,l,`object expected, ${A} found`)];for(const N in l){const B=N.split(".")[0],V=Vu(h,B)||h["*"];let $;if(Vu(g,B))$=g[B];else if(Vu(h,B))$=C;else if(g["*"])$=g["*"];else{if(!h["*"]){T.push(new Ze(s,l[N],`unknown property "${N}"`));continue}$=C}T=T.concat($({key:(s&&`${s}.`)+N,value:l[N],valueSpec:V,style:x,styleSpec:w,object:l,objectKey:N,validateSpec:C},l))}for(const N in h)g[N]||h[N].required&&void 0===h[N].default&&void 0===l[N]&&T.push(new Ze(s,l,`missing required property "${N}"`));return T}function zi(c){const s=c.value,l=c.valueSpec,h=c.style,g=c.styleSpec,x=c.key,w=c.arrayElementValidator||c.validateSpec;if("array"!==Pt(s))return[new Ze(x,s,`array expected, ${Pt(s)} found`)];if(l.length&&s.length!==l.length)return[new Ze(x,s,`array length ${l.length} expected, length ${s.length} found`)];if(l["min-length"]&&s.length<l["min-length"])return[new Ze(x,s,`array length at least ${l["min-length"]} expected, length ${s.length} found`)];let C={type:l.value,values:l.values};g.$version<7&&(C.function=l.function),"object"===Pt(l.value)&&(C=l.value);let T=[];for(let A=0;A<s.length;A++)T=T.concat(w({array:s,arrayIndex:A,value:s[A],valueSpec:C,validateSpec:c.validateSpec,style:h,styleSpec:g,key:`${x}[${A}]`}));return T}function Qo(c){const s=c.key,l=c.value,h=c.valueSpec;let g=Pt(l);return"number"===g&&l!=l&&(g="NaN"),"number"!==g?[new Ze(s,l,`number expected, ${g} found`)]:"minimum"in h&&l<h.minimum?[new Ze(s,l,`${l} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&l>h.maximum?[new Ze(s,l,`${l} is greater than the maximum value ${h.maximum}`)]:[]}function wm(c){const s=c.valueSpec,l=hr(c.value.type);let h,g,x,w={};const C="categorical"!==l&&void 0===c.value.property,T=!C,A="array"===Pt(c.value.stops)&&"array"===Pt(c.value.stops[0])&&"object"===Pt(c.value.stops[0][0]),N=Di({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function($){if("identity"===l)return[new Ze($.key,$.value,'identity function may not have a "stops" property')];let H=[];const K=$.value;return H=H.concat(zi({key:$.key,value:K,valueSpec:$.valueSpec,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,arrayElementValidator:B})),"array"===Pt(K)&&0===K.length&&H.push(new Ze($.key,K,"array must have at least one stop")),H},default:function($){return $.validateSpec({key:$.key,value:$.value,valueSpec:s,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec})}}});return"identity"===l&&C&&N.push(new Ze(c.key,c.value,'missing required property "property"')),"identity"===l||c.value.stops||N.push(new Ze(c.key,c.value,'missing required property "stops"')),"exponential"===l&&c.valueSpec.expression&&!dr(c.valueSpec)&&N.push(new Ze(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(T&&!He(c.valueSpec)?N.push(new Ze(c.key,c.value,"property functions not supported")):C&&!Vt(c.valueSpec)&&N.push(new Ze(c.key,c.value,"zoom functions not supported"))),"categorical"!==l&&!A||void 0!==c.value.property||N.push(new Ze(c.key,c.value,'"property" property is required')),N;function B($){let H=[];const K=$.value,te=$.key;if("array"!==Pt(K))return[new Ze(te,K,`array expected, ${Pt(K)} found`)];if(2!==K.length)return[new Ze(te,K,`array length 2 expected, length ${K.length} found`)];if(A){if("object"!==Pt(K[0]))return[new Ze(te,K,`object expected, ${Pt(K[0])} found`)];if(void 0===K[0].zoom)return[new Ze(te,K,"object stop key must have zoom")];if(void 0===K[0].value)return[new Ze(te,K,"object stop key must have value")];if(x&&x>hr(K[0].zoom))return[new Ze(te,K[0].zoom,"stop zoom values must appear in ascending order")];hr(K[0].zoom)!==x&&(x=hr(K[0].zoom),g=void 0,w={}),H=H.concat(Di({key:`${te}[0]`,value:K[0],valueSpec:{zoom:{}},validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec,objectElementValidators:{zoom:Qo,value:V}}))}else H=H.concat(V({key:`${te}[0]`,value:K[0],validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec},K));return Aa(bi(K[1]))?H.concat([new Ze(`${te}[1]`,K[1],"expressions are not allowed in function stops.")]):H.concat($.validateSpec({key:`${te}[1]`,value:K[1],valueSpec:s,validateSpec:$.validateSpec,style:$.style,styleSpec:$.styleSpec}))}function V($,H){const K=Pt($.value),te=hr($.value),ie=null!==$.value?$.value:H;if(h){if(K!==h)return[new Ze($.key,ie,`${K} stop domain type must match previous stop domain type ${h}`)]}else h=K;if("number"!==K&&"string"!==K&&"boolean"!==K)return[new Ze($.key,ie,"stop domain value must be a number, string, or boolean")];if("number"!==K&&"categorical"!==l){let xe=`number expected, ${K} found`;return He(s)&&void 0===l&&(xe+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ze($.key,ie,xe)]}return"categorical"!==l||"number"!==K||isFinite(te)&&Math.floor(te)===te?"categorical"!==l&&"number"===K&&void 0!==g&&te<g?[new Ze($.key,ie,"stop domain values must appear in ascending order")]:(g=te,"categorical"===l&&te in w?[new Ze($.key,ie,"stop domain values must be unique")]:(w[te]=!0,[])):[new Ze($.key,ie,`integer expected, found ${te}`)]}}function su(c){const s=("property"===c.expressionContext?Hs:ir)(bi(c.value),c.valueSpec);if("error"===s.result)return s.value.map(h=>new Ze(`${c.key}${h.key}`,c.value,h.message));const l=s.value.expression||s.value._styleExpression.expression;if("property"===c.expressionContext&&"text-font"===c.propertyKey&&!l.outputDefined())return[new Ze(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===c.expressionContext&&"layout"===c.propertyType&&!Ii(l))return[new Ze(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===c.expressionContext&&!Ii(l))return[new Ze(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&0===c.expressionContext.indexOf("cluster")){if(!tu(l,["zoom","feature-state"]))return[new Ze(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===c.expressionContext&&!eu(l))return[new Ze(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jo(c){const s=c.key,l=c.value,h=Pt(l);return"string"!==h?[new Ze(s,l,`color expected, ${h} found`)]:ln.parse(String(l))?[]:[new Ze(s,l,`color expected, "${l}" found`)]}function Zs(c){const s=c.key,l=c.value,h=c.valueSpec,g=[];return Array.isArray(h.values)?-1===h.values.indexOf(hr(l))&&g.push(new Ze(s,l,`expected one of [${h.values.join(", ")}], ${JSON.stringify(l)} found`)):-1===Object.keys(h.values).indexOf(hr(l))&&g.push(new Ze(s,l,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(l)} found`)),g}function Mp(c){return ou(bi(c.value))?su(Oi({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Dp(c)}function Dp(c){const s=c.value,l=c.key;if("array"!==Pt(s))return[new Ze(l,s,`array expected, ${Pt(s)} found`)];const h=c.styleSpec;let g,x=[];if(s.length<1)return[new Ze(l,s,"filter array must have at least 1 element")];switch(x=x.concat(Zs({key:`${l}[0]`,value:s[0],valueSpec:h.filter_operator,style:c.style,styleSpec:c.styleSpec})),hr(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&"$type"===hr(s[1])&&x.push(new Ze(l,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":3!==s.length&&x.push(new Ze(l,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(g=Pt(s[1]),"string"!==g&&x.push(new Ze(`${l}[1]`,s[1],`string expected, ${g} found`)));for(let w=2;w<s.length;w++)g=Pt(s[w]),"$type"===hr(s[1])?x=x.concat(Zs({key:`${l}[${w}]`,value:s[w],valueSpec:h.geometry_type,style:c.style,styleSpec:c.styleSpec})):"string"!==g&&"number"!==g&&"boolean"!==g&&x.push(new Ze(`${l}[${w}]`,s[w],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let w=1;w<s.length;w++)x=x.concat(Dp({key:`${l}[${w}]`,value:s[w],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":g=Pt(s[1]),2!==s.length?x.push(new Ze(l,s,`filter array for "${s[0]}" operator must have 2 elements`)):"string"!==g&&x.push(new Ze(`${l}[1]`,s[1],`string expected, ${g} found`))}return x}function Yu(c,s){const l=c.key,h=c.validateSpec,g=c.style,x=c.styleSpec,w=c.value,C=c.objectKey,T=x[`${s}_${c.layerType}`];if(!T)return[];const A=C.match(/^(.*)-transition$/);if("paint"===s&&A&&T[A[1]]&&T[A[1]].transition)return h({key:l,value:w,valueSpec:x.transition,style:g,styleSpec:x});const N=c.valueSpec||T[C];if(!N)return[new Ze(l,w,`unknown property "${C}"`)];let B;if("string"===Pt(w)&&He(N)&&!N.tokens&&(B=/^{([^}]+)}$/.exec(w)))return[new Ze(l,w,`"${C}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];const V=[];return"symbol"===c.layerType&&("text-field"===C&&g&&!g.glyphs&&V.push(new Ze(l,w,'use of "text-field" requires a style "glyphs" property')),"text-font"===C&&Dr(bi(w))&&"identity"===hr(w.type)&&V.push(new Ze(l,w,'"text-font" does not support identity functions'))),V.concat(h({key:c.key,value:w,valueSpec:N,style:g,styleSpec:x,expressionContext:"property",propertyType:s,propertyKey:C}))}function Sm(c){return Yu(c,"paint")}function Em(c){return Yu(c,"layout")}function Cm(c){let s=[];const l=c.value,h=c.key,g=c.style,x=c.styleSpec;if("object"!==Pt(l))return[new Ze(h,l,`object expected, ${Pt(l)} found`)];l.type||l.ref||s.push(new Ze(h,l,'either "type" or "ref" is required'));let w=hr(l.type);const C=hr(l.ref);if(l.id){const T=hr(l.id);for(let A=0;A<c.arrayIndex;A++){const N=g.layers[A];hr(N.id)===T&&s.push(new Ze(h,l.id,`duplicate layer id "${l.id}", previously used at line ${N.id.__line__}`))}}if("ref"in l){let T;["type","source","source-layer","filter","layout"].forEach(A=>{A in l&&s.push(new Ze(h,l[A],`"${A}" is prohibited for ref layers`))}),g.layers.forEach(A=>{hr(A.id)===C&&(T=A)}),T?T.ref?s.push(new Ze(h,l.ref,"ref cannot reference another ref layer")):w=hr(T.type):s.push(new Ze(h,l.ref,`ref layer "${C}" not found`))}else if("background"!==w)if(l.source){const T=g.sources&&g.sources[l.source],A=T&&hr(T.type);T?"vector"===A&&"raster"===w?s.push(new Ze(h,l.source,`layer "${l.id}" requires a raster source`)):"raster-dem"!==A&&"hillshade"===w||"raster-dem"!==A&&"color-relief"===w?s.push(new Ze(h,l.source,`layer "${l.id}" requires a raster-dem source`)):"raster"===A&&"raster"!==w?s.push(new Ze(h,l.source,`layer "${l.id}" requires a vector source`)):"vector"!==A||l["source-layer"]?"raster-dem"===A&&"hillshade"!==w&&"color-relief"!==w?s.push(new Ze(h,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==w||!l.paint||!l.paint["line-gradient"]||"geojson"===A&&T.lineMetrics||s.push(new Ze(h,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Ze(h,l,`layer "${l.id}" must specify a "source-layer"`)):s.push(new Ze(h,l.source,`source "${l.source}" not found`))}else s.push(new Ze(h,l,'missing required property "source"'));return s=s.concat(Di({key:h,value:l,valueSpec:x.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${h}.type`,value:l.type,valueSpec:x.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:Mp,layout:T=>Di({layer:l,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":A=>Em(Oi({layerType:w},A))}}),paint:T=>Di({layer:l,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":A=>Sm(Oi({layerType:w},A))}})}})),s}function Ks(c){const s=c.value,l=c.key,h=Pt(s);return"string"!==h?[new Ze(l,s,`string expected, ${h} found`)]:[]}const Xu={promoteId:function({key:c,value:s}){if("string"===Pt(s))return Ks({key:c,value:s});{const l=[];for(const h in s)l.push(...Ks({key:`${c}.${h}`,value:s[h]}));return l}}};function Do(c){const s=c.value,l=c.key,h=c.styleSpec,g=c.style,x=c.validateSpec;if(!s.type)return[new Ze(l,s,'"type" is required')];const w=hr(s.type);let C;switch(w){case"vector":case"raster":return C=Di({key:l,value:s,valueSpec:h[`source_${w.replace("-","_")}`],style:c.style,styleSpec:h,objectElementValidators:Xu,validateSpec:x}),C;case"raster-dem":return C=function(T){var A;const N=null!==(A=T.sourceName)&&void 0!==A?A:"",B=T.value,V=T.styleSpec,$=V.source_raster_dem,H=T.style;let K=[];const te=Pt(B);if(void 0===B)return K;if("object"!==te)return K.push(new Ze("source_raster_dem",B,`object expected, ${te} found`)),K;const ie="custom"===hr(B.encoding),xe=["redFactor","greenFactor","blueFactor","baseShift"],he=T.value.encoding?`"${T.value.encoding}"`:"Default";for(const pe in B)!ie&&xe.includes(pe)?K.push(new Ze(pe,B[pe],`In "${N}": "${pe}" is only valid when "encoding" is set to "custom". ${he} encoding found`)):$[pe]?K=K.concat(T.validateSpec({key:pe,value:B[pe],valueSpec:$[pe],validateSpec:T.validateSpec,style:H,styleSpec:V})):K.push(new Ze(pe,B[pe],`unknown property "${pe}"`));return K}({sourceName:l,value:s,style:c.style,styleSpec:h,validateSpec:x}),C;case"geojson":if(C=Di({key:l,value:s,valueSpec:h.source_geojson,style:g,styleSpec:h,validateSpec:x,objectElementValidators:Xu}),s.cluster)for(const T in s.clusterProperties){const[A,N]=s.clusterProperties[T],B="string"==typeof A?[A,["accumulated"],["get",T]]:A;C.push(...su({key:`${l}.${T}.map`,value:N,expressionContext:"cluster-map"})),C.push(...su({key:`${l}.${T}.reduce`,value:B,expressionContext:"cluster-reduce"}))}return C;case"video":return Di({key:l,value:s,valueSpec:h.source_video,style:g,validateSpec:x,styleSpec:h});case"image":return Di({key:l,value:s,valueSpec:h.source_image,style:g,validateSpec:x,styleSpec:h});case"canvas":return[new Ze(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Zs({key:`${l}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function au(c){const s=c.value,l=c.styleSpec,h=l.light,g=c.style;let x=[];const w=Pt(s);if(void 0===s)return x;if("object"!==w)return x=x.concat([new Ze("light",s,`object expected, ${w} found`)]),x;for(const C in s){const T=C.match(/^(.*)-transition$/);x=x.concat(T&&h[T[1]]&&h[T[1]].transition?c.validateSpec({key:C,value:s[C],valueSpec:l.transition,validateSpec:c.validateSpec,style:g,styleSpec:l}):h[C]?c.validateSpec({key:C,value:s[C],valueSpec:h[C],validateSpec:c.validateSpec,style:g,styleSpec:l}):[new Ze(C,s[C],`unknown property "${C}"`)])}return x}function kp(c){const s=c.value,l=c.styleSpec,h=l.sky,g=c.style,x=Pt(s);if(void 0===s)return[];if("object"!==x)return[new Ze("sky",s,`object expected, ${x} found`)];let w=[];for(const C in s)w=w.concat(h[C]?c.validateSpec({key:C,value:s[C],valueSpec:h[C],style:g,styleSpec:l}):[new Ze(C,s[C],`unknown property "${C}"`)]);return w}function Tm(c){const s=c.value,l=c.styleSpec,h=l.terrain,g=c.style;let x=[];const w=Pt(s);if(void 0===s)return x;if("object"!==w)return x=x.concat([new Ze("terrain",s,`object expected, ${w} found`)]),x;for(const C in s)x=x.concat(h[C]?c.validateSpec({key:C,value:s[C],valueSpec:h[C],validateSpec:c.validateSpec,style:g,styleSpec:l}):[new Ze(C,s[C],`unknown property "${C}"`)]);return x}function Im(c){let s=[];const l=c.value,h=c.key;if(Array.isArray(l)){const g=[],x=[];for(const w in l)l[w].id&&g.includes(l[w].id)&&s.push(new Ze(h,l,`all the sprites' ids must be unique, but ${l[w].id} is duplicated`)),g.push(l[w].id),l[w].url&&x.includes(l[w].url)&&s.push(new Ze(h,l,`all the sprites' URLs must be unique, but ${l[w].url} is duplicated`)),x.push(l[w].url),s=s.concat(Di({key:`${h}[${w}]`,value:l[w],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return Ks({key:h,value:l})}function Qu(c){return(s=c.value)&&s.constructor===Object?[]:[new Ze(c.key,c.value,`object expected, ${Pt(c.value)} found`)];var s}const ih={"*":()=>[],array:zi,boolean:function(c){const s=c.value,l=c.key,h=Pt(s);return"boolean"!==h?[new Ze(l,s,`boolean expected, ${h} found`)]:[]},number:Qo,color:Jo,constants:Mi,enum:Zs,filter:Mp,function:wm,layer:Cm,object:Di,source:Do,light:au,sky:kp,terrain:Tm,projection:function(c){const s=c.value,l=c.styleSpec,h=l.projection,g=c.style,x=Pt(s);if(void 0===s)return[];if("object"!==x)return[new Ze("projection",s,`object expected, ${x} found`)];let w=[];for(const C in s)w=w.concat(h[C]?c.validateSpec({key:C,value:s[C],valueSpec:h[C],style:g,styleSpec:l}):[new Ze(C,s[C],`unknown property "${C}"`)]);return w},projectionDefinition:function(c){const s=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const h=Pt(l);return"array"!==h||(g=l,Array.isArray(g)&&3===g.length&&"string"==typeof g[0]&&"string"==typeof g[1]&&"number"==typeof g[2])||function(g){return!!["interpolate","step","literal"].includes(g[0])}(l)?["array","string"].includes(h)?[]:[new Ze(s,l,`projection expected, invalid type "${h}" found`)]:[new Ze(s,l,`projection expected, invalid array ${JSON.stringify(l)} found`)];var g},string:Ks,formatted:function(c){return 0===Ks(c).length?[]:su(c)},resolvedImage:function(c){return 0===Ks(c).length?[]:su(c)},padding:function(c){const s=c.key,l=c.value;if("array"===Pt(l)){if(l.length<1||l.length>4)return[new Ze(s,l,`padding requires 1 to 4 values; ${l.length} values found`)];const h={type:"number"};let g=[];for(let x=0;x<l.length;x++)g=g.concat(c.validateSpec({key:`${s}[${x}]`,value:l[x],validateSpec:c.validateSpec,valueSpec:h}));return g}return Qo({key:s,value:l,valueSpec:{}})},numberArray:function(c){const s=c.key,l=c.value;if("array"===Pt(l)){const h={type:"number"};if(l.length<1)return[new Ze(s,l,"array length at least 1 expected, length 0 found")];let g=[];for(let x=0;x<l.length;x++)g=g.concat(c.validateSpec({key:`${s}[${x}]`,value:l[x],validateSpec:c.validateSpec,valueSpec:h}));return g}return Qo({key:s,value:l,valueSpec:{}})},colorArray:function(c){const s=c.key,l=c.value;if("array"===Pt(l)){if(l.length<1)return[new Ze(s,l,"array length at least 1 expected, length 0 found")];let h=[];for(let g=0;g<l.length;g++)h=h.concat(Jo({key:`${s}[${g}]`,value:l[g]}));return h}return Jo({key:s,value:l})},variableAnchorOffsetCollection:function(c){const s=c.key,l=c.value,h=Pt(l),g=c.styleSpec;if("array"!==h||l.length<1||l.length%2!=0)return[new Ze(s,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let x=[];for(let w=0;w<l.length;w+=2)x=x.concat(Zs({key:`${s}[${w}]`,value:l[w],valueSpec:g.layout_symbol["text-anchor"]})),x=x.concat(zi({key:`${s}[${w+1}]`,value:l[w+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:g}));return x},sprite:Im,state:Qu};function ql(c){const s=c.value,l=c.valueSpec,h=c.styleSpec;return c.validateSpec=ql,l.expression&&Dr(hr(s))?wm(c):l.expression&&Aa(bi(s))?su(c):l.type&&ih[l.type]?ih[l.type](c):Di(Oi({},c,{valueSpec:l.type?h[l.type]:l}))}function Mm(c){const s=c.value,l=c.key,h=Ks(c);return h.length||(-1===s.indexOf("{fontstack}")&&h.push(new Ze(l,s,'"glyphs" url must include a "{fontstack}" token')),-1===s.indexOf("{range}")&&h.push(new Ze(l,s,'"glyphs" url must include a "{range}" token'))),h}function ko(c,s=Ee){let l=[];return l=l.concat(ql({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:ql,objectElementValidators:{glyphs:Mm,"*":()=>[]}})),c.constants&&(l=l.concat(Mi({key:"constants",value:c.constants}))),Wl(l)}function Ys(c){return function(s){return c({...s,validateSpec:ql})}}function Wl(c){return[].concat(c).sort((s,l)=>s.line-l.line)}function es(c){return function(...s){return Wl(c.apply(this,s))}}ko.source=es(Ys(Do)),ko.sprite=es(Ys(Im)),ko.glyphs=es(Ys(Mm)),ko.light=es(Ys(au)),ko.sky=es(Ys(kp)),ko.terrain=es(Ys(Tm)),ko.state=es(Ys(Qu)),ko.layer=es(Ys(Cm)),ko.filter=es(Ys(Mp)),ko.paintProperty=es(Ys(Sm)),ko.layoutProperty=es(Ys(Em));const br=ko,Dm=br.light,Xs=br.sky,Xr=br.paintProperty,km=br.layoutProperty;function Qs(c,s){let l=!1;if(s&&s.length)for(const h of s)c.fire(new je(new Error(h.message))),l=!0;return l}class vs{constructor(s,l,h){const g=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const w=new Int32Array(this.arrayBuffer);s=w[0],this.d=(l=w[1])+2*(h=w[2]);for(let T=0;T<this.d*this.d;T++){const A=w[3+T],N=w[3+T+1];g.push(A===N?null:w.subarray(A,N))}const C=w[3+g.length+1];this.keys=w.subarray(w[3+g.length],C),this.bboxes=w.subarray(C),this.insert=this._insertReadonly}else{this.d=l+2*h;for(let w=0;w<this.d*this.d;w++)g.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=s,this.padding=h,this.scale=l/s,this.uid=0;const x=h/l*s;this.min=-x,this.max=s+x}insert(s,l,h,g,x){this._forEachCell(l,h,g,x,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(l),this.bboxes.push(h),this.bboxes.push(g),this.bboxes.push(x)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,l,h,g,x,w){this.cells[x].push(w)}query(s,l,h,g,x){const w=this.min,C=this.max;if(s<=w&&l<=w&&C<=h&&C<=g&&!x)return Array.prototype.slice.call(this.keys);{const T=[];return this._forEachCell(s,l,h,g,this._queryCell,T,{},x),T}}_queryCell(s,l,h,g,x,w,C,T){const A=this.cells[x];if(null!==A){const N=this.keys,B=this.bboxes;for(let V=0;V<A.length;V++){const $=A[V];if(void 0===C[$]){const H=4*$;(T?T(B[H+0],B[H+1],B[H+2],B[H+3]):s<=B[H+2]&&l<=B[H+3]&&h>=B[H+0]&&g>=B[H+1])?(C[$]=!0,w.push(N[$])):C[$]=!1}}}}_forEachCell(s,l,h,g,x,w,C,T){const A=this._convertToCellCoord(s),N=this._convertToCellCoord(l),B=this._convertToCellCoord(h),V=this._convertToCellCoord(g);for(let $=A;$<=B;$++)for(let H=N;H<=V;H++){const K=this.d*H+$;if((!T||T(this._convertFromCellCoord($),this._convertFromCellCoord(H),this._convertFromCellCoord($+1),this._convertFromCellCoord(H+1)))&&x.call(this,s,l,h,g,K,w,C,T))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,l=3+this.cells.length+1+1;let h=0;for(let w=0;w<this.cells.length;w++)h+=this.cells[w].length;const g=new Int32Array(l+h+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let x=l;for(let w=0;w<s.length;w++){const C=s[w];g[3+w]=x,g.set(C,x),x+=C.length}return g[3+s.length]=x,g.set(this.keys,x),x+=this.keys.length,g[3+s.length+1]=x,g.set(this.bboxes,x),x+=this.bboxes.length,g.buffer}static serialize(s,l){const h=s.toArrayBuffer();return l&&l.push(h),{buffer:h}}static deserialize(s){return new vs(s.buffer)}}const Po={};function Xe(c,s,l={}){if(Po[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),Po[c]={klass:s,omit:l.omit||[],shallow:l.shallow||[]}}Xe("Object",Object),Xe("Set",Set),Xe("TransferableGridIndex",vs),Xe("Color",ln),Xe("Error",Error),Xe("AJAXError",ce),Xe("ResolvedImage",To),Xe("StylePropertyFunction",Ra),Xe("StyleExpression",ru,{omit:["_evaluator"]}),Xe("ZoomDependentExpression",dl),Xe("ZoomConstantExpression",ys),Xe("CompoundExpression",Mo,{omit:["_evaluate"]});for(const c in Qc)Qc[c]._classRegistryKey||Xe(`Expression_${c}`,Qc[c]);function ff(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&"ArrayBuffer"===c.constructor.name)}function lu(c){return c.$name||c.constructor._classRegistryKey}function pf(c){return!function(s){if(null===s||"object"!=typeof s)return!1;const l=lu(s);return!(!l||"Object"===l)}(c)&&(null==c||"boolean"==typeof c||"number"==typeof c||"string"==typeof c||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||ff(c)||va(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Or(c,s){if(pf(c))return(ff(c)||va(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const x=[];for(const w of c)x.push(Or(w,s));return x}if("object"!=typeof c)throw new Error("can't serialize object of type "+typeof c);const l=lu(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Po[l])throw new Error(`${l} is not registered.`);const{klass:h}=Po[l],g=h.serialize?h.serialize(c,s):{};if(h.serialize){if(s&&g===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const x in c){if(!c.hasOwnProperty(x)||Po[l].omit.indexOf(x)>=0)continue;const w=c[x];g[x]=Po[l].shallow.indexOf(x)>=0?w:Or(w,s)}c instanceof Error&&(g.message=c.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==l&&(g.$name=l),g}function fl(c){if(pf(c))return c;if(Array.isArray(c))return c.map(fl);if("object"!=typeof c)throw new Error("can't deserialize object of type "+typeof c);const s=lu(c)||"Object";if(!Po[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:l}=Po[s];if(!l)throw new Error(`can't deserialize unregistered class ${s}`);if(l.deserialize)return l.deserialize(c);const h=Object.create(l.prototype);for(const g of Object.keys(c)){if("$name"===g)continue;const x=c[g];h[g]=Po[s].shallow.indexOf(g)>=0?x:fl(x)}return h}class Ju{constructor(){this.first=!0}update(s,l){const h=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=l),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=h,!0))}}const fn={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Zl(c){for(const s of c)if(ah(s.charCodeAt(0)))return!0;return!1}function gf(c){for(const s of c)if(!sh(s.charCodeAt(0)))return!1;return!0}function Fa(c){const s=c.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(s.join("|"),"u")}const oh=Fa(["Arab","Dupl","Mong","Ougr","Syrc"]);function sh(c){return!oh.test(String.fromCodePoint(c))}const bs=Fa(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function ah(c){return!(746!==c&&747!==c&&(c<4352||!(fn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||fn["CJK Compatibility"](c)||fn["CJK Strokes"](c)||!(!fn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||12336===c)||fn["Enclosed CJK Letters and Months"](c)||fn["Ideographic Description Characters"](c)||fn.Kanbun(c)||fn.Katakana(c)&&12540!==c||!(!fn["Halfwidth and Fullwidth Forms"](c)||65288===c||65289===c||65293===c||c>=65306&&c<=65310||65339===c||65341===c||65343===c||c>=65371&&c<=65503||65507===c||c>=65512&&c<=65519)||!(!fn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||fn["Vertical Forms"](c)||fn["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||bs.test(String.fromCodePoint(c)))))}function mf(c){return!(ah(c)||(s=c,fn["Latin-1 Supplement"](s)&&(167===s||169===s||174===s||177===s||188===s||189===s||190===s||215===s||247===s)||fn["General Punctuation"](s)&&(8214===s||8224===s||8225===s||8240===s||8241===s||8251===s||8252===s||8258===s||8263===s||8264===s||8265===s||8273===s)||fn["Letterlike Symbols"](s)||fn["Number Forms"](s)||fn["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||9003===s||s>=9085&&s<=9114||s>=9150&&s<=9165||9167===s||s>=9169&&s<=9179||s>=9186&&s<=9215)||fn["Control Pictures"](s)&&9251!==s||fn["Optical Character Recognition"](s)||fn["Enclosed Alphanumerics"](s)||fn["Geometric Shapes"](s)||fn["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||fn["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||fn["CJK Symbols and Punctuation"](s)||fn.Katakana(s)||fn["Private Use Area"](s)||fn["CJK Compatibility Forms"](s)||fn["Small Form Variants"](s)||fn["Halfwidth and Fullwidth Forms"](s)||8734===s||8756===s||8757===s||s>=9984&&s<=10087||s>=10102&&s<=10131||65532===s||65533===s));var s}const _f=Fa(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Wt(c){return _f.test(String.fromCodePoint(c))}function Kl(c,s){return!(!s&&Wt(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||fn.Khmer(c))}function lh(c){for(const s of c)if(Wt(s.charCodeAt(0)))return!0;return!1}const Ao=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(Ao.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return y(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if("loading"!==c.pluginStatus)return this.setState(c),c;const l=c.pluginURL,h=new Promise(x=>{this.loadScriptResolve=x});s(l);const g=new Promise(x=>setTimeout(()=>x(),this.TIMEOUT));if(yield Promise.race([h,g]),this.isParsed()){const x={pluginStatus:"loaded",pluginURL:l};return this.setState(x),x}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class sr{constructor(s,l){this.zoom=s,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new Ju,this.transition=l.transition||{},this.globalState=l.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ju,this.transition={},this.globalState={})}isSupportedScript(s){return function(l,h){for(const g of l)if(!Kl(g.charCodeAt(0),h))return!1;return!0}(s,"loaded"===Ao.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,l=s-Math.floor(s),h=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*l}}}class cu{constructor(s,l){this.property=s,this.value=l,this.expression=function(h,g){if(Dr(h))return new Ra(h,g);if(Aa(h)){const x=Hs(h,g);if("error"===x.result)throw new Error(x.value.map(w=>`${w.key}: ${w.message}`).join(", "));return x.value}{let x=h;return"color"===g.type&&"string"==typeof h?x=ln.parse(h):"padding"!==g.type||"number"!=typeof h&&!Array.isArray(h)?"numberArray"!==g.type||"number"!=typeof h&&!Array.isArray(h)?"colorArray"!==g.type||"string"!=typeof h&&!Array.isArray(h)?"variableAnchorOffsetCollection"===g.type&&Array.isArray(h)?x=Ji.parse(h):"projectionDefinition"===g.type&&"string"==typeof h&&(x=Yr.parse(h)):x=yr.parse(h):x=oi.parse(h):x=Kr.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>x}}}(void 0===l?s.specification.default:l,s.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,l,h){return this.property.possiblyEvaluate(this,s,l,h)}}class ch{constructor(s){this.property=s,this.value=new cu(s,void 0)}transitioned(s,l){return new dh(this.property,this.value,l,Ho({},s.transition,this.transition),s.now)}untransitioned(){return new dh(this.property,this.value,null,{},0)}}class uh{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Li(this._values[s].value.value)}setValue(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ch(this._values[s].property)),this._values[s].value=new cu(this._values[s].property,null===l?void 0:Li(l))}getTransition(s){return Li(this._values[s].transition)}setTransition(s,l){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new ch(this._values[s].property)),this._values[s].transition=Li(l)||void 0}serialize(){const s={};for(const l of Object.keys(this._values)){const h=this.getValue(l);void 0!==h&&(s[l]=h);const g=this.getTransition(l);void 0!==g&&(s[`${l}-transition`]=g)}return s}transitioned(s,l){const h=new hh(this._properties);for(const g of Object.keys(this._values))h._values[g]=this._values[g].transitioned(s,l._values[g]);return h}untransitioned(){const s=new hh(this._properties);for(const l of Object.keys(this._values))s._values[l]=this._values[l].untransitioned();return s}}class dh{constructor(s,l,h,g,x){this.property=s,this.value=l,this.begin=x+g.delay||0,this.end=this.begin+g.duration||0,s.specification.transition&&(g.delay||g.duration)&&(this.prior=h)}possiblyEvaluate(s,l,h){const g=s.now||0,x=this.value.possiblyEvaluate(s,l,h),w=this.prior;if(w){if(g>this.end)return this.prior=null,x;if(this.value.isDataDriven())return this.prior=null,x;if(g<this.begin)return w.possiblyEvaluate(s,l,h);{const C=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(s,l,h),x,Fs(C))}}return x}}class hh{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,l,h){const g=new fh(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(s,l,h);return g}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class Pp{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return void 0!==this._values[s].value}getValue(s){return Li(this._values[s].value)}setValue(s,l){this._values[s]=new cu(this._values[s].property,null===l?void 0:Li(l))}serialize(){const s={};for(const l of Object.keys(this._values)){const h=this.getValue(l);void 0!==h&&(s[l]=h)}return s}possiblyEvaluate(s,l,h){const g=new fh(this._properties);for(const x of Object.keys(this._values))g._values[x]=this._values[x].possiblyEvaluate(s,l,h);return g}}class Ba{constructor(s,l,h){this.property=s,this.value=l,this.parameters=h}isConstant(){return"constant"===this.value.kind}constantOr(s){return"constant"===this.value.kind?this.value.value:s}evaluate(s,l,h,g){return this.property.evaluate(this.value,this.parameters,s,l,h,g)}}class fh{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class mt{constructor(s){this.specification=s}possiblyEvaluate(s,l){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(l)}interpolate(s,l,h){const g=$s[this.specification.type];return g?g(s,l,h):s}}class Ce{constructor(s,l){this.specification=s,this.overrides=l}possiblyEvaluate(s,l,h,g){return new Ba(this,"constant"===s.expression.kind||"camera"===s.expression.kind?{kind:"constant",value:s.expression.evaluate(l,null,{},h,g)}:s.expression,l)}interpolate(s,l,h){if("constant"!==s.value.kind||"constant"!==l.value.kind)return s;if(void 0===s.value.value||void 0===l.value.value)return new Ba(this,{kind:"constant",value:void 0},s.parameters);const g=$s[this.specification.type];if(g){const x=g(s.value.value,l.value.value,h);return new Ba(this,{kind:"constant",value:x},s.parameters)}return s}evaluate(s,l,h,g,x,w){return"constant"===s.kind?s.value:s.evaluate(l,h,g,x,w)}}class Kt extends Ce{possiblyEvaluate(s,l,h,g){if(void 0===s.value)return new Ba(this,{kind:"constant",value:void 0},l);if("constant"===s.expression.kind){const x=s.expression.evaluate(l,null,{},h,g),w="resolvedImage"===s.property.specification.type&&"string"!=typeof x?x.name:x,C=this._calculate(w,w,w,l);return new Ba(this,{kind:"constant",value:C},l)}if("camera"===s.expression.kind){const x=this._calculate(s.expression.evaluate({zoom:l.zoom-1}),s.expression.evaluate({zoom:l.zoom}),s.expression.evaluate({zoom:l.zoom+1}),l);return new Ba(this,{kind:"constant",value:x},l)}return new Ba(this,s.expression,l)}evaluate(s,l,h,g,x,w){if("source"===s.kind){const C=s.evaluate(l,h,g,x,w);return this._calculate(C,C,C,l)}return"composite"===s.kind?this._calculate(s.evaluate({zoom:Math.floor(l.zoom)-1},h,g),s.evaluate({zoom:Math.floor(l.zoom)},h,g),s.evaluate({zoom:Math.floor(l.zoom)+1},h,g),l):s.value}_calculate(s,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:h,to:l}}interpolate(s){return s}}class Fr{constructor(s){this.specification=s}possiblyEvaluate(s,l,h,g){if(void 0!==s.value){if("constant"===s.expression.kind){const x=s.expression.evaluate(l,null,{},h,g);return this._calculate(x,x,x,l)}return this._calculate(s.expression.evaluate(new sr(Math.floor(l.zoom-1),l)),s.expression.evaluate(new sr(Math.floor(l.zoom),l)),s.expression.evaluate(new sr(Math.floor(l.zoom+1),l)),l)}}_calculate(s,l,h,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:s,to:l}:{from:h,to:l}}interpolate(s){return s}}class ki{constructor(s){this.specification=s}possiblyEvaluate(s,l,h,g){return!!s.expression.evaluate(l,null,{},h,g)}interpolate(){return!1}}class Mt{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in s){const h=s[l];h.specification.overridable&&this.overridableProperties.push(l);const g=this.defaultPropertyValues[l]=new cu(h,void 0),x=this.defaultTransitionablePropertyValues[l]=new ch(h);this.defaultTransitioningPropertyValues[l]=x.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=g.possiblyEvaluate({})}}}Xe("DataDrivenProperty",Ce),Xe("DataConstantProperty",mt),Xe("CrossFadedDataDrivenProperty",Kt),Xe("CrossFadedProperty",Fr),Xe("ColorRampProperty",ki);const yf="-transition";class ji extends yt{constructor(s,l){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==s.type&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,"background"!==s.type&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=ai(s.filter)),l.layout&&(this._unevaluatedLayout=new Pp(l.layout)),l.paint)){this._transitionablePaint=new uh(l.paint);for(const h in s.paint)this.setPaintProperty(h,s.paint[h],{validate:!1});for(const h in s.layout)this.setLayoutProperty(h,s.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new fh(l.paint)}}setFilter(s){this.filter=s,this._featureFilter=ai(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return"visibility"===s?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const h=this._unevaluatedLayout._values[l];for(const g of h.getGlobalStateRefs())s.add(g)}for(const l of this._featureFilter.getGlobalStateRefs())s.add(l);return s}setLayoutProperty(s,l,h={}){null!=l&&this._validate(km,`layers.${this.id}.layout.${s}`,s,l,h)||("visibility"!==s?this._unevaluatedLayout.setValue(s,l):this.visibility=l)}getPaintProperty(s){return s.endsWith(yf)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,l,h={}){if(null!=l&&this._validate(Xr,`layers.${this.id}.paint.${s}`,s,l,h))return!1;if(s.endsWith(yf))return this._transitionablePaint.setTransition(s.slice(0,-11),l||void 0),!1;{const g=this._transitionablePaint._values[s],x="cross-faded-data-driven"===g.property.specification["property-type"],w=g.value.isDataDriven(),C=g.value;this._transitionablePaint.setValue(s,l),this._handleSpecialPaintPropertyUpdate(s);const T=this._transitionablePaint._values[s].value;return T.isDataDriven()||w||x||this._handleOverridablePaintPropertyUpdate(s,C,T)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,l,h){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||"none"===this.visibility}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,l){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,l)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),Nc(s,(l,h)=>!(void 0===l||"layout"===h&&!Object.keys(l).length||"paint"===h&&!Object.keys(l).length))}_validate(s,l,h,g,x={}){return(!x||!1!==x.validate)&&Qs(this,s.call(br,{key:l,layerType:this.type,objectKey:h,value:g,styleSpec:Ee,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const l=this.paint.get(s);if(l instanceof Ba&&He(l.property.specification)&&("source"===l.value.kind||"composite"===l.value.kind)&&l.value.isStateDependent)return!0}return!1}}const za={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class uu{constructor(s,l){this._structArray=s,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class zn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,l){return s._trim(),l&&(s.isTransferred=!0,l.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const l=Object.create(this.prototype);return l.arrayBuffer=s.arrayBuffer,l.length=s.length,l.capacity=s.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function xr(c,s=1){let l=0,h=0;return{members:c.map(g=>{const x=za[g.type].BYTES_PER_ELEMENT,w=l=vf(l,Math.max(s,x)),C=g.components||1;return h=Math.max(h,x),l+=x*C,{name:g.name,type:g.type,components:C,offset:w}}),size:vf(l,Math.max(h,s)),alignment:s}}function vf(c,s){return Math.ceil(c/s)*s}class ed extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l){const h=this.length;return this.resize(h+1),this.emplace(h,s,l)}emplace(s,l,h){const g=2*s;return this.int16[g+0]=l,this.int16[g+1]=h,s}}ed.prototype.bytesPerElement=4,Xe("StructArrayLayout2i4",ed);class Yl extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,l,h)}emplace(s,l,h,g){const x=3*s;return this.int16[x+0]=l,this.int16[x+1]=h,this.int16[x+2]=g,s}}Yl.prototype.bytesPerElement=6,Xe("StructArrayLayout3i6",Yl);class ph extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,s,l,h,g)}emplace(s,l,h,g,x){const w=4*s;return this.int16[w+0]=l,this.int16[w+1]=h,this.int16[w+2]=g,this.int16[w+3]=x,s}}ph.prototype.bytesPerElement=8,Xe("StructArrayLayout4i8",ph);class ja extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,h,g,x,w)}emplace(s,l,h,g,x,w,C){const T=6*s;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=x,this.int16[T+4]=w,this.int16[T+5]=C,s}}ja.prototype.bytesPerElement=12,Xe("StructArrayLayout2i4i12",ja);class Br extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,h,g,x,w)}emplace(s,l,h,g,x,w,C){const T=4*s,A=8*s;return this.int16[T+0]=l,this.int16[T+1]=h,this.uint8[A+4]=g,this.uint8[A+5]=x,this.uint8[A+6]=w,this.uint8[A+7]=C,s}}Br.prototype.bytesPerElement=8,Xe("StructArrayLayout2i4ub8",Br);class Ro extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l){const h=this.length;return this.resize(h+1),this.emplace(h,s,l)}emplace(s,l,h){const g=2*s;return this.float32[g+0]=l,this.float32[g+1]=h,s}}Ro.prototype.bytesPerElement=8,Xe("StructArrayLayout2f8",Ro);class td extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w,C,T,A,N){const B=this.length;return this.resize(B+1),this.emplace(B,s,l,h,g,x,w,C,T,A,N)}emplace(s,l,h,g,x,w,C,T,A,N,B){const V=10*s;return this.uint16[V+0]=l,this.uint16[V+1]=h,this.uint16[V+2]=g,this.uint16[V+3]=x,this.uint16[V+4]=w,this.uint16[V+5]=C,this.uint16[V+6]=T,this.uint16[V+7]=A,this.uint16[V+8]=N,this.uint16[V+9]=B,s}}td.prototype.bytesPerElement=20,Xe("StructArrayLayout10ui20",td);class Qr extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w,C,T,A,N,B,V){const $=this.length;return this.resize($+1),this.emplace($,s,l,h,g,x,w,C,T,A,N,B,V)}emplace(s,l,h,g,x,w,C,T,A,N,B,V,$){const H=12*s;return this.int16[H+0]=l,this.int16[H+1]=h,this.int16[H+2]=g,this.int16[H+3]=x,this.uint16[H+4]=w,this.uint16[H+5]=C,this.uint16[H+6]=T,this.uint16[H+7]=A,this.int16[H+8]=N,this.int16[H+9]=B,this.int16[H+10]=V,this.int16[H+11]=$,s}}Qr.prototype.bytesPerElement=24,Xe("StructArrayLayout4i4ui4i24",Qr);class xs extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,l,h)}emplace(s,l,h,g){const x=3*s;return this.float32[x+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,s}}xs.prototype.bytesPerElement=12,Xe("StructArrayLayout3f12",xs);class bf extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint32[1*s+0]=l,s}}bf.prototype.bytesPerElement=4,Xe("StructArrayLayout1ul4",bf);class nd extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w,C,T,A){const N=this.length;return this.resize(N+1),this.emplace(N,s,l,h,g,x,w,C,T,A)}emplace(s,l,h,g,x,w,C,T,A,N){const B=10*s,V=5*s;return this.int16[B+0]=l,this.int16[B+1]=h,this.int16[B+2]=g,this.int16[B+3]=x,this.int16[B+4]=w,this.int16[B+5]=C,this.uint32[V+3]=T,this.uint16[B+8]=A,this.uint16[B+9]=N,s}}nd.prototype.bytesPerElement=20,Xe("StructArrayLayout6i1ul2ui20",nd);class xf extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,h,g,x,w)}emplace(s,l,h,g,x,w,C){const T=6*s;return this.int16[T+0]=l,this.int16[T+1]=h,this.int16[T+2]=g,this.int16[T+3]=x,this.int16[T+4]=w,this.int16[T+5]=C,s}}xf.prototype.bytesPerElement=12,Xe("StructArrayLayout2i2i2i12",xf);class v extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x){const w=this.length;return this.resize(w+1),this.emplace(w,s,l,h,g,x)}emplace(s,l,h,g,x,w){const C=4*s,T=8*s;return this.float32[C+0]=l,this.float32[C+1]=h,this.float32[C+2]=g,this.int16[T+6]=x,this.int16[T+7]=w,s}}v.prototype.bytesPerElement=16,Xe("StructArrayLayout2f1f2i16",v);class o extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w){const C=this.length;return this.resize(C+1),this.emplace(C,s,l,h,g,x,w)}emplace(s,l,h,g,x,w,C){const T=16*s,A=4*s,N=8*s;return this.uint8[T+0]=l,this.uint8[T+1]=h,this.float32[A+1]=g,this.float32[A+2]=x,this.int16[N+6]=w,this.int16[N+7]=C,s}}o.prototype.bytesPerElement=16,Xe("StructArrayLayout2ub2f2i16",o);class u extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,l,h)}emplace(s,l,h,g){const x=3*s;return this.uint16[x+0]=l,this.uint16[x+1]=h,this.uint16[x+2]=g,s}}u.prototype.bytesPerElement=6,Xe("StructArrayLayout3ui6",u);class p extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie){const xe=this.length;return this.resize(xe+1),this.emplace(xe,s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie)}emplace(s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie,xe){const he=24*s,pe=12*s,Me=48*s;return this.int16[he+0]=l,this.int16[he+1]=h,this.uint16[he+2]=g,this.uint16[he+3]=x,this.uint32[pe+2]=w,this.uint32[pe+3]=C,this.uint32[pe+4]=T,this.uint16[he+10]=A,this.uint16[he+11]=N,this.uint16[he+12]=B,this.float32[pe+7]=V,this.float32[pe+8]=$,this.uint8[Me+36]=H,this.uint8[Me+37]=K,this.uint8[Me+38]=te,this.uint32[pe+10]=ie,this.int16[he+22]=xe,s}}p.prototype.bytesPerElement=48,Xe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",p);class m extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie,xe,he,pe,Me,Ne,Ve,rt,Ke,nt,wt,tt){const Je=this.length;return this.resize(Je+1),this.emplace(Je,s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie,xe,he,pe,Me,Ne,Ve,rt,Ke,nt,wt,tt)}emplace(s,l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie,xe,he,pe,Me,Ne,Ve,rt,Ke,nt,wt,tt,Je){const ze=32*s,Nt=16*s;return this.int16[ze+0]=l,this.int16[ze+1]=h,this.int16[ze+2]=g,this.int16[ze+3]=x,this.int16[ze+4]=w,this.int16[ze+5]=C,this.int16[ze+6]=T,this.int16[ze+7]=A,this.uint16[ze+8]=N,this.uint16[ze+9]=B,this.uint16[ze+10]=V,this.uint16[ze+11]=$,this.uint16[ze+12]=H,this.uint16[ze+13]=K,this.uint16[ze+14]=te,this.uint16[ze+15]=ie,this.uint16[ze+16]=xe,this.uint16[ze+17]=he,this.uint16[ze+18]=pe,this.uint16[ze+19]=Me,this.uint16[ze+20]=Ne,this.uint16[ze+21]=Ve,this.uint16[ze+22]=rt,this.uint32[Nt+12]=Ke,this.float32[Nt+13]=nt,this.float32[Nt+14]=wt,this.uint16[ze+30]=tt,this.uint16[ze+31]=Je,s}}m.prototype.bytesPerElement=64,Xe("StructArrayLayout8i15ui1ul2f2ui64",m);class b extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.float32[1*s+0]=l,s}}b.prototype.bytesPerElement=4,Xe("StructArrayLayout1f4",b);class E extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,l,h)}emplace(s,l,h,g){const x=3*s;return this.uint16[6*s+0]=l,this.float32[x+1]=h,this.float32[x+2]=g,s}}E.prototype.bytesPerElement=12,Xe("StructArrayLayout1ui2f12",E);class I extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l,h){const g=this.length;return this.resize(g+1),this.emplace(g,s,l,h)}emplace(s,l,h,g){const x=4*s;return this.uint32[2*s+0]=l,this.uint16[x+2]=h,this.uint16[x+3]=g,s}}I.prototype.bytesPerElement=8,Xe("StructArrayLayout1ul2ui8",I);class D extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,l){const h=this.length;return this.resize(h+1),this.emplace(h,s,l)}emplace(s,l,h){const g=2*s;return this.uint16[g+0]=l,this.uint16[g+1]=h,s}}D.prototype.bytesPerElement=4,Xe("StructArrayLayout2ui4",D);class R extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const l=this.length;return this.resize(l+1),this.emplace(l,s)}emplace(s,l){return this.uint16[1*s+0]=l,s}}R.prototype.bytesPerElement=2,Xe("StructArrayLayout1ui2",R);class O extends zn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,l,h,g){const x=this.length;return this.resize(x+1),this.emplace(x,s,l,h,g)}emplace(s,l,h,g,x){const w=4*s;return this.float32[w+0]=l,this.float32[w+1]=h,this.float32[w+2]=g,this.float32[w+3]=x,s}}O.prototype.bytesPerElement=16,Xe("StructArrayLayout4f16",O);class j extends uu{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new gt(this.anchorPointX,this.anchorPointY)}}j.prototype.size=20;class z extends nd{get(s){return new j(this,s)}}Xe("CollisionBoxArray",z);class U extends uu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}U.prototype.size=48;class q extends p{get(s){return new U(this,s)}}Xe("PlacedSymbolArray",q);class ne extends uu{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ne.prototype.size=64;class ee extends m{get(s){return new ne(this,s)}}Xe("SymbolInstanceArray",ee);class re extends b{getoffsetX(s){return this.float32[1*s+0]}}Xe("GlyphOffsetArray",re);class oe extends Yl{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Xe("SymbolLineVertexArray",oe);class ue extends uu{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ue.prototype.size=12;class ae extends E{get(s){return new ue(this,s)}}Xe("TextAnchorOffsetArray",ae);class fe extends uu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fe.prototype.size=8;class ge extends I{get(s){return new fe(this,s)}}Xe("FeatureIndexArray",ge);class le extends ed{}class be extends ed{}class ke extends ed{}class Te extends ja{}class Ie extends Br{}class Ae extends Ro{}class We extends td{}class qe extends Qr{}class Be extends xs{}class ht extends bf{}class en extends xf{}class Dn extends o{}class In extends u{}class pn extends D{}const ar=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:wr}=ar;class tn{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,l,h,g){const x=this.segments[this.segments.length-1];return s>tn.MAX_VERTEX_ARRAY_LENGTH&&Wr(`Max vertices per segment is ${tn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${tn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!x||x.vertexLength+s>tn.MAX_VERTEX_ARRAY_LENGTH||x.sortKey!==g?this.createNewSegment(l,h,g):x}createNewSegment(s,l,h){const g={vertexOffset:s.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==h&&(g.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(g),g}getOrCreateLatestSegment(s,l,h){return this.prepareSegment(0,s,l,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const l in s.vaos)s.vaos[l].destroy()}static simpleSegment(s,l,h,g){return new tn([{vertexOffset:s,primitiveOffset:l,vertexLength:h,primitiveLength:g,vaos:{},sortKey:0}])}}function jn(c,s){return 256*(c=Nr(Math.floor(c),0,255))+Nr(Math.floor(s),0,255)}tn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xe("SegmentVector",tn);const li=xr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var kn,Jr,Vi,xi={exports:{}},Js={exports:{}},Xl={exports:{}},pl=kl(function(){if(Vi)return xi.exports;Vi=1;var c=(kn||(kn=1,Js.exports=function(l,h){var g,x,w,C,T,A,N,B;for(x=l.length-(g=3&l.length),w=h,T=3432918353,A=461845907,B=0;B<x;)N=255&l.charCodeAt(B)|(255&l.charCodeAt(++B))<<8|(255&l.charCodeAt(++B))<<16|(255&l.charCodeAt(++B))<<24,++B,w=27492+(65535&(C=5*(65535&(w=(w^=N=(65535&(N=(N=(65535&N)*T+(((N>>>16)*T&65535)<<16)&4294967295)<<15|N>>>17))*A+(((N>>>16)*A&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(N=0,g){case 3:N^=(255&l.charCodeAt(B+2))<<16;case 2:N^=(255&l.charCodeAt(B+1))<<8;case 1:w^=N=(65535&(N=(N=(65535&(N^=255&l.charCodeAt(B)))*T+(((N>>>16)*T&65535)<<16)&4294967295)<<15|N>>>17))*A+(((N>>>16)*A&65535)<<16)&4294967295}return w^=l.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),Js.exports),s=(Jr||(Jr=1,Xl.exports=function(l,h){for(var g,x=l.length,w=h^x,C=0;x>=4;)g=1540483477*(65535&(g=255&l.charCodeAt(C)|(255&l.charCodeAt(++C))<<8|(255&l.charCodeAt(++C))<<16|(255&l.charCodeAt(++C))<<24))+((1540483477*(g>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(g=1540483477*(65535&(g^=g>>>24))+((1540483477*(g>>>16)&65535)<<16)),x-=4,++C;switch(x){case 3:w^=(255&l.charCodeAt(C+2))<<16;case 2:w^=(255&l.charCodeAt(C+1))<<8;case 1:w=1540483477*(65535&(w^=255&l.charCodeAt(C)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),Xl.exports);return xi.exports=c,xi.exports.murmur3=c,xi.exports.murmur2=s,xi.exports}());class du{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,l,h,g){this.ids.push(Va(s)),this.positions.push(l,h,g)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Va(s);let h=0,g=this.ids.length-1;for(;h<g;){const w=h+g>>1;this.ids[w]>=l?g=w:h=w+1}const x=[];for(;this.ids[h]===l;)x.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return x}static serialize(s,l){const h=new Float64Array(s.ids),g=new Uint32Array(s.positions);return po(h,g,0,h.length-1),l&&l.push(h.buffer,g.buffer),{ids:h,positions:g}}static deserialize(s){const l=new du;return l.ids=s.ids,l.positions=s.positions,l.indexed=!0,l}}function Va(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:pl(String(c))}function po(c,s,l,h){for(;l<h;){const g=c[l+h>>1];let x=l-1,w=h+1;for(;;){do{x++}while(c[x]<g);do{w--}while(c[w]>g);if(x>=w)break;wi(c,x,w),wi(s,3*x,3*w),wi(s,3*x+1,3*w+1),wi(s,3*x+2,3*w+2)}w-l<h-w?(po(c,s,l,w),l=w+1):(po(c,s,w+1,h),h=w)}}function wi(c,s,l){const h=c[s];c[s]=c[l],c[l]=h}Xe("FeaturePositionMap",du);class Ui{constructor(s,l){this.gl=s.gl,this.location=l}}class ts extends Ui{constructor(s,l){super(s,l),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class zr extends Ui{constructor(s,l){super(s,l),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class ci extends Ui{constructor(s,l){super(s,l),this.current=ln.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const No=new Float32Array(16);function lr(c){return[jn(255*c.r,255*c.g),jn(255*c.b,255*c.a)]}class rd{constructor(s,l,h){this.value=s,this.uniformNames=l.map(g=>`u_${g}`),this.type=h}setUniform(s,l,h){s.set(h.constantOr(this.value))}getBinding(s,l,h){return"color"===this.type?new ci(s,l):new ts(s,l)}}class hu{constructor(s,l){this.uniformNames=l.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=s.tlbr}setUniform(s,l,h,g){const x="u_pattern_to"===g?this.patternTo:"u_pattern_from"===g?this.patternFrom:"u_pixel_ratio_to"===g?this.pixelRatioTo:"u_pixel_ratio_from"===g?this.pixelRatioFrom:null;x&&s.set(x)}getBinding(s,l,h){return"u_pattern"===h.substr(0,9)?new zr(s,l):new ts(s,l)}}class ws{constructor(s,l,h,g){this.expression=s,this.type=h,this.maxValue=0,this.paintVertexAttributes=l.map(x=>({name:`a_${x}`,type:"Float32",components:"color"===h?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(s,l,h,g,x){const w=this.paintVertexArray.length,C=this.expression.evaluate(new sr(0),l,{},g,[],x);this.paintVertexArray.resize(s),this._setPaintValue(w,s,C)}updatePaintArray(s,l,h,g){const x=this.expression.evaluate({zoom:0},h,g);this._setPaintValue(s,l,x)}_setPaintValue(s,l,h){if("color"===this.type){const g=lr(h);for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,g[0],g[1])}else{for(let g=s;g<l;g++)this.paintVertexArray.emplace(g,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ss{constructor(s,l,h,g,x,w){this.expression=s,this.uniformNames=l.map(C=>`u_${C}_t`),this.type=h,this.useIntegerZoom=g,this.zoom=x,this.maxValue=0,this.paintVertexAttributes=l.map(C=>({name:`a_${C}`,type:"Float32",components:"color"===h?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(s,l,h,g,x){const w=this.expression.evaluate(new sr(this.zoom),l,{},g,[],x),C=this.expression.evaluate(new sr(this.zoom+1),l,{},g,[],x),T=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(T,s,w,C)}updatePaintArray(s,l,h,g){const x=this.expression.evaluate({zoom:this.zoom},h,g),w=this.expression.evaluate({zoom:this.zoom+1},h,g);this._setPaintValue(s,l,x,w)}_setPaintValue(s,l,h,g){if("color"===this.type){const x=lr(h),w=lr(g);for(let C=s;C<l;C++)this.paintVertexArray.emplace(C,x[0],x[1],w[0],w[1])}else{for(let x=s;x<l;x++)this.paintVertexArray.emplace(x,h,g);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(g))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,l){const h=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,g=Nr(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);s.set(g)}getBinding(s,l,h){return new ts(s,l)}}class gl{constructor(s,l,h,g,x,w){this.expression=s,this.type=l,this.useIntegerZoom=h,this.zoom=g,this.layerId=w,this.zoomInPaintVertexArray=new x,this.zoomOutPaintVertexArray=new x}populatePaintArray(s,l,h){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(g,s,l.patterns&&l.patterns[this.layerId],h)}updatePaintArray(s,l,h,g,x){this._setPaintValues(s,l,h.patterns&&h.patterns[this.layerId],x)}_setPaintValues(s,l,h,g){if(!g||!h)return;const{min:x,mid:w,max:C}=h,T=g[x],A=g[w],N=g[C];if(T&&A&&N)for(let B=s;B<l;B++)this.zoomInPaintVertexArray.emplace(B,A.tl[0],A.tl[1],A.br[0],A.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],A.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,A.tl[0],A.tl[1],A.br[0],A.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],A.pixelRatio,N.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,li.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,li.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class gh{constructor(s,l,h){this.binders={},this._buffers=[];const g=[];for(const x in s.paint._values){if(!h(x))continue;const w=s.paint.get(x);if(!(w instanceof Ba&&He(w.property.specification)))continue;const C=ea(x,s.type),T=w.value,A=w.property.specification.type,N=w.property.useIntegerZoom,B=w.property.specification["property-type"],V="cross-faded"===B||"cross-faded-data-driven"===B;if("constant"===T.kind)this.binders[x]=V?new hu(T.value,C):new rd(T.value,C,A),g.push(`/u_${x}`);else if("source"===T.kind||V){const $=Ua(x,A,"source");this.binders[x]=V?new gl(T,A,N,l,$,s.id):new ws(T,C,A,$),g.push(`/a_${x}`)}else{const $=Ua(x,A,"composite");this.binders[x]=new Ss(T,C,A,N,l,$),g.push(`/z_${x}`)}}this.cacheKey=g.sort().join("")}getMaxValue(s){const l=this.binders[s];return l instanceof ws||l instanceof Ss?l.maxValue:0}populatePaintArrays(s,l,h,g,x){for(const w in this.binders){const C=this.binders[w];(C instanceof ws||C instanceof Ss||C instanceof gl)&&C.populatePaintArray(s,l,h,g,x)}}setConstantPatternPositions(s,l){for(const h in this.binders){const g=this.binders[h];g instanceof hu&&g.setConstantPatternPositions(s,l)}}updatePaintArrays(s,l,h,g,x){let w=!1;for(const C in s){const T=l.getPositions(C);for(const A of T){const N=h.feature(A.index);for(const B in this.binders){const V=this.binders[B];if((V instanceof ws||V instanceof Ss||V instanceof gl)&&!0===V.expression.isStateDependent){const $=g.paint.get(B);V.expression=$.value,V.updatePaintArray(A.start,A.end,N,s[C],x),w=!0}}}}return w}defines(){const s=[];for(const l in this.binders){const h=this.binders[l];(h instanceof rd||h instanceof hu)&&s.push(...h.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return s}getBinderAttributes(){const s=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof ws||h instanceof Ss)for(let g=0;g<h.paintVertexAttributes.length;g++)s.push(h.paintVertexAttributes[g].name);else if(h instanceof gl)for(let g=0;g<li.members.length;g++)s.push(li.members[g].name)}return s}getBinderUniforms(){const s=[];for(const l in this.binders){const h=this.binders[l];if(h instanceof rd||h instanceof hu||h instanceof Ss)for(const g of h.uniformNames)s.push(g)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,l){const h=[];for(const g in this.binders){const x=this.binders[g];if(x instanceof rd||x instanceof hu||x instanceof Ss)for(const w of x.uniformNames)if(l[w]){const C=x.getBinding(s,l[w],w);h.push({name:w,property:g,binding:C})}}return h}setUniforms(s,l,h,g){for(const{name:x,property:w,binding:C}of l)this.binders[w].setUniform(C,g,h.get(w),x)}updatePaintBuffers(s){this._buffers=[];for(const l in this.binders){const h=this.binders[l];if(s&&h instanceof gl){const g=2===s.fromScale?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(h instanceof ws||h instanceof Ss)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(s){for(const l in this.binders){const h=this.binders[l];(h instanceof ws||h instanceof Ss||h instanceof gl)&&h.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const l=this.binders[s];(l instanceof ws||l instanceof Ss||l instanceof gl)&&l.destroy()}}}class go{constructor(s,l,h=()=>!0){this.programConfigurations={};for(const g of s)this.programConfigurations[g.id]=new gh(g,l,h);this.needsUpload=!1,this._featureMap=new du,this._bufferOffset=0}populatePaintArrays(s,l,h,g,x,w){for(const C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(s,l,g,x,w);void 0!==l.id&&this._featureMap.add(l.id,h,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,l,h,g){for(const x of h)this.needsUpload=this.programConfigurations[x.id].updatePaintArrays(s,this._featureMap,l,x,g)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function ea(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function Ua(c,s,l){const g={"line-pattern":{source:We,composite:We},"fill-pattern":{source:We,composite:We},"fill-extrusion-pattern":{source:We,composite:We}}[c];return g&&g[l]||{color:{source:Ro,composite:O},number:{source:b,composite:Ro}}[s][l]}Xe("ConstantBinder",rd),Xe("CrossFadedConstantBinder",hu),Xe("SourceExpressionBinder",ws),Xe("CrossFadedCompositeBinder",gl),Xe("CompositeExpressionBinder",Ss),Xe("ProgramConfiguration",gh,{omit:["_buffers"]}),Xe("ProgramConfigurationSet",go);const id=Math.pow(2,14)-1,od=-id-1;function ns(c){const s=En/c.extent,l=c.loadGeometry();for(let h=0;h<l.length;h++){const g=l[h];for(let x=0;x<g.length;x++){const w=g[x],C=Math.round(w.x*s),T=Math.round(w.y*s);w.x=Nr(C,od,id),w.y=Nr(T,od,id),(C<w.x||C>w.x+1||T<w.y||T>w.y+1)&&Wr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function $a(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?ns(c):[]}}function yy(c,s,l,h,g){c.emplaceBack(8*s-32768+h,8*l-32768+g)}class Pm{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new be,this.indexArray=new In,this.segments=new tn,this.programConfigurations=new go(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,h){const g=this.layers[0],x=[];let w=null,C=!1,T="heatmap"===g.type;if("circle"===g.type){const N=g;w=N.layout.get("circle-sort-key"),C=!w.isConstant(),T=T||"map"===N.paint.get("circle-pitch-alignment")}const A=T?l.subdivisionGranularity.circle:1;for(const{feature:N,id:B,index:V,sourceLayerIndex:$}of s){const H=this.layers[0]._featureFilter.needGeometry,K=$a(N,H);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom,{globalState:this.globalState}),K,h))continue;const te=C?w.evaluate(K,{},h):void 0,ie={id:B,properties:N.properties,type:N.type,sourceLayerIndex:$,index:V,geometry:H?K.geometry:ns(N),patterns:{},sortKey:te};x.push(ie)}C&&x.sort((N,B)=>N.sortKey-B.sortKey);for(const N of x){const{geometry:B,index:V,sourceLayerIndex:$}=N,H=s[V].feature;this.addFeature(N,B,V,h,A),l.featureIndex.insert(H,B,V,$,this.index)}}update(s,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,wr),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,l,h,g,x=1){let w;switch(x){case 1:w=[0,7];break;case 3:w=[0,2,5,7];break;case 5:w=[0,1,3,4,6,7];break;case 7:w=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${x}; valid values are 1, 3, 5, 7.`)}const C=w.length;for(const T of l)for(const A of T){const N=A.x,B=A.y;if(N<0||N>=En||B<0||B>=En)continue;const V=this.segments.prepareSegment(C*C,this.layoutVertexArray,this.indexArray,s.sortKey),$=V.vertexLength;for(let H=0;H<C;H++)for(let K=0;K<C;K++)yy(this.layoutVertexArray,N,B,w[K],w[H]);for(let H=0;H<C-1;H++)for(let K=0;K<C-1;K++){const te=$+H*C+K,ie=$+(H+1)*C+K;this.indexArray.emplaceBack(te,ie+1,te+1),this.indexArray.emplaceBack(te,ie,ie+1)}V.vertexLength+=C*C,V.primitiveLength+=(C-1)*(C-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,{},g)}}function vy(c,s){for(let l=0;l<c.length;l++)if(rs(s,c[l]))return!0;for(let l=0;l<s.length;l++)if(rs(c,s[l]))return!0;return!!Ap(c,s)}function cx(c,s,l){return!!rs(c,s)||!!Si(s,c,l)}function Am(c,s){if(1===c.length)return Hn(s,c[0]);for(let l=0;l<s.length;l++){const h=s[l];for(let g=0;g<h.length;g++)if(rs(c,h[g]))return!0}for(let l=0;l<c.length;l++)if(Hn(s,c[l]))return!0;for(let l=0;l<s.length;l++)if(Ap(c,s[l]))return!0;return!1}function Jl(c,s,l){if(c.length>1){if(Ap(c,s))return!0;for(let h=0;h<s.length;h++)if(Si(s[h],c,l))return!0}for(let h=0;h<c.length;h++)if(Si(c[h],s,l))return!0;return!1}function Ap(c,s){if(0===c.length||0===s.length)return!1;for(let l=0;l<c.length-1;l++){const h=c[l],g=c[l+1];for(let x=0;x<s.length-1;x++)if(no(h,g,s[x],s[x+1]))return!0}return!1}function no(c,s,l,h){return hs(c,l,h)!==hs(s,l,h)&&hs(c,s,l)!==hs(c,s,h)}function Si(c,s,l){const h=l*l;if(1===s.length)return c.distSqr(s[0])<h;for(let g=1;g<s.length;g++)if(by(c,s[g-1],s[g])<h)return!0;return!1}function by(c,s,l){const h=s.distSqr(l);if(0===h)return c.distSqr(s);const g=((c.x-s.x)*(l.x-s.x)+(c.y-s.y)*(l.y-s.y))/h;return c.distSqr(g<0?s:g>1?l:l.sub(s)._mult(g)._add(s))}function Hn(c,s){let l,h,g,x=!1;for(let w=0;w<c.length;w++){l=c[w];for(let C=0,T=l.length-1;C<l.length;T=C++)h=l[C],g=l[T],h.y>s.y!=g.y>s.y&&s.x<(g.x-h.x)*(s.y-h.y)/(g.y-h.y)+h.x&&(x=!x)}return x}function rs(c,s){let l=!1;for(let h=0,g=c.length-1;h<c.length;g=h++){const x=c[h],w=c[g];x.y>s.y!=w.y>s.y&&s.x<(w.x-x.x)*(s.y-x.y)/(w.y-x.y)+x.x&&(l=!l)}return l}function mh(c,s,l){const h=l[0],g=l[2];if(c.x<h.x&&s.x<h.x||c.x>g.x&&s.x>g.x||c.y<h.y&&s.y<h.y||c.y>g.y&&s.y>g.y)return!1;const x=hs(c,s,l[0]);return x!==hs(c,s,l[1])||x!==hs(c,s,l[2])||x!==hs(c,s,l[3])}function ml(c,s,l){const h=s.paint.get(c).value;return"constant"===h.kind?h.value:l.programConfigurations.get(s.id).getMaxValue(c)}function ec(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function wf(c,s,l,h,g){if(!s[0]&&!s[1])return c;const x=gt.convert(s)._mult(g);"viewport"===l&&x._rotate(-h);const w=[];for(let C=0;C<c.length;C++)w.push(c[C].sub(x));return w}let Rp,sd;Xe("CircleBucket",Pm,{omit:["layers"]});var jT={get paint(){return sd=sd||new Mt({"circle-radius":new Ce(Ee.paint_circle["circle-radius"]),"circle-color":new Ce(Ee.paint_circle["circle-color"]),"circle-blur":new Ce(Ee.paint_circle["circle-blur"]),"circle-opacity":new Ce(Ee.paint_circle["circle-opacity"]),"circle-translate":new mt(Ee.paint_circle["circle-translate"]),"circle-translate-anchor":new mt(Ee.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new mt(Ee.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new mt(Ee.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ce(Ee.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ce(Ee.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ce(Ee.paint_circle["circle-stroke-opacity"])})},get layout(){return Rp=Rp||new Mt({"circle-sort-key":new Ce(Ee.layout_circle["circle-sort-key"])})}};class ux extends ji{constructor(s){super(s,jT)}createBucket(s){return new Pm(s)}queryRadius(s){const l=s;return ml("circle-radius",this,l)+ml("circle-stroke-width",this,l)+ec(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:h,geometry:g,transform:x,pixelsToTileUnits:w,unwrappedTileID:C,getElevation:T}){const A=wf(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-x.bearingInRadians,w),N=this.paint.get("circle-radius").evaluate(l,h)+this.paint.get("circle-stroke-width").evaluate(l,h),B="map"===this.paint.get("circle-pitch-alignment"),V=B?A:(K=x,te=C,ie=T,A.map(xe=>Np(xe,K,te,ie))),$=B?N*w:N;var K,te,ie;for(const H of g)for(const K of H){const te=B?K:Np(K,x,C,T);let ie=$;const xe=x.projectTileCoordinates(K.x,K.y,C,T).signedDistanceFromCamera;if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ie*=xe/x.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ie*=x.cameraToCenterDistance/xe),cx(V,te,ie))return!0}return!1}}function Np(c,s,l,h){const g=s.projectTileCoordinates(c.x,c.y,l,h).point;return new gt((.5*g.x+.5)*s.width,(.5*-g.y+.5)*s.height)}class xy extends Pm{}let Lp;Xe("HeatmapBucket",xy,{omit:["layers"]});var dx={get paint(){return Lp=Lp||new Mt({"heatmap-radius":new Ce(Ee.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ce(Ee.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new mt(Ee.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ki(Ee.paint_heatmap["heatmap-color"]),"heatmap-opacity":new mt(Ee.paint_heatmap["heatmap-opacity"])})}};function is(c,{width:s,height:l},h,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==s*l*h)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${s*l*h}`)}else g=new Uint8Array(s*l*h);return c.width=s,c.height=l,c.data=g,c}function Rm(c,{width:s,height:l},h){if(s===c.width&&l===c.height)return;const g=is({},{width:s,height:l},h);Nm(c,g,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,l)},h),c.width=s,c.height=l,c.data=g.data}function Nm(c,s,l,h,g,x){if(0===g.width||0===g.height)return s;if(g.width>c.width||g.height>c.height||l.x>c.width-g.width||l.y>c.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>s.width||g.height>s.height||h.x>s.width-g.width||h.y>s.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const w=c.data,C=s.data;if(w===C)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<g.height;T++){const A=((l.y+T)*c.width+l.x)*x,N=((h.y+T)*s.width+h.x)*x;for(let B=0;B<g.width*x;B++)C[N+B]=w[A+B]}return s}class tc{constructor(s,l){is(this,s,1,l)}resize(s){Rm(this,s,1)}clone(){return new tc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,h,g,x){Nm(s,l,h,g,x,1)}}class Lo{constructor(s,l){is(this,s,4,l)}resize(s){Rm(this,s,4)}replace(s,l){l?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new Lo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,l,h,g,x){Nm(s,l,h,g,x,4)}setPixel(s,l,h){const g=4*(s*this.width+l);this.data[g+0]=Math.round(255*h.r/h.a),this.data[g+1]=Math.round(255*h.g/h.a),this.data[g+2]=Math.round(255*h.b/h.a),this.data[g+3]=Math.round(255*h.a)}}function wy(c){const s={},l=c.resolution||256,h=c.clips?c.clips.length:1,g=c.image||new Lo({width:l,height:h});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const x=(w,C,T)=>{s[c.evaluationKey]=T;const A=c.expression.evaluate(s);g.setPixel(w/4/l,C/4,A)};if(c.clips)for(let w=0,C=0;w<h;++w,C+=4*l)for(let T=0,A=0;T<l;T++,A+=4){const N=T/(l-1),{start:B,end:V}=c.clips[w];x(C,A,B*(1-N)+V*N)}else for(let w=0,C=0;w<l;w++,C+=4)x(0,C,w/(l-1));return g}Xe("AlphaImage",tc),Xe("RGBAImage",Lo);const Lm="big-fb";class hx extends ji{createBucket(s){return new xy(s)}constructor(s){super(s,dx),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){"heatmap-color"===s&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wy({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Lm)&&this.heatmapFbos.delete(Lm)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Sy;var fx={get paint(){return Sy=Sy||new Mt({"hillshade-illumination-direction":new mt(Ee.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new mt(Ee.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new mt(Ee.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new mt(Ee.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new mt(Ee.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new mt(Ee.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new mt(Ee.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new mt(Ee.paint_hillshade["hillshade-method"])})}};class Om extends ji{constructor(s){super(s,fx),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,g=this.paint.get("hillshade-shadow-color").values;const x=Math.max(s.length,l.length,h.length,g.length);s=s.concat(Array(x-s.length).fill(s.at(-1))),l=l.concat(Array(x-l.length).fill(l.at(-1))),h=h.concat(Array(x-h.length).fill(h.at(-1))),g=g.concat(Array(x-g.length).fill(g.at(-1)));const w=l.map(ba);return{directionRadians:s.map(ba),altitudeRadians:w,shadowColor:g,highlightColor:h}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let Sf;var px={get paint(){return Sf=Sf||new Mt({"color-relief-opacity":new mt(Ee["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ki(Ee["paint_color-relief"]["color-relief-color"])})}};class Op{constructor(s,l,h,g){this.context=s,this.format=h,this.texture=s.gl.createTexture(),this.update(l,g)}update(s,l,h){const{width:g,height:x}=s,w=!(this.size&&this.size[0]===g&&this.size[1]===x||h),{context:C}=this,{gl:T}=C;if(this.useMipmap=!(!l||!l.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!l||!1!==l.premultiply)),w)this.size=[g,x],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||va(s)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,s):T.texImage2D(T.TEXTURE_2D,0,this.format,g,x,0,this.format,T.UNSIGNED_BYTE,s.data);else{const{x:A,y:N}=h||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||va(s)?T.texSubImage2D(T.TEXTURE_2D,0,A,N,T.RGBA,T.UNSIGNED_BYTE,s):T.texSubImage2D(T.TEXTURE_2D,0,A,N,g,x,T.RGBA,T.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),C.pixelStoreUnpackFlipY.setDefault(),C.pixelStoreUnpack.setDefault(),C.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,l,h){const{context:g}=this,{gl:x}=g;x.bindTexture(x.TEXTURE_2D,this.texture),h!==x.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=x.LINEAR),s!==this.filter&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,s),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,h||s),this.filter=s),l!==this.wrap&&(x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,l),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class _l{constructor(s,l,h,g=1,x=1,w=1,C=0){if(this.uid=s,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Wr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const T=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=g,this.greenFactor=x,this.blueFactor=w,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<T;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(T,A)]=this.data[this._idx(T-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,T)]=this.data[this._idx(A,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<T;A++)for(let N=0;N<T;N++){const B=this.get(A,N);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(s,l){const h=new Uint8Array(this.data.buffer),g=4*this._idx(s,l);return this.unpack(h[g],h[g+1],h[g+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,l){if(s<-1||s>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(s+1)}unpack(s,l,h){return s*this.redFactor+l*this.greenFactor+h*this.blueFactor-this.baseShift}pack(s){return Fm(s,this.getUnpackVector())}getPixels(){return new Lo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,l,h){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let g=l*this.dim,x=l*this.dim+this.dim,w=h*this.dim,C=h*this.dim+this.dim;switch(l){case-1:g=x-1;break;case 1:x=g+1}switch(h){case-1:w=C-1;break;case 1:C=w+1}const T=-l*this.dim,A=-h*this.dim;for(let N=w;N<C;N++)for(let B=g;B<x;B++)this.data[this._idx(B,N)]=s.data[this._idx(B+T,N+A)]}}function Fm(c,s){const l=s[0],h=s[1],g=s[2],x=s[3],w=Math.min(l,h,g),C=Math.round((c+x)/w);return{r:Math.floor(C*w/l)%256,g:Math.floor(C*w/h)%256,b:Math.floor(C*w/g)%256}}Xe("DEMData",_l);class gx extends ji{constructor(s){super(s,px)}_createColorRamp(s){const l={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof ys&&h._styleExpression.expression instanceof vi){this.colorRampExpression=h;const w=h._styleExpression.expression;l.elevationStops=w.labels,l.colorStops=[];for(const C of l.elevationStops)l.colorStops.push(w.evaluate({globals:{elevation:C}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[ln.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=s)return l;const g={elevationStops:[],colorStops:[]},x=(l.elevationStops.length-1)/(s-1);for(let w=0;w<l.elevationStops.length-.5;w+=x)g.elevationStops.push(l.elevationStops[Math.round(w)]),g.colorStops.push(l.colorStops[Math.round(w)]);return Wr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),g}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,l,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const g=this._createColorRamp(l),x=new Lo({width:g.colorStops.length,height:1}),w=new Lo({width:g.colorStops.length,height:1});for(let C=0;C<g.elevationStops.length;C++){const T=Fm(g.elevationStops[C],h);w.setPixel(0,C,new ln(T.r/255,T.g/255,T.b/255,1)),x.setPixel(0,C,g.colorStops[C])}return this.colorRampTextures={elevationTexture:new Op(s,w,s.gl.RGBA),colorTexture:new Op(s,x,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return"none"!==this.visibility&&!!this.colorRampTextures}}const mx=xr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ey}=mx;function Fp(c,s,l){const h=l.patternDependencies;let g=!1;for(const x of s){const w=x.paint.get(`${c}-pattern`);w.isConstant()||(g=!0);const C=w.constantOr(null);C&&(g=!0,h[C.to]=!0,h[C.from]=!0)}return g}function Bm(c,s,l,h,g){const x=g.patternDependencies;for(const w of s){const C=w.paint.get(`${c}-pattern`).value;if("constant"!==C.kind){let T=C.evaluate({zoom:h-1},l,{},g.availableImages),A=C.evaluate({zoom:h},l,{},g.availableImages),N=C.evaluate({zoom:h+1},l,{},g.availableImages);T=T&&T.name?T.name:T,A=A&&A.name?A.name:A,N=N&&N.name?N.name:N,x[T]=!0,x[A]=!0,x[N]=!0,l.patterns[w.id]={min:T,mid:A,max:N}}}return l}function fu(c,s,l,h,g){let x;if(g===function(w,C,T,A){let N=0;for(let B=C,V=T-A;B<T;B+=A)N+=(w[V]-w[B])*(w[B+1]+w[V+1]),V=B;return N}(c,s,l,h)>0)for(let w=s;w<l;w+=h)x=My(w/h|0,c[w],c[w+1],x);else for(let w=l-h;w>=s;w-=h)x=My(w/h|0,c[w],c[w+1],x);return x&&ld(x,x.next)&&(_h(x),x=x.next),x}function ad(c,s){if(!c)return c;s||(s=c);let l,h=c;do{if(l=!1,h.steiner||!ld(h,h.next)&&0!==Sr(h.prev,h,h.next))h=h.next;else{if(_h(h),h=s=h.prev,h===h.next)break;l=!0}}while(l||h!==s);return s}function Ef(c,s,l,h,g,x,w){if(!c)return;!w&&x&&function(T,A,N,B){let V=T;do{0===V.z&&(V.z=jp(V.x,V.y,A,N,B)),V.prevZ=V.prev,V.nextZ=V.next,V=V.next}while(V!==T);V.prevZ.nextZ=null,V.prevZ=null,function($){let H,K=1;do{let te,ie=$;$=null;let xe=null;for(H=0;ie;){H++;let he=ie,pe=0;for(let Ne=0;Ne<K&&(pe++,he=he.nextZ,he);Ne++);let Me=K;for(;pe>0||Me>0&&he;)0!==pe&&(0===Me||!he||ie.z<=he.z)?(te=ie,ie=ie.nextZ,pe--):(te=he,he=he.nextZ,Me--),xe?xe.nextZ=te:$=te,te.prevZ=xe,xe=te;ie=he}xe.nextZ=null,K*=2}while(H>1)}(V)}(c,h,g,x);let C=c;for(;c.prev!==c.next;){const T=c.prev,A=c.next;if(x?qn(c,h,g,x):_x(c))s.push(T.i,c.i,A.i),_h(c),c=A.next,C=A.next;else if((c=A)===C){w?1===w?Ef(c=yx(ad(c),s),s,l,h,g,x,2):2===w&&Cy(c,s,l,h,g,x):Ef(ad(c),s,l,h,g,x,1);break}}}function _x(c){const s=c.prev,l=c,h=c.next;if(Sr(s,l,h)>=0)return!1;const g=s.x,x=l.x,w=h.x,C=s.y,T=l.y,A=h.y,N=Math.min(g,x,w),B=Math.min(C,T,A),V=Math.max(g,x,w),$=Math.max(C,T,A);let H=h.next;for(;H!==s;){if(H.x>=N&&H.x<=V&&H.y>=B&&H.y<=$&&yl(g,C,x,T,w,A,H.x,H.y)&&Sr(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function qn(c,s,l,h){const g=c.prev,x=c,w=c.next;if(Sr(g,x,w)>=0)return!1;const C=g.x,T=x.x,A=w.x,N=g.y,B=x.y,V=w.y,$=Math.min(C,T,A),H=Math.min(N,B,V),K=Math.max(C,T,A),te=Math.max(N,B,V),ie=jp($,H,s,l,h),xe=jp(K,te,s,l,h);let he=c.prevZ,pe=c.nextZ;for(;he&&he.z>=ie&&pe&&pe.z<=xe;){if(he.x>=$&&he.x<=K&&he.y>=H&&he.y<=te&&he!==g&&he!==w&&yl(C,N,T,B,A,V,he.x,he.y)&&Sr(he.prev,he,he.next)>=0||(he=he.prevZ,pe.x>=$&&pe.x<=K&&pe.y>=H&&pe.y<=te&&pe!==g&&pe!==w&&yl(C,N,T,B,A,V,pe.x,pe.y)&&Sr(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;he&&he.z>=ie;){if(he.x>=$&&he.x<=K&&he.y>=H&&he.y<=te&&he!==g&&he!==w&&yl(C,N,T,B,A,V,he.x,he.y)&&Sr(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;pe&&pe.z<=xe;){if(pe.x>=$&&pe.x<=K&&pe.y>=H&&pe.y<=te&&pe!==g&&pe!==w&&yl(C,N,T,B,A,V,pe.x,pe.y)&&Sr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function yx(c,s){let l=c;do{const h=l.prev,g=l.next.next;!ld(h,g)&&vx(h,l,l.next,g)&&$p(h,g)&&$p(g,h)&&(s.push(h.i,l.i,g.i),_h(l),_h(l.next),l=c=g),l=l.next}while(l!==c);return ad(l)}function Cy(c,s,l,h,g,x){let w=c;do{let C=w.next.next;for(;C!==w.prev;){if(w.i!==C.i&&Cf(w,C)){let T=bx(w,C);return w=ad(w,w.next),T=ad(T,T.next),Ef(w,s,l,h,g,x,0),void Ef(T,s,l,h,g,x,0)}C=C.next}w=w.next}while(w!==c)}function Bp(c,s){let l=c.x-s.x;return 0===l&&(l=c.y-s.y,0===l)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),l}function zp(c,s){const l=function(g,x){let w=x;const C=g.x,T=g.y;let A,N=-1/0;if(ld(g,w))return w;do{if(ld(g,w.next))return w.next;if(T<=w.y&&T>=w.next.y&&w.next.y!==w.y){const K=w.x+(T-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if(K<=C&&K>N&&(N=K,A=w.x<w.next.x?w:w.next,K===C))return A}w=w.next}while(w!==x);if(!A)return null;const B=A,V=A.x,$=A.y;let H=1/0;w=A;do{if(C>=w.x&&w.x>=V&&C!==w.x&&Iy(T<$?C:N,T,V,$,T<$?N:C,T,w.x,w.y)){const K=Math.abs(T-w.y)/(C-w.x);$p(w,g)&&(K<H||K===H&&(w.x>A.x||w.x===A.x&&zm(A,w)))&&(A=w,H=K)}w=w.next}while(w!==B);return A}(c,s);if(!l)return s;const h=bx(l,c);return ad(h,h.next),ad(l,l.next)}function zm(c,s){return Sr(c.prev,c,s.prev)<0&&Sr(s.next,c,c.next)<0}function jp(c,s,l,h,g){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*g|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-h)*g|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function Ty(c){let s=c,l=c;do{(s.x<l.x||s.x===l.x&&s.y<l.y)&&(l=s),s=s.next}while(s!==c);return l}function Iy(c,s,l,h,g,x,w,C){return(g-w)*(s-C)>=(c-w)*(x-C)&&(c-w)*(h-C)>=(l-w)*(s-C)&&(l-w)*(x-C)>=(g-w)*(h-C)}function yl(c,s,l,h,g,x,w,C){return!(c===w&&s===C)&&Iy(c,s,l,h,g,x,w,C)}function Cf(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(l,h){let g=l;do{if(g.i!==l.i&&g.next.i!==l.i&&g.i!==h.i&&g.next.i!==h.i&&vx(g,g.next,l,h))return!0;g=g.next}while(g!==l);return!1}(c,s)&&($p(c,s)&&$p(s,c)&&function(l,h){let g=l,x=!1;const w=(l.x+h.x)/2,C=(l.y+h.y)/2;do{g.y>C!=g.next.y>C&&g.next.y!==g.y&&w<(g.next.x-g.x)*(C-g.y)/(g.next.y-g.y)+g.x&&(x=!x),g=g.next}while(g!==l);return x}(c,s)&&(Sr(c.prev,c,s.prev)||Sr(c,s.prev,s))||ld(c,s)&&Sr(c.prev,c,c.next)>0&&Sr(s.prev,s,s.next)>0)}function Sr(c,s,l){return(s.y-c.y)*(l.x-s.x)-(s.x-c.x)*(l.y-s.y)}function ld(c,s){return c.x===s.x&&c.y===s.y}function vx(c,s,l,h){const g=Up(Sr(c,s,l)),x=Up(Sr(c,s,h)),w=Up(Sr(l,h,c)),C=Up(Sr(l,h,s));return g!==x&&w!==C||!(0!==g||!Vp(c,l,s))||!(0!==x||!Vp(c,h,s))||!(0!==w||!Vp(l,c,h))||!(0!==C||!Vp(l,s,h))}function Vp(c,s,l){return s.x<=Math.max(c.x,l.x)&&s.x>=Math.min(c.x,l.x)&&s.y<=Math.max(c.y,l.y)&&s.y>=Math.min(c.y,l.y)}function Up(c){return c>0?1:c<0?-1:0}function $p(c,s){return Sr(c.prev,c,c.next)<0?Sr(c,s,c.next)>=0&&Sr(c,c.prev,s)>=0:Sr(c,s,c.prev)<0||Sr(c,c.next,s)<0}function bx(c,s){const l=Gp(c.i,c.x,c.y),h=Gp(s.i,s.x,s.y),g=c.next,x=s.prev;return c.next=s,s.prev=c,l.next=g,g.prev=l,h.next=l,l.prev=h,x.next=h,h.prev=x,h}function My(c,s,l,h){const g=Gp(c,s,l);return h?(g.next=h.next,g.prev=h,h.next.prev=g,h.next=g):(g.prev=g,g.next=g),g}function _h(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Gp(c,s,l){return{i:c,x:s,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ga{constructor(s,l){if(l>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=l}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class Tf{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}Tf.noSubdivision=new Tf({fill:new Ga(0,0),line:new Ga(0,0),tile:new Ga(0,0),stencil:new Ga(0,0),circle:1}),Xe("SubdivisionGranularityExpression",Ga),Xe("SubdivisionGranularitySetting",Tf);const pu=-32768,nc=32767;class xx{constructor(s,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=En/s,this._canonical=l}_getKey(s,l){return(s+=32768)<<16|l+32768}_vertexToIndex(s,l){if(s<-32768||l<-32768||s>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const h=0|Math.round(s),g=0|Math.round(l),x=this._getKey(h,g);if(this._vertexDictionary.has(x))return this._vertexDictionary.get(x);const w=this._vertexBuffer.length/2;return this._vertexDictionary.set(x,w),this._vertexBuffer.push(h,g),w}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(g,x){const w=[];for(let C=0;C<x.length;C+=3){const T=x[C],A=x[C+1],N=x[C+2],B=g[2*T],V=g[2*T+1];(g[2*A]-B)*(g[2*N+1]-V)-(g[2*A+1]-V)*(g[2*N]-B)>0?(w.push(T),w.push(N),w.push(A)):(w.push(T),w.push(A),w.push(N))}return w}(this._vertexBuffer,s);const l=[],h=s.length;for(let g=0;g<h;g+=3){const x=[s[g+0],s[g+1],s[g+2]],w=[this._vertexBuffer[2*s[g+0]+0],this._vertexBuffer[2*s[g+0]+1],this._vertexBuffer[2*s[g+1]+0],this._vertexBuffer[2*s[g+1]+1],this._vertexBuffer[2*s[g+2]+0],this._vertexBuffer[2*s[g+2]+1]];let C=1/0,T=1/0,A=-1/0,N=-1/0;for(let K=0;K<3;K++){const te=w[2*K],ie=w[2*K+1];C=Math.min(C,te),A=Math.max(A,te),T=Math.min(T,ie),N=Math.max(N,ie)}if(C===A||T===N)continue;const B=Math.floor(C/this._granularityCellSize),V=Math.ceil(A/this._granularityCellSize),$=Math.floor(T/this._granularityCellSize),H=Math.ceil(N/this._granularityCellSize);if(B!==V||$!==H)for(let K=$;K<H;K++){const te=this._scanlineGenerateVertexRingForCellRow(K,w,x);Hp(this._vertexBuffer,te,l)}else l.push(...x)}return l}_scanlineGenerateVertexRingForCellRow(s,l,h){const g=s*this._granularityCellSize,x=g+this._granularityCellSize,w=[];for(let C=0;C<3;C++){const T=l[2*C],A=l[2*C+1],N=l[2*(C+1)%6],B=l[(2*(C+1)+1)%6],V=l[2*(C+2)%6],$=l[(2*(C+2)+1)%6],H=N-T,K=B-A,te=0===H,ie=0===K,xe=(g-A)/K,he=(x-A)/K,pe=Math.min(xe,he),Me=Math.max(xe,he);if(!ie&&(pe>=1||Me<=0)||ie&&(A<g||A>x)){B>=g&&B<=x&&w.push(h[(C+1)%3]);continue}!ie&&pe>0&&w.push(this._vertexToIndex(T+H*pe,A+K*pe));const Ne=T+H*Math.max(pe,0),Ve=T+H*Math.min(Me,1);te||this._generateIntraEdgeVertices(w,T,A,N,B,Ne,Ve),!ie&&Me<1&&w.push(this._vertexToIndex(T+H*Me,A+K*Me)),(ie||B>=g&&B<=x)&&w.push(h[(C+1)%3]),!ie&&(B<=g||B>=x)&&this._generateInterEdgeVertices(w,T,A,N,B,V,$,Ve,g,x)}return w}_generateIntraEdgeVertices(s,l,h,g,x,w,C){const T=g-l,A=x-h,N=0===A,B=N?Math.min(l,g):Math.min(w,C),V=N?Math.max(l,g):Math.max(w,C),$=Math.floor(B/this._granularityCellSize)+1,H=Math.ceil(V/this._granularityCellSize)-1;if(N?l<g:w<C)for(let K=$;K<=H;K++){const te=K*this._granularityCellSize;s.push(this._vertexToIndex(te,h+A*(te-l)/T))}else for(let K=H;K>=$;K--){const te=K*this._granularityCellSize;s.push(this._vertexToIndex(te,h+A*(te-l)/T))}}_generateInterEdgeVertices(s,l,h,g,x,w,C,T,A,N){const B=x-h,V=w-g,$=C-x,H=(A-x)/$,K=(N-x)/$,te=Math.min(H,K),ie=Math.max(H,K),xe=g+V*te;let he=Math.floor(Math.min(xe,T)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(xe,T)/this._granularityCellSize)-1,Me=T<xe;const Ne=0===$;if(Ne&&(C===A||C===N))return;if(Ne||te>=1||ie<=0){const rt=h-C,Ke=w+(l-w)*Math.min((A-C)/rt,(N-C)/rt);he=Math.floor(Math.min(Ke,T)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(Ke,T)/this._granularityCellSize)-1,Me=T<Ke}const Ve=B>0?N:A;if(Me)for(let rt=he;rt<=pe;rt++)s.push(this._vertexToIndex(rt*this._granularityCellSize,Ve));else for(let rt=pe;rt>=he;rt--)s.push(this._vertexToIndex(rt*this._granularityCellSize,Ve))}_generateOutline(s){const l=[];for(const h of s){const g=rc(h,this._granularity,!0),x=this._pointArrayToIndices(g),w=[];for(let C=1;C<x.length;C++)w.push(x[C-1]),w.push(x[C]);l.push(w)}return l}_handlePoles(s){let l=!1,h=!1;this._canonical&&(0===this._canonical.y&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(l||h)&&this._fillPoles(s,l,h)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let l=0;l<s.length;l+=2){const h=s[l+1];h===pu&&(s[l+1]=-32767),h===nc&&(s[l+1]=32766)}}_generatePoleQuad(s,l,h,g,x,w){g>x!=(w===pu)?(s.push(l),s.push(h),s.push(this._vertexToIndex(g,w)),s.push(h),s.push(this._vertexToIndex(x,w)),s.push(this._vertexToIndex(g,w))):(s.push(h),s.push(l),s.push(this._vertexToIndex(g,w)),s.push(this._vertexToIndex(x,w)),s.push(h),s.push(this._vertexToIndex(g,w)))}_fillPoles(s,l,h){const g=this._vertexBuffer,x=En,w=s.length;for(let C=2;C<w;C+=3){const T=s[C-2],A=s[C-1],N=s[C],B=g[2*T],V=g[2*T+1],$=g[2*A],H=g[2*A+1],K=g[2*N],te=g[2*N+1];l&&(0===V&&0===H&&this._generatePoleQuad(s,T,A,B,$,pu),0===H&&0===te&&this._generatePoleQuad(s,A,N,$,K,pu),0===te&&0===V&&this._generatePoleQuad(s,N,T,K,B,pu)),h&&(V===x&&H===x&&this._generatePoleQuad(s,T,A,B,$,nc),H===x&&te===x&&this._generatePoleQuad(s,A,N,$,K,nc),te===x&&V===x&&this._generatePoleQuad(s,N,T,K,B,nc))}}_initializeVertices(s){for(let l=0;l<s.length;l+=2)this._vertexToIndex(s[l],s[l+1])}subdividePolygonInternal(s,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:h,holeIndices:g}=function(C){const T=[],A=[];for(const N of C)if(0!==N.length){N!==C[0]&&T.push(A.length/2);for(let B=0;B<N.length;B++)A.push(N[B].x),A.push(N[B].y)}return{flattened:A,holeIndices:T}}(s);let x;this._initializeVertices(h);try{const C=function(A,N,B=2){const V=N&&N.length,$=V?N[0]*B:A.length;let H=fu(A,0,$,B,!0);const K=[];if(!H||H.next===H.prev)return K;let te,ie,xe;if(V&&(H=function(he,pe,Me,Ne){const Ve=[];for(let rt=0,Ke=pe.length;rt<Ke;rt++){const nt=fu(he,pe[rt]*Ne,rt<Ke-1?pe[rt+1]*Ne:he.length,Ne,!1);nt===nt.next&&(nt.steiner=!0),Ve.push(Ty(nt))}Ve.sort(Bp);for(let rt=0;rt<Ve.length;rt++)Me=zp(Ve[rt],Me);return Me}(A,N,H,B)),A.length>80*B){te=A[0],ie=A[1];let he=te,pe=ie;for(let Me=B;Me<$;Me+=B){const Ne=A[Me],Ve=A[Me+1];Ne<te&&(te=Ne),Ve<ie&&(ie=Ve),Ne>he&&(he=Ne),Ve>pe&&(pe=Ve)}xe=Math.max(he-te,pe-ie),xe=0!==xe?32767/xe:0}return Ef(H,K,B,te,ie,xe,0),K}(h,g),T=this._convertIndices(h,C);x=this._subdivideTrianglesScanline(T)}catch(C){console.error(C)}let w=[];return l&&(w=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(x),{verticesFlattened:this._vertexBuffer,indicesTriangles:x,indicesLineList:w}}_convertIndices(s,l){const h=[];for(let g=0;g<l.length;g++)h.push(this._vertexToIndex(s[2*l[g]],s[2*l[g]+1]));return h}_pointArrayToIndices(s){const l=[];for(let h=0;h<s.length;h++){const g=s[h];l.push(this._vertexToIndex(g.x,g.y))}return l}}function yh(c,s,l,h=!0){return new xx(l,s).subdividePolygonInternal(c,h)}function rc(c,s,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const h=c[0],g=c[c.length-1],x=l&&(h.x!==g.x||h.y!==g.y);if(s<2)return x?[...c,c[0]]:[...c];const w=Math.floor(En/s),C=[];C.push(new gt(c[0].x,c[0].y));const T=c.length,A=x?T:T-1;for(let N=0;N<A;N++){const B=c[N],V=N<T-1?c[N+1]:c[0],$=B.x,H=B.y,K=V.x,te=V.y,ie=$!==K,xe=H!==te;if(!ie&&!xe)continue;const he=K-$,pe=te-H,Me=Math.abs(he),Ne=Math.abs(pe);let Ve=$,rt=H;for(;;){const nt=he>0?(Math.floor(Ve/w)+1)*w:(Math.ceil(Ve/w)-1)*w,wt=pe>0?(Math.floor(rt/w)+1)*w:(Math.ceil(rt/w)-1)*w,tt=Math.abs(Ve-nt),Je=Math.abs(rt-wt),ze=Math.abs(Ve-K),Nt=Math.abs(rt-te),Gt=ie?tt/Me:Number.POSITIVE_INFINITY,Ct=xe?Je/Ne:Number.POSITIVE_INFINITY;if((ze<=tt||!ie)&&(Nt<=Je||!xe))break;if(Gt<Ct&&ie||!xe){Ve=nt,rt+=pe*Gt;const _t=new gt(Ve,Math.round(rt));C[C.length-1].x===_t.x&&C[C.length-1].y===_t.y||C.push(_t)}else{Ve+=he*Ct,rt=wt;const _t=new gt(Math.round(Ve),rt);C[C.length-1].x===_t.x&&C[C.length-1].y===_t.y||C.push(_t)}}const Ke=new gt(K,te);C[C.length-1].x===Ke.x&&C[C.length-1].y===Ke.y||C.push(Ke)}return C}function Hp(c,s,l){if(0===s.length)throw new Error("Subdivision vertex ring is empty.");let h=0,g=c[2*s[0]];for(let T=1;T<s.length;T++){const A=c[2*s[T]];A<g&&(g=A,h=T)}const x=s.length;let w=h,C=(w+1)%x;for(;;){const T=w-1>=0?w-1:x-1,A=(C+1)%x,N=c[2*s[T]],B=c[2*s[A]],V=c[2*s[w]],$=c[2*s[w]+1],H=c[2*s[C]+1];let K=!1;if(N<B)K=!0;else if(N>B)K=!1;else{const te=H-$,ie=-(c[2*s[C]]-V),xe=$<H?1:-1;((N-V)*te+(c[2*s[T]+1]-$)*ie)*xe>((B-V)*te+(c[2*s[A]+1]-$)*ie)*xe&&(K=!0)}if(K){const te=s[T],ie=s[w],xe=s[C];te!==ie&&te!==xe&&ie!==xe&&l.push(xe,ie,te),w--,w<0&&(w=x-1)}else{const te=s[A],ie=s[w],xe=s[C];te!==ie&&te!==xe&&ie!==xe&&l.push(xe,ie,te),C++,C>=x&&(C=0)}if(T===A)break}}function wx(c,s,l,h,g,x,w,C,T){const A=g.length/2,N=w&&C&&T;if(A<tn.MAX_VERTEX_ARRAY_LENGTH){const B=s.prepareSegment(A,l,h),V=B.vertexLength;for(let K=0;K<x.length;K+=3)h.emplaceBack(V+x[K],V+x[K+1],V+x[K+2]);let $,H;B.vertexLength+=A,B.primitiveLength+=x.length/3,N&&(H=w.prepareSegment(A,l,C),$=H.vertexLength,H.vertexLength+=A);for(let K=0;K<g.length;K+=2)c(g[K],g[K+1]);if(N)for(let K=0;K<T.length;K++){const te=T[K];for(let ie=1;ie<te.length;ie+=2)C.emplaceBack($+te[ie-1],$+te[ie]);H.primitiveLength+=te.length/2}}else(function(B,V,$,H,K,te){const ie=[];for(let Ne=0;Ne<H.length/2;Ne++)ie.push(-1);const xe={count:0};let he=0,pe=B.getOrCreateLatestSegment(V,$),Me=pe.vertexLength;for(let Ne=2;Ne<K.length;Ne+=3){const Ve=K[Ne-2],rt=K[Ne-1],Ke=K[Ne];let nt=ie[Ve]<he,wt=ie[rt]<he,tt=ie[Ke]<he;pe.vertexLength+((nt?1:0)+(wt?1:0)+(tt?1:0))>tn.MAX_VERTEX_ARRAY_LENGTH&&(pe=B.createNewSegment(V,$),he=xe.count,nt=!0,wt=!0,tt=!0,Me=0);const Je=vh(ie,H,te,xe,Ve,nt,pe),ze=vh(ie,H,te,xe,rt,wt,pe),Nt=vh(ie,H,te,xe,Ke,tt,pe);$.emplaceBack(Me+Je-he,Me+ze-he,Me+Nt-he),pe.primitiveLength++}})(s,l,h,g,x,c),N&&function(B,V,$,H,K,te){const ie=[];for(let Ne=0;Ne<H.length/2;Ne++)ie.push(-1);const xe={count:0};let he=0,pe=B.getOrCreateLatestSegment(V,$),Me=pe.vertexLength;for(let Ne=0;Ne<K.length;Ne++){const Ve=K[Ne];for(let rt=1;rt<K[Ne].length;rt+=2){const Ke=Ve[rt-1],nt=Ve[rt];let wt=ie[Ke]<he,tt=ie[nt]<he;pe.vertexLength+((wt?1:0)+(tt?1:0))>tn.MAX_VERTEX_ARRAY_LENGTH&&(pe=B.createNewSegment(V,$),he=xe.count,wt=!0,tt=!0,Me=0);const Je=vh(ie,H,te,xe,Ke,wt,pe),ze=vh(ie,H,te,xe,nt,tt,pe);$.emplaceBack(Me+Je-he,Me+ze-he),pe.primitiveLength++}}}(w,l,C,g,T,c),s.forceNewSegmentOnNextPrepare(),w?.forceNewSegmentOnNextPrepare()}function vh(c,s,l,h,g,x,w){if(x){const C=h.count;return l(s[2*g],s[2*g+1]),c[g]=h.count,h.count++,w.vertexLength++,C}return c[g]}class qp{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ke,this.indexArray=new In,this.indexArray2=new pn,this.programConfigurations=new go(s.layers,s.zoom),this.segments=new tn,this.segments2=new tn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,h){this.hasPattern=Fp("fill",this.layers,l);const g=this.layers[0].layout.get("fill-sort-key"),x=!g.isConstant(),w=[];for(const{feature:C,id:T,index:A,sourceLayerIndex:N}of s){const B=this.layers[0]._featureFilter.needGeometry,V=$a(C,B);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom,{globalState:this.globalState}),V,h))continue;const $=x?g.evaluate(V,{},h,l.availableImages):void 0,H={id:T,properties:C.properties,type:C.type,sourceLayerIndex:N,index:A,geometry:B?V.geometry:ns(C),patterns:{},sortKey:$};w.push(H)}x&&w.sort((C,T)=>C.sortKey-T.sortKey);for(const C of w){const{geometry:T,index:A,sourceLayerIndex:N}=C;if(this.hasPattern){const B=Bm("fill",this.layers,C,this.zoom,l);this.patternFeatures.push(B)}else this.addFeature(C,T,A,h,{},l.subdivisionGranularity);l.featureIndex.insert(s[A].feature,T,A,N,this.index)}}update(s,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,h)}addFeatures(s,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,s.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ey),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,l,h,g,x,w){for(const C of fo(l,500)){const T=yh(C,g,w.fill.getGranularityForZoomLevel(g.z)),A=this.layoutVertexArray;wx((N,B)=>{A.emplaceBack(N,B)},this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles,this.segments2,this.indexArray2,T.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,g)}}let Dy,Ha;Xe("FillBucket",qp,{omit:["layers","patternFeatures"]});var Sx={get paint(){return Ha=Ha||new Mt({"fill-antialias":new mt(Ee.paint_fill["fill-antialias"]),"fill-opacity":new Ce(Ee.paint_fill["fill-opacity"]),"fill-color":new Ce(Ee.paint_fill["fill-color"]),"fill-outline-color":new Ce(Ee.paint_fill["fill-outline-color"]),"fill-translate":new mt(Ee.paint_fill["fill-translate"]),"fill-translate-anchor":new mt(Ee.paint_fill["fill-translate-anchor"]),"fill-pattern":new Kt(Ee.paint_fill["fill-pattern"])})},get layout(){return Dy=Dy||new Mt({"fill-sort-key":new Ce(Ee.layout_fill["fill-sort-key"])})}};class Wp extends ji{constructor(s){super(s,Sx)}recalculate(s,l){super.recalculate(s,l);const h=this.paint._values["fill-outline-color"];"constant"===h.value.kind&&void 0===h.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new qp(s)}queryRadius(){return ec(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:l,transform:h,pixelsToTileUnits:g}){return Am(wf(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,g),l)}isTileClipped(){return!0}}const jm=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ky=xr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Zp}=jm;class gu{constructor(s,l,h,g,x){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=s,this._geometry=-1,this._keys=g,this._values=x,s.readFields(Ex,this,l)}loadGeometry(){const s=this._pbf;s.pos=this._geometry;const l=s.readVarint()+s.pos,h=[];let g,x=1,w=0,C=0,T=0;for(;s.pos<l;){if(w<=0){const A=s.readVarint();x=7&A,w=A>>3}if(w--,1===x||2===x)C+=s.readSVarint(),T+=s.readSVarint(),1===x&&(g&&h.push(g),g=[]),g&&g.push(new gt(C,T));else{if(7!==x)throw new Error(`unknown command ${x}`);g&&g.push(g[0].clone())}}return g&&h.push(g),h}bbox(){const s=this._pbf;s.pos=this._geometry;const l=s.readVarint()+s.pos;let h=1,g=0,x=0,w=0,C=1/0,T=-1/0,A=1/0,N=-1/0;for(;s.pos<l;){if(g<=0){const B=s.readVarint();h=7&B,g=B>>3}if(g--,1===h||2===h)x+=s.readSVarint(),w+=s.readSVarint(),x<C&&(C=x),x>T&&(T=x),w<A&&(A=w),w>N&&(N=w);else if(7!==h)throw new Error(`unknown command ${h}`)}return[C,A,T,N]}toGeoJSON(s,l,h){const g=this.extent*Math.pow(2,h),x=this.extent*s,w=this.extent*l,C=this.loadGeometry();function T(V){return[360*(V.x+x)/g-180,360/Math.PI*Math.atan(Math.exp((1-2*(V.y+w)/g)*Math.PI))-90]}function A(V){return V.map(T)}let N;if(1===this.type){const V=[];for(const H of C)V.push(H[0]);const $=A(V);N=1===V.length?{type:"Point",coordinates:$[0]}:{type:"MultiPoint",coordinates:$}}else if(2===this.type){const V=C.map(A);N=1===V.length?{type:"LineString",coordinates:V[0]}:{type:"MultiLineString",coordinates:V}}else{if(3!==this.type)throw new Error("unknown feature type");{const V=function(H){const K=H.length;if(K<=1)return[H];const te=[];let ie,xe;for(let he=0;he<K;he++){const pe=Py(H[he]);0!==pe&&(void 0===xe&&(xe=pe<0),xe===pe<0?(ie&&te.push(ie),ie=[H[he]]):ie&&ie.push(H[he]))}return ie&&te.push(ie),te}(C),$=[];for(const H of V)$.push(H.map(A));N=1===$.length?{type:"Polygon",coordinates:$[0]}:{type:"MultiPolygon",coordinates:$}}}const B={type:"Feature",geometry:N,properties:this.properties};return null!=this.id&&(B.id=this.id),B}}function Ex(c,s,l){1===c?s.id=l.readVarint():2===c?function(h,g){const x=h.readVarint()+h.pos;for(;h.pos<x;){const w=g._keys[h.readVarint()],C=g._values[h.readVarint()];g.properties[w]=C}}(l,s):3===c?s.type=l.readVarint():4===c&&(s._geometry=l.pos)}function Py(c){let s=0;for(let l,h,g=0,x=c.length,w=x-1;g<x;w=g++)l=c[g],h=c[w],s+=(h.x-l.x)*(l.y+h.y);return s}gu.types=["Unknown","Point","LineString","Polygon"];class Vm{constructor(s,l){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Ay,this,l),this.length=this._features.length}feature(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];const l=this._pbf.readVarint()+this._pbf.pos;return new gu(this._pbf,l,this.extent,this._keys,this._values)}}function Ay(c,s,l){15===c?s.version=l.readVarint():1===c?s.name=l.readString():5===c?s.extent=l.readVarint():2===c?s._features.push(l.pos):3===c?s._keys.push(l.readString()):4===c&&s._values.push(function(h){let g=null;const x=h.readVarint()+h.pos;for(;h.pos<x;){const w=h.readVarint()>>3;g=1===w?h.readString():2===w?h.readFloat():3===w?h.readDouble():4===w?h.readVarint64():5===w?h.readVarint():6===w?h.readSVarint():7===w?h.readBoolean():null}if(null==g)throw new Error("unknown feature value");return g}(l))}class Um{constructor(s,l){this.layers=s.readFields(Cx,{},l)}}function Cx(c,s,l){if(3===c){const h=new Vm(l,l.readVarint()+l.pos);h.length&&(s[h.name]=h)}}const bh=Math.pow(2,13);function Kp(c,s,l,h,g,x,w,C){c.emplaceBack(s,l,2*Math.floor(h*bh)+w,g*bh*2,x*bh*2,Math.round(C))}class cd{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Te,this.centroidVertexArray=new le,this.indexArray=new In,this.programConfigurations=new go(s.layers,s.zoom),this.segments=new tn,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,h){this.features=[],this.hasPattern=Fp("fill-extrusion",this.layers,l);for(const{feature:g,id:x,index:w,sourceLayerIndex:C}of s){const T=this.layers[0]._featureFilter.needGeometry,A=$a(g,T);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom,{globalState:this.globalState}),A,h))continue;const N={id:x,sourceLayerIndex:C,index:w,geometry:T?A.geometry:ns(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(Bm("fill-extrusion",this.layers,N,this.zoom,l)):this.addFeature(N,N.geometry,w,h,{},l.subdivisionGranularity),l.featureIndex.insert(g,N.geometry,w,C,this.index,!0)}}addFeatures(s,l,h){for(const g of this.features){const{geometry:x}=g;this.addFeature(g,x,g.index,l,h,s.subdivisionGranularity)}}update(s,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,h)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Zp),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,ky.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,l,h,g,x,w){for(const C of fo(l,500)){const T={x:0,y:0,sampleCount:0},A=this.layoutVertexArray.length;this.processPolygon(T,g,s,C,w);const N=this.layoutVertexArray.length-A,B=Math.floor(T.x/T.sampleCount),V=Math.floor(T.y/T.sampleCount);for(let $=0;$<N;$++)this.centroidVertexArray.emplaceBack(B,V)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,g)}processPolygon(s,l,h,g,x){if(g.length<1||$m(g[0]))return;for(const B of g)0!==B.length&&Tx(s,B);const w={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},C=x.fill.getGranularityForZoomLevel(l.z),T="Polygon"===gu.types[h.type];for(const B of g){if(0===B.length||$m(B))continue;const V=rc(B,C,T);this._generateSideFaces(V,w)}if(!T)return;const A=yh(g,l,C,!1),N=this.layoutVertexArray;wx((B,V)=>{Kp(N,B,V,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,A.verticesFlattened,A.indicesTriangles)}_generateSideFaces(s,l){let h=0;for(let g=1;g<s.length;g++){const x=s[g],w=s[g-1];if(Ry(x,w))continue;l.segment.vertexLength+4>tn.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const C=x.sub(w)._perp()._unit(),T=w.dist(x);h+T>32768&&(h=0),Kp(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,0,h),Kp(this.layoutVertexArray,x.x,x.y,C.x,C.y,0,1,h),h+=T,Kp(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,0,h),Kp(this.layoutVertexArray,w.x,w.y,C.x,C.y,0,1,h);const A=l.segment.vertexLength;this.indexArray.emplaceBack(A,A+2,A+1),this.indexArray.emplaceBack(A+1,A+2,A+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function Tx(c,s){for(let l=0;l<s.length;l++){const h=s[l];l===s.length-1&&s[0].x===h.x&&s[0].y===h.y||(c.x+=h.x,c.y+=h.y,c.sampleCount++)}}function Ry(c,s){return c.x===s.x&&(c.x<0||c.x>En)||c.y===s.y&&(c.y<0||c.y>En)}function $m(c){return c.every(s=>s.x<0)||c.every(s=>s.x>En)||c.every(s=>s.y<0)||c.every(s=>s.y>En)}let ic;Xe("FillExtrusionBucket",cd,{omit:["layers","features"]});var ud={get paint(){return ic=ic||new Mt({"fill-extrusion-opacity":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ce(Ee["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Kt(Ee["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ce(Ee["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ce(Ee["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new mt(Ee["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class ei extends ji{constructor(s){super(s,ud)}createBucket(s){return new cd(s)}queryRadius(){return ec(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:h,geometry:g,transform:x,pixelsToTileUnits:w,pixelPosMatrix:C}){const T=wf(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-x.bearingInRadians,w),A=this.paint.get("fill-extrusion-height").evaluate(l,h),N=this.paint.get("fill-extrusion-base").evaluate(l,h),B=function($,H){const K=[];for(const te of $){const ie=[te.x,te.y,0,1];_a(ie,ie,H),K.push(new gt(ie[0]/ie[3],ie[1]/ie[3]))}return K}(T,C),V=function($,H,K,te){const ie=[],xe=[],he=te[8]*H,pe=te[9]*H,Me=te[10]*H,Ne=te[11]*H,Ve=te[8]*K,rt=te[9]*K,Ke=te[10]*K,nt=te[11]*K;for(const wt of $){const tt=[],Je=[];for(const ze of wt){const Nt=ze.x,Gt=ze.y,Ct=te[0]*Nt+te[4]*Gt+te[12],_t=te[1]*Nt+te[5]*Gt+te[13],vn=te[2]*Nt+te[6]*Gt+te[14],fr=te[3]*Nt+te[7]*Gt+te[15],di=vn+Me,ro=fr+Ne,Cs=Ct+Ve,Fo=_t+rt,Pi=vn+Ke,Xn=fr+nt,Ei=new gt((Ct+he)/ro,(_t+pe)/ro);Ei.z=di/ro,tt.push(Ei);const Hi=new gt(Cs/Xn,Fo/Xn);Hi.z=Pi/Xn,Je.push(Hi)}ie.push(tt),xe.push(Je)}return[ie,xe]}(g,N,A,C);return function($,H,K){let te=1/0;Am(K,H)&&(te=kr(K,H[0]));for(let ie=0;ie<H.length;ie++){const xe=H[ie],he=$[ie];for(let pe=0;pe<xe.length-1;pe++){const Me=xe[pe],Ne=[Me,xe[pe+1],he[pe+1],he[pe],Me];vy(K,Ne)&&(te=Math.min(te,kr(K,Ne)))}}return te!==1/0&&te}(V[0],V[1],B)}}function If(c,s){return c.x*s.x+c.y*s.y}function kr(c,s){if(1===c.length){let l=0;const h=s[l++];let g;for(;!g||h.equals(g);)if(g=s[l++],!g)return 1/0;for(;l<s.length;l++){const x=s[l],w=c[0],C=g.sub(h),T=x.sub(h),A=w.sub(h),N=If(C,C),B=If(C,T),V=If(T,T),$=If(A,C),H=If(A,T),K=N*V-B*B,te=(V*$-B*H)/K,ie=(N*H-B*$)/K,xe=h.z*(1-te-ie)+g.z*te+x.z*ie;if(isFinite(xe))return xe}return 1/0}{let l=1/0;for(const h of s)l=Math.min(l,h.z);return l}}const Gm=xr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ix}=Gm,Ny=xr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Mf}=Ny,Mx=Math.cos(Math.PI/180*37.5),Hm=Math.pow(2,14)/.5;class Df{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(l=>l.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new Ie,this.layoutVertexArray2=new Ae,this.indexArray=new In,this.programConfigurations=new go(s.layers,s.zoom),this.segments=new tn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(s,l,h){this.hasPattern=Fp("line",this.layers,l);const g=this.layers[0].layout.get("line-sort-key"),x=!g.isConstant(),w=[];for(const{feature:C,id:T,index:A,sourceLayerIndex:N}of s){const B=this.layers[0]._featureFilter.needGeometry,V=$a(C,B);if(!this.layers[0]._featureFilter.filter(new sr(this.zoom,{globalState:this.globalState}),V,h))continue;const $=x?g.evaluate(V,{},h):void 0,H={id:T,properties:C.properties,type:C.type,sourceLayerIndex:N,index:A,geometry:B?V.geometry:ns(C),patterns:{},sortKey:$};w.push(H)}x&&w.sort((C,T)=>C.sortKey-T.sortKey);for(const C of w){const{geometry:T,index:A,sourceLayerIndex:N}=C;if(this.hasPattern){const B=Bm("line",this.layers,C,this.zoom,l);this.patternFeatures.push(B)}else this.addFeature(C,T,A,h,{},l.subdivisionGranularity);l.featureIndex.insert(s[A].feature,T,A,N,this.index)}}update(s,l,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,l,this.stateDependentLayers,h)}addFeatures(s,l,h){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,l,h,s.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Mf)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ix),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,l,h,g,x,w){const C=this.layers[0].layout,T=C.get("line-join").evaluate(s,{}),A=C.get("line-cap"),N=C.get("line-miter-limit"),B=C.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const V of l)this.addLine(V,s,T,A,N,B,g,w);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,h,x,g)}addLine(s,l,h,g,x,w,C,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=rc(s,C?T.line.getGranularityForZoomLevel(C.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<s.length-1;he++)this.totalDistance+=s[he].dist(s[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const A="Polygon"===gu.types[l.type];let N=s.length;for(;N>=2&&s[N-1].equals(s[N-2]);)N--;let B=0;for(;B<N-1&&s[B].equals(s[B+1]);)B++;if(N<(A?3:2))return;"bevel"===h&&(x=1.05);const V=this.overscaling<=16?122880/(512*this.overscaling):0,$=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let H,K,te,ie,xe;this.e1=this.e2=-1,A&&(H=s[N-2],xe=s[B].sub(H)._unit()._perp());for(let he=B;he<N;he++){if(te=he===N-1?A?s[B+1]:void 0:s[he+1],te&&s[he].equals(te))continue;xe&&(ie=xe),H&&(K=H),H=s[he],xe=te?te.sub(H)._unit()._perp():ie,ie=ie||xe;let pe=ie.add(xe);0===pe.x&&0===pe.y||pe._unit();const Me=ie.x*xe.x+ie.y*xe.y,Ne=pe.x*xe.x+pe.y*xe.y,Ve=0!==Ne?1/Ne:1/0,rt=2*Math.sqrt(2-2*Ne),Ke=Ne<Mx&&K&&te,nt=ie.x*xe.y-ie.y*xe.x>0;if(Ke&&he>B){const Je=H.dist(K);if(Je>2*V){const ze=H.sub(H.sub(K)._mult(V/Je)._round());this.updateDistance(K,ze),this.addCurrentVertex(ze,ie,0,0,$),K=ze}}const wt=K&&te;let tt=wt?h:A?"butt":g;if(wt&&"round"===tt&&(Ve<w?tt="miter":Ve<=2&&(tt="fakeround")),"miter"===tt&&Ve>x&&(tt="bevel"),"bevel"===tt&&(Ve>2&&(tt="flipbevel"),Ve<x&&(tt="miter")),K&&this.updateDistance(K,H),"miter"===tt)pe._mult(Ve),this.addCurrentVertex(H,pe,0,0,$);else if("flipbevel"===tt){if(Ve>100)pe=xe.mult(-1);else{const Je=Ve*ie.add(xe).mag()/ie.sub(xe).mag();pe._perp()._mult(Je*(nt?-1:1))}this.addCurrentVertex(H,pe,0,0,$),this.addCurrentVertex(H,pe.mult(-1),0,0,$)}else if("bevel"===tt||"fakeround"===tt){const Je=-Math.sqrt(Ve*Ve-1),ze=nt?Je:0,Nt=nt?0:Je;if(K&&this.addCurrentVertex(H,ie,ze,Nt,$),"fakeround"===tt){const Gt=Math.round(180*rt/Math.PI/20);for(let Ct=1;Ct<Gt;Ct++){let _t=Ct/Gt;if(.5!==_t){const fr=_t-.5;_t+=_t*fr*(_t-1)*((1.0904+Me*(Me*(3.55645-1.43519*Me)-3.2452))*fr*fr+(.848013+Me*(.215638*Me-1.06021)))}const vn=xe.sub(ie)._mult(_t)._add(ie)._unit()._mult(nt?-1:1);this.addHalfVertex(H,vn.x,vn.y,!1,nt,0,$)}}te&&this.addCurrentVertex(H,xe,-ze,-Nt,$)}else if("butt"===tt)this.addCurrentVertex(H,pe,0,0,$);else if("square"===tt){const Je=K?1:-1;this.addCurrentVertex(H,pe,Je,Je,$)}else"round"===tt&&(K&&(this.addCurrentVertex(H,ie,0,0,$),this.addCurrentVertex(H,ie,1,1,$,!0)),te&&(this.addCurrentVertex(H,xe,-1,-1,$,!0),this.addCurrentVertex(H,xe,0,0,$)));if(Ke&&he<N-1){const Je=H.dist(te);if(Je>2*V){const ze=H.add(te.sub(H)._mult(V/Je)._round());this.updateDistance(H,ze),this.addCurrentVertex(ze,xe,0,0,$),H=ze}}}}addCurrentVertex(s,l,h,g,x,w=!1){const C=l.y*g-l.x,T=-l.y-l.x*g;this.addHalfVertex(s,l.x+l.y*h,l.y-l.x*h,w,!1,h,x),this.addHalfVertex(s,C,T,w,!0,-g,x),this.distance>Hm/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,l,h,g,x,w))}addHalfVertex({x:s,y:l},h,g,x,w,C,T){const A=.5*(this.lineClips?this.scaledDistance*(Hm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(x?1:0),(l<<1)+(w?1:0),Math.round(63*h)+128,Math.round(63*g)+128,1+(0===C?0:C<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),T.primitiveLength++),w?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,l){this.distance+=s.dist(l),this.updateScaledDistance()}}let kf,qm;Xe("LineBucket",Df,{omit:["layers","patternFeatures"]});var Ly={get paint(){return qm=qm||new Mt({"line-opacity":new Ce(Ee.paint_line["line-opacity"]),"line-color":new Ce(Ee.paint_line["line-color"]),"line-translate":new mt(Ee.paint_line["line-translate"]),"line-translate-anchor":new mt(Ee.paint_line["line-translate-anchor"]),"line-width":new Ce(Ee.paint_line["line-width"]),"line-gap-width":new Ce(Ee.paint_line["line-gap-width"]),"line-offset":new Ce(Ee.paint_line["line-offset"]),"line-blur":new Ce(Ee.paint_line["line-blur"]),"line-dasharray":new Fr(Ee.paint_line["line-dasharray"]),"line-pattern":new Kt(Ee.paint_line["line-pattern"]),"line-gradient":new ki(Ee.paint_line["line-gradient"])})},get layout(){return kf=kf||new Mt({"line-cap":new mt(Ee.layout_line["line-cap"]),"line-join":new Ce(Ee.layout_line["line-join"]),"line-miter-limit":new mt(Ee.layout_line["line-miter-limit"]),"line-round-limit":new mt(Ee.layout_line["line-round-limit"]),"line-sort-key":new Ce(Ee.layout_line["line-sort-key"])})}};class Dx extends Ce{possiblyEvaluate(s,l){return l=new sr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(s,l)}evaluate(s,l,h,g){return l=Ho({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(s,l,h,g)}}let Yp;class Oy extends ji{constructor(s){super(s,Ly),this.gradientVersion=0,Yp||(Yp=new Dx(Ly.paint.properties["line-width"].specification),Yp.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if("line-gradient"===s){const l=this.gradientExpression();this.stepInterpolant=!(void 0===l._styleExpression)&&l._styleExpression.expression instanceof ur,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,l){super.recalculate(s,l),this.paint._values["line-floorwidth"]=Yp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new Df(s)}queryRadius(s){const l=s,h=Fy(ml("line-width",this,l),ml("line-gap-width",this,l)),g=ml("line-offset",this,l);return h/2+Math.abs(g)+ec(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:l,featureState:h,geometry:g,transform:x,pixelsToTileUnits:w}){const C=wf(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-x.bearingInRadians,w),T=w/2*Fy(this.paint.get("line-width").evaluate(l,h),this.paint.get("line-gap-width").evaluate(l,h)),A=this.paint.get("line-offset").evaluate(l,h);return A&&(g=function(N,B){const V=[];for(let $=0;$<N.length;$++){const H=N[$],K=[];for(let te=0;te<H.length;te++){const ie=H[te-1],xe=H[te],he=H[te+1],pe=0===te?new gt(0,0):xe.sub(ie)._unit()._perp(),Me=te===H.length-1?new gt(0,0):he.sub(xe)._unit()._perp(),Ne=pe._add(Me)._unit(),Ve=Ne.x*Me.x+Ne.y*Me.y;0!==Ve&&Ne._mult(1/Ve),K.push(Ne._mult(B)._add(xe))}V.push(K)}return V}(g,A*w)),function(N,B,V){for(let $=0;$<B.length;$++){const H=B[$];if(N.length>=3)for(let K=0;K<H.length;K++)if(rs(N,H[K]))return!0;if(Jl(N,H,V))return!0}return!1}(C,g,T)}isTileClipped(){return!0}}function Fy(c,s){return s>0?s+2*c:c}const By=xr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kx=xr([{name:"a_projected_pos",components:3,type:"Float32"}],4);xr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Px=xr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);xr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Ax=xr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Rx=xr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xh(c,s,l){return c.sections.forEach(h=>{h.text=function(g,x,w){const C=x.layout.get("text-transform").evaluate(w,{});return"uppercase"===C?g=g.toLocaleUpperCase():"lowercase"===C&&(g=g.toLocaleLowerCase()),Ao.applyArabicShaping&&(g=Ao.applyArabicShaping(g)),g}(h.text,s,l)}),c}xr([{name:"triangle",components:3,type:"Uint16"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),xr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),xr([{type:"Float32",name:"offsetX"}]),xr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),xr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const os={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};const Wm=4294967296,zy=1/Wm,jy=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class Zm{constructor(s=new Uint8Array(16)){this.buf=ArrayBuffer.isView(s)?s:new Uint8Array(s),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(s,l,h=this.length){for(;this.pos<h;){const g=this.readVarint(),x=g>>3,w=this.pos;this.type=7&g,s(x,l,this),this.pos===w&&this.skip(g)}return l}readMessage(s,l){return this.readFields(s,l,this.readVarint()+this.pos)}readFixed32(){const s=this.dataView.getUint32(this.pos,!0);return this.pos+=4,s}readSFixed32(){const s=this.dataView.getInt32(this.pos,!0);return this.pos+=4,s}readFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wm;return this.pos+=8,s}readSFixed64(){const s=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wm;return this.pos+=8,s}readFloat(){const s=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,s}readDouble(){const s=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,s}readVarint(s){const l=this.buf;let h,g;return g=l[this.pos++],h=127&g,g<128?h:(g=l[this.pos++],h|=(127&g)<<7,g<128?h:(g=l[this.pos++],h|=(127&g)<<14,g<128?h:(g=l[this.pos++],h|=(127&g)<<21,g<128?h:(g=l[this.pos],h|=(15&g)<<28,function(x,w,C){const T=C.buf;let A,N;if(N=T[C.pos++],A=(112&N)>>4,N<128||(N=T[C.pos++],A|=(127&N)<<3,N<128)||(N=T[C.pos++],A|=(127&N)<<10,N<128)||(N=T[C.pos++],A|=(127&N)<<17,N<128)||(N=T[C.pos++],A|=(127&N)<<24,N<128)||(N=T[C.pos++],A|=(1&N)<<31,N<128))return function mu(c,s,l){return l?4294967296*s+(c>>>0):4294967296*(s>>>0)+(c>>>0)}(x,A,w);throw new Error("Expected varint not more than 10 bytes")}(h,s,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const s=this.readVarint();return s%2==1?(s+1)/-2:s/2}readBoolean(){return!!this.readVarint()}readString(){const s=this.readVarint()+this.pos,l=this.pos;return this.pos=s,s-l>=12&&jy?jy.decode(this.buf.subarray(l,s)):function(h,g,x){let w="",C=g;for(;C<x;){const T=h[C];let A,N,B,V=null,$=T>239?4:T>223?3:T>191?2:1;if(C+$>x)break;1===$?T<128&&(V=T):2===$?(A=h[C+1],128==(192&A)&&(V=(31&T)<<6|63&A,V<=127&&(V=null))):3===$?(A=h[C+1],N=h[C+2],128==(192&A)&&128==(192&N)&&(V=(15&T)<<12|(63&A)<<6|63&N,(V<=2047||V>=55296&&V<=57343)&&(V=null))):4===$&&(A=h[C+1],N=h[C+2],B=h[C+3],128==(192&A)&&128==(192&N)&&128==(192&B)&&(V=(15&T)<<18|(63&A)<<12|(63&N)<<6|63&B,(V<=65535||V>=1114112)&&(V=null))),null===V?(V=65533,$=1):V>65535&&(V-=65536,w+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),w+=String.fromCharCode(V),C+=$}return w}(this.buf,l,s)}readBytes(){const s=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,s);return this.pos=s,l}readPackedVarint(s=[],l){const h=this.readPackedEnd();for(;this.pos<h;)s.push(this.readVarint(l));return s}readPackedSVarint(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSVarint());return s}readPackedBoolean(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readBoolean());return s}readPackedFloat(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFloat());return s}readPackedDouble(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readDouble());return s}readPackedFixed32(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFixed32());return s}readPackedSFixed32(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSFixed32());return s}readPackedFixed64(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readFixed64());return s}readPackedSFixed64(s=[]){const l=this.readPackedEnd();for(;this.pos<l;)s.push(this.readSFixed64());return s}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(s){const l=7&s;if(0===l)for(;this.buf[this.pos++]>127;);else if(2===l)this.pos=this.readVarint()+this.pos;else if(5===l)this.pos+=4;else{if(1!==l)throw new Error(`Unimplemented type: ${l}`);this.pos+=8}}writeTag(s,l){this.writeVarint(s<<3|l)}realloc(s){let l=this.length||16;for(;l<this.pos+s;)l*=2;if(l!==this.length){const h=new Uint8Array(l);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=l}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeSFixed32(s){this.realloc(4),this.dataView.setInt32(this.pos,s,!0),this.pos+=4}writeFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*zy),!0),this.pos+=8}writeSFixed64(s){this.realloc(8),this.dataView.setInt32(this.pos,-1&s,!0),this.dataView.setInt32(this.pos+4,Math.floor(s*zy),!0),this.pos+=8}writeVarint(s){(s=+s||0)>268435455||s<0?function(l,h){let g,x;if(l>=0?(g=l%4294967296|0,x=l/4294967296|0):(g=~(-l%4294967296),x=~(-l/4294967296),4294967295^g?g=g+1|0:(g=0,x=x+1|0)),l>=0x10000000000000000||l<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");var w,T;h.realloc(10),w=g,(T=h).buf[T.pos++]=127&w|128,w>>>=7,T.buf[T.pos++]=127&w|128,w>>>=7,T.buf[T.pos++]=127&w|128,w>>>=7,T.buf[T.pos++]=127&w|128,T.buf[T.pos]=127&(w>>>=7),function(w,C){const T=(7&w)<<4;C.buf[C.pos++]|=T|((w>>>=3)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w|((w>>>=7)?128:0),w&&(C.buf[C.pos++]=127&w)))))}(x,h)}(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))}writeSVarint(s){this.writeVarint(s<0?2*-s-1:2*s)}writeBoolean(s){this.writeVarint(+s)}writeString(s){s=String(s),this.realloc(4*s.length),this.pos++;const l=this.pos;this.pos=function(g,x,w){for(let C,T,A=0;A<x.length;A++){if(C=x.charCodeAt(A),C>55295&&C<57344){if(!T){C>56319||A+1===x.length?(g[w++]=239,g[w++]=191,g[w++]=189):T=C;continue}if(C<56320){g[w++]=239,g[w++]=191,g[w++]=189,T=C;continue}C=T-55296<<10|C-56320|65536,T=null}else T&&(g[w++]=239,g[w++]=191,g[w++]=189,T=null);C<128?g[w++]=C:(C<2048?g[w++]=C>>6|192:(C<65536?g[w++]=C>>12|224:(g[w++]=C>>18|240,g[w++]=C>>12&63|128),g[w++]=C>>6&63|128),g[w++]=63&C|128)}return w}(this.buf,s,this.pos);const h=this.pos-l;h>=128&&Km(l,h,this),this.pos=l-1,this.writeVarint(h),this.pos+=h}writeFloat(s){this.realloc(4),this.dataView.setFloat32(this.pos,s,!0),this.pos+=4}writeDouble(s){this.realloc(8),this.dataView.setFloat64(this.pos,s,!0),this.pos+=8}writeBytes(s){const l=s.length;this.writeVarint(l),this.realloc(l);for(let h=0;h<l;h++)this.buf[this.pos++]=s[h]}writeRawMessage(s,l){this.pos++;const h=this.pos;s(l,this);const g=this.pos-h;g>=128&&Km(h,g,this),this.pos=h-1,this.writeVarint(g),this.pos+=g}writeMessage(s,l,h){this.writeTag(s,2),this.writeRawMessage(l,h)}writePackedVarint(s,l){l.length&&this.writeMessage(s,Pf,l)}writePackedSVarint(s,l){l.length&&this.writeMessage(s,Vy,l)}writePackedBoolean(s,l){l.length&&this.writeMessage(s,Qp,l)}writePackedFloat(s,l){l.length&&this.writeMessage(s,Uy,l)}writePackedDouble(s,l){l.length&&this.writeMessage(s,Xp,l)}writePackedFixed32(s,l){l.length&&this.writeMessage(s,Nx,l)}writePackedSFixed32(s,l){l.length&&this.writeMessage(s,Lx,l)}writePackedFixed64(s,l){l.length&&this.writeMessage(s,Ox,l)}writePackedSFixed64(s,l){l.length&&this.writeMessage(s,$y,l)}writeBytesField(s,l){this.writeTag(s,2),this.writeBytes(l)}writeFixed32Field(s,l){this.writeTag(s,5),this.writeFixed32(l)}writeSFixed32Field(s,l){this.writeTag(s,5),this.writeSFixed32(l)}writeFixed64Field(s,l){this.writeTag(s,1),this.writeFixed64(l)}writeSFixed64Field(s,l){this.writeTag(s,1),this.writeSFixed64(l)}writeVarintField(s,l){this.writeTag(s,0),this.writeVarint(l)}writeSVarintField(s,l){this.writeTag(s,0),this.writeSVarint(l)}writeStringField(s,l){this.writeTag(s,2),this.writeString(l)}writeFloatField(s,l){this.writeTag(s,5),this.writeFloat(l)}writeDoubleField(s,l){this.writeTag(s,1),this.writeDouble(l)}writeBooleanField(s,l){this.writeVarintField(s,+l)}}function Km(c,s,l){const h=s<=16383?1:s<=2097151?2:s<=268435455?3:Math.floor(Math.log(s)/(7*Math.LN2));l.realloc(h);for(let g=l.pos-1;g>=c;g--)l.buf[g+h]=l.buf[g]}function Pf(c,s){for(let l=0;l<c.length;l++)s.writeVarint(c[l])}function Vy(c,s){for(let l=0;l<c.length;l++)s.writeSVarint(c[l])}function Uy(c,s){for(let l=0;l<c.length;l++)s.writeFloat(c[l])}function Xp(c,s){for(let l=0;l<c.length;l++)s.writeDouble(c[l])}function Qp(c,s){for(let l=0;l<c.length;l++)s.writeBoolean(c[l])}function Nx(c,s){for(let l=0;l<c.length;l++)s.writeFixed32(c[l])}function Lx(c,s){for(let l=0;l<c.length;l++)s.writeSFixed32(c[l])}function Ox(c,s){for(let l=0;l<c.length;l++)s.writeFixed64(c[l])}function $y(c,s){for(let l=0;l<c.length;l++)s.writeSFixed64(c[l])}function Ym(c,s,l){1===c&&l.readMessage(Fx,s)}function Fx(c,s,l){if(3===c){const{id:h,bitmap:g,width:x,height:w,left:C,top:T,advance:A}=l.readMessage(Bx,{});s.push({id:h,bitmap:new tc({width:x+6,height:w+6},g),metrics:{width:x,height:w,left:C,top:T,advance:A}})}}function Bx(c,s,l){1===c?s.id=l.readVarint():2===c?s.bitmap=l.readBytes():3===c?s.width=l.readVarint():4===c?s.height=l.readVarint():5===c?s.left=l.readSVarint():6===c?s.top=l.readSVarint():7===c&&(s.advance=l.readVarint())}function Oo(c){let s=0,l=0;for(const w of c)s+=w.w*w.h,l=Math.max(l,w.w);c.sort((w,C)=>C.h-w.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),l),h:1/0}];let g=0,x=0;for(const w of c)for(let C=h.length-1;C>=0;C--){const T=h[C];if(!(w.w>T.w||w.h>T.h)){if(w.x=T.x,w.y=T.y,x=Math.max(x,w.y+w.h),g=Math.max(g,w.x+w.w),w.w===T.w&&w.h===T.h){const A=h.pop();A&&C<h.length&&(h[C]=A)}else w.h===T.h?(T.x+=w.w,T.w-=w.w):w.w===T.w?(T.y+=w.h,T.h-=w.h):(h.push({x:T.x+w.w,y:T.y,w:T.w-w.w,h:w.h}),T.y+=w.h,T.h-=w.h);break}}return{w:g,h:x,fill:s/(g*x)||0}}class Af{constructor(s,{pixelRatio:l,version:h,stretchX:g,stretchY:x,content:w,textFitWidth:C,textFitHeight:T}){this.paddedRect=s,this.pixelRatio=l,this.stretchX=g,this.stretchY=x,this.content=w,this.version=h,this.textFitWidth=C,this.textFitHeight=T}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Xm{constructor(s,l){const h={},g={};this.haveRenderCallbacks=[];const x=[];this.addImages(s,h,x),this.addImages(l,g,x);const{w,h:C}=Oo(x),T=new Lo({width:w||1,height:C||1});for(const A in s){const N=s[A],B=h[A].paddedRect;Lo.copy(N.data,T,{x:0,y:0},{x:B.x+1,y:B.y+1},N.data)}for(const A in l){const N=l[A],B=g[A].paddedRect,V=B.x+1,$=B.y+1,H=N.data.width,K=N.data.height;Lo.copy(N.data,T,{x:0,y:0},{x:V,y:$},N.data),Lo.copy(N.data,T,{x:0,y:K-1},{x:V,y:$-1},{width:H,height:1}),Lo.copy(N.data,T,{x:0,y:0},{x:V,y:$+K},{width:H,height:1}),Lo.copy(N.data,T,{x:H-1,y:0},{x:V-1,y:$},{width:1,height:K}),Lo.copy(N.data,T,{x:0,y:0},{x:V+H,y:$},{width:1,height:K})}this.image=T,this.iconPositions=h,this.patternPositions=g}addImages(s,l,h){for(const g in s){const x=s[g],w={x:0,y:0,w:x.data.width+2,h:x.data.height+2};h.push(w),l[g]=new Af(w,x),x.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(s,l){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in s.updatedImages)this.patchUpdatedImage(this.iconPositions[h],s.getImage(h),l),this.patchUpdatedImage(this.patternPositions[h],s.getImage(h),l)}patchUpdatedImage(s,l,h){if(!s||!l||s.version===l.version)return;s.version=l.version;const[g,x]=s.tl;h.update(l.data,void 0,{x:g,y:x})}}var vl;Xe("ImagePosition",Af),Xe("ImageAtlas",Xm),W.ao=void 0,(vl=W.ao||(W.ao={}))[vl.none=0]="none",vl[vl.horizontal=1]="horizontal",vl[vl.vertical=2]="vertical",vl[vl.horizontalOnly=3]="horizontalOnly";class $i{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,l,h){const g=new $i;return g.scale=s||1,g.fontStack=l,g.verticalAlign=h||"bottom",g}static forImage(s,l){const h=new $i;return h.imageName=s,h.verticalAlign=l||"bottom",h}}class bl{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,l){const h=new bl;for(let g=0;g<s.sections.length;g++){const x=s.sections[g];x.image?h.addImageSection(x):h.addTextSection(x,l)}return h}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let l="";for(let h=0;h<s.length;h++){const g=s.charCodeAt(h+1)||null,x=s.charCodeAt(h-1)||null;l+=g&&mf(g)&&!os[s[h+1]]||x&&mf(x)&&!os[s[h-1]]||!os[s[h]]?s[h]:os[s[h]]}return l}(this.text)}trim(){let s=0;for(let h=0;h<this.text.length&&Nf[this.text.charCodeAt(h)];h++)s++;let l=this.text.length;for(let h=this.text.length-1;h>=0&&h>=s&&Nf[this.text.charCodeAt(h)];h--)l--;this.text=this.text.substring(s,l),this.sectionIndex=this.sectionIndex.slice(s,l)}substring(s,l){const h=new bl;return h.text=this.text.substring(s,l),h.sectionIndex=this.sectionIndex.slice(s,l),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,l)=>Math.max(s,this.sections[l].scale),0)}getMaxImageSize(s){let l=0,h=0;for(let g=0;g<this.length();g++){const x=this.getSection(g);if(x.imageName){const w=s[x.imageName];if(!w)continue;const C=w.displaySize;l=Math.max(l,C[0]),h=Math.max(h,C[1])}}return{maxImageWidth:l,maxImageHeight:h}}addTextSection(s,l){this.text+=s.text,this.sections.push($i.forText(s.scale,s.fontStack||l,s.verticalAlign));const h=this.sections.length-1;for(let g=0;g<s.text.length;++g)this.sectionIndex.push(h)}addImageSection(s){const l=s.image?s.image.name:"";if(0===l.length)return void Wr("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push($i.forImage(l,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Wr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Rf(c,s,l,h,g,x,w,C,T,A,N,B,V,$,H){const K=bl.fromFeature(c,g);let te;B===W.ao.vertical&&K.verticalizePunctuation();const{processBidirectionalText:ie,processStyledBidirectionalText:xe}=Ao;if(ie&&1===K.sections.length){te=[];const Me=ie(K.toString(),e_(K,A,x,s,h,$));for(const Ne of Me){const Ve=new bl;Ve.text=Ne,Ve.sections=K.sections;for(let rt=0;rt<Ne.length;rt++)Ve.sectionIndex.push(0);te.push(Ve)}}else if(xe){te=[];const Me=xe(K.text,K.sectionIndex,e_(K,A,x,s,h,$));for(const Ne of Me){const Ve=new bl;Ve.text=Ne[0],Ve.sectionIndex=Ne[1],Ve.sections=K.sections,te.push(Ve)}}else te=function(Me,Ne){const Ve=[],rt=Me.text;let Ke=0;for(const nt of Ne)Ve.push(Me.substring(Ke,nt)),Ke=nt;return Ke<rt.length&&Ve.push(Me.substring(Ke,rt.length)),Ve}(K,e_(K,A,x,s,h,$));const he=[],pe={positionedLines:he,text:K.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(Me,Ne,Ve,rt,Ke,nt,wt,tt,Je,ze,Nt,Gt){let Ct=0,_t=0,vn=0,fr=0;const di="right"===tt?1:"left"===tt?0:.5,ro=24/Gt;let Cs=0;for(const Xn of Ke){Xn.trim();const Ei=Xn.getMaxScale(),Hi={positionedGlyphs:[],lineOffset:0};Me.positionedLines[Cs]=Hi;const hi=Hi.positionedGlyphs;let io=0;if(!Xn.length()){_t+=nt,++Cs;continue}const ta=Vx(rt,Xn,ro);for(let oo=0;oo<Xn.length();oo++){const jr=Xn.getSection(oo),Qn=Xn.getSectionIndex(oo),Vr=Xn.getCharCode(oo),Ur=Wy(Je,Nt,Vr);let On;if(jr.imageName){if(Me.iconsInText=!0,jr.scale=jr.scale*ro,On=Jp(jr,Ur,Ei,ta,rt),!On)continue;io=Math.max(io,On.imageOffset)}else if(On=Zy(jr,Vr,Ur,ta,Ne,Ve),!On)continue;const{rect:Wa,metrics:ac,baselineOffset:Ts}=On;hi.push({glyph:Vr,imageName:jr.imageName,x:Ct,y:_t+Ts+-17,vertical:Ur,scale:jr.scale,fontStack:jr.fontStack,sectionIndex:Qn,metrics:ac,rect:Wa}),Ur?(Me.verticalizable=!0,Ct+=(jr.imageName?ac.advance:24)*jr.scale+ze):Ct+=ac.advance*jr.scale+ze}0!==hi.length&&(vn=Math.max(Ct-ze,vn),Ky(hi,0,hi.length-1,di)),Ct=0,Hi.lineOffset=Math.max(io,24*(Ei-1));const fi=nt*Ei+io;_t+=fi,fr=Math.max(fi,fr),++Cs}const{horizontalAlign:Fo,verticalAlign:Pi}=t_(wt);(function(Xn,Ei,Hi,hi,io,ta,fi,oo,jr){const Qn=(Ei-Hi)*io;let Vr=0;Vr=ta!==fi?-oo*hi- -17:-hi*jr*fi+.5*fi;for(const Ur of Xn)for(const On of Ur.positionedGlyphs)On.x+=Qn,On.y+=Vr})(Me.positionedLines,di,Fo,Pi,vn,fr,nt,_t,Ke.length),Me.top+=-Pi*_t,Me.bottom=Me.top+_t,Me.left+=-Fo*vn,Me.right=Me.left+vn}(pe,s,l,h,te,w,C,T,B,A,V,H),!function(Me){for(const Ne of Me)if(0!==Ne.positionedGlyphs.length)return!1;return!0}(he)&&pe}const Nf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},zx={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Gy={40:!0};function Hy(c,s,l,h,g,x){if(s.imageName){const w=h[s.imageName];return w?w.displaySize[0]*s.scale*24/x+g:0}{const w=l[s.fontStack],C=w&&w[c];return C?C.metrics.advance*s.scale+g:0}}function Qm(c,s,l,h){const g=Math.pow(c-s,2);return h?c<s?g/2:2*g:g+Math.abs(l)*l}function jx(c,s,l){let h=0;return 10===c&&(h-=1e4),l&&(h+=150),40!==c&&65288!==c||(h+=50),41!==s&&65289!==s||(h+=50),h}function Jm(c,s,l,h,g,x){let w=null,C=Qm(s,l,g,x);for(const T of h){const A=Qm(s-T.x,l,g,x)+T.badness;A<=C&&(w=T,C=A)}return{index:c,x:s,priorBreak:w,badness:C}}function qy(c){return c?qy(c.priorBreak).concat(c.index):[]}function e_(c,s,l,h,g,x){if(!c)return[];const w=[],C=function(B,V,$,H,K,te){let ie=0;for(let xe=0;xe<B.length();xe++){const he=B.getSection(xe);ie+=Hy(B.getCharCode(xe),he,H,K,V,te)}return ie/Math.max(1,Math.ceil(ie/$))}(c,s,l,h,g,x),T=c.text.indexOf("\u200b")>=0;let A=0;for(let B=0;B<c.length();B++){const V=c.getSection(B),$=c.getCharCode(B);if(Nf[$]||(A+=Hy($,V,h,g,s,x)),B<c.length()-1){const H=!((N=$)<11904)&&(!!fn["CJK Compatibility Forms"](N)||!!fn["CJK Compatibility"](N)||!!fn["CJK Strokes"](N)||!!fn["CJK Symbols and Punctuation"](N)||!!fn["Enclosed CJK Letters and Months"](N)||!!fn["Halfwidth and Fullwidth Forms"](N)||!!fn["Ideographic Description Characters"](N)||!!fn["Vertical Forms"](N)||bs.test(String.fromCodePoint(N)));(zx[$]||H||V.imageName||B!==c.length()-2&&Gy[c.getCharCode(B+1)])&&w.push(Jm(B+1,A,C,w,jx($,c.getCharCode(B+1),H&&T),!1))}}var N;return qy(Jm(c.length(),A,C,w,0,!0))}function t_(c){let s=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:s,verticalAlign:l}}function Vx(c,s,l){const h=24*s.getMaxScale(),{maxImageWidth:g,maxImageHeight:x}=s.getMaxImageSize(c),w=Math.max(h,x*l);return{verticalLineContentWidth:Math.max(h,g*l),horizontalLineContentHeight:w}}function n_(c){switch(c){case"top":return 0;case"center":return.5;default:return 1}}function Wy(c,s,l){return!(c===W.ao.horizontal||!s&&!ah(l)||s&&(Nf[l]||(h=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function Zy(c,s,l,h,g,x){const w=x[c.fontStack],C=function(A,N,B,V){if(A&&A.rect)return A;const $=N[B.fontStack],H=$&&$[V];return H?{rect:null,metrics:H.metrics}:null}(w&&w[s],g,c,s);if(null===C)return null;let T;if(l)T=h.verticalLineContentWidth-24*c.scale;else{const A=n_(c.verticalAlign);T=(h.horizontalLineContentHeight-24*c.scale)*A}return{rect:C.rect,metrics:C.metrics,baselineOffset:T}}function Jp(c,s,l,h,g){const x=g[c.imageName];if(!x)return null;const w=x.paddedRect,C=x.displaySize,T={width:C[0],height:C[1],left:1,top:-3,advance:s?C[1]:C[0]};let A;if(s)A=h.verticalLineContentWidth-C[1]*c.scale;else{const N=n_(c.verticalAlign);A=(h.horizontalLineContentHeight-C[1]*c.scale)*N}return{rect:w,metrics:T,baselineOffset:A,imageOffset:(s?C[0]:C[1])*c.scale-24*l}}function Ky(c,s,l,h){if(0===h)return;const g=c[l],x=(c[l].x+g.metrics.advance*g.scale)*h;for(let w=s;w<=l;w++)c[w].x-=x}function Yy(c,s,l){const{horizontalAlign:h,verticalAlign:g}=t_(l),x=s[0]-c.displaySize[0]*h,w=s[1]-c.displaySize[1]*g;return{image:c,top:w,bottom:w+c.displaySize[1],left:x,right:x+c.displaySize[0]}}function r_(c){var s,l;let h=c.left,g=c.top,x=c.right-h,w=c.bottom-g;const C=null!==(s=c.image.textFitWidth)&&void 0!==s?s:"stretchOrShrink",T=null!==(l=c.image.textFitHeight)&&void 0!==l?l:"stretchOrShrink",A=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if("proportional"===T){if("stretchOnly"===C&&x/w<A||"proportional"===C){const N=Math.ceil(w*A);h*=N/x,x=N}}else if("proportional"===C&&"stretchOnly"===T&&0!==A&&x/w>A){const N=Math.ceil(x/A);g*=N/w,w=N}return{x1:h,y1:g,x2:h+x,y2:g+w}}function i_(c,s,l,h,g,x){const w=c.image;let C;if(w.content){const te=w.content,ie=w.pixelRatio||1;C=[te[0]/ie,te[1]/ie,w.displaySize[0]-te[2]/ie,w.displaySize[1]-te[3]/ie]}const T=s.left*x,A=s.right*x;let N,B,V,$;"width"===l||"both"===l?($=g[0]+T-h[3],B=g[0]+A+h[1]):($=g[0]+(T+A-w.displaySize[0])/2,B=$+w.displaySize[0]);const H=s.top*x,K=s.bottom*x;return"height"===l||"both"===l?(N=g[1]+H-h[0],V=g[1]+K+h[2]):(N=g[1]+(H+K-w.displaySize[1])/2,V=N+w.displaySize[1]),{image:w,top:N,right:B,bottom:V,left:$,collisionPadding:C}}const oc=128,_u=32640;function Xy(c,s){const{expression:l}=s;if("constant"===l.kind)return{kind:"constant",layoutSize:l.evaluate(new sr(c+1))};if("source"===l.kind)return{kind:"source"};{const{zoomStops:h,interpolationType:g}=l;let x=0;for(;x<h.length&&h[x]<=c;)x++;x=Math.max(0,x-1);let w=x;for(;w<h.length&&h[w]<c+1;)w++;w=Math.min(h.length-1,w);const C=h[x],T=h[w];return"composite"===l.kind?{kind:"composite",minZoom:C,maxZoom:T,interpolationType:g}:{kind:"camera",minZoom:C,maxZoom:T,minSize:l.evaluate(new sr(C)),maxSize:l.evaluate(new sr(T)),interpolationType:g}}}function o_(c,s,l){let h="never";const g=c.get(s);return g?h=g:c.get(l)&&(h="always"),h}const Ux=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function eg(c,s,l,h,g,x,w,C,T,A,N,B,V){const $=C?Math.min(_u,Math.round(C[0])):0,H=C?Math.min(_u,Math.round(C[1])):0;c.emplaceBack(s,l,Math.round(32*h),Math.round(32*g),x,w,($<<1)+(T?1:0),H,16*A,16*N,256*B,256*V)}function s_(c,s,l){c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l),c.emplaceBack(s.x,s.y,l)}function $x(c){for(const s of c.sections)if(lh(s.text))return!0;return!1}class tg{constructor(s){this.layoutVertexArray=new qe,this.indexArray=new In,this.programConfigurations=s,this.segments=new tn,this.dynamicLayoutVertexArray=new Be,this.opacityVertexArray=new ht,this.hasVisibleVertices=!1,this.placedSymbolArray=new q}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(s,l,h,g){this.isEmpty()||(h&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,By.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,kx.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,Ux,!0),this.opacityVertexBuffer.itemSize=1),(h||g)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xe("SymbolBuffers",tg);class a_{constructor(s,l,h){this.layoutVertexArray=new s,this.layoutAttributes=l,this.indexArray=new h,this.segments=new tn,this.collisionVertexArray=new Dn}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Px.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xe("CollisionBuffers",a_);class wh{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(w=>w.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xy(this.zoom,l["text-size"]),this.iconSizeData=Xy(this.zoom,l["icon-size"]);const h=this.layers[0].layout,g=h.get("symbol-sort-key"),x=h.get("symbol-z-order");this.canOverlap="never"!==o_(h,"text-overlap","text-allow-overlap")||"never"!==o_(h,"icon-overlap","icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==x&&!g.isConstant(),this.sortFeaturesByY=("viewport-y"===x||"auto"===x&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===h.get("symbol-placement")&&(this.writingModes=h.get("text-writing-mode").map(w=>W.ao[w])),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=s.sourceID}createArrays(){this.text=new tg(new go(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new tg(new go(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new re,this.lineVertexArray=new oe,this.symbolInstances=new ee,this.textAnchorOffsets=new ae}calculateGlyphDependencies(s,l,h,g,x){for(let w=0;w<s.length;w++)if(l[s.charCodeAt(w)]=!0,(h||g)&&x){const C=os[s.charAt(w)];C&&(l[C.charCodeAt(0)]=!0)}}populate(s,l,h){const g=this.layers[0],x=g.layout,w=x.get("text-font"),C=x.get("text-field"),T=x.get("icon-image"),A=("constant"!==C.value.kind||C.value.value instanceof Ye&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&("constant"!==w.value.kind||w.value.value.length>0),N="constant"!==T.value.kind||!!T.value.value||Object.keys(T.parameters).length>0,B=x.get("symbol-sort-key");if(this.features=[],!A&&!N)return;const V=l.iconDependencies,$=l.glyphDependencies,H=l.availableImages,K=new sr(this.zoom,{globalState:this.globalState});for(const{feature:te,id:ie,index:xe,sourceLayerIndex:he}of s){const pe=g._featureFilter.needGeometry,Me=$a(te,pe);if(!g._featureFilter.filter(K,Me,h))continue;let Ne,Ve;if(pe||(Me.geometry=ns(te)),A){const Ke=g.getValueAndResolveTokens("text-field",Me,h,H),nt=Ye.factory(Ke),wt=this.hasRTLText=this.hasRTLText||$x(nt);(!wt||"unavailable"===Ao.getRTLTextPluginStatus()||wt&&Ao.isParsed())&&(Ne=xh(nt,g,Me))}if(N){const Ke=g.getValueAndResolveTokens("icon-image",Me,h,H);Ve=Ke instanceof To?Ke:To.fromString(Ke)}if(!Ne&&!Ve)continue;const rt=this.sortFeaturesByKey?B.evaluate(Me,{},h):void 0;if(this.features.push({id:ie,text:Ne,icon:Ve,index:xe,sourceLayerIndex:he,geometry:Me.geometry,properties:te.properties,type:gu.types[te.type],sortKey:rt}),Ve&&(V[Ve.name]=!0),Ne){const Ke=w.evaluate(Me,{},h).join(","),nt="viewport"!==x.get("text-rotation-alignment")&&"point"!==x.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(W.ao.vertical)>=0;for(const wt of Ne.sections)if(wt.image)V[wt.image.name]=!0;else{const tt=Zl(Ne.toString()),Je=wt.fontStack||Ke,ze=$[Je]=$[Je]||{};this.calculateGlyphDependencies(wt.text,ze,nt,this.allowVerticalPlacement,tt)}}}"line"===x.get("symbol-placement")&&(this.features=function(te){const ie={},xe={},he=[];let pe=0;function Me(Ke){he.push(te[Ke]),pe++}function Ne(Ke,nt,wt){const tt=xe[Ke];return delete xe[Ke],xe[nt]=tt,he[tt].geometry[0].pop(),he[tt].geometry[0]=he[tt].geometry[0].concat(wt[0]),tt}function Ve(Ke,nt,wt){const tt=ie[nt];return delete ie[nt],ie[Ke]=tt,he[tt].geometry[0].shift(),he[tt].geometry[0]=wt[0].concat(he[tt].geometry[0]),tt}function rt(Ke,nt,wt){const tt=wt?nt[0][nt[0].length-1]:nt[0][0];return`${Ke}:${tt.x}:${tt.y}`}for(let Ke=0;Ke<te.length;Ke++){const nt=te[Ke],wt=nt.geometry,tt=nt.text?nt.text.toString():null;if(!tt){Me(Ke);continue}const Je=rt(tt,wt),ze=rt(tt,wt,!0);if(Je in xe&&ze in ie&&xe[Je]!==ie[ze]){const Nt=Ve(Je,ze,wt),Gt=Ne(Je,ze,he[Nt].geometry);delete ie[Je],delete xe[ze],xe[rt(tt,he[Gt].geometry,!0)]=Gt,he[Nt].geometry=null}else Je in xe?Ne(Je,ze,wt):ze in ie?Ve(Je,ze,wt):(Me(Ke),ie[Je]=pe-1,xe[ze]=pe-1)}return he.filter(Ke=>Ke.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((te,ie)=>te.sortKey-ie.sortKey)}update(s,l,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,l,this.layers,h),this.icon.programConfigurations.updatePaintArrays(s,l,this.layers,h))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,l){const h=this.lineVertexArray.length;if(void 0!==s.segment){let g=s.dist(l[s.segment+1]),x=s.dist(l[s.segment]);const w={};for(let C=s.segment+1;C<l.length;C++)w[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:g},C<l.length-1&&(g+=l[C+1].dist(l[C]));for(let C=s.segment||0;C>=0;C--)w[C]={x:l[C].x,y:l[C].y,tileUnitDistanceFromAnchor:x},C>0&&(x+=l[C-1].dist(l[C]));for(let C=0;C<l.length;C++){const T=w[C];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(s,l,h,g,x,w,C,T,A,N,B,V){const $=s.indexArray,H=s.layoutVertexArray,K=s.segments.prepareSegment(4*l.length,H,$,this.canOverlap?w.sortKey:void 0),te=this.glyphOffsetArray.length,ie=K.vertexLength,xe=this.allowVerticalPlacement&&C===W.ao.vertical?Math.PI/2:0,he=w.text&&w.text.sections;for(let pe=0;pe<l.length;pe++){const{tl:Me,tr:Ne,bl:Ve,br:rt,tex:Ke,pixelOffsetTL:nt,pixelOffsetBR:wt,minFontScaleX:tt,minFontScaleY:Je,glyphOffset:ze,isSDF:Nt,sectionIndex:Gt}=l[pe],Ct=K.vertexLength,_t=ze[1];eg(H,T.x,T.y,Me.x,_t+Me.y,Ke.x,Ke.y,h,Nt,nt.x,nt.y,tt,Je),eg(H,T.x,T.y,Ne.x,_t+Ne.y,Ke.x+Ke.w,Ke.y,h,Nt,wt.x,nt.y,tt,Je),eg(H,T.x,T.y,Ve.x,_t+Ve.y,Ke.x,Ke.y+Ke.h,h,Nt,nt.x,wt.y,tt,Je),eg(H,T.x,T.y,rt.x,_t+rt.y,Ke.x+Ke.w,Ke.y+Ke.h,h,Nt,wt.x,wt.y,tt,Je),s_(s.dynamicLayoutVertexArray,T,xe),$.emplaceBack(Ct,Ct+2,Ct+1),$.emplaceBack(Ct+1,Ct+2,Ct+3),K.vertexLength+=4,K.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ze[0]),pe!==l.length-1&&Gt===l[pe+1].sectionIndex||s.programConfigurations.populatePaintArrays(H.length,w,w.index,{},V,he&&he[Gt])}s.placedSymbolArray.emplaceBack(T.x,T.y,te,this.glyphOffsetArray.length-te,ie,A,N,T.segment,h?h[0]:0,h?h[1]:0,g[0],g[1],C,0,!1,0,B)}_addCollisionDebugVertex(s,l,h,g,x,w){return l.emplaceBack(0,0),s.emplaceBack(h.x,h.y,g,x,Math.round(w.x),Math.round(w.y))}addCollisionDebugVertices(s,l,h,g,x,w,C){const T=x.segments.prepareSegment(4,x.layoutVertexArray,x.indexArray),A=T.vertexLength,N=x.layoutVertexArray,B=x.collisionVertexArray,V=C.anchorX,$=C.anchorY;this._addCollisionDebugVertex(N,B,w,V,$,new gt(s,l)),this._addCollisionDebugVertex(N,B,w,V,$,new gt(h,l)),this._addCollisionDebugVertex(N,B,w,V,$,new gt(h,g)),this._addCollisionDebugVertex(N,B,w,V,$,new gt(s,g)),T.vertexLength+=4;const H=x.indexArray;H.emplaceBack(A,A+1),H.emplaceBack(A+1,A+2),H.emplaceBack(A+2,A+3),H.emplaceBack(A+3,A),T.primitiveLength+=4}addDebugCollisionBoxes(s,l,h,g){for(let x=s;x<l;x++){const w=this.collisionBoxArray.get(x);this.addCollisionDebugVertices(w.x1,w.y1,w.x2,w.y2,g?this.textCollisionBox:this.iconCollisionBox,w.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new a_(en,Ax.members,pn),this.iconCollisionBox=new a_(en,Ax.members,pn);for(let s=0;s<this.symbolInstances.length;s++){const l=this.symbolInstances.get(s);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(s,l,h,g,x,w,C,T,A){const N={};for(let B=l;B<h;B++){const V=s.get(B);N.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},N.textFeatureIndex=V.featureIndex;break}for(let B=g;B<x;B++){const V=s.get(B);N.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},N.verticalTextFeatureIndex=V.featureIndex;break}for(let B=w;B<C;B++){const V=s.get(B);N.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},N.iconFeatureIndex=V.featureIndex;break}for(let B=T;B<A;B++){const V=s.get(B);N.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},N.verticalIconFeatureIndex=V.featureIndex;break}return N}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const h=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,l){const h=s.placedSymbolArray.get(l),g=h.vertexStartIndex+4*h.numGlyphs;for(let x=h.vertexStartIndex;x<g;x+=4)s.indexArray.emplaceBack(x,x+2,x+1),s.indexArray.emplaceBack(x+1,x+2,x+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const l=Math.sin(s),h=Math.cos(s),g=[],x=[],w=[];for(let C=0;C<this.symbolInstances.length;++C){w.push(C);const T=this.symbolInstances.get(C);g.push(0|Math.round(l*T.anchorX+h*T.anchorY)),x.push(T.featureIndex)}return w.sort((C,T)=>g[C]-g[T]||x[T]-x[C]),w}addToSortKeyRanges(s,l){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===l?h.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const h=this.symbolInstances.get(l);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((g,x,w)=>{g>=0&&w.indexOf(g)===x&&this.addIndicesForPlacedSymbol(this.text,g)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Qy,l_;Xe("SymbolBucket",wh,{omit:["layers","collisionBoxArray","features","compareText"]}),wh.MAX_GLYPHS=65535,wh.addDynamicAttributes=s_;var Lf={get paint(){return l_=l_||new Mt({"icon-opacity":new Ce(Ee.paint_symbol["icon-opacity"]),"icon-color":new Ce(Ee.paint_symbol["icon-color"]),"icon-halo-color":new Ce(Ee.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ce(Ee.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ce(Ee.paint_symbol["icon-halo-blur"]),"icon-translate":new mt(Ee.paint_symbol["icon-translate"]),"icon-translate-anchor":new mt(Ee.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ce(Ee.paint_symbol["text-opacity"]),"text-color":new Ce(Ee.paint_symbol["text-color"],{runtimeType:mi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Ce(Ee.paint_symbol["text-halo-color"]),"text-halo-width":new Ce(Ee.paint_symbol["text-halo-width"]),"text-halo-blur":new Ce(Ee.paint_symbol["text-halo-blur"]),"text-translate":new mt(Ee.paint_symbol["text-translate"]),"text-translate-anchor":new mt(Ee.paint_symbol["text-translate-anchor"])})},get layout(){return Qy=Qy||new Mt({"symbol-placement":new mt(Ee.layout_symbol["symbol-placement"]),"symbol-spacing":new mt(Ee.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new mt(Ee.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ce(Ee.layout_symbol["symbol-sort-key"]),"symbol-z-order":new mt(Ee.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new mt(Ee.layout_symbol["icon-allow-overlap"]),"icon-overlap":new mt(Ee.layout_symbol["icon-overlap"]),"icon-ignore-placement":new mt(Ee.layout_symbol["icon-ignore-placement"]),"icon-optional":new mt(Ee.layout_symbol["icon-optional"]),"icon-rotation-alignment":new mt(Ee.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ce(Ee.layout_symbol["icon-size"]),"icon-text-fit":new mt(Ee.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new mt(Ee.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ce(Ee.layout_symbol["icon-image"]),"icon-rotate":new Ce(Ee.layout_symbol["icon-rotate"]),"icon-padding":new Ce(Ee.layout_symbol["icon-padding"]),"icon-keep-upright":new mt(Ee.layout_symbol["icon-keep-upright"]),"icon-offset":new Ce(Ee.layout_symbol["icon-offset"]),"icon-anchor":new Ce(Ee.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new mt(Ee.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new mt(Ee.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new mt(Ee.layout_symbol["text-rotation-alignment"]),"text-field":new Ce(Ee.layout_symbol["text-field"]),"text-font":new Ce(Ee.layout_symbol["text-font"]),"text-size":new Ce(Ee.layout_symbol["text-size"]),"text-max-width":new Ce(Ee.layout_symbol["text-max-width"]),"text-line-height":new mt(Ee.layout_symbol["text-line-height"]),"text-letter-spacing":new Ce(Ee.layout_symbol["text-letter-spacing"]),"text-justify":new Ce(Ee.layout_symbol["text-justify"]),"text-radial-offset":new Ce(Ee.layout_symbol["text-radial-offset"]),"text-variable-anchor":new mt(Ee.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ce(Ee.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ce(Ee.layout_symbol["text-anchor"]),"text-max-angle":new mt(Ee.layout_symbol["text-max-angle"]),"text-writing-mode":new mt(Ee.layout_symbol["text-writing-mode"]),"text-rotate":new Ce(Ee.layout_symbol["text-rotate"]),"text-padding":new mt(Ee.layout_symbol["text-padding"]),"text-keep-upright":new mt(Ee.layout_symbol["text-keep-upright"]),"text-transform":new Ce(Ee.layout_symbol["text-transform"]),"text-offset":new Ce(Ee.layout_symbol["text-offset"]),"text-allow-overlap":new mt(Ee.layout_symbol["text-allow-overlap"]),"text-overlap":new mt(Ee.layout_symbol["text-overlap"]),"text-ignore-placement":new mt(Ee.layout_symbol["text-ignore-placement"]),"text-optional":new mt(Ee.layout_symbol["text-optional"])})}};class Jy{constructor(s){if(void 0===s.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:ii,this.defaultValue=s}evaluate(s){if(s.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(s.formattedSection))return l.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xe("FormatSectionOverride",Jy,{omit:["defaultValue"]});class qa extends ji{constructor(s){super(s,Lf)}recalculate(s,l){if(super.recalculate(s,l),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const h=this.layout.get("text-writing-mode");if(h){const g=[];for(const x of h)g.indexOf(x)<0&&g.push(x);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,l,h,g){const x=this.layout.get(s).evaluate(l,{},h,g),w=this._unevaluatedLayout._values[s];return w.isDataDriven()||Aa(w.value)||!x?x:(C=l.properties,x.replace(/{([^{}]+)}/g,(A,N)=>C&&N in C?String(C[N]):""));var C}createBucket(s){return new wh(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of Lf.paint.overridableProperties){if(!qa.hasPaintOverride(this.layout,s))continue;const l=this.paint.get(s),h=new Jy(l),g=new ru(h,l.property.specification);let x=null;x="constant"===l.value.kind||"source"===l.value.kind?new ys("source",g):new dl("composite",g,l.value.zoomStops),this.paint._values[s]=new Ba(l.property,x,l.parameters)}}_handleOverridablePaintPropertyUpdate(s,l,h){return!(!this.layout||l.isDataDriven()||h.isDataDriven())&&qa.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,l){const h=s.get("text-field"),g=Lf.paint.properties[l];let x=!1;const w=C=>{for(const T of C)if(g.overrides&&g.overrides.hasOverride(T))return void(x=!0)};if("constant"===h.value.kind&&h.value.value instanceof Ye)w(h.value.value.sections);else if("source"===h.value.kind){const C=A=>{x||(A instanceof Ca&&Ot(A.value)===Nl?w(A.value.sections):A instanceof ol?w(A.sections):A.eachChild(C))},T=h.value;T._styleExpression&&C(T._styleExpression.expression)}return x}}let Sh;var Gx={get paint(){return Sh=Sh||new Mt({"background-color":new mt(Ee.paint_background["background-color"]),"background-pattern":new Fr(Ee.paint_background["background-pattern"]),"background-opacity":new mt(Ee.paint_background["background-opacity"])})}};class ev extends ji{constructor(s){super(s,Gx)}}let dd;var VT={get paint(){return dd=dd||new Mt({"raster-opacity":new mt(Ee.paint_raster["raster-opacity"]),"raster-hue-rotate":new mt(Ee.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new mt(Ee.paint_raster["raster-brightness-min"]),"raster-brightness-max":new mt(Ee.paint_raster["raster-brightness-max"]),"raster-saturation":new mt(Ee.paint_raster["raster-saturation"]),"raster-contrast":new mt(Ee.paint_raster["raster-contrast"]),"raster-resampling":new mt(Ee.paint_raster["raster-resampling"]),"raster-fade-duration":new mt(Ee.paint_raster["raster-fade-duration"])})}};class tv extends ji{constructor(s){super(s,VT)}}class nv extends ji{constructor(s){super(s,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=s}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Hx{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const qx={once:!0},rv=6371008.8;class yu{constructor(s,l){if(isNaN(s)||isNaN(l))throw new Error(`Invalid LngLat object: (${s}, ${l})`);if(this.lng=+s,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yu(Rc(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const l=Math.PI/180,h=this.lat*l,g=s.lat*l,x=Math.sin(h)*Math.sin(g)+Math.cos(h)*Math.cos(g)*Math.cos((s.lng-this.lng)*l);return rv*Math.acos(Math.min(x,1))}static convert(s){if(s instanceof yu)return s;if(Array.isArray(s)&&(2===s.length||3===s.length))return new yu(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&"object"==typeof s&&null!==s)return new yu(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hd=2*Math.PI*rv;function c_(c){return hd*Math.cos(c*Math.PI/180)}function ng(c){return(180+c)/360}function rg(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function ig(c,s){return c/c_(s)}function og(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function u_(c,s){return c*c_(og(s))}class Of{constructor(s,l,h=0){this.x=+s,this.y=+l,this.z=+h}static fromLngLat(s,l=0){const h=yu.convert(s);return new Of(ng(h.lng),rg(h.lat),ig(l,h.lat))}toLngLat(){return new yu(360*this.x-180,og(this.y))}toAltitude(){return u_(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/hd*(s=og(this.y),1/Math.cos(s*Math.PI/180));var s}}function sg(c,s,l){var h=2*Math.PI*6378137/256/Math.pow(2,l);return[c*h-2*Math.PI*6378137/2,s*h-2*Math.PI*6378137/2]}class ag{constructor(s,l,h){if(x=l,w=h,(g=s)<0||g>25||w<0||w>=Math.pow(2,g)||x<0||x>=Math.pow(2,g))throw new Error(`x=${l}, y=${h}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);var g,x,w;this.z=s,this.x=l,this.y=h,this.key=pd(0,s,s,l,h)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,l,h){const g=(w=this.y,C=this.z,T=sg(256*(x=this.x),256*(w=Math.pow(2,C)-w-1),C),A=sg(256*(x+1),256*(w+1),C),T[0]+","+T[1]+","+A[0]+","+A[1]);var x,w,C,T,A;const N=function(B,V,$){let H,K="";for(let te=B;te>0;te--)H=1<<te-1,K+=(V&H?1:0)+($&H?2:0);return K}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===h?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,g)}isChildOf(s){const l=this.z-s.z;return l>0&&s.x===this.x>>l&&s.y===this.y>>l}getTilePoint(s){const l=Math.pow(2,this.z);return new gt((s.x*l-this.x)*En,(s.y*l-this.y)*En)}toString(){return`${this.z}/${this.x}/${this.y}`}}class fd{constructor(s,l){this.wrap=s,this.canonical=l,this.key=pd(s,l.z,l.z,l.x,l.y)}}class Es{constructor(s,l,h,g,x){if(this.terrainRttPosMatrix32f=null,s<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${h}`);this.overscaledZ=s,this.wrap=l,this.canonical=new ag(h,+g,+x),this.key=pd(l,s,h,g,x)}clone(){return new Es(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-s;return s>this.canonical.z?new Es(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Es(s,this.wrap,s,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(s,l){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const h=this.canonical.z-s;return s>this.canonical.z?pd(this.wrap*+l,s,this.canonical.z,this.canonical.x,this.canonical.y):pd(this.wrap*+l,s,s,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const l=this.canonical.z-s.canonical.z;return 0===s.overscaledZ||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>l&&s.canonical.y===this.canonical.y>>l}children(s){if(this.overscaledZ>=s)return[new Es(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,h=2*this.canonical.x,g=2*this.canonical.y;return[new Es(l,this.wrap,l,h,g),new Es(l,this.wrap,l,h+1,g),new Es(l,this.wrap,l,h,g+1),new Es(l,this.wrap,l,h+1,g+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new Es(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new Es(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new fd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Of(s.x-this.wrap,s.y))}}function pd(c,s,l,h,g){(c*=2)<0&&(c=-1*c-1);const x=1<<l;return(x*x*c+x*g+h).toString(36)+l.toString(36)+s.toString(36)}function Eh(c,s){return s?c.properties[s]:c.id}Xe("CanonicalTileID",ag),Xe("OverscaledTileID",Es,{omit:["terrainRttPosMatrix32f"]});class gd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const l=new gd;return l.extend(s(new gt(this.minX,this.minY))),l.extend(s(new gt(this.maxX,this.minY))),l.extend(s(new gt(this.minX,this.maxY))),l.extend(s(new gt(this.maxX,this.maxY))),l}static fromPoints(s){const l=new gd;for(const h of s)l.extend(h);return l}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class d_{constructor(s){this._stringToNumber={},this._numberToString=[];for(let l=0;l<s.length;l++){const h=s[l];this._stringToNumber[h]=l,this._numberToString[l]=h}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class h_{constructor(s,l,h,g,x){this.type="Feature",this._vectorTileFeature=s,s._z=l,s._x=h,s._y=g,this.properties=s.properties,this.id=x}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const l in this)"_geometry"!==l&&"_vectorTileFeature"!==l&&(s[l]=this[l]);return s}}class iv{constructor(s,l){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new vs(En,16,0),this.grid3D=new vs(En,16,0),this.featureIndexArray=new ge,this.promoteId=l}insert(s,l,h,g,x,w){const C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,g,x);const T=w?this.grid3D:this.grid;for(let A=0;A<l.length;A++){const N=l[A],B=[1/0,1/0,-1/0,-1/0];for(let V=0;V<N.length;V++){const $=N[V];B[0]=Math.min(B[0],$.x),B[1]=Math.min(B[1],$.y),B[2]=Math.max(B[2],$.x),B[3]=Math.max(B[3],$.y)}B[0]<En&&B[1]<En&&B[2]>=0&&B[3]>=0&&T.insert(C,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Um(new Zm(this.rawTileData)).layers,this.sourceLayerCoder=new d_(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,l,h,g){this.loadVTLayers();const x=s.params,w=En/s.tileSize/s.scale,C=ai(x.filter),T=s.queryGeometry,A=s.queryPadding*w,N=gd.fromPoints(T),B=this.grid.query(N.minX-A,N.minY-A,N.maxX+A,N.maxY+A),V=gd.fromPoints(s.cameraQueryGeometry).expandBy(A),$=this.grid3D.query(V.minX,V.minY,V.maxX,V.maxY,(te,ie,xe,he)=>function(pe,Me,Ne,Ve,rt){for(const nt of pe)if(Me<=nt.x&&Ne<=nt.y&&Ve>=nt.x&&rt>=nt.y)return!0;const Ke=[new gt(Me,Ne),new gt(Me,rt),new gt(Ve,rt),new gt(Ve,Ne)];if(pe.length>2)for(const nt of Ke)if(rs(pe,nt))return!0;for(let nt=0;nt<pe.length-1;nt++)if(mh(pe[nt],pe[nt+1],Ke))return!0;return!1}(s.cameraQueryGeometry,te-A,ie-A,xe+A,he+A));for(const te of $)B.push(te);B.sort(UT);const H={};let K;for(let te=0;te<B.length;te++){const ie=B[te];if(ie===K)continue;K=ie;const xe=this.featureIndexArray.get(ie);let he=null;this.loadMatchingFeature(H,xe.bucketIndex,xe.sourceLayerIndex,xe.featureIndex,C,x.layers,x.availableImages,l,h,g,(pe,Me,Ne)=>(he||(he=ns(pe)),Me.queryIntersectsFeature({queryGeometry:T,feature:pe,featureState:Ne,geometry:he,zoom:this.z,transform:s.transform,pixelsToTileUnits:w,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return H}loadMatchingFeature(s,l,h,g,x,w,C,T,A,N,B){const V=this.bucketLayerIDs[l];if(w&&!V.some(te=>w.has(te)))return;const $=this.sourceLayerCoder.decode(h),H=this.vtLayers[$].feature(g);if(x.needGeometry){const te=$a(H,!0);if(!x.filter(new sr(this.tileID.overscaledZ),te,this.tileID.canonical))return}else if(!x.filter(new sr(this.tileID.overscaledZ),H))return;const K=this.getId(H,$);for(let te=0;te<V.length;te++){const ie=V[te];if(w&&!w.has(ie))continue;const xe=T[ie];if(!xe)continue;let he={};K&&N&&(he=N.getState(xe.sourceLayer||"_geojsonTileLayer",K));const pe=Ho({},A[ie]);pe.paint=f_(pe.paint,xe.paint,H,he,C),pe.layout=f_(pe.layout,xe.layout,H,he,C);const Me=!B||B(H,xe,he);if(!Me)continue;const Ne=new h_(H,this.z,this.x,this.y,K);Ne.layer=pe;let Ve=s[ie];void 0===Ve&&(Ve=s[ie]=[]),Ve.push({featureIndex:g,feature:Ne,intersectionZ:Me})}}lookupSymbolFeatures(s,l,h,g,x,w,C,T){const A={};this.loadVTLayers();const N=ai(x);for(const B of s)this.loadMatchingFeature(A,h,g,B,N,w,C,T,l);return A}hasLayer(s){for(const l of this.bucketLayerIDs)for(const h of l)if(s===h)return!0;return!1}getId(s,l){var h;let g=s.id;return this.promoteId&&(g=s.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[l]],"boolean"==typeof g&&(g=Number(g)),void 0===g&&!(null===(h=s.properties)||void 0===h)&&h.cluster&&this.promoteId&&(g=Number(s.properties.cluster_id))),g}}function f_(c,s,l,h,g){return Al(c,(x,w)=>{const C=s instanceof fh?s.get(w):null;return C&&C.evaluate?C.evaluate(l,h,g):C})}function UT(c,s){return s-c}function p_(c,s,l,h,g){const x=[];for(let w=0;w<c.length;w++){const C=c[w];let T;for(let A=0;A<C.length-1;A++){let N=C[A],B=C[A+1];N.x<s&&B.x<s||(N.x<s?N=new gt(s,N.y+(s-N.x)/(B.x-N.x)*(B.y-N.y))._round():B.x<s&&(B=new gt(s,N.y+(s-N.x)/(B.x-N.x)*(B.y-N.y))._round()),N.y<l&&B.y<l||(N.y<l?N=new gt(N.x+(l-N.y)/(B.y-N.y)*(B.x-N.x),l)._round():B.y<l&&(B=new gt(N.x+(l-N.y)/(B.y-N.y)*(B.x-N.x),l)._round()),N.x>=h&&B.x>=h||(N.x>=h?N=new gt(h,N.y+(h-N.x)/(B.x-N.x)*(B.y-N.y))._round():B.x>=h&&(B=new gt(h,N.y+(h-N.x)/(B.x-N.x)*(B.y-N.y))._round()),N.y>=g&&B.y>=g||(N.y>=g?N=new gt(N.x+(g-N.y)/(B.y-N.y)*(B.x-N.x),g)._round():B.y>=g&&(B=new gt(N.x+(g-N.y)/(B.y-N.y)*(B.x-N.x),g)._round()),T&&N.equals(T[T.length-1])||(T=[N],x.push(T)),T.push(B)))))}}return x}Xe("FeatureIndex",iv,{omit:["rawTileData","sourceLayerCoder"]});class vu extends gt{constructor(s,l,h,g){super(s,l),this.angle=h,void 0!==g&&(this.segment=g)}clone(){return new vu(this.x,this.y,this.angle,this.segment)}}function ov(c,s,l,h,g){if(void 0===s.segment||0===l)return!0;let x=s,w=s.segment+1,C=0;for(;C>-l/2;){if(w--,w<0)return!1;C-=c[w].dist(x),x=c[w]}C+=c[w].dist(c[w+1]),w++;const T=[];let A=0;for(;C<l/2;){const N=c[w],B=c[w+1];if(!B)return!1;let V=c[w-1].angleTo(N)-N.angleTo(B);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:C,angleDelta:V}),A+=V;C-T[0].distance>h;)A-=T.shift().angleDelta;if(A>g)return!1;w++,C+=N.dist(B)}return!0}function Wx(c){let s=0;for(let l=0;l<c.length-1;l++)s+=c[l].dist(c[l+1]);return s}function Zx(c,s,l){return c?.6*s*l:0}function sv(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function Kx(c,s,l,h,g,x){const w=Zx(l,g,x),C=sv(l,h)*x;let T=0;const A=Wx(c)/2;for(let N=0;N<c.length-1;N++){const B=c[N],V=c[N+1],$=B.dist(V);if(T+$>A){const H=(A-T)/$,K=$s.number(B.x,V.x,H),te=$s.number(B.y,V.y,H),ie=new vu(K,te,V.angleTo(B),N);return ie._round(),!w||ov(c,ie,C,w,s)?ie:void 0}T+=$}}function Yx(c,s,l,h,g,x,w,C,T){const A=Zx(h,x,w),N=sv(h,g),B=N*w,V=0===c[0].x||c[0].x===T||0===c[0].y||c[0].y===T;return s-B<s/4&&(s=B+s/4),Ff(c,V?s/2*C%s:(N/2+2*x)*w*C%s,s,A,l,B,V,!1,T)}function Ff(c,s,l,h,g,x,w,C,T){const A=x/2,N=Wx(c);let B=0,V=s-l,$=[];for(let H=0;H<c.length-1;H++){const K=c[H],te=c[H+1],ie=K.dist(te),xe=te.angleTo(K);for(;V+l<B+ie;){V+=l;const he=(V-B)/ie,pe=$s.number(K.x,te.x,he),Me=$s.number(K.y,te.y,he);if(pe>=0&&pe<T&&Me>=0&&Me<T&&V-A>=0&&V+A<=N){const Ne=new vu(pe,Me,xe,H);Ne._round(),h&&!ov(c,Ne,x,h,g)||$.push(Ne)}}B+=ie}return C||$.length||w||($=Ff(c,B/2,l,h,g,x,w,!0,T)),$}function lg(c,s,l,h){const g=[],x=c.image,w=x.pixelRatio,C=x.paddedRect.w-2,T=x.paddedRect.h-2;let A={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const N=x.stretchX||[[0,C]],B=x.stretchY||[[0,T]],V=(ze,Nt)=>ze+Nt[1]-Nt[0],$=N.reduce(V,0),H=B.reduce(V,0),K=C-$,te=T-H;let ie=0,xe=$,he=0,pe=H,Me=0,Ne=K,Ve=0,rt=te;if(x.content&&h){const ze=x.content,Nt=ze[2]-ze[0],Gt=ze[3]-ze[1];(x.textFitWidth||x.textFitHeight)&&(A=r_(c)),ie=Ch(N,0,ze[0]),he=Ch(B,0,ze[1]),xe=Ch(N,ze[0],ze[2]),pe=Ch(B,ze[1],ze[3]),Me=ze[0]-ie,Ve=ze[1]-he,Ne=Nt-xe,rt=Gt-pe}const Ke=A.x1,nt=A.y1,wt=A.x2-Ke,tt=A.y2-nt,Je=(ze,Nt,Gt,Ct)=>{const _t=_d(ze.stretch-ie,xe,wt,Ke),vn=yd(ze.fixed-Me,Ne,ze.stretch,$),fr=_d(Nt.stretch-he,pe,tt,nt),di=yd(Nt.fixed-Ve,rt,Nt.stretch,H),ro=_d(Gt.stretch-ie,xe,wt,Ke),Cs=yd(Gt.fixed-Me,Ne,Gt.stretch,$),Fo=_d(Ct.stretch-he,pe,tt,nt),Pi=yd(Ct.fixed-Ve,rt,Ct.stretch,H),Xn=new gt(_t,fr),Ei=new gt(ro,fr),Hi=new gt(ro,Fo),hi=new gt(_t,Fo),io=new gt(vn/w,di/w),ta=new gt(Cs/w,Pi/w),fi=s*Math.PI/180;if(fi){const Qn=Math.sin(fi),Vr=Math.cos(fi),Ur=[Vr,-Qn,Qn,Vr];Xn._matMult(Ur),Ei._matMult(Ur),hi._matMult(Ur),Hi._matMult(Ur)}const oo=ze.stretch+ze.fixed,jr=Nt.stretch+Nt.fixed;return{tl:Xn,tr:Ei,bl:hi,br:Hi,tex:{x:x.paddedRect.x+1+oo,y:x.paddedRect.y+1+jr,w:Gt.stretch+Gt.fixed-oo,h:Ct.stretch+Ct.fixed-jr},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:io,pixelOffsetBR:ta,minFontScaleX:Ne/w/wt,minFontScaleY:rt/w/tt,isSDF:l}};if(h&&(x.stretchX||x.stretchY)){const ze=md(N,K,$),Nt=md(B,te,H);for(let Gt=0;Gt<ze.length-1;Gt++){const Ct=ze[Gt],_t=ze[Gt+1];for(let vn=0;vn<Nt.length-1;vn++)g.push(Je(Ct,Nt[vn],_t,Nt[vn+1]))}}else g.push(Je({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:T+1}));return g}function Ch(c,s,l){let h=0;for(const g of c)h+=Math.max(s,Math.min(l,g[1]))-Math.max(s,Math.min(l,g[0]));return h}function md(c,s,l){const h=[{fixed:-1,stretch:0}];for(const[g,x]of c){const w=h[h.length-1];h.push({fixed:g-w.stretch,stretch:w.stretch}),h.push({fixed:g-w.stretch,stretch:w.stretch+(x-g)})}return h.push({fixed:s+1,stretch:l}),h}function _d(c,s,l,h){return c/s*l+h}function yd(c,s,l,h){return c-s*l/h}Xe("Anchor",vu);class sc{constructor(s,l,h,g,x,w,C,T,A,N){var B;if(this.boxStartIndex=s.length,A){let V=w.top,$=w.bottom;const H=w.collisionPadding;H&&(V-=H[1],$+=H[3]);let K=$-V;K>0&&(K=Math.max(10,K),this.circleDiameter=K)}else{const V=null!==(B=w.image)&&void 0!==B&&B.content&&(w.image.textFitWidth||w.image.textFitHeight)?r_(w):{x1:w.left,y1:w.top,x2:w.right,y2:w.bottom};V.y1=V.y1*C-T[0],V.y2=V.y2*C+T[2],V.x1=V.x1*C-T[3],V.x2=V.x2*C+T[1];const $=w.collisionPadding;if($&&(V.x1-=$[0]*C,V.y1-=$[1]*C,V.x2+=$[2]*C,V.y2+=$[3]*C),N){const H=new gt(V.x1,V.y1),K=new gt(V.x2,V.y1),te=new gt(V.x1,V.y2),ie=new gt(V.x2,V.y2),xe=N*Math.PI/180;H._rotate(xe),K._rotate(xe),te._rotate(xe),ie._rotate(xe),V.x1=Math.min(H.x,K.x,te.x,ie.x),V.x2=Math.max(H.x,K.x,te.x,ie.x),V.y1=Math.min(H.y,K.y,te.y,ie.y),V.y2=Math.max(H.y,K.y,te.y,ie.y)}s.emplaceBack(l.x,l.y,V.x1,V.y1,V.x2,V.y2,h,g,x)}this.boxEndIndex=s.length}}class g_{constructor(s=[],l=(h,g)=>h<g?-1:h>g?1:0){if(this.data=s,this.length=this.data.length,this.compare=l,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(0===this.length)return;const s=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:l,compare:h}=this,g=l[s];for(;s>0;){const x=s-1>>1,w=l[x];if(h(g,w)>=0)break;l[s]=w,s=x}l[s]=g}_down(s){const{data:l,compare:h}=this,g=this.length>>1,x=l[s];for(;s<g;){let w=1+(s<<1);const C=w+1;if(C<this.length&&h(l[C],l[w])<0&&(w=C),h(l[w],x)>=0)break;l[s]=l[w],s=w}l[s]=x}}function m_(c,s=1,l=!1){const h=gd.fromPoints(c[0]),g=Math.min(h.width(),h.height());let x=g/2;const w=new g_([],av),{minX:C,minY:T,maxX:A,maxY:N}=h;if(0===g)return new gt(C,T);for(let $=C;$<A;$+=g)for(let H=T;H<N;H+=g)w.push(new vd($+x,H+x,x,c));let B=function($){let H=0,K=0,te=0;const ie=$[0];for(let xe=0,he=ie.length,pe=he-1;xe<he;pe=xe++){const Me=ie[xe],Ne=ie[pe],Ve=Me.x*Ne.y-Ne.x*Me.y;K+=(Me.x+Ne.x)*Ve,te+=(Me.y+Ne.y)*Ve,H+=3*Ve}return new vd(K/H,te/H,0,$)}(c),V=w.length;for(;w.length;){const $=w.pop();($.d>B.d||!B.d)&&(B=$,l&&console.log("found best %d after %d probes",Math.round(1e4*$.d)/1e4,V)),$.max-B.d<=s||(x=$.h/2,w.push(new vd($.p.x-x,$.p.y-x,x,c)),w.push(new vd($.p.x+x,$.p.y-x,x,c)),w.push(new vd($.p.x-x,$.p.y+x,x,c)),w.push(new vd($.p.x+x,$.p.y+x,x,c)),V+=4)}return l&&(console.log(`num probes: ${V}`),console.log(`best distance: ${B.d}`)),B.p}function av(c,s){return s.max-c.max}function vd(c,s,l,h){this.p=new gt(c,s),this.h=l,this.d=function(g,x){let w=!1,C=1/0;for(let T=0;T<x.length;T++){const A=x[T];for(let N=0,B=A.length,V=B-1;N<B;V=N++){const $=A[N],H=A[V];$.y>g.y!=H.y>g.y&&g.x<(H.x-$.x)*(g.y-$.y)/(H.y-$.y)+$.x&&(w=!w),C=Math.min(C,by(g,$,H))}}return(w?1:-1)*Math.sqrt(C)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Gi;W.aE=void 0,(Gi=W.aE||(W.aE={}))[Gi.center=1]="center",Gi[Gi.left=2]="left",Gi[Gi.right=3]="right",Gi[Gi.top=4]="top",Gi[Gi.bottom=5]="bottom",Gi[Gi["top-left"]=6]="top-left",Gi[Gi["top-right"]=7]="top-right",Gi[Gi["bottom-left"]=8]="bottom-left",Gi[Gi["bottom-right"]=9]="bottom-right";const __=Number.POSITIVE_INFINITY;function cg(c,s){return s[1]!==__?function(l,h,g){let x=0,w=0;switch(h=Math.abs(h),g=Math.abs(g),l){case"top-right":case"top-left":case"top":w=g-7;break;case"bottom-right":case"bottom-left":case"bottom":w=7-g}switch(l){case"top-right":case"bottom-right":case"right":x=-h;break;case"top-left":case"bottom-left":case"left":x=h}return[x,w]}(c,s[0],s[1]):function(l,h){let g=0,x=0;h<0&&(h=0);const w=h/Math.SQRT2;switch(l){case"top-right":case"top-left":x=w-7;break;case"bottom-right":case"bottom-left":x=7-w;break;case"bottom":x=7-h;break;case"top":x=h-7}switch(l){case"top-right":case"bottom-right":g=-w;break;case"top-left":case"bottom-left":g=w;break;case"left":g=h;break;case"right":g=-h}return[g,x]}(c,s[0])}function Xx(c,s,l){var h;const g=c.layout,x=null===(h=g.get("text-variable-anchor-offset"))||void 0===h?void 0:h.evaluate(s,{},l);if(x){const C=x.values,T=[];for(let A=0;A<C.length;A+=2){const N=T[A]=C[A],B=C[A+1].map(V=>24*V);N.startsWith("top")?B[1]-=7:N.startsWith("bottom")&&(B[1]+=7),T[A+1]=B}return new Ji(T)}const w=g.get("text-variable-anchor");if(w){let C;C=void 0!==c._unevaluatedLayout.getValue("text-radial-offset")?[24*g.get("text-radial-offset").evaluate(s,{},l),__]:g.get("text-offset").evaluate(s,{},l).map(A=>24*A);const T=[];for(const A of w)T.push(A,cg(A,C));return new Ji(T)}return null}function lv(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Qx(c,s,l,h,g,x,w,C,T,A,N,B){let V=x.textMaxSize.evaluate(s,{});void 0===V&&(V=w);const $=c.layers[0].layout,H=$.get("icon-offset").evaluate(s,{},N),K=cv(l.horizontal),te=w/24,ie=c.tilePixelRatio*te,xe=c.tilePixelRatio*V/24,he=c.tilePixelRatio*C,pe=c.tilePixelRatio*$.get("symbol-spacing"),Me=$.get("text-padding")*c.tilePixelRatio,Ne=function(Gt,Ct,_t,vn=1){const fr=Gt.get("icon-padding").evaluate(Ct,{},_t),di=fr&&fr.values;return[di[0]*vn,di[1]*vn,di[2]*vn,di[3]*vn]}($,s,N,c.tilePixelRatio),Ve=$.get("text-max-angle")/180*Math.PI,rt="viewport"!==$.get("text-rotation-alignment")&&"point"!==$.get("symbol-placement"),Ke="map"===$.get("icon-rotation-alignment")&&"point"!==$.get("symbol-placement"),nt=$.get("symbol-placement"),wt=pe/2,tt=$.get("icon-text-fit");let Je;h&&"none"!==tt&&(c.allowVerticalPlacement&&l.vertical&&(Je=i_(h,l.vertical,tt,$.get("icon-text-fit-padding"),H,te)),K&&(h=i_(h,K,tt,$.get("icon-text-fit-padding"),H,te)));const ze=N?B.line.getGranularityForZoomLevel(N.z):1,Nt=(Gt,Ct)=>{Ct.x<0||Ct.x>=En||Ct.y<0||Ct.y>=En||function(_t,vn,fr,di,ro,Cs,Fo,Pi,Xn,Ei,Hi,hi,io,ta,fi,oo,jr,Qn,Vr,Ur,On,Wa,ac,Ts,dv){const bd=_t.addToLineVertexArray(vn,fr);let xu,xd,Ih,Mh,hv=0,fv=0,pv=0,lc=0,wd=-1,S_=-1;const wu={};let nw=pl("");if(_t.allowVerticalPlacement&&di.vertical){const mo=Pi.layout.get("text-rotate").evaluate(On,{},Ts)+90;Ih=new sc(Xn,vn,Ei,Hi,hi,di.vertical,io,ta,fi,mo),Fo&&(Mh=new sc(Xn,vn,Ei,Hi,hi,Fo,jr,Qn,fi,mo))}if(ro){const mo=Pi.layout.get("icon-rotate").evaluate(On,{}),na="none"!==Pi.layout.get("icon-text-fit"),cc=lg(ro,mo,ac,na),Is=Fo?lg(Fo,mo,ac,na):void 0;xd=new sc(Xn,vn,Ei,Hi,hi,ro,jr,Qn,!1,mo),hv=4*cc.length;const Dh=_t.iconSizeData;let uc=null;"source"===Dh.kind?(uc=[oc*Pi.layout.get("icon-size").evaluate(On,{})],uc[0]>_u&&Wr(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===Dh.kind&&(uc=[oc*Wa.compositeIconSizes[0].evaluate(On,{},Ts),oc*Wa.compositeIconSizes[1].evaluate(On,{},Ts)],(uc[0]>_u||uc[1]>_u)&&Wr(`${_t.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),_t.addSymbols(_t.icon,cc,uc,Ur,Vr,On,W.ao.none,vn,bd.lineStartIndex,bd.lineLength,-1,Ts),wd=_t.icon.placedSymbolArray.length-1,Is&&(fv=4*Is.length,_t.addSymbols(_t.icon,Is,uc,Ur,Vr,On,W.ao.vertical,vn,bd.lineStartIndex,bd.lineLength,-1,Ts),S_=_t.icon.placedSymbolArray.length-1)}const rw=Object.keys(di.horizontal);for(const mo of rw){const na=di.horizontal[mo];if(!xu){nw=pl(na.text);const Is=Pi.layout.get("text-rotate").evaluate(On,{},Ts);xu=new sc(Xn,vn,Ei,Hi,hi,na,io,ta,fi,Is)}const cc=1===na.positionedLines.length;if(pv+=Jx(_t,vn,na,Cs,Pi,fi,On,oo,bd,di.vertical?W.ao.horizontal:W.ao.horizontalOnly,cc?rw:[mo],wu,wd,Wa,Ts),cc)break}di.vertical&&(lc+=Jx(_t,vn,di.vertical,Cs,Pi,fi,On,oo,bd,W.ao.vertical,["vertical"],wu,S_,Wa,Ts));const GT=xu?xu.boxStartIndex:_t.collisionBoxArray.length,HT=xu?xu.boxEndIndex:_t.collisionBoxArray.length,gv=Ih?Ih.boxStartIndex:_t.collisionBoxArray.length,iw=Ih?Ih.boxEndIndex:_t.collisionBoxArray.length,ow=xd?xd.boxStartIndex:_t.collisionBoxArray.length,sw=xd?xd.boxEndIndex:_t.collisionBoxArray.length,aw=Mh?Mh.boxStartIndex:_t.collisionBoxArray.length,E_=Mh?Mh.boxEndIndex:_t.collisionBoxArray.length;let Ai=-1;const Su=(mo,na)=>mo&&mo.circleDiameter?Math.max(mo.circleDiameter,na):na;Ai=Su(xu,Ai),Ai=Su(Ih,Ai),Ai=Su(xd,Ai),Ai=Su(Mh,Ai);const C_=Ai>-1?1:0;C_&&(Ai*=dv/24),_t.glyphOffsetArray.length>=wh.MAX_GLYPHS&&Wr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==On.sortKey&&_t.addToSortKeyRanges(_t.symbolInstances.length,On.sortKey);const mv=Xx(Pi,On,Ts),[_v,qT]=function(mo,na){const cc=mo.length,Is=na?.values;if(Is?.length>0)for(let Dh=0;Dh<Is.length;Dh+=2){const uc=Is[Dh+1];mo.emplaceBack(W.aE[Is[Dh]],uc[0],uc[1])}return[cc,mo.length]}(_t.textAnchorOffsets,mv);_t.symbolInstances.emplaceBack(vn.x,vn.y,wu.right>=0?wu.right:-1,wu.center>=0?wu.center:-1,wu.left>=0?wu.left:-1,wu.vertical||-1,wd,S_,nw,GT,HT,gv,iw,ow,sw,aw,E_,Ei,pv,lc,hv,fv,C_,0,io,Ai,_v,qT)}(c,Ct,Gt,l,h,g,Je,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,ie,[Me,Me,Me,Me],rt,T,he,Ne,Ke,H,s,x,A,N,w)};if("line"===nt)for(const Gt of p_(s.geometry,0,0,En,En)){const Ct=rc(Gt,ze),_t=Yx(Ct,pe,Ve,l.vertical||K,h,24,xe,c.overscaling,En);for(const vn of _t)K&&$T(c,K.text,wt,vn)||Nt(Ct,vn)}else if("line-center"===nt){for(const Gt of s.geometry)if(Gt.length>1){const Ct=rc(Gt,ze),_t=Kx(Ct,Ve,l.vertical||K,h,24,xe);_t&&Nt(Ct,_t)}}else if("Polygon"===s.type)for(const Gt of fo(s.geometry,0)){const Ct=m_(Gt,16);Nt(rc(Gt[0],ze,!0),new vu(Ct.x,Ct.y,0))}else if("LineString"===s.type)for(const Gt of s.geometry){const Ct=rc(Gt,ze);Nt(Ct,new vu(Ct[0].x,Ct[0].y,0))}else if("Point"===s.type)for(const Gt of s.geometry)for(const Ct of Gt)Nt([Ct],new vu(Ct.x,Ct.y,0))}function Jx(c,s,l,h,g,x,w,C,T,A,N,B,V,$,H){const K=function(xe,he,pe,Me,Ne,Ve,rt,Ke){const nt=Me.layout.get("text-rotate").evaluate(Ve,{})*Math.PI/180,wt=[];for(const tt of he.positionedLines)for(const Je of tt.positionedGlyphs){if(!Je.rect)continue;const ze=Je.rect||{};let Nt=4,Gt=!0,Ct=1,_t=0;const vn=(Ne||Ke)&&Je.vertical,fr=Je.metrics.advance*Je.scale/2;if(Ke&&he.verticalizable&&(_t=tt.lineOffset/2-(Je.imageName?-(24-Je.metrics.width*Je.scale)/2:24*(Je.scale-1))),Je.imageName){const Qn=rt[Je.imageName];Gt=Qn.sdf,Ct=Qn.pixelRatio,Nt=1/Ct}const di=Ne?[Je.x+fr,Je.y]:[0,0];let ro=Ne?[0,0]:[Je.x+fr+pe[0],Je.y+pe[1]-_t],Cs=[0,0];vn&&(Cs=ro,ro=[0,0]);const Fo=Je.metrics.isDoubleResolution?2:1,Pi=(Je.metrics.left-Nt)*Je.scale-fr+ro[0],Xn=(-Je.metrics.top-Nt)*Je.scale+ro[1],Ei=Pi+ze.w/Fo*Je.scale/Ct,Hi=Xn+ze.h/Fo*Je.scale/Ct,hi=new gt(Pi,Xn),io=new gt(Ei,Xn),ta=new gt(Pi,Hi),fi=new gt(Ei,Hi);if(vn){const Qn=new gt(-fr,fr- -17),Vr=-Math.PI/2,Ur=12-fr,On=new gt(22-Ur,-(Je.imageName?Ur:0)),Wa=new gt(...Cs);hi._rotateAround(Vr,Qn)._add(On)._add(Wa),io._rotateAround(Vr,Qn)._add(On)._add(Wa),ta._rotateAround(Vr,Qn)._add(On)._add(Wa),fi._rotateAround(Vr,Qn)._add(On)._add(Wa)}if(nt){const Qn=Math.sin(nt),Vr=Math.cos(nt),Ur=[Vr,-Qn,Qn,Vr];hi._matMult(Ur),io._matMult(Ur),ta._matMult(Ur),fi._matMult(Ur)}const oo=new gt(0,0),jr=new gt(0,0);wt.push({tl:hi,tr:io,bl:ta,br:fi,tex:ze,writingMode:he.writingMode,glyphOffset:di,sectionIndex:Je.sectionIndex,isSDF:Gt,pixelOffsetTL:oo,pixelOffsetBR:jr,minFontScaleX:0,minFontScaleY:0})}return wt}(0,l,C,g,x,w,h,c.allowVerticalPlacement),te=c.textSizeData;let ie=null;"source"===te.kind?(ie=[oc*g.layout.get("text-size").evaluate(w,{})],ie[0]>_u&&Wr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===te.kind&&(ie=[oc*$.compositeTextSizes[0].evaluate(w,{},H),oc*$.compositeTextSizes[1].evaluate(w,{},H)],(ie[0]>_u||ie[1]>_u)&&Wr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,K,ie,C,x,w,A,s,T.lineStartIndex,T.lineLength,V,H);for(const xe of N)B[xe]=c.text.placedSymbolArray.length-1;return 4*K.length}function cv(c){for(const s in c)return c[s];return null}function $T(c,s,l,h){const g=c.compareText;if(s in g){const x=g[s];for(let w=x.length-1;w>=0;w--)if(h.dist(x[w])<l)return!0}else g[s]=[];return g[s].push(h),!1}const ew=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Bf{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,h]=new Uint8Array(s,0,2);if(219!==l)throw new Error("Data does not appear to be in a KDBush format.");const g=h>>4;if(1!==g)throw new Error(`Got v${g} data when expected v1.`);const x=ew[15&h];if(!x)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(s,2,1),[C]=new Uint32Array(s,4,1);return new Bf(C,w,x,s)}constructor(s,l=64,h=Float64Array,g){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=h,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const x=ew.indexOf(this.ArrayType),w=2*s*this.ArrayType.BYTES_PER_ELEMENT,C=s*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-C%8)%8;if(x<0)throw new Error(`Unexpected typed array class: ${h}.`);g&&g instanceof ArrayBuffer?(this.data=g,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+T,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+w+C+T),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+C+T,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+x]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=s)}add(s,l){const h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=s,this.coords[this._pos++]=l,h}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return uv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,l,h,g){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:x,coords:w,nodeSize:C}=this,T=[0,x.length-1,0],A=[];for(;T.length;){const N=T.pop()||0,B=T.pop()||0,V=T.pop()||0;if(B-V<=C){for(let te=V;te<=B;te++){const ie=w[2*te],xe=w[2*te+1];ie>=s&&ie<=h&&xe>=l&&xe<=g&&A.push(x[te])}continue}const $=V+B>>1,H=w[2*$],K=w[2*$+1];H>=s&&H<=h&&K>=l&&K<=g&&A.push(x[$]),(0===N?s<=H:l<=K)&&(T.push(V),T.push($-1),T.push(1-N)),(0===N?h>=H:g>=K)&&(T.push($+1),T.push(B),T.push(1-N))}return A}within(s,l,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:g,coords:x,nodeSize:w}=this,C=[0,g.length-1,0],T=[],A=h*h;for(;C.length;){const N=C.pop()||0,B=C.pop()||0,V=C.pop()||0;if(B-V<=w){for(let te=V;te<=B;te++)tw(x[2*te],x[2*te+1],s,l)<=A&&T.push(g[te]);continue}const $=V+B>>1,H=x[2*$],K=x[2*$+1];tw(H,K,s,l)<=A&&T.push(g[$]),(0===N?s-h<=H:l-h<=K)&&(C.push(V),C.push($-1),C.push(1-N)),(0===N?s+h>=H:l+h>=K)&&(C.push($+1),C.push(B),C.push(1-N))}return T}}function uv(c,s,l,h,g,x){if(g-h<=l)return;const w=h+g>>1;y_(c,s,w,h,g,x),uv(c,s,l,h,w-1,1-x),uv(c,s,l,w+1,g,1-x)}function y_(c,s,l,h,g,x){for(;g>h;){if(g-h>600){const A=g-h+1,N=l-h+1,B=Math.log(A),V=.5*Math.exp(2*B/3),$=.5*Math.sqrt(B*V*(A-V)/A)*(N-A/2<0?-1:1);y_(c,s,l,Math.max(h,Math.floor(l-N*V/A+$)),Math.min(g,Math.floor(l+(A-N)*V/A+$)),x)}const w=s[2*l+x];let C=h,T=g;for(Th(c,s,h,l),s[2*g+x]>w&&Th(c,s,h,g);C<T;){for(Th(c,s,C,T),C++,T--;s[2*C+x]<w;)C++;for(;s[2*T+x]>w;)T--}s[2*h+x]===w?Th(c,s,h,T):(T++,Th(c,s,T,g)),T<=l&&(h=T+1),l<=T&&(g=T-1)}}function Th(c,s,l,h){v_(c,l,h),v_(s,2*l,2*h),v_(s,2*l+1,2*h+1)}function v_(c,s,l){const h=c[s];c[s]=c[l],c[l]=h}function tw(c,s,l,h){const g=c-l,x=s-h;return g*g+x*x}var xl;W.cx=void 0,(xl=W.cx||(W.cx={})).create="create",xl.load="load",xl.fullLoad="fullLoad";let b_=null,bu=[];const x_=1e3/60,w_="loadTime",ug="fullLoadTime",dg={mark(c){performance.mark(c)},frame(c){const s=c;null!=b_&&bu.push(s-b_),b_=s},clearMetrics(){b_=null,bu=[],performance.clearMeasures(w_),performance.clearMeasures(ug);for(const c in W.cx)performance.clearMarks(W.cx[c])},getPerformanceMetrics(){performance.measure(w_,W.cx.create,W.cx.load),performance.measure(ug,W.cx.create,W.cx.fullLoad);const c=performance.getEntriesByName(w_)[0].duration,s=performance.getEntriesByName(ug)[0].duration,l=bu.length,h=1/(bu.reduce((x,w)=>x+w,0)/l/1e3),g=bu.filter(x=>x>x_).reduce((x,w)=>x+(w-x_)/x_,0);return{loadTime:c,fullLoadTime:s,fps:h,percentDroppedFrames:g/(l+g)*100,totalFrames:l}}};W.$=En,W.A=ni,W.B=function([c,s,l]){return s+=90,s*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(l),y:c*Math.sin(s)*Math.sin(l),z:c*Math.cos(l)}},W.C=$s,W.D=mt,W.E=yt,W.F=sr,W.G=Xs,W.H=function(c){if(null==tl){const s=c.navigator?c.navigator.userAgent:null;tl=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return tl},W.I=Af,W.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Hx(()=>this.process()),this.subscription=zs(this.target,"message",l=>this.receive(l),!1),this.globalScope=Eo(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((l,h)=>{const g=Math.round(1e18*Math.random()).toString(36).substring(0,10),x=s?zs(s.signal,"abort",()=>{x?.unsubscribe(),delete this.resolveRejects[g];const T={id:g,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},qx):null;this.resolveRejects[g]={resolve:T=>{x?.unsubscribe(),l(T)},reject:T=>{x?.unsubscribe(),h(T)}};const w=[],C=Object.assign(Object.assign({},c),{id:g,sourceMapId:this.mapId,origin:location.origin,data:Or(c.data,w)});this.target.postMessage(C,{transfer:w})})}receive(c){const s=c.data,l=s.id;if(!("file://"!==s.origin&&"file://"!==location.origin&&"resource://android"!==s.origin&&"resource://android"!==location.origin&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if("<cancel>"===s.type){delete this.tasks[l];const h=this.abortControllers[l];return delete this.abortControllers[l],void(h&&h.abort())}if(Eo(self)||s.mustQueue)return this.tasks[l]=s,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,s)}}process(){if(0===this.taskQueue.length)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return y(this,void 0,void 0,function*(){if("<response>"===s.type){const g=this.resolveRejects[c];return delete this.resolveRejects[c],g?void(s.error?g.reject(fl(s.error)):g.resolve(fl(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=fl(s.data),h=new AbortController;this.abortControllers[c]=h;try{const g=yield this.messageHandlers[s.type](s.sourceMapId,l,h);this.completeTask(c,null,g)}catch(g){this.completeTask(c,g)}})}completeTask(c,s,l){const h=[];delete this.abortControllers[c];const g={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Or(s):null,data:Or(l,h)};this.target.postMessage(g,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},W.K=X,W.L=function(){var c=new ni(16);return ni!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},W.M=function(c,s,l){var h,g,x,w,C,T,A,N,B,V,$,H,K=l[0],te=l[1],ie=l[2];return s===c?(c[12]=s[0]*K+s[4]*te+s[8]*ie+s[12],c[13]=s[1]*K+s[5]*te+s[9]*ie+s[13],c[14]=s[2]*K+s[6]*te+s[10]*ie+s[14],c[15]=s[3]*K+s[7]*te+s[11]*ie+s[15]):(g=s[1],x=s[2],w=s[3],C=s[4],T=s[5],A=s[6],N=s[7],B=s[8],V=s[9],$=s[10],H=s[11],c[0]=h=s[0],c[1]=g,c[2]=x,c[3]=w,c[4]=C,c[5]=T,c[6]=A,c[7]=N,c[8]=B,c[9]=V,c[10]=$,c[11]=H,c[12]=h*K+C*te+B*ie+s[12],c[13]=g*K+T*te+V*ie+s[13],c[14]=x*K+A*te+$*ie+s[14],c[15]=w*K+N*te+H*ie+s[15]),c},W.N=function(c,s,l){var h=l[0],g=l[1],x=l[2];return c[0]=s[0]*h,c[1]=s[1]*h,c[2]=s[2]*h,c[3]=s[3]*h,c[4]=s[4]*g,c[5]=s[5]*g,c[6]=s[6]*g,c[7]=s[7]*g,c[8]=s[8]*x,c[9]=s[9]*x,c[10]=s[10]*x,c[11]=s[11]*x,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},W.O=function(c,s,l){var h=s[0],g=s[1],x=s[2],w=s[3],C=s[4],T=s[5],A=s[6],N=s[7],B=s[8],V=s[9],$=s[10],H=s[11],K=s[12],te=s[13],ie=s[14],xe=s[15],he=l[0],pe=l[1],Me=l[2],Ne=l[3];return c[0]=he*h+pe*C+Me*B+Ne*K,c[1]=he*g+pe*T+Me*V+Ne*te,c[2]=he*x+pe*A+Me*$+Ne*ie,c[3]=he*w+pe*N+Me*H+Ne*xe,c[4]=(he=l[4])*h+(pe=l[5])*C+(Me=l[6])*B+(Ne=l[7])*K,c[5]=he*g+pe*T+Me*V+Ne*te,c[6]=he*x+pe*A+Me*$+Ne*ie,c[7]=he*w+pe*N+Me*H+Ne*xe,c[8]=(he=l[8])*h+(pe=l[9])*C+(Me=l[10])*B+(Ne=l[11])*K,c[9]=he*g+pe*T+Me*V+Ne*te,c[10]=he*x+pe*A+Me*$+Ne*ie,c[11]=he*w+pe*N+Me*H+Ne*xe,c[12]=(he=l[12])*h+(pe=l[13])*C+(Me=l[14])*B+(Ne=l[15])*K,c[13]=he*g+pe*T+Me*V+Ne*te,c[14]=he*x+pe*A+Me*$+Ne*ie,c[15]=he*w+pe*N+Me*H+Ne*xe,c},W.P=gt,W.Q=function(c,s){const l={};for(let h=0;h<s.length;h++){const g=s[h];g in c&&(l[g]=c[g])}return l},W.R=Lo,W.S=yu,W.T=Op,W.U=rg,W.V=ng,W.W=Yn,W.X=zt,W.Y=Lc,W.Z=Es,W._=y,W.a=Z,W.a$=So,W.a0=function(c,s){var l,h,g,x;if(!c)return s??{};if(!s)return c;const w=Object.assign({},c);if(s.removeAll&&(w.removeAll=!0),s.remove){const C=new Set(w.remove?w.remove.concat(s.remove):s.remove);w.remove=Array.from(C.values())}if(s.add){const C=w.add?w.add.concat(s.add):s.add,T=new Map(C.map(A=>[A.id,A]));w.add=Array.from(T.values())}if(s.update){const C=new Map(null===(l=w.update)||void 0===l?void 0:l.map(T=>[T.id,T]));for(const T of s.update){const A=null!==(h=C.get(T.id))&&void 0!==h?h:{id:T.id};T.newGeometry&&(A.newGeometry=T.newGeometry),T.addOrUpdateProperties&&(A.addOrUpdateProperties=(null!==(g=A.addOrUpdateProperties)&&void 0!==g?g:[]).concat(T.addOrUpdateProperties)),T.removeProperties&&(A.removeProperties=(null!==(x=A.removeProperties)&&void 0!==x?x:[]).concat(T.removeProperties)),T.removeAllProperties&&(A.removeAllProperties=!0),C.set(T.id,A)}w.update=Array.from(C.values())}return w},W.a1=Of,W.a2=gd,W.a3=25,W.a4=ag,W.a5=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(l=>{s.onloadstart=()=>{l(s)};for(const h of c){const g=window.document.createElement("source");De(h)||(s.crossOrigin="Anonymous"),g.src=h,s.appendChild(g)}})},W.a6=Ze,W.a7=function(){return qo++},W.a8=z,W.a9=wh,W.aA=function(c){let s=1/0,l=1/0,h=-1/0,g=-1/0;for(const x of c)s=Math.min(s,x.x),l=Math.min(l,x.y),h=Math.max(h,x.x),g=Math.max(g,x.y);return[s,l,h,g]},W.aB=24,W.aC=ya,W.aD=function(c,s,l,h,g=!1){if(!l[0]&&!l[1])return[0,0];const x=g?"map"===h?-c.bearingInRadians:0:"viewport"===h?c.bearingInRadians:0;if(x){const w=Math.sin(x),C=Math.cos(x);l=[l[0]*C-l[1]*w,l[0]*w+l[1]*C]}return[g?l[0]:ya(s,l[0],c.zoom),g?l[1]:ya(s,l[1],c.zoom)]},W.aF=o_,W.aG=lv,W.aH=t_,W.aI=Bf,W.aJ=xr,W.aK=Tf,W.aL=le,W.aM=tn,W.aN=In,W.aO=Rc,W.aP=Mr,W.aQ=u_,W.aR=$o,W.aS=Pc,W.aT=function(c){var s=new ni(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},W.aU=function(c,s,l){return c[0]=s[0]-l[0],c[1]=s[1]-l[1],c[2]=s[2]-l[2],c},W.aV=function(c,s){var l=s[0],h=s[1],g=s[2],x=l*l+h*h+g*g;return x>0&&(x=1/Math.sqrt(x)),c[0]=s[0]*x,c[1]=s[1]*x,c[2]=s[2]*x,c},W.aW=Ja,W.aX=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},W.aY=function(c,s,l){return c[0]=s[0]*l[0],c[1]=s[1]*l[1],c[2]=s[2]*l[2],c[3]=s[3]*l[3],c},W.aZ=kc,W.a_=function(c,s,l){const h=s[0]*l[0]+s[1]*l[1]+s[2]*l[2];return 0===h?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/h},W.aa=ai,W.ab=$a,W.ac=h_,W.ad=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,h,g,x)=>{const w=g||x;return s[h]=!w||w.toLowerCase(),""}),s["max-age"]){const l=parseInt(s["max-age"],10);isNaN(l)?delete s["max-age"]:s["max-age"]=l}return s},W.ae=ba,W.af=function(c){return Math.pow(2,c)},W.ag=Ls,W.ah=Nr,W.ai=85.051129,W.aj=ig,W.ak=function(c){return Math.log(c)/Math.LN2},W.al=function(c){var s=c[0],l=c[1];return s*s+l*l},W.am=function(c,s){const l=[];for(const h in c)h in s||l.push(h);return l},W.an=function(c,s){let l=0,h=0;if("constant"===c.kind)h=c.layoutSize;else if("source"!==c.kind){const{interpolationType:g,minZoom:x,maxZoom:w}=c,C=g?Nr(vi.interpolationFactor(g,s,x,w),0,1):0;"camera"===c.kind?h=$s.number(c.minSize,c.maxSize,C):l=C}return{uSizeT:l,uSize:h}},W.ap=function(c,{uSize:s,uSizeT:l},{lowerSize:h,upperSize:g}){return"source"===c.kind?h/oc:"composite"===c.kind?$s.number(h/oc,g/oc,l):s},W.aq=function(c,s){var l=s[0],h=s[1],g=s[2],x=s[3],w=s[4],C=s[5],T=s[6],A=s[7],N=s[8],B=s[9],V=s[10],$=s[11],H=s[12],K=s[13],te=s[14],ie=s[15],xe=l*C-h*w,he=l*T-g*w,pe=l*A-x*w,Me=h*T-g*C,Ne=h*A-x*C,Ve=g*A-x*T,rt=N*K-B*H,Ke=N*te-V*H,nt=N*ie-$*H,wt=B*te-V*K,tt=B*ie-$*K,Je=V*ie-$*te,ze=xe*Je-he*tt+pe*wt+Me*nt-Ne*Ke+Ve*rt;return ze?(c[0]=(C*Je-T*tt+A*wt)*(ze=1/ze),c[1]=(g*tt-h*Je-x*wt)*ze,c[2]=(K*Ve-te*Ne+ie*Me)*ze,c[3]=(V*Ne-B*Ve-$*Me)*ze,c[4]=(T*nt-w*Je-A*Ke)*ze,c[5]=(l*Je-g*nt+x*Ke)*ze,c[6]=(te*pe-H*Ve-ie*he)*ze,c[7]=(N*Ve-V*pe+$*he)*ze,c[8]=(w*tt-C*nt+A*rt)*ze,c[9]=(h*nt-l*tt-x*rt)*ze,c[10]=(H*Ne-K*pe+ie*xe)*ze,c[11]=(B*pe-N*Ne-$*xe)*ze,c[12]=(C*Ke-w*wt-T*rt)*ze,c[13]=(l*wt-h*Ke+g*rt)*ze,c[14]=(K*he-H*Me-te*xe)*ze,c[15]=(N*Me-B*he+V*xe)*ze,c):null},W.ar=el,W.as=function(c){return Math.hypot(c[0],c[1])},W.at=function(c){return c[0]=0,c[1]=0,c},W.au=function(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c},W.av=s_,W.aw=_a,W.ax=function(c,s,l,h){const g=s.y-c.y,x=s.x-c.x,w=h.y-l.y,C=h.x-l.x,T=w*x-C*g;if(0===T)return null;const A=(C*(c.y-l.y)-w*(c.x-l.x))/T;return new gt(c.x+A*x,c.y+A*g)},W.ay=p_,W.az=vy,W.b=va,W.b$=class extends v{},W.b0=function(c,s,l){return c[0]=s[0]*l,c[1]=s[1]*l,c[2]=s[2]*l,c[3]=s[3]*l,c},W.b1=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},W.b2=fd,W.b3=pd,W.b4=function(c,s,l,h,g){var x,w=1/Math.tan(s/2);return c[0]=w/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=w,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,null!=g&&g!==1/0?(c[10]=(g+h)*(x=1/(h-g)),c[14]=2*g*h*x):(c[10]=-1,c[14]=-2*h),c},W.b5=function(c){var s=new ni(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},W.b6=function(c,s,l){var h=Math.sin(l),g=Math.cos(l),x=s[0],w=s[1],C=s[2],T=s[3],A=s[4],N=s[5],B=s[6],V=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=x*g+A*h,c[1]=w*g+N*h,c[2]=C*g+B*h,c[3]=T*g+V*h,c[4]=A*g-x*h,c[5]=N*g-w*h,c[6]=B*g-C*h,c[7]=V*g-T*h,c},W.b7=function(c,s,l){var h=Math.sin(l),g=Math.cos(l),x=s[4],w=s[5],C=s[6],T=s[7],A=s[8],N=s[9],B=s[10],V=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=x*g+A*h,c[5]=w*g+N*h,c[6]=C*g+B*h,c[7]=T*g+V*h,c[8]=A*g-x*h,c[9]=N*g-w*h,c[10]=B*g-C*h,c[11]=V*g-T*h,c},W.b8=function(){const c=new Float32Array(16);return Ls(c),c},W.b9=function(){const c=new Float64Array(16);return Ls(c),c},W.bA=function(c,s){const l=Qi(c,360),h=Qi(s,360),g=h-l,x=h>l?g-360:g+360;return Math.abs(g)<Math.abs(x)?g:x},W.bB=function(c){return c[0]=0,c[1]=0,c[2]=0,c},W.bC=function(c,s,l,h){const g=Math.sqrt(c*c+s*s),x=Math.sqrt(l*l+h*h);c/=g,s/=g,l/=x,h/=x;const w=Math.acos(c*l+s*h);return-s*l+c*h>0?w:-w},W.bD=function(c,s){const l=Qi(c,2*Math.PI),h=Qi(s,2*Math.PI);return Math.min(Math.abs(l-h),Math.abs(l-h+2*Math.PI),Math.abs(l-h-2*Math.PI))},W.bE=function(){const c={},s=Ee.$version;for(const l in Ee.$root){const h=Ee.$root[l];if(h.required){let g=null;g="version"===l?s:"array"===h.type?[]:{},null!=g&&(c[l]=g)}}return c},W.bF=Ju,W.bG=me,W.bH=function c(s,l){if(Array.isArray(s)){if(!Array.isArray(l)||s.length!==l.length)return!1;for(let h=0;h<s.length;h++)if(!c(s[h],l[h]))return!1;return!0}if("object"==typeof s&&null!==s&&null!==l){if("object"!=typeof l||Object.keys(s).length!==Object.keys(l).length)return!1;for(const h in s)if(!c(s[h],l[h]))return!1;return!0}return s===l},W.bI=function(c){c=c.slice();const s=Object.create(null);for(let l=0;l<c.length;l++)s[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=sn(c[l],s[c[l].ref]));return c},W.bJ=function(c){if("custom"===c.type)return new nv(c);switch(c.type){case"background":return new ev(c);case"circle":return new ux(c);case"color-relief":return new gx(c);case"fill":return new Wp(c);case"fill-extrusion":return new ei(c);case"heatmap":return new hx(c);case"hillshade":return new Om(c);case"line":return new Oy(c);case"raster":return new tv(c);case"symbol":return new qa(c)}},W.bK=Li,W.bL=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let l=[];try{if(!St(c.version,s.version))return[{command:"setStyle",args:[s]}];St(c.center,s.center)||l.push({command:"setCenter",args:[s.center]}),St(c.state,s.state)||l.push({command:"setGlobalState",args:[s.state]}),St(c.centerAltitude,s.centerAltitude)||l.push({command:"setCenterAltitude",args:[s.centerAltitude]}),St(c.zoom,s.zoom)||l.push({command:"setZoom",args:[s.zoom]}),St(c.bearing,s.bearing)||l.push({command:"setBearing",args:[s.bearing]}),St(c.pitch,s.pitch)||l.push({command:"setPitch",args:[s.pitch]}),St(c.roll,s.roll)||l.push({command:"setRoll",args:[s.roll]}),St(c.sprite,s.sprite)||l.push({command:"setSprite",args:[s.sprite]}),St(c.glyphs,s.glyphs)||l.push({command:"setGlyphs",args:[s.glyphs]}),St(c.transition,s.transition)||l.push({command:"setTransition",args:[s.transition]}),St(c.light,s.light)||l.push({command:"setLight",args:[s.light]}),St(c.terrain,s.terrain)||l.push({command:"setTerrain",args:[s.terrain]}),St(c.sky,s.sky)||l.push({command:"setSky",args:[s.sky]}),St(c.projection,s.projection)||l.push({command:"setProjection",args:[s.projection]});const h={},g=[];!function(w,C,T,A){let N;for(N in C=C||{},w=w||{})Object.prototype.hasOwnProperty.call(w,N)&&(Object.prototype.hasOwnProperty.call(C,N)||ri(N,T,A));for(N in C)Object.prototype.hasOwnProperty.call(C,N)&&(Object.prototype.hasOwnProperty.call(w,N)?St(w[N],C[N])||("geojson"===w[N].type&&"geojson"===C[N].type&&Zn(w,C,N)?Qt(T,{command:"setGeoJSONSourceData",args:[N,C[N].data]}):Lr(N,C,T,A)):Un(N,C,T))}(c.sources,s.sources,g,h);const x=[];c.layers&&c.layers.forEach(w=>{"source"in w&&h[w.source]?l.push({command:"removeLayer",args:[w.id]}):x.push(w)}),l=l.concat(g),function(w,C,T){C=C||[];const A=(w=w||[]).map(mn),N=C.map(mn),B=w.reduce(_n,{}),V=C.reduce(_n,{}),$=A.slice(),H=Object.create(null);let K,te,ie,xe,he;for(let pe=0,Me=0;pe<A.length;pe++)K=A[pe],Object.prototype.hasOwnProperty.call(V,K)?Me++:(Qt(T,{command:"removeLayer",args:[K]}),$.splice($.indexOf(K,Me),1));for(let pe=0,Me=0;pe<N.length;pe++)K=N[N.length-1-pe],$[$.length-1-pe]!==K&&(Object.prototype.hasOwnProperty.call(B,K)?(Qt(T,{command:"removeLayer",args:[K]}),$.splice($.lastIndexOf(K,$.length-Me),1)):Me++,xe=$[$.length-pe],Qt(T,{command:"addLayer",args:[V[K],xe]}),$.splice($.length-pe,0,K),H[K]=!0);for(let pe=0;pe<N.length;pe++)if(K=N[pe],te=B[K],ie=V[K],!H[K]&&!St(te,ie))if(St(te.source,ie.source)&&St(te["source-layer"],ie["source-layer"])&&St(te.type,ie.type)){for(he in un(te.layout,ie.layout,T,K,null,"setLayoutProperty"),un(te.paint,ie.paint,T,K,null,"setPaintProperty"),St(te.filter,ie.filter)||Qt(T,{command:"setFilter",args:[K,ie.filter]}),St(te.minzoom,ie.minzoom)&&St(te.maxzoom,ie.maxzoom)||Qt(T,{command:"setLayerZoomRange",args:[K,ie.minzoom,ie.maxzoom]}),te)Object.prototype.hasOwnProperty.call(te,he)&&"layout"!==he&&"paint"!==he&&"filter"!==he&&"metadata"!==he&&"minzoom"!==he&&"maxzoom"!==he&&(0===he.indexOf("paint.")?un(te[he],ie[he],T,K,he.slice(6),"setPaintProperty"):St(te[he],ie[he])||Qt(T,{command:"setLayerProperty",args:[K,he,ie[he]]}));for(he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&!Object.prototype.hasOwnProperty.call(te,he)&&"layout"!==he&&"paint"!==he&&"filter"!==he&&"metadata"!==he&&"minzoom"!==he&&"maxzoom"!==he&&(0===he.indexOf("paint.")?un(te[he],ie[he],T,K,he.slice(6),"setPaintProperty"):St(te[he],ie[he])||Qt(T,{command:"setLayerProperty",args:[K,he,ie[he]]}))}else Qt(T,{command:"removeLayer",args:[K]}),xe=$[$.lastIndexOf(K)+1],Qt(T,{command:"addLayer",args:[ie,xe]})}(x,s.layers,l)}catch(h){console.warn("Unable to compute style diff:",h),l=[{command:"setStyle",args:[s]}]}return l},W.bM=function(c){const s=[],l=c.id;return void 0===l&&s.push({message:`layers.${l}: missing required property "id"`}),void 0===c.render&&s.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&"2d"!==c.renderingMode&&"3d"!==c.renderingMode&&s.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),s},W.bN=Al,W.bO=Nc,W.bP=class extends Ui{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},W.bQ=ci,W.bR=class extends Ui{constructor(c,s){super(c,s),this.current=No}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},W.bS=zr,W.bT=class extends Ui{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},W.bU=class extends Ui{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},W.bV=Uo,W.bW=function(c,s){var l=Math.sin(s),h=Math.cos(s);return c[0]=h,c[1]=l,c[2]=0,c[3]=-l,c[4]=h,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},W.bX=function(c,s,l){var h=s[0],g=s[1],x=s[2];return c[0]=h*l[0]+g*l[3]+x*l[6],c[1]=h*l[1]+g*l[4]+x*l[7],c[2]=h*l[2]+g*l[5]+x*l[8],c},W.bY=function(c,s,l,h,g,x,w){var C=1/(s-l),T=1/(h-g),A=1/(x-w);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*T,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*A,c[11]=0,c[12]=(s+l)*C,c[13]=(g+h)*T,c[14]=(w+x)*A,c[15]=1,c},W.bZ=class extends Ui{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)s[4*l]=c[l].r,s[4*l+1]=c[l].g,s[4*l+2]=c[l].b,s[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,s)}}},W.b_=class extends Ui{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},W.ba=function(){return new Float64Array(16)},W.bb=function(c,s,l){const h=new Float64Array(4);return ds(h,c,s-90,l),h},W.bc=function(c,s,l,h){var g,x,w,C,T,A=s[0],N=s[1],B=s[2],V=s[3],$=l[0],H=l[1],K=l[2],te=l[3];return(x=A*$+N*H+B*K+V*te)<0&&(x=-x,$=-$,H=-H,K=-K,te=-te),1-x>Tr?(g=Math.acos(x),w=Math.sin(g),C=Math.sin((1-h)*g)/w,T=Math.sin(h*g)/w):(C=1-h,T=h),c[0]=C*A+T*$,c[1]=C*N+T*H,c[2]=C*B+T*K,c[3]=C*V+T*te,c},W.bd=function(c){const s=new Float64Array(9);var l,h,g,x,w,C,T,A,N,B,V,$,H,K,te,ie,xe,he;B=(g=(h=c)[0])*(T=g+g),V=(x=h[1])*T,H=(w=h[2])*T,K=w*(A=x+x),ie=(C=h[3])*T,xe=C*A,he=C*(N=w+w),(l=s)[0]=1-($=x*A)-(te=w*N),l[3]=V-he,l[6]=H+xe,l[1]=V+he,l[4]=1-B-te,l[7]=K-ie,l[2]=H-xe,l[5]=K+ie,l[8]=1-B-$;const pe=Mr(-Math.asin(Nr(s[2],-1,1)));let Me,Ne;return Math.hypot(s[5],s[8])<.001?(Me=0,Ne=-Mr(Math.atan2(s[3],s[4]))):(Me=Mr(0===s[5]&&0===s[8]?0:Math.atan2(s[5],s[8])),Ne=Mr(0===s[1]&&0===s[0]?0:Math.atan2(s[1],s[0]))),{roll:Me,pitch:pe+90,bearing:Ne}},W.be=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},W.bf=ln,W.bg=ts,W.bh=pu,W.bi=nc,W.bj=Ga,W.bk=Pl,W.bl=Fs,W.bm=Yr,W.bn=function(c,s,l,h,g){return Pl(h,g,Nr((c-s)/(l-s),0,1))},W.bo=Qi,W.bp=function(){return new Float64Array(3)},W.bq=function(c,s,l,h){return c[0]=s[0]+l[0]*h,c[1]=s[1]+l[1]*h,c[2]=s[2]+l[2]*h,c},W.br=ds,W.bs=function(c,s,l){var h=l[0],g=l[1],x=l[2],w=s[0],C=s[1],T=s[2],A=g*T-x*C,N=x*w-h*T,B=h*C-g*w,V=g*B-x*N,$=x*A-h*B,H=h*N-g*A,K=2*l[3];return N*=K,B*=K,$*=2,H*=2,c[0]=w+(A*=K)+(V*=2),c[1]=C+N+$,c[2]=T+B+H,c},W.bt=function(c,s,l){const h=(g=[c[0],c[1],c[2],s[0],s[1],s[2],l[0],l[1],l[2]])[0]*((N=g[8])*(w=g[4])-(C=g[5])*(A=g[7]))+g[1]*(-N*(x=g[3])+C*(T=g[6]))+g[2]*(A*x-w*T);var g,x,w,C,T,A,N;if(0===h)return null;const B=Ja([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),V=Ja([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),$=Ja([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),H=$o([],B,-c[3]);return Pc(H,H,$o([],V,-s[3])),Pc(H,H,$o([],$,-l[3])),$o(H,H,1/h),H},W.bu=rv,W.bv=function(){return new Float64Array(4)},W.bw=function(c,s,l,h){var g=[],x=[];return g[0]=s[0]-l[0],g[1]=s[1]-l[1],g[2]=s[2]-l[2],x[0]=g[0]*Math.cos(h)-g[1]*Math.sin(h),x[1]=g[0]*Math.sin(h)+g[1]*Math.cos(h),x[2]=g[2],c[0]=x[0]+l[0],c[1]=x[1]+l[1],c[2]=x[2]+l[2],c},W.bx=function(c,s,l,h){var g=[],x=[];return g[0]=s[0]-l[0],g[1]=s[1]-l[1],g[2]=s[2]-l[2],x[0]=g[0],x[1]=g[1]*Math.cos(h)-g[2]*Math.sin(h),x[2]=g[1]*Math.sin(h)+g[2]*Math.cos(h),c[0]=x[0]+l[0],c[1]=x[1]+l[1],c[2]=x[2]+l[2],c},W.by=function(c,s,l,h){var g=[],x=[];return g[0]=s[0]-l[0],g[1]=s[1]-l[1],g[2]=s[2]-l[2],x[0]=g[2]*Math.sin(h)+g[0]*Math.cos(h),x[1]=g[1],x[2]=g[2]*Math.cos(h)-g[0]*Math.sin(h),c[0]=x[0]+l[0],c[1]=x[1]+l[1],c[2]=x[2]+l[2],c},W.bz=function(c,s,l){var h=Math.sin(l),g=Math.cos(l),x=s[0],w=s[1],C=s[2],T=s[3],A=s[8],N=s[9],B=s[10],V=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=x*g-A*h,c[1]=w*g-N*h,c[2]=C*g-B*h,c[3]=T*g-V*h,c[8]=x*h+A*g,c[9]=w*h+N*g,c[10]=C*h+B*g,c[11]=T*h+V*g,c},W.c=ye,W.c0=Rx,W.c1=class extends u{},W.c2=Lm,W.c3=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},W.c4=wy,W.c5=function(c,s,l){var h=s[0],g=s[1],x=s[2],w=l[3]*h+l[7]*g+l[11]*x+l[15];return c[0]=(l[0]*h+l[4]*g+l[8]*x+l[12])/(w=w||1),c[1]=(l[1]*h+l[5]*g+l[9]*x+l[13])/w,c[2]=(l[2]*h+l[6]*g+l[10]*x+l[14])/w,c},W.c6=class extends ph{},W.c7=class extends R{},W.c8=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},W.c9=function(c,s){var l=c[0],h=c[1],g=c[2],x=c[3],w=c[4],C=c[5],T=c[6],A=c[7],N=c[8],B=c[9],V=c[10],$=c[11],H=c[12],K=c[13],te=c[14],ie=c[15],xe=s[0],he=s[1],pe=s[2],Me=s[3],Ne=s[4],Ve=s[5],rt=s[6],Ke=s[7],nt=s[8],wt=s[9],tt=s[10],Je=s[11],ze=s[12],Nt=s[13],Gt=s[14],Ct=s[15];return Math.abs(l-xe)<=Tr*Math.max(1,Math.abs(l),Math.abs(xe))&&Math.abs(h-he)<=Tr*Math.max(1,Math.abs(h),Math.abs(he))&&Math.abs(g-pe)<=Tr*Math.max(1,Math.abs(g),Math.abs(pe))&&Math.abs(x-Me)<=Tr*Math.max(1,Math.abs(x),Math.abs(Me))&&Math.abs(w-Ne)<=Tr*Math.max(1,Math.abs(w),Math.abs(Ne))&&Math.abs(C-Ve)<=Tr*Math.max(1,Math.abs(C),Math.abs(Ve))&&Math.abs(T-rt)<=Tr*Math.max(1,Math.abs(T),Math.abs(rt))&&Math.abs(A-Ke)<=Tr*Math.max(1,Math.abs(A),Math.abs(Ke))&&Math.abs(N-nt)<=Tr*Math.max(1,Math.abs(N),Math.abs(nt))&&Math.abs(B-wt)<=Tr*Math.max(1,Math.abs(B),Math.abs(wt))&&Math.abs(V-tt)<=Tr*Math.max(1,Math.abs(V),Math.abs(tt))&&Math.abs($-Je)<=Tr*Math.max(1,Math.abs($),Math.abs(Je))&&Math.abs(H-ze)<=Tr*Math.max(1,Math.abs(H),Math.abs(ze))&&Math.abs(K-Nt)<=Tr*Math.max(1,Math.abs(K),Math.abs(Nt))&&Math.abs(te-Gt)<=Tr*Math.max(1,Math.abs(te),Math.abs(Gt))&&Math.abs(ie-Ct)<=Tr*Math.max(1,Math.abs(ie),Math.abs(Ct))},W.cA=function(c,s){Z.REGISTERED_PROTOCOLS[c]=s},W.cB=function(c){delete Z.REGISTERED_PROTOCOLS[c]},W.cC=function(c,s){const l={};for(let g=0;g<c.length;g++){const x=s&&s[c[g].id]||vr(c[g]);s&&(s[c[g].id]=x);let w=l[x];w||(w=l[x]=[]),w.push(c[g])}const h=[];for(const g in l)h.push(l[g]);return h},W.cD=Xe,W.cE=d_,W.cF=iv,W.cG=Xm,W.cH=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=En/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],l=s.layout,h=s._unevaluatedLayout._values,g={layoutIconSize:h["icon-size"].possiblyEvaluate(new sr(c.bucket.zoom+1),c.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new sr(c.bucket.zoom+1),c.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new sr(18))};if("composite"===c.bucket.textSizeData.kind){const{minZoom:A,maxZoom:N}=c.bucket.textSizeData;g.compositeTextSizes=[h["text-size"].possiblyEvaluate(new sr(A),c.canonical),h["text-size"].possiblyEvaluate(new sr(N),c.canonical)]}if("composite"===c.bucket.iconSizeData.kind){const{minZoom:A,maxZoom:N}=c.bucket.iconSizeData;g.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new sr(A),c.canonical),h["icon-size"].possiblyEvaluate(new sr(N),c.canonical)]}const x=24*l.get("text-line-height"),w="viewport"!==l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),C=l.get("text-keep-upright"),T=l.get("text-size");for(const A of c.bucket.features){const N=l.get("text-font").evaluate(A,{},c.canonical).join(","),B=T.evaluate(A,{},c.canonical),V=g.layoutTextSize.evaluate(A,{},c.canonical),$=g.layoutIconSize.evaluate(A,{},c.canonical),H={horizontal:{},vertical:void 0},K=A.text;let te,ie=[0,0];if(K){const pe=K.toString(),Me=24*l.get("text-letter-spacing").evaluate(A,{},c.canonical),Ne=gf(pe)?Me:0,Ve=l.get("text-anchor").evaluate(A,{},c.canonical),rt=Xx(s,A,c.canonical);if(!rt){const tt=l.get("text-radial-offset").evaluate(A,{},c.canonical);ie=tt?cg(Ve,[24*tt,__]):l.get("text-offset").evaluate(A,{},c.canonical).map(Je=>24*Je)}let Ke=w?"center":l.get("text-justify").evaluate(A,{},c.canonical);const nt="point"===l.get("symbol-placement")?24*l.get("text-max-width").evaluate(A,{},c.canonical):1/0,wt=()=>{c.bucket.allowVerticalPlacement&&Zl(pe)&&(H.vertical=Rf(K,c.glyphMap,c.glyphPositions,c.imagePositions,N,nt,x,Ve,"left",Ne,ie,W.ao.vertical,!0,V,B))};if(!w&&rt){const tt=new Set;if("auto"===Ke)for(let ze=0;ze<rt.values.length;ze+=2)tt.add(lv(rt.values[ze]));else tt.add(Ke);let Je=!1;for(const ze of tt)if(!H.horizontal[ze])if(Je)H.horizontal[ze]=H.horizontal[0];else{const Nt=Rf(K,c.glyphMap,c.glyphPositions,c.imagePositions,N,nt,x,"center",ze,Ne,ie,W.ao.horizontal,!1,V,B);Nt&&(H.horizontal[ze]=Nt,Je=1===Nt.positionedLines.length)}wt()}else{"auto"===Ke&&(Ke=lv(Ve));const tt=Rf(K,c.glyphMap,c.glyphPositions,c.imagePositions,N,nt,x,Ve,Ke,Ne,ie,W.ao.horizontal,!1,V,B);tt&&(H.horizontal[Ke]=tt),wt(),Zl(pe)&&w&&C&&(H.vertical=Rf(K,c.glyphMap,c.glyphPositions,c.imagePositions,N,nt,x,Ve,Ke,Ne,ie,W.ao.vertical,!1,V,B))}}let xe=!1;if(A.icon&&A.icon.name){const pe=c.imageMap[A.icon.name];pe&&(te=Yy(c.imagePositions[A.icon.name],l.get("icon-offset").evaluate(A,{},c.canonical),l.get("icon-anchor").evaluate(A,{},c.canonical)),xe=!!pe.sdf,void 0===c.bucket.sdfIcons?c.bucket.sdfIcons=xe:c.bucket.sdfIcons!==xe&&Wr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==c.bucket.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(c.bucket.iconsNeedLinear=!0))}const he=cv(H.horizontal)||H.vertical;c.bucket.iconsInText=!!he&&he.iconsInText,(he||te)&&Qx(c.bucket,A,H,te,c.imageMap,g,V,$,ie,xe,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},W.cI=Df,W.cJ=qp,W.cK=cd,W.cL=Um,W.cM=Zm,W.cN=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return 0===c.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},W.cO=function(c,s,l,h,g){return y(this,void 0,void 0,function*(){if(zt())try{return yield Lc(c,s,l,h,g)}catch{}return function(x,w,C,T,A){const N=x.width,B=x.height;An&&Bs||(An=new OffscreenCanvas(N,B),Bs=An.getContext("2d",{willReadFrequently:!0})),An.width=N,An.height=B,Bs.drawImage(x,0,0,N,B);const V=Bs.getImageData(w,C,T,A);return Bs.clearRect(0,0,N,B),V.data}(c,s,l,h,g)})},W.cP=_l,W.cQ=kl,W.cR=Vm,W.cS=gu,W.cT=ir,W.cU=function(c,s){const l=new Map;if(null!=c)if("Feature"===c.type)l.set(Eh(c,s),c);else for(const h of c.features)l.set(Eh(h,s),h);return l},W.cV=function(c,s){if(null==c)return!0;if("Feature"===c.type)return null!=Eh(c,s);if("FeatureCollection"===c.type){const l=new Set;for(const h of c.features){const g=Eh(h,s);if(null==g||l.has(g))return!1;l.add(g)}return!0}return!1},W.cW=function(c,s,l){var h,g,x,w;if(s.removeAll&&c.clear(),s.remove)for(const C of s.remove)c.delete(C);if(s.add)for(const C of s.add){const T=Eh(C,l);null!=T&&c.set(T,C)}if(s.update)for(const C of s.update){let T=c.get(C.id);if(null==T)continue;const A=!C.removeAllProperties&&((null===(h=C.removeProperties)||void 0===h?void 0:h.length)>0||(null===(g=C.addOrUpdateProperties)||void 0===g?void 0:g.length)>0);if((C.newGeometry||C.removeAllProperties||A)&&(T=Object.assign({},T),c.set(C.id,T),A&&(T.properties=Object.assign({},T.properties))),C.newGeometry&&(T.geometry=C.newGeometry),C.removeAllProperties)T.properties={};else if((null===(x=C.removeProperties)||void 0===x?void 0:x.length)>0)for(const N of C.removeProperties)Object.prototype.hasOwnProperty.call(T.properties,N)&&delete T.properties[N];if((null===(w=C.addOrUpdateProperties)||void 0===w?void 0:w.length)>0)for(const{key:N,value:B}of C.addOrUpdateProperties)T.properties[N]=B}},W.cX=Ao,W.ca=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},W.cb=c=>"symbol"===c.type,W.cc=c=>"circle"===c.type,W.cd=c=>"heatmap"===c.type,W.ce=c=>"line"===c.type,W.cf=c=>"fill"===c.type,W.cg=c=>"fill-extrusion"===c.type,W.ch=c=>"hillshade"===c.type,W.ci=c=>"color-relief"===c.type,W.cj=c=>"raster"===c.type,W.ck=c=>"background"===c.type,W.cl=c=>"custom"===c.type,W.cm=ho,W.cn=function(c,s,l){const h=Ac(s.x-l.x,s.y-l.y),g=Ac(c.x-l.x,c.y-l.y);var x,w;return Mr(Math.atan2(h[0]*g[1]-h[1]*g[0],(x=h)[0]*(w=g)[0]+x[1]*w[1]))},W.co=Go,W.cp=function(c,s){return wa[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},W.cq=function(c,s){return xa[s]&&"touches"in c},W.cr=function(c){return xa[c]||wa[c]},W.cs=function(c,s,l){var h=s[0],g=s[1];return c[0]=l[0]*h+l[4]*g+l[12],c[1]=l[1]*h+l[5]*g+l[13],c},W.ct=function(c,s){const{x:l,y:h}=Of.fromLngLat(s);return!(c<0||c>25||h<0||h>=1||l<0||l>=1)},W.cu=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},W.cv=class extends Yl{},W.cw=dg,W.cy=function(c){return c.message===Rl},W.cz=ce,W.d=De,W.e=Ho,W.f=c=>y(void 0,void 0,void 0,function*(){if(0===c.byteLength)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),W.g=Y,W.h=c=>new Promise((s,l)=>{const h=new Image;h.onload=()=>{s(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Wo})},h.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const g=new Blob([new Uint8Array(c)],{type:"image/png"});h.src=c.byteLength?URL.createObjectURL(g):Wo}),W.i=Eo,W.j=(c,s)=>Se(Ho(c,{type:"json"}),s),W.k=je,W.l=Ge,W.m=Se,W.n=(c,s)=>Se(Ho(c,{type:"arrayBuffer"}),s),W.o=function(c){return new Zm(c).readFields(Ym,[])},W.p=Oo,W.q=tc,W.r=Mt,W.s=zs,W.t=uh,W.u=fn,W.v=Ee,W.w=Wr,W.x=Dm,W.y=Qs,W.z=br}),Bu("worker",0,function(W){class y{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,Y){for(const ce of Z){this._layerConfigs[ce.id]=ce;const me=this._layers[ce.id]=W.bJ(ce);me._featureFilter=W.aa(me.filter),this.keyCache[ce.id]&&delete this.keyCache[ce.id]}for(const ce of Y)delete this.keyCache[ce],delete this._layerConfigs[ce],delete this._layers[ce];this.familiesBySource={};const X=W.cC(Object.values(this._layerConfigs),this.keyCache);for(const ce of X){const me=ce.map(je=>this._layers[je.id]),Se=me[0];if("none"===Se.visibility)continue;const De=Se.source||"";let ve=this.familiesBySource[De];ve||(ve=this.familiesBySource[De]={});const Oe=Se.sourceLayer||"_geojsonTileLayer";let Ge=ve[Oe];Ge||(Ge=ve[Oe]=[]),Ge.push(me)}}}class gt{constructor(Z){const Y={},X=[];for(const De in Z){const ve=Z[De],Oe=Y[De]={};for(const Ge in ve){const je=ve[+Ge];if(!je||0===je.bitmap.width||0===je.bitmap.height)continue;const yt={x:0,y:0,w:je.bitmap.width+2,h:je.bitmap.height+2};X.push(yt),Oe[Ge]={rect:yt,metrics:je.metrics}}}const{w:ce,h:me}=W.p(X),Se=new W.q({width:ce||1,height:me||1});for(const De in Z){const ve=Z[De];for(const Oe in ve){const Ge=ve[+Oe];if(!Ge||0===Ge.bitmap.width||0===Ge.bitmap.height)continue;const je=Y[De][Oe].rect;W.q.copy(Ge.bitmap,Se,{x:0,y:0},{x:je.x+1,y:je.y+1},Ge.bitmap)}}this.image=Se,this.positions=Y}}W.cD("GlyphAtlas",gt);class kl{constructor(Z){this.tileID=new W.Z(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId,this.inFlightDependencies=[],this.globalState=Z.globalState}parse(Z,Y,X,ce,me){return W._(this,void 0,void 0,function*(){this.status="parsing",this.data=Z,this.collisionBoxArray=new W.a8;const Se=new W.cE(Object.keys(Z.layers).sort()),De=new W.cF(this.tileID,this.promoteId);De.bucketLayerIDs=[];const ve={},Oe={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:X,subdivisionGranularity:me},Ge=Y.familiesBySource[this.source];for(const un in Ge){const mn=Z.layers[un];if(!mn)continue;1===mn.version&&W.w(`Vector tile source "${this.source}" layer "${un}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const _n=Se.encode(un),Ze=[];for(let Oi=0;Oi<mn.length;Oi++){const _r=mn.feature(Oi),nl=De.getId(_r,un);Ze.push({feature:_r,id:nl,index:Oi,sourceLayerIndex:_n})}for(const Oi of Ge[un]){const _r=Oi[0];_r.source!==this.source&&W.w(`layer.source = ${_r.source} does not equal this.source = ${this.source}`),_r.minzoom&&this.zoom<Math.floor(_r.minzoom)||_r.maxzoom&&this.zoom>=_r.maxzoom||"none"!==_r.visibility&&(Xi(Oi,this.zoom,X),(ve[_r.id]=_r.createBucket({index:De.bucketLayerIDs.length,layers:Oi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:_n,sourceID:this.source,globalState:this.globalState})).populate(Ze,Oe,this.tileID.canonical),De.bucketLayerIDs.push(Oi.map(nl=>nl.id)))}}const je=W.bN(Oe.glyphDependencies,un=>Object.keys(un).map(Number));this.inFlightDependencies.forEach(un=>un?.abort()),this.inFlightDependencies=[];let yt=Promise.resolve({});if(Object.keys(je).length){const un=new AbortController;this.inFlightDependencies.push(un),yt=ce.sendAsync({type:"GG",data:{stacks:je,source:this.source,tileID:this.tileID,type:"glyphs"}},un)}const Ee=Object.keys(Oe.iconDependencies);let Ut=Promise.resolve({});if(Ee.length){const un=new AbortController;this.inFlightDependencies.push(un),Ut=ce.sendAsync({type:"GI",data:{icons:Ee,source:this.source,tileID:this.tileID,type:"icons"}},un)}const sn=Object.keys(Oe.patternDependencies);let St=Promise.resolve({});if(sn.length){const un=new AbortController;this.inFlightDependencies.push(un),St=ce.sendAsync({type:"GI",data:{icons:sn,source:this.source,tileID:this.tileID,type:"patterns"}},un)}const[Qt,Un,ri]=yield Promise.all([yt,Ut,St]),Lr=new gt(Qt),Zn=new W.cG(Un,ri);for(const un in ve){const mn=ve[un];mn instanceof W.a9?(Xi(mn.layers,this.zoom,X),W.cH({bucket:mn,glyphMap:Qt,glyphPositions:Lr.positions,imageMap:Un,imagePositions:Zn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Oe.subdivisionGranularity})):mn.hasPattern&&(mn instanceof W.cI||mn instanceof W.cJ||mn instanceof W.cK)&&(Xi(mn.layers,this.zoom,X),mn.addFeatures(Oe,this.tileID.canonical,Zn.patternPositions))}return this.status="done",{buckets:Object.values(ve).filter(un=>!un.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lr.image,imageAtlas:Zn,glyphMap:this.returnDependencies?Qt:null,iconMap:this.returnDependencies?Un:null,glyphPositions:this.returnDependencies?Lr.positions:null}})}}function Xi(ye,Z,Y){const X=new W.F(Z);for(const ce of ye)ce.recalculate(X,Y)}class ma{constructor(Z,Y,X){this.actor=Z,this.layerIndex=Y,this.availableImages=X,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Z,Y){return W._(this,void 0,void 0,function*(){const X=yield W.n(Z.request,Y);try{return{vectorTile:new W.cL(new W.cM(X.data)),rawData:X.data,cacheControl:X.cacheControl,expires:X.expires}}catch(ce){const me=new Uint8Array(X.data);let Se=`Unable to parse the tile at ${Z.request.url}, `;throw Se+=31===me[0]&&139===me[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${ce.message}`,new Error(Se)}})}loadTile(Z){return W._(this,void 0,void 0,function*(){const Y=Z.uid,X=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new W.cN(Z.request),ce=new kl(Z);this.loading[Y]=ce;const me=new AbortController;ce.abort=me;try{const Se=yield this.loadVectorTile(Z,me);if(delete this.loading[Y],!Se)return null;const De=Se.rawData,ve={};Se.expires&&(ve.expires=Se.expires),Se.cacheControl&&(ve.cacheControl=Se.cacheControl);const Oe={};if(X){const je=X.finish();je&&(Oe.resourceTiming=JSON.parse(JSON.stringify(je)))}ce.vectorTile=Se.vectorTile;const Ge=ce.parse(Se.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity);this.loaded[Y]=ce,this.fetching[Y]={rawTileData:De,cacheControl:ve,resourceTiming:Oe};try{const je=yield Ge;return W.e({rawTileData:De.slice(0)},je,ve,Oe)}finally{delete this.fetching[Y]}}catch(Se){throw delete this.loading[Y],ce.status="done",this.loaded[Y]=ce,Se}})}reloadTile(Z){return W._(this,void 0,void 0,function*(){const Y=Z.uid;if(!this.loaded||!this.loaded[Y])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const X=this.loaded[Y];if(X.showCollisionBoxes=Z.showCollisionBoxes,X.globalState=Z.globalState,"parsing"===X.status){const ce=yield X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity);let me;if(this.fetching[Y]){const{rawTileData:Se,cacheControl:De,resourceTiming:ve}=this.fetching[Y];delete this.fetching[Y],me=W.e({rawTileData:Se.slice(0)},ce,De,ve)}else me=ce;return me}if("done"===X.status&&X.vectorTile)return X.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity)})}abortTile(Z){return W._(this,void 0,void 0,function*(){const Y=this.loading,X=Z.uid;Y&&Y[X]&&Y[X].abort&&(Y[X].abort.abort(),delete Y[X])})}removeTile(Z){return W._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Z.uid]&&delete this.loaded[Z.uid]})}}class Dt{constructor(){this.loaded={}}loadTile(Z){return W._(this,void 0,void 0,function*(){const{uid:Y,encoding:X,rawImageData:ce,redFactor:me,greenFactor:Se,blueFactor:De,baseShift:ve}=Z,Oe=ce.width+2,Ge=ce.height+2,je=W.b(ce)?new W.R({width:Oe,height:Ge},yield W.cO(ce,-1,-1,Oe,Ge)):ce,yt=new W.cP(Y,je,X,me,Se,De,ve);return this.loaded=this.loaded||{},this.loaded[Y]=yt,yt})}removeTile(Z){const Y=this.loaded,X=Z.uid;Y&&Y[X]&&delete Y[X]}}var Re,Ns,Vo=function(){if(Ns)return Re;function ye(Y,X){if(0!==Y.length){Z(Y[0],X);for(var ce=1;ce<Y.length;ce++)Z(Y[ce],!X)}}function Z(Y,X){for(var ce=0,me=0,Se=0,De=Y.length,ve=De-1;Se<De;ve=Se++){var Oe=(Y[Se][0]-Y[ve][0])*(Y[ve][1]+Y[Se][1]),Ge=ce+Oe;me+=Math.abs(ce)>=Math.abs(Oe)?ce-Ge+Oe:Oe-Ge+ce,ce=Ge}ce+me>=0!=!!X&&Y.reverse()}return Ns=1,Re=function Y(X,ce){var me,Se=X&&X.type;if("FeatureCollection"===Se)for(me=0;me<X.features.length;me++)Y(X.features[me],ce);else if("GeometryCollection"===Se)for(me=0;me<X.geometries.length;me++)Y(X.geometries[me],ce);else if("Feature"===Se)Y(X.geometry,ce);else if("Polygon"===Se)ye(X.coordinates,ce);else if("MultiPolygon"===Se)for(me=0;me<X.coordinates.length;me++)ye(X.coordinates[me],ce);return X}}(),Yn=W.cQ(Vo);class zt extends W.cS{constructor(Z,Y){super(new W.cM,0,Y,[],[]),this.feature=Z,this.type=Z.type,this.properties=Z.tags?Z.tags:{},"id"in Z&&("string"==typeof Z.id?this.id=parseInt(Z.id,10):"number"!=typeof Z.id||isNaN(Z.id)||(this.id=Z.id))}loadGeometry(){const Z=[],Y=1===this.feature.type?[this.feature.geometry]:this.feature.geometry;for(const X of Y){const ce=[];for(const me of X)ce.push(new W.P(me[0],me[1]));Z.push(ce)}return Z}}class Tr extends W.cR{constructor(Z,Y){super(new W.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=Y?Y.version:1,this.extent=Y?Y.extent:4096,this.length=Z.length,this.features=Z}feature(Z){return new zt(this.features[Z],this.extent)}}function ni(ye,Z){Z.writeVarintField(15,ye.version||1),Z.writeStringField(1,ye.name||""),Z.writeVarintField(5,ye.extent||4096);const Y={keys:[],values:[],keycache:{},valuecache:{}};for(let me=0;me<ye.length;me++)Y.feature=ye.feature(me),Z.writeMessage(2,Uo,Y);const X=Y.keys;for(const me of X)Z.writeStringField(3,me);const ce=Y.values;for(const me of ce)Z.writeMessage(4,Pc,me)}function Uo(ye,Z){if(!ye.feature)return;const Y=ye.feature;void 0!==Y.id&&Z.writeVarintField(1,Y.id),Z.writeMessage(2,Ls,ye),Z.writeVarintField(3,Y.type),Z.writeMessage(4,Qa,Y)}function Ls(ye,Z){for(const Y in ye.feature?.properties){let X=ye.feature.properties[Y],ce=ye.keycache[Y];if(null===X)continue;void 0===ce&&(ye.keys.push(Y),ce=ye.keys.length-1,ye.keycache[Y]=ce),Z.writeVarint(ce),"string"!=typeof X&&"boolean"!=typeof X&&"number"!=typeof X&&(X=JSON.stringify(X));const me=typeof X+":"+X;let Se=ye.valuecache[me];void 0===Se&&(ye.values.push(X),Se=ye.values.length-1,ye.valuecache[me]=Se),Z.writeVarint(Se)}}function xo(ye,Z){return(Z<<3)+(7&ye)}function kc(ye){return ye<<1^ye>>31}function Qa(ye,Z){const Y=ye.loadGeometry(),X=ye.type;let ce=0,me=0;for(const Se of Y){let De=1;1===X&&(De=Se.length),Z.writeVarint(xo(1,De));const ve=3===X?Se.length-1:Se.length;for(let Oe=0;Oe<ve;Oe++){1===Oe&&1!==X&&Z.writeVarint(xo(2,ve-1));const Ge=Se[Oe].x-ce,je=Se[Oe].y-me;Z.writeVarint(kc(Ge)),Z.writeVarint(kc(je)),ce+=Ge,me+=je}3===ye.type&&Z.writeVarint(xo(7,1))}}function Pc(ye,Z){const Y=typeof ye;"string"===Y?Z.writeStringField(1,ye):"boolean"===Y?Z.writeBooleanField(7,ye):"number"===Y&&(ye%1!=0?Z.writeDoubleField(3,ye):ye<0?Z.writeSVarintField(6,ye):Z.writeVarintField(5,ye))}const $o={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ye=>ye},Ja=Math.fround||(wo=new Float32Array(1),ye=>(wo[0]=+ye,wo[0]));var wo;class So{constructor(Z){this.options=Object.assign(Object.create($o),Z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Z){const{log:Y,minZoom:X,maxZoom:ce}=this.options;Y&&console.time("total time");const me=`prepare ${Z.length} points`;Y&&console.time(me),this.points=Z;const Se=[];for(let ve=0;ve<Z.length;ve++){const Oe=Z[ve];if(!Oe.geometry)continue;const[Ge,je]=Oe.geometry.coordinates,yt=Ja(ds(Ge)),Ee=Ja(el(je));Se.push(yt,Ee,1/0,ve,-1,1),this.options.reduce&&Se.push(0)}let De=this.trees[ce+1]=this._createTree(Se);Y&&console.timeEnd(me);for(let ve=ce;ve>=X;ve--){const Oe=+Date.now();De=this.trees[ve]=this._createTree(this._cluster(De,ve)),Y&&console.log("z%d: %d clusters in %dms",ve,De.numItems,+Date.now()-Oe)}return Y&&console.timeEnd("total time"),this}getClusters(Z,Y){let X=((Z[0]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,Z[1]));let me=180===Z[2]?180:((Z[2]+180)%360+360)%360-180;const Se=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)X=-180,me=180;else if(X>me){const je=this.getClusters([X,ce,180,Se],Y),yt=this.getClusters([-180,ce,me,Se],Y);return je.concat(yt)}const De=this.trees[this._limitZoom(Y)],ve=De.range(ds(X),el(Se),ds(me),el(ce)),Oe=De.data,Ge=[];for(const je of ve){const yt=this.stride*je;Ge.push(Oe[yt+5]>1?_a(Oe,yt,this.clusterProps):this.points[Oe[yt+3]])}return Ge}getChildren(Z){const Y=this._getOriginId(Z),X=this._getOriginZoom(Z),ce="No cluster with the specified id.",me=this.trees[X];if(!me)throw new Error(ce);const Se=me.data;if(Y*this.stride>=Se.length)throw new Error(ce);const De=this.options.radius/(this.options.extent*Math.pow(2,X-1)),ve=me.within(Se[Y*this.stride],Se[Y*this.stride+1],De),Oe=[];for(const Ge of ve){const je=Ge*this.stride;Se[je+4]===Z&&Oe.push(Se[je+5]>1?_a(Se,je,this.clusterProps):this.points[Se[je+3]])}if(0===Oe.length)throw new Error(ce);return Oe}getLeaves(Z,Y,X){const ce=[];return this._appendLeaves(ce,Z,Y=Y||10,X=X||0,0),ce}getTile(Z,Y,X){const ce=this.trees[this._limitZoom(Z)],me=Math.pow(2,Z),{extent:Se,radius:De}=this.options,ve=De/Se,Oe=(X-ve)/me,Ge=(X+1+ve)/me,je={features:[]};return this._addTileFeatures(ce.range((Y-ve)/me,Oe,(Y+1+ve)/me,Ge),ce.data,Y,X,me,je),0===Y&&this._addTileFeatures(ce.range(1-ve/me,Oe,1,Ge),ce.data,me,X,me,je),Y===me-1&&this._addTileFeatures(ce.range(0,Oe,ve/me,Ge),ce.data,-1,X,me,je),je.features.length?je:null}getClusterExpansionZoom(Z){let Y=this._getOriginZoom(Z)-1;for(;Y<=this.options.maxZoom;){const X=this.getChildren(Z);if(Y++,1!==X.length)break;Z=X[0].properties.cluster_id}return Y}_appendLeaves(Z,Y,X,ce,me){const Se=this.getChildren(Y);for(const De of Se){const ve=De.properties;if(ve&&ve.cluster?me+ve.point_count<=ce?me+=ve.point_count:me=this._appendLeaves(Z,ve.cluster_id,X,ce,me):me<ce?me++:Z.push(De),Z.length===X)break}return me}_createTree(Z){const Y=new W.aI(Z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let X=0;X<Z.length;X+=this.stride)Y.add(Z[X],Z[X+1]);return Y.finish(),Y.data=Z,Y}_addTileFeatures(Z,Y,X,ce,me,Se){for(const De of Z){const ve=De*this.stride,Oe=Y[ve+5]>1;let Ge,je,yt;if(Oe)Ge=Os(Y,ve,this.clusterProps),je=Y[ve],yt=Y[ve+1];else{const sn=this.points[Y[ve+3]];Ge=sn.properties;const[St,Qt]=sn.geometry.coordinates;je=ds(St),yt=el(Qt)}const Ee={type:1,geometry:[[Math.round(this.options.extent*(je*me-X)),Math.round(this.options.extent*(yt*me-ce))]],tags:Ge};let Ut;Ut=Oe||this.options.generateId?Y[ve+3]:this.points[Y[ve+3]].id,void 0!==Ut&&(Ee.id=Ut),Se.features.push(Ee)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(Math.floor(+Z),this.options.maxZoom+1))}_cluster(Z,Y){const{radius:X,extent:ce,reduce:me,minPoints:Se}=this.options,De=X/(ce*Math.pow(2,Y)),ve=Z.data,Oe=[],Ge=this.stride;for(let je=0;je<ve.length;je+=Ge){if(ve[je+2]<=Y)continue;ve[je+2]=Y;const yt=ve[je],Ee=ve[je+1],Ut=Z.within(ve[je],ve[je+1],De),sn=ve[je+5];let St=sn;for(const Qt of Ut){const Un=Qt*Ge;ve[Un+2]>Y&&(St+=ve[Un+5])}if(St>sn&&St>=Se){let Qt,Un=yt*sn,ri=Ee*sn,Lr=-1;const Zn=(je/Ge<<5)+(Y+1)+this.points.length;for(const un of Ut){const mn=un*Ge;if(ve[mn+2]<=Y)continue;ve[mn+2]=Y;const _n=ve[mn+5];Un+=ve[mn]*_n,ri+=ve[mn+1]*_n,ve[mn+4]=Zn,me&&(Qt||(Qt=this._map(ve,je,!0),Lr=this.clusterProps.length,this.clusterProps.push(Qt)),me(Qt,this._map(ve,mn)))}ve[je+4]=Zn,Oe.push(Un/St,ri/St,1/0,Zn,-1,St),me&&Oe.push(Lr)}else{for(let Qt=0;Qt<Ge;Qt++)Oe.push(ve[je+Qt]);if(St>1)for(const Qt of Ut){const Un=Qt*Ge;if(!(ve[Un+2]<=Y)){ve[Un+2]=Y;for(let ri=0;ri<Ge;ri++)Oe.push(ve[Un+ri])}}}}return Oe}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,Y,X){if(Z[Y+5]>1){const Se=this.clusterProps[Z[Y+6]];return X?Object.assign({},Se):Se}const ce=this.points[Z[Y+3]].properties,me=this.options.map(ce);return X&&me===ce?Object.assign({},me):me}}function _a(ye,Z,Y){return{type:"Feature",id:ye[Z+3],properties:Os(ye,Z,Y),geometry:{type:"Point",coordinates:[(X=ye[Z],360*(X-.5)),Ac(ye[Z+1])]}};var X}function Os(ye,Z,Y){const X=ye[Z+5],ce=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X,me=ye[Z+6],Se=-1===me?{}:Object.assign({},Y[me]);return Object.assign(Se,{cluster:!0,cluster_id:ye[Z+3],point_count:X,point_count_abbreviated:ce})}function ds(ye){return ye/360+.5}function el(ye){const Z=Math.sin(ye*Math.PI/180),Y=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return Y<0?0:Y>1?1:Y}function Ac(ye){const Z=(180-360*ye)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function En(ye,Z,Y,X){let ce=X;const me=Z+(Y-Z>>1);let Se,De=Y-Z;const ve=ye[Z],Oe=ye[Z+1],Ge=ye[Y],je=ye[Y+1];for(let yt=Z+3;yt<Y;yt+=3){const Ee=ya(ye[yt],ye[yt+1],ve,Oe,Ge,je);if(Ee>ce)Se=yt,ce=Ee;else if(Ee===ce){const Ut=Math.abs(yt-me);Ut<De&&(Se=yt,De=Ut)}}ce>X&&(Se-Z>3&&En(ye,Z,Se,X),ye[Se+2]=ce,Y-Se>3&&En(ye,Se,Y,X))}function ya(ye,Z,Y,X,ce,me){let Se=ce-Y,De=me-X;if(0!==Se||0!==De){const ve=((ye-Y)*Se+(Z-X)*De)/(Se*Se+De*De);ve>1?(Y=ce,X=me):ve>0&&(Y+=Se*ve,X+=De*ve)}return Se=ye-Y,De=Z-X,Se*Se+De*De}function Qi(ye,Z,Y,X){const ce={id:ye??null,type:Z,geometry:Y,tags:X,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===Z||"MultiPoint"===Z||"LineString"===Z)Pl(ce,Y);else if("Polygon"===Z)Pl(ce,Y[0]);else if("MultiLineString"===Z)for(const me of Y)Pl(ce,me);else if("MultiPolygon"===Z)for(const me of Y)Pl(ce,me[0]);return ce}function Pl(ye,Z){for(let Y=0;Y<Z.length;Y+=3)ye.minX=Math.min(ye.minX,Z[Y]),ye.minY=Math.min(ye.minY,Z[Y+1]),ye.maxX=Math.max(ye.maxX,Z[Y]),ye.maxY=Math.max(ye.maxY,Z[Y+1])}function Fs(ye,Z,Y,X){if(!Z.geometry)return;const ce=Z.geometry.coordinates;if(ce&&0===ce.length)return;const me=Z.geometry.type,Se=Math.pow(Y.tolerance/((1<<Y.maxZoom)*Y.extent),2);let De=[],ve=Z.id;if(Y.promoteId?ve=Z.properties[Y.promoteId]:Y.generateId&&(ve=X||0),"Point"===me)ho(ce,De);else if("MultiPoint"===me)for(const Oe of ce)ho(Oe,De);else if("LineString"===me)Go(ce,De,Se,!1);else if("MultiLineString"===me){if(Y.lineMetrics){for(const Oe of ce)De=[],Go(Oe,De,Se,!1),ye.push(Qi(ve,"LineString",De,Z.properties));return}Nr(ce,De,Se,!1)}else if("Polygon"===me)Nr(ce,De,Se,!0);else{if("MultiPolygon"!==me){if("GeometryCollection"===me){for(const Oe of Z.geometry.geometries)Fs(ye,{id:ve,geometry:Oe,properties:Z.properties},Y,X);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Oe of ce){const Ge=[];Nr(Oe,Ge,Se,!0),De.push(Ge)}}ye.push(Qi(ve,me,De,Z.properties))}function ho(ye,Z){Z.push(Rc(ye[0]),Ho(ye[1]),0)}function Go(ye,Z,Y,X){let ce,me,Se=0;for(let ve=0;ve<ye.length;ve++){const Oe=Rc(ye[ve][0]),Ge=Ho(ye[ve][1]);Z.push(Oe,Ge,0),ve>0&&(Se+=X?(ce*Ge-Oe*me)/2:Math.sqrt(Math.pow(Oe-ce,2)+Math.pow(Ge-me,2))),ce=Oe,me=Ge}const De=Z.length-3;Z[2]=1,En(Z,0,De,Y),Z[De+2]=1,Z.size=Math.abs(Se),Z.start=0,Z.end=Z.size}function Nr(ye,Z,Y,X){for(let ce=0;ce<ye.length;ce++){const me=[];Go(ye[ce],me,Y,X),Z.push(me)}}function Rc(ye){return ye/360+.5}function Ho(ye){const Z=Math.sin(ye*Math.PI/180),Y=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return Y<0?0:Y>1?1:Y}function qo(ye,Z,Y,X,ce,me,Se,De){if(X/=Z,me>=(Y/=Z)&&Se<X)return ye;if(Se<Y||me>=X)return null;const ve=[];for(const Oe of ye){const Ge=Oe.geometry;let je=Oe.type;const yt=0===ce?Oe.minX:Oe.minY,Ee=0===ce?Oe.maxX:Oe.maxY;if(yt>=Y&&Ee<X){ve.push(Oe);continue}if(Ee<Y||yt>=X)continue;let Ut=[];if("Point"===je||"MultiPoint"===je)Al(Ge,Ut,Y,X,ce);else if("LineString"===je)Nc(Ge,Ut,Y,X,ce,!1,De.lineMetrics);else if("MultiLineString"===je)Ir(Ge,Ut,Y,X,ce,!1);else if("Polygon"===je)Ir(Ge,Ut,Y,X,ce,!0);else if("MultiPolygon"===je)for(const sn of Ge){const St=[];Ir(sn,St,Y,X,ce,!0),St.length&&Ut.push(St)}if(Ut.length){if(De.lineMetrics&&"LineString"===je){for(const sn of Ut)ve.push(Qi(Oe.id,je,sn,Oe.tags));continue}"LineString"!==je&&"MultiLineString"!==je||(1===Ut.length?(je="LineString",Ut=Ut[0]):je="MultiLineString"),"Point"!==je&&"MultiPoint"!==je||(je=3===Ut.length?"Point":"MultiPoint"),ve.push(Qi(Oe.id,je,Ut,Oe.tags))}}return ve.length?ve:null}function Al(ye,Z,Y,X,ce){for(let me=0;me<ye.length;me+=3){const Se=ye[me+ce];Se>=Y&&Se<=X&&Wr(Z,ye[me],ye[me+1],ye[me+2])}}function Nc(ye,Z,Y,X,ce,me,Se){let De=Li(ye);const ve=0===ce?hs:Eo;let Oe,Ge,je=ye.start;for(let St=0;St<ye.length-3;St+=3){const Qt=ye[St],Un=ye[St+1],ri=ye[St+2],Lr=ye[St+3],Zn=ye[St+4],un=0===ce?Qt:Un,mn=0===ce?Lr:Zn;let _n=!1;Se&&(Oe=Math.sqrt(Math.pow(Qt-Lr,2)+Math.pow(Un-Zn,2))),un<Y?mn>Y&&(Ge=ve(De,Qt,Un,Lr,Zn,Y),Se&&(De.start=je+Oe*Ge)):un>X?mn<X&&(Ge=ve(De,Qt,Un,Lr,Zn,X),Se&&(De.start=je+Oe*Ge)):Wr(De,Qt,Un,ri),mn<Y&&un>=Y&&(Ge=ve(De,Qt,Un,Lr,Zn,Y),_n=!0),mn>X&&un<=X&&(Ge=ve(De,Qt,Un,Lr,Zn,X),_n=!0),!me&&_n&&(Se&&(De.end=je+Oe*Ge),Z.push(De),De=Li(ye)),Se&&(je+=Oe)}let yt=ye.length-3;const Ee=ye[yt],Ut=ye[yt+1],sn=0===ce?Ee:Ut;sn>=Y&&sn<=X&&Wr(De,Ee,Ut,ye[yt+2]),yt=De.length-3,me&&yt>=3&&(De[yt]!==De[0]||De[yt+1]!==De[1])&&Wr(De,De[0],De[1],De[2]),De.length&&Z.push(De)}function Li(ye){const Z=[];return Z.size=ye.size,Z.start=ye.start,Z.end=ye.end,Z}function Ir(ye,Z,Y,X,ce,me){for(const Se of ye)Nc(Se,Z,Y,X,ce,me,!1)}function Wr(ye,Z,Y,X){ye.push(Z,Y,X)}function hs(ye,Z,Y,X,ce,me){const Se=(me-Z)/(X-Z);return Wr(ye,me,Y+(ce-Y)*Se,1),Se}function Eo(ye,Z,Y,X,ce,me){const Se=(me-Y)/(ce-Y);return Wr(ye,Z+(X-Z)*Se,me,1),Se}function tl(ye,Z){const Y=[];for(let X=0;X<ye.length;X++){const ce=ye[X],me=ce.type;let Se;if("Point"===me||"MultiPoint"===me||"LineString"===me)Se=va(ce.geometry,Z);else if("MultiLineString"===me||"Polygon"===me){Se=[];for(const De of ce.geometry)Se.push(va(De,Z))}else if("MultiPolygon"===me){Se=[];for(const De of ce.geometry){const ve=[];for(const Oe of De)ve.push(va(Oe,Z));Se.push(ve)}}Y.push(Qi(ce.id,me,Se,ce.tags))}return Y}function va(ye,Z){const Y=[];Y.size=ye.size,void 0!==ye.start&&(Y.start=ye.start,Y.end=ye.end);for(let X=0;X<ye.length;X+=3)Y.push(ye[X]+Z,ye[X+1],ye[X+2]);return Y}function Wo(ye,Z){if(ye.transformed)return ye;const Y=1<<ye.z,X=ye.x,ce=ye.y;for(const me of ye.features){const Se=me.geometry,De=me.type;if(me.geometry=[],1===De)for(let ve=0;ve<Se.length;ve+=2)me.geometry.push(Lc(Se[ve],Se[ve+1],Z,Y,X,ce));else for(let ve=0;ve<Se.length;ve++){const Oe=[];for(let Ge=0;Ge<Se[ve].length;Ge+=2)Oe.push(Lc(Se[ve][Ge],Se[ve][Ge+1],Z,Y,X,ce));me.geometry.push(Oe)}}return ye.transformed=!0,ye}function Lc(ye,Z,Y,X,ce,me){return[Math.round(Y*(ye*X-ce)),Math.round(Y*(Z*X-me))]}function An(ye,Z,Y,X,ce){const me=Z===ce.maxZoom?0:ce.tolerance/((1<<Z)*ce.extent),Se={features:[],numPoints:0,numSimplified:0,numFeatures:ye.length,source:null,x:Y,y:X,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const De of ye)Bs(Se,De,me,ce);return Se}function Bs(ye,Z,Y,X){const ce=Z.geometry,me=Z.type,Se=[];if(ye.minX=Math.min(ye.minX,Z.minX),ye.minY=Math.min(ye.minY,Z.minY),ye.maxX=Math.max(ye.maxX,Z.maxX),ye.maxY=Math.max(ye.maxY,Z.maxY),"Point"===me||"MultiPoint"===me)for(let De=0;De<ce.length;De+=3)Se.push(ce[De],ce[De+1]),ye.numPoints++,ye.numSimplified++;else if("LineString"===me)zs(Se,ce,ye,Y,!1,!1);else if("MultiLineString"===me||"Polygon"===me)for(let De=0;De<ce.length;De++)zs(Se,ce[De],ye,Y,"Polygon"===me,0===De);else if("MultiPolygon"===me)for(let De=0;De<ce.length;De++){const ve=ce[De];for(let Oe=0;Oe<ve.length;Oe++)zs(Se,ve[Oe],ye,Y,!0,0===Oe)}if(Se.length){let De=Z.tags||null;if("LineString"===me&&X.lineMetrics){De={};for(const Oe in Z.tags)De[Oe]=Z.tags[Oe];De.mapbox_clip_start=ce.start/ce.size,De.mapbox_clip_end=ce.end/ce.size}const ve={geometry:Se,type:"Polygon"===me||"MultiPolygon"===me?3:"LineString"===me||"MultiLineString"===me?2:1,tags:De};null!==Z.id&&(ve.id=Z.id),ye.features.push(ve)}}function zs(ye,Z,Y,X,ce,me){const Se=X*X;if(X>0&&Z.size<(ce?Se:X))return void(Y.numPoints+=Z.length/3);const De=[];for(let ve=0;ve<Z.length;ve+=3)(0===X||Z[ve+2]>Se)&&(Y.numSimplified++,De.push(Z[ve],Z[ve+1])),Y.numPoints++;ce&&function(ve,Oe){let Ge=0;for(let je=0,yt=ve.length,Ee=yt-2;je<yt;Ee=je,je+=2)Ge+=(ve[je]-ve[Ee])*(ve[je+1]+ve[Ee+1]);if(Ge>0===Oe)for(let je=0,yt=ve.length;je<yt/2;je+=2){const Ee=ve[je],Ut=ve[je+1];ve[je]=ve[yt-2-je],ve[je+1]=ve[yt-1-je],ve[yt-2-je]=Ee,ve[yt-1-je]=Ut}}(De,me),ye.push(De)}const ba={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Mr{constructor(Z,Y){const X=(Y=this.options=function(me,Se){for(const De in Se)me[De]=Se[De];return me}(Object.create(ba),Y)).debug;if(X&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");let ce=function(me,Se){const De=[];if("FeatureCollection"===me.type)for(let ve=0;ve<me.features.length;ve++)Fs(De,me.features[ve],Se,ve);else Fs(De,"Feature"===me.type?me:{geometry:me},Se);return De}(Z,Y);this.tiles={},this.tileCoords=[],X&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ce=function(me,Se){const De=Se.buffer/Se.extent;let ve=me;const Oe=qo(me,1,-1-De,De,0,-1,2,Se),Ge=qo(me,1,1-De,2+De,0,-1,2,Se);return(Oe||Ge)&&(ve=qo(me,1,-De,1+De,0,-1,2,Se)||[],Oe&&(ve=tl(Oe,1).concat(ve)),Ge&&(ve=ve.concat(tl(Ge,-1)))),ve}(ce,Y),ce.length&&this.splitTile(ce,0,0,0),X&&(ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Z,Y,X,ce,me,Se,De){const ve=[Z,Y,X,ce],Oe=this.options,Ge=Oe.debug;for(;ve.length;){ce=ve.pop(),X=ve.pop(),Y=ve.pop(),Z=ve.pop();const je=1<<Y,yt=xa(Y,X,ce);let Ee=this.tiles[yt];if(!Ee&&(Ge>1&&console.time("creation"),Ee=this.tiles[yt]=An(Z,Y,X,ce,Oe),this.tileCoords.push({z:Y,x:X,y:ce}),Ge)){Ge>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,X,ce,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));const _n=`z${Y}`;this.stats[_n]=(this.stats[_n]||0)+1,this.total++}if(Ee.source=Z,null==me){if(Y===Oe.indexMaxZoom||Ee.numPoints<=Oe.indexMaxPoints)continue}else{if(Y===Oe.maxZoom||Y===me)continue;if(null!=me){const _n=me-Y;if(X!==Se>>_n||ce!==De>>_n)continue}}if(Ee.source=null,0===Z.length)continue;Ge>1&&console.time("clipping");const Ut=.5*Oe.buffer/Oe.extent,sn=.5-Ut,St=.5+Ut,Qt=1+Ut;let Un=null,ri=null,Lr=null,Zn=null,un=qo(Z,je,X-Ut,X+St,0,Ee.minX,Ee.maxX,Oe),mn=qo(Z,je,X+sn,X+Qt,0,Ee.minX,Ee.maxX,Oe);Z=null,un&&(Un=qo(un,je,ce-Ut,ce+St,1,Ee.minY,Ee.maxY,Oe),ri=qo(un,je,ce+sn,ce+Qt,1,Ee.minY,Ee.maxY,Oe),un=null),mn&&(Lr=qo(mn,je,ce-Ut,ce+St,1,Ee.minY,Ee.maxY,Oe),Zn=qo(mn,je,ce+sn,ce+Qt,1,Ee.minY,Ee.maxY,Oe),mn=null),Ge>1&&console.timeEnd("clipping"),ve.push(Un||[],Y+1,2*X,2*ce),ve.push(ri||[],Y+1,2*X,2*ce+1),ve.push(Lr||[],Y+1,2*X+1,2*ce),ve.push(Zn||[],Y+1,2*X+1,2*ce+1)}}getTile(Z,Y,X){Z=+Z,Y=+Y,X=+X;const ce=this.options,{extent:me,debug:Se}=ce;if(Z<0||Z>24)return null;const De=1<<Z,ve=xa(Z,Y=Y+De&De-1,X);if(this.tiles[ve])return Wo(this.tiles[ve],me);Se>1&&console.log("drilling down to z%d-%d-%d",Z,Y,X);let Oe,Ge=Z,je=Y,yt=X;for(;!Oe&&Ge>0;)Ge--,je>>=1,yt>>=1,Oe=this.tiles[xa(Ge,je,yt)];return Oe&&Oe.source?(Se>1&&(console.log("found parent tile z%d-%d-%d",Ge,je,yt),console.time("drilling down")),this.splitTile(Oe.source,Ge,je,yt,Z,Y,X),Se>1&&console.timeEnd("drilling down"),this.tiles[ve]?Wo(this.tiles[ve],me):null):null}}function xa(ye,Z,Y){return 32*((1<<ye)*Y+Z)+ye}class wa extends ma{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Z,Y){return W._(this,void 0,void 0,function*(){const X=Z.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ce=this._geoJSONIndex.getTile(X.z,X.x,X.y);if(!ce)return null;const me=new Tr(ce.features,{version:2,extent:W.$});let Se=function(De){const ve=new W.cM;return function(Oe,Ge){for(const je in Oe.layers)Ge.writeMessage(3,ni,Oe.layers[je])}(De,ve),ve.finish()}(me);return 0===Se.byteOffset&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),{vectorTile:me,rawData:Se.buffer}})}loadData(Z){return W._(this,void 0,void 0,function*(){var Y;null===(Y=this._pendingRequest)||void 0===Y||Y.abort();const X=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new W.cN(Z.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Z,this._pendingRequest);const ce=yield this._pendingData;this._geoJSONIndex=Z.cluster?new So(function({superclusterOptions:Se,clusterProperties:De}){if(!De||!Se)return Se;const ve={},Oe={},Ge={accumulated:null,zoom:0},je={properties:null},yt=Object.keys(De);for(const Ee of yt){const[Ut,sn]=De[Ee],St=W.cT(sn),Qt=W.cT("string"==typeof Ut?[Ut,["accumulated"],["get",Ee]]:Ut);ve[Ee]=St.value,Oe[Ee]=Qt.value}return Se.map=Ee=>{je.properties=Ee;const Ut={};for(const sn of yt)Ut[sn]=ve[sn].evaluate(Ge,je);return Ut},Se.reduce=(Ee,Ut)=>{je.properties=Ut;for(const sn of yt)Ge.accumulated=Ee[sn],Ee[sn]=Oe[sn].evaluate(Ge,je)},Se}(Z)).load(ce.features):new Mr(ce,Z.geojsonVtOptions),this.loaded={};const me={data:ce};if(X){const Se=X.finish();Se&&(me.resourceTiming={},me.resourceTiming[Z.source]=JSON.parse(JSON.stringify(Se)))}return me}catch(ce){if(delete this._pendingRequest,W.cy(ce))return{abandoned:!0};throw ce}})}getData(){return W._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Z){const Y=this.loaded;return Y&&Y[Z.uid]?super.reloadTile(Z):this.loadTile(Z)}loadAndProcessGeoJSON(Z,Y){return W._(this,void 0,void 0,function*(){let X=yield this.loadGeoJSON(Z,Y);if(delete this._pendingRequest,"object"!=typeof X)throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`);if(Yn(X,!0),Z.filter){const ce=W.cT(Z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ce.result)throw new Error(ce.value.map(Se=>`${Se.key}: ${Se.message}`).join(", "));X={type:"FeatureCollection",features:X.features.filter(Se=>ce.value.evaluate({zoom:0},Se))}}return X})}loadGeoJSON(Z,Y){return W._(this,void 0,void 0,function*(){const{promoteId:X}=Z;if(Z.request){const ce=yield W.j(Z.request,Y);return this._dataUpdateable=W.cV(ce.data,X)?W.cU(ce.data,X):void 0,ce.data}if("string"==typeof Z.data)try{const ce=JSON.parse(Z.data);return this._dataUpdateable=W.cV(ce,X)?W.cU(ce,X):void 0,ce}catch{throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`)}if(!Z.dataDiff)throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Z.source}`);return W.cW(this._dataUpdateable,Z.dataDiff,X),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Z){return W._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Z){return this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId)}getClusterChildren(Z){return this._geoJSONIndex.getChildren(Z.clusterId)}getClusterLeaves(Z){return this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset)}}class Rl{constructor(Z){this.self=Z,this.actor=new W.J(Z),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(Y,X)=>{if(this.externalWorkerSourceTypes[Y])throw new Error(`Worker source with name "${Y}" already registered.`);this.externalWorkerSourceTypes[Y]=X},this.self.addProtocol=W.cA,this.self.removeProtocol=W.cB,this.self.registerRTLTextPlugin=Y=>{W.cX.setMethods(Y)},this.actor.registerMessageHandler("LDT",(Y,X)=>this._getDEMWorkerSource(Y,X.source).loadTile(X)),this.actor.registerMessageHandler("RDT",(Y,X)=>W._(this,void 0,void 0,function*(){this._getDEMWorkerSource(Y,X.source).removeTile(X)})),this.actor.registerMessageHandler("GCEZ",(Y,X)=>W._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,X.type,X.source).getClusterExpansionZoom(X)})),this.actor.registerMessageHandler("GCC",(Y,X)=>W._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,X.type,X.source).getClusterChildren(X)})),this.actor.registerMessageHandler("GCL",(Y,X)=>W._(this,void 0,void 0,function*(){return this._getWorkerSource(Y,X.type,X.source).getClusterLeaves(X)})),this.actor.registerMessageHandler("LD",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).loadData(X)),this.actor.registerMessageHandler("GD",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).getData()),this.actor.registerMessageHandler("LT",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).loadTile(X)),this.actor.registerMessageHandler("RT",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).reloadTile(X)),this.actor.registerMessageHandler("AT",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).abortTile(X)),this.actor.registerMessageHandler("RMT",(Y,X)=>this._getWorkerSource(Y,X.type,X.source).removeTile(X)),this.actor.registerMessageHandler("RS",(Y,X)=>W._(this,void 0,void 0,function*(){if(!this.workerSources[Y]||!this.workerSources[Y][X.type]||!this.workerSources[Y][X.type][X.source])return;const ce=this.workerSources[Y][X.type][X.source];delete this.workerSources[Y][X.type][X.source],void 0!==ce.removeSource&&ce.removeSource(X)})),this.actor.registerMessageHandler("RM",Y=>W._(this,void 0,void 0,function*(){delete this.layerIndexes[Y],delete this.availableImages[Y],delete this.workerSources[Y],delete this.demWorkerSources[Y]})),this.actor.registerMessageHandler("SR",(Y,X)=>W._(this,void 0,void 0,function*(){this.referrer=X})),this.actor.registerMessageHandler("SRPS",(Y,X)=>this._syncRTLPluginState(Y,X)),this.actor.registerMessageHandler("IS",(Y,X)=>W._(this,void 0,void 0,function*(){this.self.importScripts(X)})),this.actor.registerMessageHandler("SI",(Y,X)=>this._setImages(Y,X)),this.actor.registerMessageHandler("UL",(Y,X)=>W._(this,void 0,void 0,function*(){this._getLayerIndex(Y).update(X.layers,X.removedIds)})),this.actor.registerMessageHandler("SL",(Y,X)=>W._(this,void 0,void 0,function*(){this._getLayerIndex(Y).replace(X)}))}_setImages(Z,Y){return W._(this,void 0,void 0,function*(){this.availableImages[Z]=Y;for(const X in this.workerSources[Z]){const ce=this.workerSources[Z][X];for(const me in ce)ce[me].availableImages=Y}})}_syncRTLPluginState(Z,Y){return W._(this,void 0,void 0,function*(){return yield W.cX.syncState(Y,this.self.importScripts)})}_getAvailableImages(Z){let Y=this.availableImages[Z];return Y||(Y=[]),Y}_getLayerIndex(Z){let Y=this.layerIndexes[Z];return Y||(Y=this.layerIndexes[Z]=new y),Y}_getWorkerSource(Z,Y,X){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][Y]||(this.workerSources[Z][Y]={}),!this.workerSources[Z][Y][X]){const ce={sendAsync:(me,Se)=>(me.targetMapId=Z,this.actor.sendAsync(me,Se))};switch(Y){case"vector":this.workerSources[Z][Y][X]=new ma(ce,this._getLayerIndex(Z),this._getAvailableImages(Z));break;case"geojson":this.workerSources[Z][Y][X]=new wa(ce,this._getLayerIndex(Z),this._getAvailableImages(Z));break;default:this.workerSources[Z][Y][X]=new this.externalWorkerSourceTypes[Y](ce,this._getLayerIndex(Z),this._getAvailableImages(Z))}}return this.workerSources[Z][Y][X]}_getDEMWorkerSource(Z,Y){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][Y]||(this.demWorkerSources[Z][Y]=new Dt),this.demWorkerSources[Z][Y]}}return W.i(self)&&(self.worker=new Rl(self)),Rl}),Bu("index",0,function(W,y){function kl(){var v=new y.A(4);return y.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let Xi,ma;const Dt={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,o,u){const p=requestAnimationFrame(b=>{m(),o(b)}),{unsubscribe:m}=y.s(v.signal,"abort",()=>{m(),cancelAnimationFrame(p),u(y.c())},!1)},frameAsync(v){return new Promise((o,u)=>{this.frame(v,o,u)})},getImageData(v,o=0){return this.getImageCanvasContext(v).getImageData(-o,-o,v.width+2*o,v.height+2*o)},getImageCanvasContext(v){const o=window.document.createElement("canvas"),u=o.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return o.width=v.width,o.height=v.height,u.drawImage(v,0,0,v.width,v.height),u},resolveURL:v=>(Xi||(Xi=document.createElement("a")),Xi.href=v,Xi.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==ma&&(ma=matchMedia("(prefers-reduced-motion: reduce)")),ma.matches)}};class Re{static testProp(o){if(!Re.docStyle)return o[0];for(let u=0;u<o.length;u++)if(o[u]in Re.docStyle)return o[u];return o[0]}static create(o,u,p){const m=window.document.createElement(o);return void 0!==u&&(m.className=u),p&&p.appendChild(m),m}static createNS(o,u){return window.document.createElementNS(o,u)}static disableDrag(){Re.docStyle&&Re.selectProp&&(Re.userSelect=Re.docStyle[Re.selectProp],Re.docStyle[Re.selectProp]="none")}static enableDrag(){Re.docStyle&&Re.selectProp&&(Re.docStyle[Re.selectProp]=Re.userSelect)}static setTransform(o,u){o.style[Re.transformProp]=u}static addEventListener(o,u,p,m={}){o.addEventListener(u,p,"passive"in m?m:m.capture)}static removeEventListener(o,u,p,m={}){o.removeEventListener(u,p,"passive"in m?m:m.capture)}static suppressClickInternal(o){o.preventDefault(),o.stopPropagation(),window.removeEventListener("click",Re.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",Re.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",Re.suppressClickInternal,!0)},0)}static getScale(o){const u=o.getBoundingClientRect();return{x:u.width/o.offsetWidth||1,y:u.height/o.offsetHeight||1,boundingClientRect:u}}static getPoint(o,u,p){const m=u.boundingClientRect;return new y.P((p.clientX-m.left)/u.x-o.clientLeft,(p.clientY-m.top)/u.y-o.clientTop)}static mousePos(o,u){const p=Re.getScale(o);return Re.getPoint(o,p,u)}static touchPos(o,u){const p=[],m=Re.getScale(o);for(let b=0;b<u.length;b++)p.push(Re.getPoint(o,m,u[b]));return p}static mouseButton(o){return o.button}static remove(o){o.parentNode&&o.parentNode.removeChild(o)}static sanitize(o){const u=(new DOMParser).parseFromString(o,"text/html").body||document.createElement("body"),p=u.querySelectorAll("script");for(const m of p)m.remove();return Re.clean(u),u.innerHTML}static isPossiblyDangerous(o,u){const p=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(o)||!p.includes("javascript:")&&!p.includes("data:"))||!!o.startsWith("on")||void 0}static clean(o){const u=o.children;for(const p of u)Re.removeAttributes(p),Re.clean(p)}static removeAttributes(o){for(const{name:u,value:p}of o.attributes)Re.isPossiblyDangerous(u,p)&&o.removeAttribute(u)}}Re.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,Re.selectProp=Re.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),Re.transformProp=Re.testProp(["transform","WebkitTransform"]);const Ns={supported:!1,testSupport:function(v){!zt&&Yn&&(Tr?ni(v):Vo=v)}};let Vo,Yn,zt=!1,Tr=!1;function ni(v){const o=v.createTexture();v.bindTexture(v.TEXTURE_2D,o);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,Yn),v.isContextLost())return;Ns.supported=!0}catch{}v.deleteTexture(o),zt=!0}var Uo;typeof document<"u"&&(Yn=document.createElement("img"),Yn.onload=()=>{Vo&&ni(Vo),Vo=null,Tr=!0},Yn.onerror=()=>{zt=!0,Vo=null},Yn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let o,u,p,m;v.resetRequestQueue=()=>{o=[],u=0,p=0,m={}},v.addThrottleControl=D=>{const R=p++;return m[R]=D,R},v.removeThrottleControl=D=>{delete m[D],E()},v.getImage=(D,R,O=!0)=>new Promise((j,z)=>{Ns.supported&&(D.headers||(D.headers={}),D.headers.accept="image/webp,*/*"),y.e(D,{type:"image"}),o.push({abortController:R,requestParameters:D,supportImageRefresh:O,state:"queued",onError:U=>{z(U)},onSuccess:U=>{j(U)}}),E()});const b=D=>y._(this,void 0,void 0,function*(){D.state="running";const{requestParameters:R,supportImageRefresh:O,onError:j,onSuccess:z,abortController:U}=D,q=!1===O&&!y.i(self)&&!y.g(R.url)&&(!R.headers||Object.keys(R.headers).reduce((re,oe)=>re&&"accept"===oe,!0));u++;const ne=q?I(R,U):y.m(R,U);try{const re=yield ne;delete D.abortController,D.state="completed",re.data instanceof HTMLImageElement||y.b(re.data)?z(re):re.data&&z({data:yield(ee=re.data,"function"==typeof createImageBitmap?y.f(ee):y.h(ee)),cacheControl:re.cacheControl,expires:re.expires})}catch(re){delete D.abortController,j(re)}finally{u--,E()}var ee}),E=()=>{const D=(()=>{for(const R of Object.keys(m))if(m[R]())return!0;return!1})()?y.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:y.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let R=u;R<D&&o.length>0;R++){const O=o.shift();O.abortController.signal.aborted?R--:b(O)}},I=(D,R)=>new Promise((O,j)=>{const z=new Image,U=D.url,q=D.credentials;q&&"include"===q?z.crossOrigin="use-credentials":(q&&"same-origin"===q||!y.d(U))&&(z.crossOrigin="anonymous"),R.signal.addEventListener("abort",()=>{z.src="",j(y.c())}),z.fetchPriority="high",z.onload=()=>{z.onerror=z.onload=null,O({data:z})},z.onerror=()=>{z.onerror=z.onload=null,R.signal.aborted||j(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},z.src=U})}(Uo||(Uo={})),Uo.resetRequestQueue();class Ls{constructor(o){this._transformRequestFn=o??null}transformRequest(o,u){return this._transformRequestFn&&this._transformRequestFn(o,u)||{url:o}}setTransformRequest(o){this._transformRequestFn=o}}function xo(v){const o=[];if("string"==typeof v)o.push({id:"default",url:v});else if(v&&v.length>0){const u=[];for(const{id:p,url:m}of v){const b=`${p}${m}`;-1===u.indexOf(b)&&(u.push(b),o.push({id:p,url:m}))}}return o}function kc(v,o,u){try{const p=new URL(v);return p.pathname+=`${o}${u}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Qa(v){const{userImage:o}=v;return!!(o&&o.render&&o.render())&&(v.data.replace(new Uint8Array(o.data.buffer)),!0)}class Pc extends y.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new y.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(o){if(this.loaded!==o&&(this.loaded=o,o)){for(const{ids:u,promiseResolve:p}of this.requestors)p(this._getImagesForIds(u));this.requestors=[]}}getImage(o){const u=this.images[o];if(u&&!u.data&&u.spriteData){const p=u.spriteData;u.data=new y.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),u.spriteData=null}return u}addImage(o,u){if(this.images[o])throw new Error(`Image id ${o} already exist, use updateImage instead`);this._validate(o,u)&&(this.images[o]=u)}_validate(o,u){let p=!0;const m=u.data||u.spriteData;return this._validateStretch(u.stretchX,m&&m.width)||(this.fire(new y.k(new Error(`Image "${o}" has invalid "stretchX" value`))),p=!1),this._validateStretch(u.stretchY,m&&m.height)||(this.fire(new y.k(new Error(`Image "${o}" has invalid "stretchY" value`))),p=!1),this._validateContent(u.content,u)||(this.fire(new y.k(new Error(`Image "${o}" has invalid "content" value`))),p=!1),p}_validateStretch(o,u){if(!o)return!0;let p=0;for(const m of o){if(m[0]<p||m[1]<m[0]||u<m[1])return!1;p=m[1]}return!0}_validateContent(o,u){if(!o)return!0;if(4!==o.length)return!1;const p=u.spriteData,m=p&&p.width||u.data.width,b=p&&p.height||u.data.height;return!(o[0]<0||m<o[0]||o[1]<0||b<o[1]||o[2]<0||m<o[2]||o[3]<0||b<o[3]||o[2]<o[0]||o[3]<o[1])}updateImage(o,u,p=!0){const m=this.getImage(o);if(p&&(m.data.width!==u.data.width||m.data.height!==u.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[o]=u,this.updatedImages[o]=!0}removeImage(o){const u=this.images[o];delete this.images[o],delete this.patterns[o],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(o){return new Promise((u,p)=>{let m=!0;if(!this.isLoaded())for(const b of o)this.images[b]||(m=!1);this.isLoaded()||m?u(this._getImagesForIds(o)):this.requestors.push({ids:o,promiseResolve:u})})}_getImagesForIds(o){const u={};for(const p of o){let m=this.getImage(p);m||(this.fire(new y.l("styleimagemissing",{id:p})),m=this.getImage(p)),m?u[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!(!m.userImage||!m.userImage.render)}:y.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:o,height:u}=this.atlasImage;return{width:o,height:u}}getPattern(o){const u=this.patterns[o],p=this.getImage(o);if(!p)return null;if(u&&u.position.version===p.version)return u.position;if(u)u.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},b=new y.I(m,p);this.patterns[o]={bin:m,position:b}}return this._updatePatternAtlas(),this.patterns[o].position}bind(o){const u=o.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new y.T(o,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const o=[];for(const b in this.patterns)o.push(this.patterns[b].bin);const{w:u,h:p}=y.p(o),m=this.atlasImage;m.resize({width:u||1,height:p||1});for(const b in this.patterns){const{bin:E}=this.patterns[b],I=E.x+1,D=E.y+1,R=this.getImage(b).data,O=R.width,j=R.height;y.R.copy(R,m,{x:0,y:0},{x:I,y:D},{width:O,height:j}),y.R.copy(R,m,{x:0,y:j-1},{x:I,y:D-1},{width:O,height:1}),y.R.copy(R,m,{x:0,y:0},{x:I,y:D+j},{width:O,height:1}),y.R.copy(R,m,{x:O-1,y:0},{x:I-1,y:D},{width:1,height:j}),y.R.copy(R,m,{x:0,y:0},{x:I+O,y:D},{width:1,height:j})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(o){for(const u of o){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const p=this.getImage(u);p||y.w(`Image with ID: "${u}" was not found`),Qa(p)&&this.updateImage(u,p)}}}const $o=1e20;function Ja(v,o,u,p,m,b,E,I,D){for(let R=o;R<o+p;R++)wo(v,u*b+R,b,m,E,I,D);for(let R=u;R<u+m;R++)wo(v,R*b+o,1,p,E,I,D)}function wo(v,o,u,p,m,b,E){b[0]=0,E[0]=-$o,E[1]=$o,m[0]=v[o];for(let I=1,D=0,R=0;I<p;I++){m[I]=v[o+I*u];const O=I*I;do{const j=b[D];R=(m[I]-m[j]+O-j*j)/(I-j)/2}while(R<=E[D]&&--D>-1);D++,b[D]=I,E[D]=R,E[D+1]=$o}for(let I=0,D=0;I<p;I++){for(;E[D+1]<I;)D++;const R=b[D],O=I-R;v[o+I*u]=m[R]+O*O}}class So{constructor(o,u){this.requestManager=o,this.localIdeographFontFamily=u,this.entries={}}setURL(o){this.url=o}getGlyphs(o){return y._(this,void 0,void 0,function*(){const u=[];for(const b in o)for(const E of o[b])u.push(this._getAndCacheGlyphsPromise(b,E));const p=yield Promise.all(u),m={};for(const{stack:b,id:E,glyph:I}of p)m[b]||(m[b]={}),m[b][E]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return m})}_getAndCacheGlyphsPromise(o,u){return y._(this,void 0,void 0,function*(){let p=this.entries[o];p||(p=this.entries[o]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[u];if(void 0!==m)return{stack:o,id:u,glyph:m};if(m=this._tinySDF(p,o,u),m)return p.glyphs[u]=m,{stack:o,id:u,glyph:m};const b=Math.floor(u/256);if(256*b>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[b])return{stack:o,id:u,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[b]){const I=So.loadGlyphRange(o,b,this.url,this.requestManager);p.requests[b]=I}const E=yield p.requests[b];for(const I in E)this._doesCharSupportLocalGlyph(+I)||(p.glyphs[+I]=E[+I]);return p.ranges[b]=!0,{stack:o,id:u,glyph:E[u]||null}})}_doesCharSupportLocalGlyph(o){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(o))||y.u["CJK Unified Ideographs"](o)||y.u["Hangul Syllables"](o)||y.u.Hiragana(o)||y.u.Katakana(o)||y.u["CJK Symbols and Punctuation"](o)||y.u["Halfwidth and Fullwidth Forms"](o))}_tinySDF(o,u,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let b=o.tinySDF;if(!b){let I="400";/bold/i.test(u)?I="900":/medium/i.test(u)?I="500":/light/i.test(u)&&(I="200"),b=o.tinySDF=new So.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:I})}const E=b.draw(String.fromCharCode(p));return{id:p,bitmap:new y.q({width:E.width||60,height:E.height||60},E.data),metrics:{width:E.glyphWidth/2||24,height:E.glyphHeight/2||24,left:E.glyphLeft/2+.5||0,top:E.glyphTop/2-27.5||-8,advance:E.glyphAdvance/2||24,isDoubleResolution:!0}}}}So.loadGlyphRange=function(v,o,u,p){return y._(this,void 0,void 0,function*(){const m=256*o,b=m+255,E=p.transformRequest(u.replace("{fontstack}",v).replace("{range}",`${m}-${b}`),"Glyphs"),I=yield y.n(E,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${o}, ${m}-${b}`);const D={};for(const R of y.o(I.data))D[R.id]=R;return D})},So.TinySDF=class{constructor({fontSize:v=24,buffer:o=3,radius:u=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:b="normal",fontStyle:E="normal",lang:I=null}={}){this.buffer=o,this.cutoff=p,this.radius=u,this.lang=I;const D=this.size=v+4*o,R=this._createCanvas(D),O=this.ctx=R.getContext("2d",{willReadFrequently:!0});O.font=`${E} ${b} ${v}px ${m}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(D*D),this.gridInner=new Float64Array(D*D),this.f=new Float64Array(D),this.z=new Float64Array(D+1),this.v=new Uint16Array(D)}_createCanvas(v){const o=document.createElement("canvas");return o.width=o.height=v,o}draw(v){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:b}=this.ctx.measureText(v),E=Math.ceil(u),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-m))),D=Math.min(this.size-this.buffer,E+Math.ceil(p)),R=I+2*this.buffer,O=D+2*this.buffer,j=Math.max(R*O,0),z=new Uint8ClampedArray(j),U={data:z,width:R,height:O,glyphWidth:I,glyphHeight:D,glyphTop:E,glyphLeft:0,glyphAdvance:o};if(0===I||0===D)return U;const{ctx:q,buffer:ne,gridInner:ee,gridOuter:re}=this;this.lang&&(q.lang=this.lang),q.clearRect(ne,ne,I,D),q.fillText(v,ne,ne+E);const oe=q.getImageData(ne,ne,I,D);re.fill($o,0,j),ee.fill(0,0,j);for(let ue=0;ue<D;ue++)for(let ae=0;ae<I;ae++){const fe=oe.data[4*(ue*I+ae)+3]/255;if(0===fe)continue;const ge=(ue+ne)*R+ae+ne;if(1===fe)re[ge]=0,ee[ge]=$o;else{const le=.5-fe;re[ge]=le>0?le*le:0,ee[ge]=le<0?le*le:0}}Ja(re,0,0,R,O,R,this.f,this.v,this.z),Ja(ee,ne,ne,I,D,R,this.f,this.v,this.z);for(let ue=0;ue<j;ue++){const ae=Math.sqrt(re[ue])-Math.sqrt(ee[ue]);z[ue]=Math.round(255-255*(ae/this.radius+this.cutoff))}return U}};class _a{constructor(){this.specification=y.v.light.position}possiblyEvaluate(o,u){return y.B(o.expression.evaluate(u))}interpolate(o,u,p){return{x:y.C.number(o.x,u.x,p),y:y.C.number(o.y,u.y,p),z:y.C.number(o.z,u.z,p)}}}let Os;class ds extends y.E{constructor(o){super(),Os=Os||new y.r({anchor:new y.D(y.v.light.anchor),position:new _a,color:new y.D(y.v.light.color),intensity:new y.D(y.v.light.intensity)}),this._transitionable=new y.t(Os),this.setLight(o),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(o,u={}){if(!this._validate(y.x,o,u))for(const p in o){const m=o[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,u,p){return(!p||!1!==p.validate)&&y.y(this,o.call(y.z,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:y.v}))}}const el=new y.r({"sky-color":new y.D(y.v.sky["sky-color"]),"horizon-color":new y.D(y.v.sky["horizon-color"]),"fog-color":new y.D(y.v.sky["fog-color"]),"fog-ground-blend":new y.D(y.v.sky["fog-ground-blend"]),"horizon-fog-blend":new y.D(y.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new y.D(y.v.sky["sky-horizon-blend"]),"atmosphere-blend":new y.D(y.v.sky["atmosphere-blend"])});class Ac extends y.E{constructor(o){super(),this._transitionable=new y.t(el),this.setSky(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new y.F(0))}setSky(o,u={}){if(!this._validate(y.G,o,u)){o||(o={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in o){const m=o[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}_validate(o,u,p={}){return!1!==p?.validate&&y.y(this,o.call(y.z,y.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:y.v})))}calculateFogBlendOpacity(o){return o<60?0:o<70?(o-60)/10:1}}class En{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(o,u){const p=o.join(",")+String(u);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(o,u)),this.dashEntry[p]}getDashRanges(o,u,p){const m=[];let b=o.length%2==1?-o[o.length-1]*p:0,E=o[0]*p,I=!0;m.push({left:b,right:E,isDash:I,zeroLength:0===o[0]});let D=o[0];for(let R=1;R<o.length;R++){I=!I;const O=o[R];b=D*p,D+=O,E=D*p,m.push({left:b,right:E,isDash:I,zeroLength:0===O})}return m}addRoundDash(o,u,p){const m=u/2;for(let b=-p;b<=p;b++){const E=this.width*(this.nextRow+p+b);let I=0,D=o[I];for(let R=0;R<this.width;R++){R/D.right>1&&(D=o[++I]);const O=Math.abs(R-D.left),j=Math.abs(R-D.right),z=Math.min(O,j);let U;const q=b/p*(m+1);if(D.isDash){const ne=m-Math.abs(q);U=Math.sqrt(z*z+ne*ne)}else U=m-Math.sqrt(z*z+q*q);this.data[E+R]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(o){for(let I=o.length-1;I>=0;--I){const D=o[I],R=o[I+1];D.zeroLength?o.splice(I,1):R&&R.isDash===D.isDash&&(R.left=D.left,o.splice(I,1))}const u=o[0],p=o[o.length-1];u.isDash===p.isDash&&(u.left=p.left-this.width,p.right=u.right+this.width);const m=this.width*this.nextRow;let b=0,E=o[b];for(let I=0;I<this.width;I++){I/E.right>1&&(E=o[++b]);const D=Math.abs(I-E.left),R=Math.abs(I-E.right),O=Math.min(D,R);this.data[m+I]=Math.max(0,Math.min(255,(E.isDash?O:-O)+128))}}addDash(o,u){const p=u?7:0,m=2*p+1;if(this.nextRow+m>this.height)return y.w("LineAtlas out of space"),null;let b=0;for(let I=0;I<o.length;I++)b+=o[I];if(0!==b){const I=this.width/b,D=this.getDashRanges(o,this.width,I);u?this.addRoundDash(D,I,p):this.addRegularDash(D)}const E={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:b};return this.nextRow+=m,this.dirty=!0,E}bind(o){const u=o.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const ya="maplibre_preloaded_worker_pool";class Qi{constructor(){this.active={}}acquire(o){if(!this.workers)for(this.workers=[];this.workers.length<Qi.workerCount;)this.workers.push(new Worker(y.a.WORKER_URL));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],0===this.numActive()&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ya]}numActive(){return Object.keys(this.active).length}}const Pl=Math.floor(Dt.hardwareConcurrency/2);let Fs,ho;function Go(){return Fs||(Fs=new Qi),Fs}Qi.workerCount=y.H(globalThis)?Math.max(Math.min(Pl,3),1):1;class Nr{constructor(o,u){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=u;const p=this.workerPool.acquire(u);for(let m=0;m<p.length;m++){const b=new y.J(p[m],u);b.name=`Worker ${m}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(o,u){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:o,data:u}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(o=!0){this.actors.forEach(u=>{u.remove()}),this.actors=[],o&&this.workerPool.release(this.id)}registerMessageHandler(o,u){for(const p of this.actors)p.registerMessageHandler(o,u)}}function Rc(){return ho||(ho=new Nr(Go(),y.K),ho.registerMessageHandler("GR",(v,o,u)=>y.m(o,u))),ho}function Ho(v,o){const u=y.L();return y.M(u,u,[1,1,0]),y.N(u,u,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?y.O(u,u,v.calculatePosMatrix(o.toUnwrapped())):u}function qo(v,o,u,p,m,b,E){var I;const D=function(z,U,q){if(z)for(const ne of z){const ee=U[ne];if(ee&&ee.source===q&&"fill-extrusion"===ee.type)return!0}else for(const ne in U){const ee=U[ne];if(ee.source===q&&"fill-extrusion"===ee.type)return!0}return!1}(null!==(I=m?.layers)&&void 0!==I?I:null,o,v.id),R=b.maxPitchScaleFactor(),O=v.tilesIn(p,R,D);O.sort(Al);const j=[];for(const z of O)j.push({wrappedTileID:z.tileID.wrapped().key,queryResults:z.tile.queryRenderedFeatures(o,u,v._state,z.queryGeometry,z.cameraQueryGeometry,z.scale,m,b,R,Ho(v.transform,z.tileID),E?(U,q)=>E(z.tileID,U,q):void 0)});return function(z,U){for(const q in z)for(const ne of z[q])Nc(ne,U);return z}(function(z){const U={},q={};for(const ne of z){const ee=ne.queryResults,re=ne.wrappedTileID,oe=q[re]=q[re]||{};for(const ue in ee){const ae=ee[ue],fe=oe[ue]=oe[ue]||{},ge=U[ue]=U[ue]||[];for(const le of ae)fe[le.featureIndex]||(fe[le.featureIndex]=!0,ge.push(le))}}return U}(j),v)}function Al(v,o){const u=v.tileID,p=o.tileID;return u.overscaledZ-p.overscaledZ||u.canonical.y-p.canonical.y||u.wrap-p.wrap||u.canonical.x-p.canonical.x}function Nc(v,o){const u=v.feature,p=o.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=p}function Li(v,o,u){return y._(this,void 0,void 0,function*(){let p=v;if(v.url?p=(yield y.j(o.transformRequest(v.url,"Source"),u)).data:yield Dt.frameAsync(u),!p)return null;const m=y.Q(y.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map(b=>b.id)),m})}class Ir{constructor(o,u){o&&(u?this.setSouthWest(o).setNorthEast(u):Array.isArray(o)&&(4===o.length?this.setSouthWest([o[0],o[1]]).setNorthEast([o[2],o[3]]):this.setSouthWest(o[0]).setNorthEast(o[1])))}setNorthEast(o){return this._ne=o instanceof y.S?new y.S(o.lng,o.lat):y.S.convert(o),this}setSouthWest(o){return this._sw=o instanceof y.S?new y.S(o.lng,o.lat):y.S.convert(o),this}extend(o){const u=this._sw,p=this._ne;let m,b;if(o instanceof y.S)m=o,b=o;else{if(!(o instanceof Ir))return Array.isArray(o)?4===o.length||o.every(Array.isArray)?this.extend(Ir.convert(o)):this.extend(y.S.convert(o)):o&&("lng"in o||"lon"in o)&&"lat"in o?this.extend(y.S.convert(o)):this;if(m=o._sw,b=o._ne,!m||!b)return this}return u||p?(u.lng=Math.min(m.lng,u.lng),u.lat=Math.min(m.lat,u.lat),p.lng=Math.max(b.lng,p.lng),p.lat=Math.max(b.lat,p.lat)):(this._sw=new y.S(m.lng,m.lat),this._ne=new y.S(b.lng,b.lat)),this}getCenter(){return new y.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new y.S(this.getWest(),this.getNorth())}getSouthEast(){return new y.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:p}=y.S.convert(o);let m=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(o){return o instanceof Ir?o:o&&new Ir(o)}static fromLngLat(o,u=0){const p=360*u/40075017,m=p/Math.cos(Math.PI/180*o.lat);return new Ir(new y.S(o.lng-m,o.lat-p),new y.S(o.lng+m,o.lat+p))}adjustAntiMeridian(){const o=new y.S(this._sw.lng,this._sw.lat),u=new y.S(this._ne.lng,this._ne.lat);return new Ir(o,o.lng>u.lng?new y.S(u.lng+360,u.lat):u)}}class Wr{constructor(o,u,p){this.bounds=Ir.convert(this.validateBounds(o)),this.minzoom=u||0,this.maxzoom=p||24}validateBounds(o){return Array.isArray(o)&&4===o.length?[Math.max(-180,o[0]),Math.max(-90,o[1]),Math.min(180,o[2]),Math.min(90,o[3])]:[-180,-90,180,90]}contains(o){const u=Math.pow(2,o.z),p=Math.floor(y.V(this.bounds.getWest())*u),m=Math.floor(y.U(this.bounds.getNorth())*u),b=Math.ceil(y.V(this.bounds.getEast())*u),E=Math.ceil(y.U(this.bounds.getSouth())*u);return o.x>=p&&o.x<b&&o.y>=m&&o.y<E}}class hs extends y.E{constructor(o,u,p,m){if(super(),this.id=o,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,y.e(this,y.Q(u,["url","scheme","tileSize","promoteId"])),this._options=y.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return y._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new y.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const o=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),o&&(y.e(this,o),o.bounds&&(this.tileBounds=new Wr(o.bounds,this.minzoom,this.maxzoom)),this.fire(new y.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.l("data",{dataType:"source",sourceDataType:"content"})))}catch(o){this._tileJSONRequest=null,this.fire(new y.k(o))}})}loaded(){return this._loaded}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}onAdd(o){this.map=o,this.load()}setSourceProperty(o){this._tileJSONRequest&&this._tileJSONRequest.abort(),o(),this.load()}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return y.e({},this._options)}loadTile(o){return y._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(u,"Tile"),uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,tileSize:this.tileSize*o.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(o.actor&&"expired"!==o.state){if("loading"===o.state)return new Promise((b,E)=>{o.reloadPromise={resolve:b,reject:E}})}else o.actor=this.dispatcher.getActor(),m="LT";o.abortController=new AbortController;try{const b=yield o.actor.sendAsync({type:m,data:p},o.abortController);if(delete o.abortController,o.aborted)return;this._afterTileLoadWorkerResponse(o,b)}catch(b){if(delete o.abortController,o.aborted)return;if(b&&404!==b.status)throw b;this._afterTileLoadWorkerResponse(o,null)}})}_afterTileLoadWorkerResponse(o,u){if(u&&u.resourceTiming&&(o.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&o.setExpiryData(u),o.loadVectorData(u,this.map.painter),o.reloadPromise){const p=o.reloadPromise;o.reloadPromise=null,this.loadTile(o).then(p.resolve).catch(p.reject)}}abortTile(o){return y._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.actor&&(yield o.actor.sendAsync({type:"AT",data:{uid:o.uid,type:this.type,source:this.id}}))})}unloadTile(o){return y._(this,void 0,void 0,function*(){o.unloadVectorData(),o.actor&&(yield o.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Eo extends y.E{constructor(o,u,p,m){super(),this.id=o,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=y.e({type:"raster"},u),y.e(this,y.Q(u,["url","scheme","tileSize"]))}load(){return y._(this,arguments,void 0,function*(o=!1){this._loaded=!1,this.fire(new y.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Li(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,u&&(y.e(this,u),u.bounds&&(this.tileBounds=new Wr(u.bounds,this.minzoom,this.maxzoom)),this.fire(new y.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new y.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:o})))}catch(u){this._tileJSONRequest=null,this.fire(new y.k(u))}})}loaded(){return this._loaded}onAdd(o){this.map=o,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(o){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),o(),this.load(!0)}setTiles(o){return this.setSourceProperty(()=>{this._options.tiles=o}),this}setUrl(o){return this.setSourceProperty(()=>{this.url=o,this._options.url=o}),this}serialize(){return y.e({},this._options)}hasTile(o){return!this.tileBounds||this.tileBounds.contains(o.canonical)}loadTile(o){return y._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);o.abortController=new AbortController;try{const p=yield Uo.getImage(this.map._requestManager.transformRequest(u,"Tile"),o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&o.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,b=m.gl,E=p.data;o.texture=this.map.painter.getTileTexture(E.width),o.texture?o.texture.update(E,{useMipmap:!0}):(o.texture=new y.T(m,E,b.RGBA,{useMipmap:!0}),o.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),o.state="loaded"}}catch(p){if(delete o.abortController,o.aborted)o.state="unloaded";else if(p)throw o.state="errored",p}})}abortTile(o){return y._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController)})}unloadTile(o){return y._(this,void 0,void 0,function*(){o.texture&&this.map.painter.saveTileTexture(o.texture)})}hasTransition(){return!1}}class tl extends Eo{constructor(o,u,p,m){super(o,u,p,m),this.type="raster-dem",this.maxzoom=22,this._options=y.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(o){return y._(this,void 0,void 0,function*(){const u=o.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(u,"Tile");o.neighboringTiles=this._getNeighboringTiles(o.tileID),o.abortController=new AbortController;try{const m=yield Uo.getImage(p,o.abortController,this.map._refreshExpiredTiles);if(delete o.abortController,o.aborted)return void(o.state="unloaded");if(m&&m.data){const b=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&o.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const E=y.b(b)&&y.W()?b:yield this.readImageNow(b),I={type:this.type,uid:o.uid,source:this.id,rawImageData:E,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!o.actor||"expired"===o.state){o.actor=this.dispatcher.getActor();const D=yield o.actor.sendAsync({type:"LDT",data:I});o.dem=D,o.needsHillshadePrepare=!0,o.needsTerrainPrepare=!0,o.state="loaded"}}}catch(m){if(delete o.abortController,o.aborted)o.state="unloaded";else if(m)throw o.state="errored",m}})}readImageNow(o){return y._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&y.X()){const u=o.width+2,p=o.height+2;try{return new y.R({width:u,height:p},yield y.Y(o,-1,-1,u,p))}catch{}}return Dt.getImageData(o,1)})}_getNeighboringTiles(o){const u=o.canonical,p=Math.pow(2,u.z),m=(u.x-1+p)%p,b=0===u.x?o.wrap-1:o.wrap,E=(u.x+1+p)%p,I=u.x+1===p?o.wrap+1:o.wrap,D={};return D[new y.Z(o.overscaledZ,b,u.z,m,u.y).key]={backfilled:!1},D[new y.Z(o.overscaledZ,I,u.z,E,u.y).key]={backfilled:!1},u.y>0&&(D[new y.Z(o.overscaledZ,b,u.z,m,u.y-1).key]={backfilled:!1},D[new y.Z(o.overscaledZ,o.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},D[new y.Z(o.overscaledZ,I,u.z,E,u.y-1).key]={backfilled:!1}),u.y+1<p&&(D[new y.Z(o.overscaledZ,b,u.z,m,u.y+1).key]={backfilled:!1},D[new y.Z(o.overscaledZ,o.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},D[new y.Z(o.overscaledZ,I,u.z,E,u.y+1).key]={backfilled:!1}),D}unloadTile(o){return y._(this,void 0,void 0,function*(){o.demTexture&&this.map.painter.saveTileTexture(o.demTexture),o.fbo&&(o.fbo.destroy(),delete o.fbo),o.dem&&delete o.dem,delete o.neighboringTiles,o.state="unloaded",o.actor&&(yield o.actor.sendAsync({type:"RDT",data:{type:this.type,uid:o.uid,source:this.id}}))})}}class va extends y.E{constructor(o,u,p,m){super(),this.id=o,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=p.getActor(),this.setEventedParent(m),this._data=u.data,this._options=y.e({},u),this._collectResourceTiming=u.collectResourceTiming,void 0!==u.maxzoom&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,void 0!==u.clusterMaxZoom&&this.maxzoom<=u.clusterMaxZoom&&y.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=y.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==u.buffer?u.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==u.tolerance?u.tolerance:.375),extent:y.$,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:y.$,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(o){return o*(y.$/this.tileSize)}_getClusterMaxZoom(o){const u=o?Math.round(o):this.maxzoom-1;return Number.isInteger(o)||void 0===o||y.w(`Integer expected for option 'clusterMaxZoom': provided value "${o}" rounded to "${u}"`),u}load(){return y._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(o){this.map=o,this.load()}setData(o){return this._data=o,this._pendingWorkerUpdate={data:o},this._updateWorkerData(),this}updateData(o){return this._pendingWorkerUpdate.diff=y.a0(this._pendingWorkerUpdate.diff,o),this._updateWorkerData(),this}getData(){return y._(this,void 0,void 0,function*(){const o=y.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:o})})}getCoordinatesFromGeometry(o){return"GeometryCollection"===o.type?o.geometries.map(u=>u.coordinates).flat(1/0):o.coordinates.flat(1/0)}getBounds(){return y._(this,void 0,void 0,function*(){const o=new Ir,u=yield this.getData();let p;switch(u.type){case"FeatureCollection":p=u.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(u.geometry);break;default:p=this.getCoordinatesFromGeometry(u)}if(0==p.length)return o;for(let m=0;m<p.length-1;m+=2)o.extend([p[m],p[m+1]]);return o})}setClusterOptions(o){return this.workerOptions.cluster=o.cluster,o&&(void 0!==o.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(o.clusterRadius)),void 0!==o.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(o.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(o){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:o,source:this.id}})}getClusterChildren(o){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:o,source:this.id}})}getClusterLeaves(o,u,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:o,limit:u,offset:p}})}_updateWorkerData(){return y._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;const{data:o,diff:u}=this._pendingWorkerUpdate;if(!o&&!u)return void y.w(`No data or diff provided to GeoJSONSource ${this.id}.`);const p=y.e({type:this.type},this.workerOptions);o?("string"==typeof o?(p.request=this.map._requestManager.transformRequest(Dt.resolveURL(o),"Source"),p.request.collectResourceTiming=this._collectResourceTiming):p.data=JSON.stringify(o),this._pendingWorkerUpdate.data=void 0):u&&(p.dataDiff=u,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new y.l("dataloading",{dataType:"source"}));try{const m=yield this.actor.sendAsync({type:"LD",data:p});if(this._isUpdatingWorker=!1,this._removed||m.abandoned)return void this.fire(new y.l("dataabort",{dataType:"source"}));this._data=m.data;let b=null;m.resourceTiming&&m.resourceTiming[this.id]&&(b=m.resourceTiming[this.id].slice(0));const E={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&y.e(E,{resourceTiming:b}),this.fire(new y.l("data",Object.assign(Object.assign({},E),{sourceDataType:"metadata"}))),this.fire(new y.l("data",Object.assign(Object.assign({},E),{sourceDataType:"content"})))}catch(m){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new y.l("dataabort",{dataType:"source"}));this.fire(new y.k(m))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&void 0===this._pendingWorkerUpdate.data&&void 0===this._pendingWorkerUpdate.diff}loadTile(o){return y._(this,void 0,void 0,function*(){const u=o.actor?"RT":"LT";o.actor=this.actor;const p={type:this.type,uid:o.uid,tileID:o.tileID,zoom:o.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};o.abortController=new AbortController;const m=yield this.actor.sendAsync({type:u,data:p},o.abortController);delete o.abortController,o.unloadVectorData(),o.aborted||o.loadVectorData(m,this.map.painter,"RT"===u)})}abortTile(o){return y._(this,void 0,void 0,function*(){o.abortController&&(o.abortController.abort(),delete o.abortController),o.aborted=!0})}unloadTile(o){return y._(this,void 0,void 0,function*(){o.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:o.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return y.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Wo extends y.E{constructor(o,u,p,m){super(),this.flippedWindingOrder=!1,this.id=o,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=u}load(o){return y._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new y.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield Uo.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,o&&(this.coordinates=o),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,this.fire(new y.k(u))}})}loaded(){return this._loaded}updateImage(o){return o.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=o.url,this.load(o.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new y.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(o){this.coordinates=o;const u=o.map(y.a1.fromLngLat);var p;return this.tileID=function(m){const b=y.a2.fromPoints(m),E=b.width(),I=b.height(),D=Math.max(E,I),R=Math.max(0,Math.floor(-Math.log(D)/Math.LN2)),O=Math.pow(2,R);return new y.a4(R,Math.floor((b.minX+b.maxX)/2*O),Math.floor((b.minY+b.maxY)/2*O))}(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new y.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const o=this.map.painter.context,u=o.gl;this.texture||(this.texture=new y.T(o,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture,p=!0)}p&&this.fire(new y.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(o){return y._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={}):o.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(o){const{minX:u,minY:p,maxX:m,maxY:b}=y.a2.fromPoints(o),E={};for(let I=0;I<=y.a3;I++){const D=Math.pow(2,I),R=Math.floor(u*D),O=Math.floor(p*D),j=Math.floor(m*D),z=Math.floor(b*D);E[I]={minTileX:R,minTileY:O,maxTileX:j,maxTileY:z}}return E}}class Lc extends Wo{constructor(o,u,p,m){super(o,u,p,m),this.roundZoom=!0,this.type="video",this.options=u}load(){return y._(this,void 0,void 0,function*(){this._loaded=!1;const o=this.options;this.urls=[];for(const u of o.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield y.a5(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new y.k(u))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(o){if(this.video){const u=this.video.seekable;o<u.start(0)||o>u.end(0)?this.fire(new y.k(new y.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=o}}getVideo(){return this.video}onAdd(o){this.map||(this.map=o,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const o=this.map.painter.context,u=o.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new y.T(o,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const b=this.tiles[m];"loaded"!==b.state&&(b.state="loaded",b.texture=this.texture,p=!0)}p&&this.fire(new y.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class An extends Wo{constructor(o,u,p,m){super(o,u,p,m),u.coordinates?Array.isArray(u.coordinates)&&4===u.coordinates.length&&!u.coordinates.some(b=>!Array.isArray(b)||2!==b.length||b.some(E=>"number"!=typeof E))||this.fire(new y.k(new y.a6(`sources.${o}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new y.k(new y.a6(`sources.${o}`,null,'missing required property "coordinates"'))),u.animate&&"boolean"!=typeof u.animate&&this.fire(new y.k(new y.a6(`sources.${o}`,null,'optional "animate" property must be a boolean value'))),u.canvas?"string"==typeof u.canvas||u.canvas instanceof HTMLCanvasElement||this.fire(new y.k(new y.a6(`sources.${o}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new y.k(new y.a6(`sources.${o}`,null,'missing required property "canvas"'))),this.options=u,this.animate=void 0===u.animate||u.animate}load(){return y._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new y.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(o){this.map=o,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let o=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,o=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,o=!0),this._hasInvalidDimensions()||0===Object.keys(this.tiles).length)return;const u=this.map.painter.context,p=u.gl;this.texture?(o||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new y.T(u,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const b in this.tiles){const E=this.tiles[b];"loaded"!==E.state&&(E.state="loaded",E.texture=this.texture,m=!0)}m&&this.fire(new y.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const o of[this.canvas.width,this.canvas.height])if(isNaN(o)||o<=0)return!0;return!1}}const Bs={},zs=v=>{switch(v){case"geojson":return va;case"image":return Wo;case"raster":return Eo;case"raster-dem":return tl;case"vector":return hs;case"video":return Lc;case"canvas":return An}return Bs[v]},ba="RTLPluginLoaded";class Mr extends y.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rc()}_syncState(o){return this.status=o,this.dispatcher.broadcast("SRPS",{pluginStatus:o,pluginURL:this.url}).catch(u=>{throw this.status="error",u})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(o){return y._(this,arguments,void 0,function*(u,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=Dt.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if("unavailable"===this.status){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()})}_requestImport(){return y._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new y.l(ba))})}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let xa=null;function wa(){return xa||(xa=new Mr),xa}class Rl{constructor(o,u){this.timeAdded=0,this.fadeEndTime=0,this.tileID=o,this.uid=y.a7(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(o){const u=o+this.timeAdded;u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(o){this.demTexture&&o.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(o,u,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",o){o.featureIndex&&(this.latestFeatureIndex=o.featureIndex,o.rawTileData?(this.latestRawTileData=o.rawTileData,this.latestFeatureIndex.rawTileData=o.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=o.collisionBoxArray,this.buckets=function(m,b){const E={};if(!b)return E;for(const I of m){const D=I.layerIds.map(R=>b.getLayer(R)).filter(Boolean);if(0!==D.length){I.layers=D,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(R=>D.filter(O=>O.id===R)[0]));for(const R of D)E[R.id]=I}}return E}(o.buckets,u?.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const b=this.buckets[m];if(b instanceof y.a9){if(this.hasSymbolBuckets=!0,!p)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const b=this.buckets[m];if(b instanceof y.a9&&b.hasRTLText){this.hasRTLText=!0,wa().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const b=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(m).queryRadius(b))}o.imageAtlas&&(this.imageAtlas=o.imageAtlas),o.glyphAtlasImage&&(this.glyphAtlasImage=o.glyphAtlasImage)}else this.collisionBoxArray=new y.a8}unloadVectorData(){for(const o in this.buckets)this.buckets[o].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(o){return this.buckets[o.id]}upload(o){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(o)}const u=o.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new y.T(o,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new y.T(o,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(o){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(o,this.imageAtlasTexture)}queryRenderedFeatures(o,u,p,m,b,E,I,D,R,O,j){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:b,scale:E,tileSize:this.tileSize,pixelPosMatrix:O,transform:D,params:I,queryPadding:this.queryPadding*R,getElevation:j},o,u,p):{}}querySourceFeatures(o,u){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),b=u&&u.sourceLayer?u.sourceLayer:"",E=m._geojsonTileLayer||m[b];if(!E)return;const I=y.aa(u&&u.filter),{z:D,x:R,y:O}=this.tileID.canonical,j={z:D,x:R,y:O};for(let z=0;z<E.length;z++){const U=E.feature(z);if(I.needGeometry){const ee=y.ab(U,!0);if(!I.filter(new y.F(this.tileID.overscaledZ),ee,this.tileID.canonical))continue}else if(!I.filter(new y.F(this.tileID.overscaledZ),U))continue;const q=p.getId(U,b),ne=new y.ac(U,D,R,O,q);ne.tile=j,o.push(ne)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(o){const u=this.expirationTime;if(o.cacheControl){const p=y.ad(o.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else o.expires&&(this.expirationTime=new Date(o.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(u)if(this.expirationTime<u)m=!0;else{const b=this.expirationTime-u;b?this.expirationTime=p+Math.max(b,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(o,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(o).length)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!u.style.hasLayer(m))continue;const b=this.buckets[m],E=b.layers[0].sourceLayer||"_geojsonTileLayer",I=p[E],D=o[E];if(!I||!D||0===Object.keys(D).length)continue;b.update(D,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});const R=u&&u.style&&u.style.getLayer(m);R&&(this.queryPadding=Math.max(this.queryPadding,R.queryRadius(b)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Dt.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(o){this.symbolFadeHoldUntil=Dt.now()+o}setDependencies(o,u){const p={};for(const m of u)p[m]=!0;this.dependencies[o]=p}hasDependency(o,u){for(const p of o){const m=this.dependencies[p];if(m)for(const b of u)if(m[b])return!0}return!1}}class ye{constructor(o,u){this.max=o,this.onRemove=u,this.reset()}reset(){for(const o in this.data)for(const u of this.data[o])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(o,u,p){const m=o.wrapped().key;void 0===this.data[m]&&(this.data[m]=[]);const b={value:u,timeout:void 0};if(void 0!==p&&(b.timeout=setTimeout(()=>{this.remove(o,b)},p)),this.data[m].push(b),this.order.push(m),this.order.length>this.max){const E=this._getAndRemoveByKey(this.order[0]);E&&this.onRemove(E)}return this}has(o){return o.wrapped().key in this.data}getAndRemove(o){return this.has(o)?this._getAndRemoveByKey(o.wrapped().key):null}_getAndRemoveByKey(o){const u=this.data[o].shift();return u.timeout&&clearTimeout(u.timeout),0===this.data[o].length&&delete this.data[o],this.order.splice(this.order.indexOf(o),1),u.value}getByKey(o){const u=this.data[o];return u?u[0].value:null}get(o){return this.has(o)?this.data[o.wrapped().key][0].value:null}remove(o,u){if(!this.has(o))return this;const p=o.wrapped().key,m=void 0===u?0:this.data[p].indexOf(u),b=this.data[p][m];return this.data[p].splice(m,1),b.timeout&&clearTimeout(b.timeout),0===this.data[p].length&&delete this.data[p],this.onRemove(b.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(o){for(this.max=o;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(o){const u=[];for(const p in this.data)for(const m of this.data[p])o(m.value)||u.push(m);for(const p of u)this.remove(p.value.tileID,p)}}class Z{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(o,u,p){const m=String(u);if(this.stateChanges[o]=this.stateChanges[o]||{},this.stateChanges[o][m]=this.stateChanges[o][m]||{},y.e(this.stateChanges[o][m],p),null===this.deletedStates[o]){this.deletedStates[o]={};for(const b in this.state[o])b!==m&&(this.deletedStates[o][b]=null)}else if(this.deletedStates[o]&&null===this.deletedStates[o][m]){this.deletedStates[o][m]={};for(const b in this.state[o][m])p[b]||(this.deletedStates[o][m][b]=null)}else for(const b in p)this.deletedStates[o]&&this.deletedStates[o][m]&&null===this.deletedStates[o][m][b]&&delete this.deletedStates[o][m][b]}removeFeatureState(o,u,p){if(null===this.deletedStates[o])return;const m=String(u);if(this.deletedStates[o]=this.deletedStates[o]||{},p&&void 0!==u)null!==this.deletedStates[o][m]&&(this.deletedStates[o][m]=this.deletedStates[o][m]||{},this.deletedStates[o][m][p]=null);else if(void 0!==u)if(this.stateChanges[o]&&this.stateChanges[o][m])for(p in this.deletedStates[o][m]={},this.stateChanges[o][m])this.deletedStates[o][m][p]=null;else this.deletedStates[o][m]=null;else this.deletedStates[o]=null}getState(o,u){const p=String(u),m=y.e({},(this.state[o]||{})[p],(this.stateChanges[o]||{})[p]);if(null===this.deletedStates[o])return{};if(this.deletedStates[o]){const b=this.deletedStates[o][u];if(null===b)return{};for(const E in b)delete m[E]}return m}initializeTileState(o,u){o.setFeatureState(this.state,u)}coalesceChanges(o,u){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const b={};for(const E in this.stateChanges[m])this.state[m][E]||(this.state[m][E]={}),y.e(this.state[m][E],this.stateChanges[m][E]),b[E]=this.state[m][E];p[m]=b}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const b={};if(null===this.deletedStates[m])for(const E in this.state[m])b[E]={},this.state[m][E]={};else for(const E in this.deletedStates[m]){if(null===this.deletedStates[m][E])this.state[m][E]={};else for(const I of Object.keys(this.deletedStates[m][E]))delete this.state[m][E][I];b[E]=this.state[m][E]}p[m]=p[m]||{},y.e(p[m],b)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(p).length)for(const m in o)o[m].setFeatureState(p,u)}}const Y=89.25;function X(v,o){const u=y.ah(o.lat,-y.ai,y.ai);return new y.P(y.V(o.lng)*v,y.U(u)*v)}function ce(v,o){return new y.a1(o.x/v,o.y/v).toLngLat()}function me(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(y.ae(90-v.pitch)),Math.tan(y.ae(Y-v.pitch)))}function Se(v,o){const u=v.canonical,p=o/y.af(u.z),m=u.x+Math.pow(2,u.z)*v.wrap,b=y.ag(new Float64Array(16));return y.M(b,b,[m*p,u.y*p,0]),y.N(b,b,[p/y.$,p/y.$,1]),b}function De(v,o,u,p,m){const b=y.a1.fromLngLat(v,o),E=m*y.aj(1,v.lat),I=E*Math.cos(y.ae(u)),D=Math.sqrt(E*E-I*I),R=D*Math.sin(y.ae(-p)),O=D*Math.cos(y.ae(-p));return new y.a1(b.x+R,b.y+O,b.z+I)}function ve(v,o,u){const p=o.intersectsFrustum(v);if(!u||0===p)return p;const m=o.intersectsPlane(u);return 0===m?0:2===p&&2===m?2:1}function Oe(v,o,u){let p=0;const m=(u-o)/10;for(let b=0;b<10;b++)p+=m*Math.pow(Math.cos(o+(b+.5)/10*(u-o)),v);return p}function Ge(v,o){return function(u,p,m,b,E){const I=2*((v-1)/y.ak(Math.cos(y.ae(Y-E))/Math.cos(y.ae(Y)))-1),D=Math.acos(m/b),R=2*Oe(I-1,0,y.ae(E/2)),O=Math.min(y.ae(Y),D+y.ae(E/2)),j=Oe(I-1,Math.min(O,D-y.ae(E/2)),O),z=Math.atan(p/m),U=Math.hypot(p,m);let q=u;return q+=y.ak(b/U/Math.max(.5,Math.cos(y.ae(E/2)))),q+=I*y.ak(Math.cos(z))/2,q-=y.ak(Math.max(1,j/R/o))/2,q}}const je=Ge(9.314,3);function yt(v,o){const u=(o.roundZoom?Math.round:Math.floor)(v.zoom+y.ak(v.tileSize/o.tileSize));return Math.max(0,u)}function Ee(v,o){const u=v.getCameraFrustum(),p=v.getClippingPlane(),m=v.screenPointToMercatorCoordinate(v.getCameraPoint()),b=y.a1.fromLngLat(v.center,v.elevation);m.z=b.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const E=v.getCoveringTilesDetailsProvider(),I=E.allowVariableZoom(v,o),D=yt(v,o),R=o.minzoom||0,O=void 0!==o.maxzoom?o.maxzoom:v.maxZoom,j=Math.min(Math.max(0,D),O),z=Math.pow(2,j),U=[z*m.x,z*m.y,0],q=[z*b.x,z*b.y,0],ne=Math.hypot(b.x-m.x,b.y-m.y),ee=Math.abs(b.z-m.z),re=Math.hypot(ne,ee),oe=fe=>({zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),ue=[],ae=[];if(v.renderWorldCopies&&E.allowWorldCopies())for(let fe=1;fe<=3;fe++)ue.push(oe(-fe)),ue.push(oe(fe));for(ue.push(oe(0));ue.length>0;){const fe=ue.pop(),ge=fe.x,le=fe.y;let be=fe.fullyVisible;const ke={x:ge,y:le,z:fe.zoom},Te=E.getTileBoundingVolume(ke,fe.wrap,v.elevation,o);if(!be){const qe=ve(u,Te,p);if(0===qe)continue;be=2===qe}const Ie=E.distanceToTile2d(m.x,m.y,ke,Te);let Ae=D;I&&(Ae=(o.calculateTileZoom||je)(v.zoom+y.ak(v.tileSize/o.tileSize),Ie,ee,re,v.fov)),Ae=(o.roundZoom?Math.round:Math.floor)(Ae),Ae=Math.max(0,Ae);const We=Math.min(Ae,O);if(fe.wrap=E.getWrap(b,ke,fe.wrap),fe.zoom>=We){if(fe.zoom<R)continue;const qe=j-fe.zoom,Be=U[0]-.5-(ge<<qe),ht=U[1]-.5-(le<<qe),en=o.reparseOverscaled?Math.max(fe.zoom,Ae):fe.zoom;ae.push({tileID:new y.Z(fe.zoom===O?en:fe.zoom,fe.wrap,fe.zoom,ge,le),distanceSq:y.al([q[0]-.5-ge,q[1]-.5-le]),tileDistanceToCamera:Math.sqrt(Be*Be+ht*ht)})}else for(let qe=0;qe<4;qe++)ue.push({zoom:fe.zoom+1,x:(ge<<1)+qe%2,y:(le<<1)+(qe>>1),wrap:fe.wrap,fullyVisible:be})}return ae.sort((fe,ge)=>fe.distanceSq-ge.distanceSq).map(fe=>fe.tileID)}const Ut=y.a2.fromPoints([new y.P(0,0),new y.P(y.$,y.$)]);class sn extends y.E{constructor(o,u,p){super(),this.id=o,this.dispatcher=p,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,b,E,I)=>{const D=new(zs(b.type))(m,b,E,I);if(D.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${D.id}`);return D})(o,u,p,this),this._tiles={},this._cache=new ye(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Z,this._didEmitContent=!1,this._updated=!1}onAdd(o){this.map=o,this._maxTileCacheSize=o?o._maxTileCacheSize:null,this._maxTileCacheZoomLevels=o?o._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(o)}onRemove(o){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(o)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const o in this._tiles){const u=this._tiles[o];if("loaded"!==u.state&&"errored"!==u.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const o=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,o&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(o,u,p){return y._(this,void 0,void 0,function*(){try{yield this._source.loadTile(o),this._tileLoaded(o,u,p)}catch(m){o.state="errored",404!==m.status?this._source.fire(new y.k(m,{tile:o})):this.update(this.transform,this.terrain)}})}_unloadTile(o){this._source.unloadTile&&this._source.unloadTile(o)}_abortTile(o){this._source.abortTile&&this._source.abortTile(o),this._source.fire(new y.l("dataabort",{tile:o,coord:o.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(o){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const p=this._tiles[u];p.upload(o),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(o=>o.tileID).sort(St).map(o=>o.key)}getRenderableIds(o){const u=[];for(const p in this._tiles)this._isIdRenderable(p,o)&&u.push(this._tiles[p]);return o?u.sort((p,m)=>{const b=p.tileID,E=m.tileID,I=new y.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians),D=new y.P(E.canonical.x,E.canonical.y)._rotate(-this.transform.bearingInRadians);return b.overscaledZ-E.overscaledZ||D.y-I.y||D.x-I.x}).map(p=>p.tileID.key):u.map(p=>p.tileID).sort(St).map(p=>p.key)}hasRenderableParent(o){const u=this.findLoadedParent(o,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(o,u){return this._tiles[o]&&this._tiles[o].hasData()&&!this._coveredTiles[o]&&(u||!this._tiles[o].holdingForFade())}reload(o){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const u in this._tiles)o?this._reloadTile(u,"expired"):"errored"!==this._tiles[u].state&&this._reloadTile(u,"reloading")}}_reloadTile(o,u){return y._(this,void 0,void 0,function*(){const p=this._tiles[o];p&&("loading"!==p.state&&(p.state=u),yield this._loadTile(p,o,u))})}_tileLoaded(o,u,p){o.timeAdded=Dt.now(),"expired"===p&&(o.refreshedUponExpiration=!0),this._setTileReloadTimer(u,o),"raster-dem"===this.getSource().type&&o.dem&&this._backfillDEM(o),this._state.initializeTileState(o,this.map?this.map.painter:null),o.aborted||this._source.fire(new y.l("data",{dataType:"source",tile:o,coord:o.tileID}))}_backfillDEM(o){const u=this.getRenderableIds();for(let m=0;m<u.length;m++){const b=u[m];if(o.neighboringTiles&&o.neighboringTiles[b]){const E=this.getTileByID(b);p(o,E),p(E,o)}}function p(m,b){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let E=b.tileID.canonical.x-m.tileID.canonical.x;const I=b.tileID.canonical.y-m.tileID.canonical.y,D=Math.pow(2,m.tileID.canonical.z),R=b.tileID.key;0===E&&0===I||Math.abs(I)>1||(Math.abs(E)>1&&(1===Math.abs(E+D)?E+=D:1===Math.abs(E-D)&&(E-=D)),b.dem&&m.dem&&(m.dem.backfillBorder(b.dem,E,I),m.neighboringTiles&&m.neighboringTiles[R]&&(m.neighboringTiles[R].backfilled=!0)))}}getTile(o){return this.getTileByID(o.key)}getTileByID(o){return this._tiles[o]}_retainLoadedChildren(o,u,p,m){for(const b in this._tiles){let E=this._tiles[b];if(m[b]||!E.hasData()||E.tileID.overscaledZ<=u||E.tileID.overscaledZ>p)continue;let I=E.tileID;for(;E&&E.tileID.overscaledZ>u+1;){const R=E.tileID.scaledTo(E.tileID.overscaledZ-1);E=this._tiles[R.key],E&&E.hasData()&&(I=R)}let D=I;for(;D.overscaledZ>u;)if(D=D.scaledTo(D.overscaledZ-1),o[D.key]||o[D.canonical.key]){m[I.key]=I;break}}}findLoadedParent(o,u){if(o.key in this._loadedParentTiles){const p=this._loadedParentTiles[o.key];return p&&p.tileID.overscaledZ>=u?p:null}for(let p=o.overscaledZ-1;p>=u;p--){const m=o.scaledTo(p),b=this._getLoadedTile(m);if(b)return b}}findLoadedSibling(o){return this._getLoadedTile(o)}_getLoadedTile(o){const u=this._tiles[o.key];return u&&u.hasData()?u:this._cache.getByKey(o.wrapped().key)}updateCacheSize(o){const u=Math.ceil(o.width/this._source.tileSize)+1,p=Math.ceil(o.height/this._source.tileSize)+1,m=Math.floor(u*p*(null===this._maxTileCacheZoomLevels?y.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(b)}handleWrapJump(o){const u=Math.round((o-(void 0===this._prevLng?o:this._prevLng))/360);if(this._prevLng=o,u){const p={};for(const m in this._tiles){const b=this._tiles[m];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+u),p[b.tileID.key]=b}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(o,u,p,m,b,E){const I={},D={},R=Object.keys(o),O=Dt.now();for(const j of R){const z=o[j],U=this._tiles[j];if(!U||0!==U.fadeEndTime&&U.fadeEndTime<=O)continue;const q=this.findLoadedParent(z,u),ne=this.findLoadedSibling(z),ee=q||ne||null;ee&&(this._addTile(ee.tileID),I[ee.tileID.key]=ee.tileID),D[j]=z}this._retainLoadedChildren(D,m,p,o);for(const j in I)o[j]||(this._coveredTiles[j]=!0,o[j]=I[j]);if(E){const j={},z={};for(const U of b)this._tiles[U.key].hasData()?j[U.key]=U:z[U.key]=U;for(const U in z){const q=z[U].children(this._source.maxzoom);this._tiles[q[0].key]&&this._tiles[q[1].key]&&this._tiles[q[2].key]&&this._tiles[q[3].key]&&(j[q[0].key]=o[q[0].key]=q[0],j[q[1].key]=o[q[1].key]=q[1],j[q[2].key]=o[q[2].key]=q[2],j[q[3].key]=o[q[3].key]=q[3],delete z[U])}for(const U in z){const q=z[U],ne=this.findLoadedParent(q,this._source.minzoom),ee=this.findLoadedSibling(q),re=ne||ee||null;if(re){j[re.tileID.key]=o[re.tileID.key]=re.tileID;for(const oe in j)j[oe].isChildOf(re.tileID)&&delete j[oe]}}for(const U in this._tiles)j[U]||(this._coveredTiles[U]=!0)}}update(o,u){if(!this._sourceLoaded||this._paused)return;let p;this.transform=o,this.terrain=u,this.updateCacheSize(o),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=o.getVisibleUnwrappedCoordinates(this._source.tileID).map(O=>new y.Z(O.canonical.z,O.wrap,O.canonical.z,O.canonical.x,O.canonical.y)):(p=Ee(o,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(O=>this._source.hasTile(O)))):p=[];const m=yt(o,this._source),b=Math.max(m-sn.maxOverzooming,this._source.minzoom),E=Math.max(m+sn.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const O={};for(const j of p)if(j.canonical.z>this._source.minzoom){const z=j.scaledTo(j.canonical.z-1);O[z.key]=z;const U=j.scaledTo(Math.max(this._source.minzoom,Math.min(j.canonical.z,5)));O[U.key]=U}p=p.concat(Object.values(O))}const I=0===p.length&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new y.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const D=this._updateRetainedTiles(p,m);Qt(this._source.type)&&this._updateCoveredAndRetainedTiles(D,b,E,m,p,u);for(const O in D)this._tiles[O].clearFadeHold();const R=y.am(this._tiles,D);for(const O of R){const j=this._tiles[O];j.hasSymbolBuckets&&!j.holdingForFade()?j.setHoldDuration(this.map._fadeDuration):j.hasSymbolBuckets&&!j.symbolFadeFinished()||this._removeTile(O)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const o in this._tiles)this._tiles[o].holdingForFade()&&this._removeTile(o)}_updateRetainedTiles(o,u){var p;const m={},b={},E=Math.max(u-sn.maxOverzooming,this._source.minzoom),I=Math.max(u+sn.maxUnderzooming,this._source.minzoom),D={};for(const R of o){const O=this._addTile(R);m[R.key]=R,O.hasData()||u<this._source.maxzoom&&(D[R.key]=R)}this._retainLoadedChildren(D,u,I,m);for(const R of o){let O=this._tiles[R.key];if(O.hasData())continue;if(u+1>this._source.maxzoom){const z=R.children(this._source.maxzoom)[0],U=this.getTile(z);if(U&&U.hasData()){m[z.key]=z;continue}}else{const z=R.children(this._source.maxzoom);if(m[z[0].key]&&m[z[1].key]&&m[z[2].key]&&m[z[3].key])continue}let j=O.wasRequested();for(let z=R.overscaledZ-1;z>=E;--z){const U=R.scaledTo(z);if(b[U.key])break;if(b[U.key]=!0,O=this.getTile(U),!O&&j&&(O=this._addTile(U)),O){const q=O.hasData();if((q||!(null!==(p=this.map)&&void 0!==p&&p.cancelPendingTileRequestsWhileZooming)||j)&&(m[U.key]=U),j=O.wasRequested(),q)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const o in this._tiles){const u=[];let p,m=this._tiles[o].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}u.push(m.key);const b=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(b),p)break;m=b}for(const b of u)this._loadedParentTiles[b]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const o in this._tiles){const u=this._tiles[o].tileID,p=this._getLoadedTile(u);this._loadedSiblingTiles[u.key]=p}}_addTile(o){let u=this._tiles[o.key];if(u)return u;u=this._cache.getAndRemove(o),u&&(this._setTileReloadTimer(o.key,u),u.tileID=o,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[o.key]&&(clearTimeout(this._cacheTimers[o.key]),delete this._cacheTimers[o.key],this._setTileReloadTimer(o.key,u)));const p=u;return u||(u=new Rl(o,this._source.tileSize*o.overscaleFactor()),this._loadTile(u,o.key,u.state)),u.uses++,this._tiles[o.key]=u,p||this._source.fire(new y.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(o,u){o in this._timers&&(clearTimeout(this._timers[o]),delete this._timers[o]);const p=u.getExpiryTimeout();p&&(this._timers[o]=setTimeout(()=>{this._reloadTile(o,"expired"),delete this._timers[o]},p))}refreshTiles(o){for(const u in this._tiles)(this._isIdRenderable(u)||"errored"==this._tiles[u].state)&&o.some(p=>p.equals(this._tiles[u].tileID.canonical))&&this._reloadTile(u,"expired")}_removeTile(o){const u=this._tiles[o];u&&(u.uses--,delete this._tiles[o],this._timers[o]&&(clearTimeout(this._timers[o]),delete this._timers[o]),u.uses>0||(u.hasData()&&"reloading"!==u.state?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(o){const u=o.sourceDataType;"source"===o.dataType&&"metadata"===u&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===o.dataType&&"content"===u&&(this.reload(o.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const o in this._tiles)this._removeTile(o);this._cache.reset()}tilesIn(o,u,p){const m=[],b=this.transform;if(!b)return m;const E=b.getCoveringTilesDetailsProvider().allowWorldCopies(),I=p?b.getCameraQueryGeometry(o):o,D=U=>b.screenPointToMercatorCoordinate(U,this.terrain),R=this.transformBbox(o,D,!E),O=this.transformBbox(I,D,!E),j=this.getIds(),z=y.a2.fromPoints(O);for(let U=0;U<j.length;U++){const q=this._tiles[j[U]];if(q.holdingForFade())continue;const ne=E?[q.tileID]:[q.tileID.unwrapTo(-1),q.tileID.unwrapTo(0)],ee=Math.pow(2,b.zoom-q.tileID.overscaledZ),re=u*q.queryPadding*y.$/q.tileSize/ee;for(const oe of ne){const ue=z.map(ae=>oe.getTilePoint(new y.a1(ae.x,ae.y)));if(ue.expandBy(re),ue.intersects(Ut)){const ae=R.map(ge=>oe.getTilePoint(ge)),fe=O.map(ge=>oe.getTilePoint(ge));m.push({tile:q,tileID:E?oe:oe.unwrapTo(0),queryGeometry:ae,cameraQueryGeometry:fe,scale:ee})}}}return m}transformBbox(o,u,p){let m=o.map(u);if(p){const b=y.a2.fromPoints(o);b.shrinkBy(.001*Math.min(b.width(),b.height()));const E=b.map(u);y.a2.fromPoints(m).covers(E)||(m=m.map(I=>I.x>.5?new y.a1(I.x-1,I.y,I.z):I))}return m}getVisibleCoordinates(o){const u=this.getRenderableIds(o).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(u),u}hasTransition(){if(this._source.hasTransition())return!0;if(Qt(this._source.type)){const o=Dt.now();for(const u in this._tiles)if(this._tiles[u].fadeEndTime>=o)return!0}return!1}setFeatureState(o,u,p){this._state.updateState(o=o||"_geojsonTileLayer",u,p)}removeFeatureState(o,u,p){this._state.removeFeatureState(o=o||"_geojsonTileLayer",u,p)}getFeatureState(o,u){return this._state.getState(o=o||"_geojsonTileLayer",u)}setDependencies(o,u,p){const m=this._tiles[o];m&&m.setDependencies(u,p)}reloadTilesForDependencies(o,u){for(const p in this._tiles)this._tiles[p].hasDependency(o,u)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(o,u))}}function St(v,o){const u=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*o.wrap)-+(o.wrap<0);return v.overscaledZ-o.overscaledZ||p-u||o.canonical.y-v.canonical.y||o.canonical.x-v.canonical.x}function Qt(v){return"raster"===v||"image"===v||"video"===v}sn.maxOverzooming=10,sn.maxUnderzooming=3;class Un{constructor(o,u){this.reset(o,u)}reset(o,u){this.points=o||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(o){if(1===this.points.length)return this.points[0];o=y.ah(o,0,1);let u=1,p=this._distances[u];const m=o*this.paddedLength+this.padding;for(;p<m&&u<this._distances.length;)p=this._distances[++u];const b=u-1,E=this._distances[b],I=p-E,D=I>0?(m-E)/I:0;return this.points[b].mult(1-D).add(this.points[u].mult(D))}}function ri(v,o){let u=!0;return"always"===v||"never"!==v&&"never"!==o||(u=!1),u}class Lr{constructor(o,u,p){const m=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(o/p),this.yCellCount=Math.ceil(u/p);for(let E=0;E<this.xCellCount*this.yCellCount;E++)m.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=o,this.height=u,this.xScale=this.xCellCount/o,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(o,u,p,m,b){this._forEachCell(u,p,m,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(o),this.bboxes.push(u),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(b)}insertCircle(o,u,p,m){this._forEachCell(u-m,p-m,u+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(o),this.circles.push(u),this.circles.push(p),this.circles.push(m)}_insertBoxCell(o,u,p,m,b,E){this.boxCells[b].push(E)}_insertCircleCell(o,u,p,m,b,E){this.circleCells[b].push(E)}_query(o,u,p,m,b,E,I){if(p<0||o>this.width||m<0||u>this.height)return[];const D=[];if(o<=0&&u<=0&&this.width<=p&&this.height<=m){if(b)return[{key:null,x1:o,y1:u,x2:p,y2:m}];for(let R=0;R<this.boxKeys.length;R++)D.push({key:this.boxKeys[R],x1:this.bboxes[4*R],y1:this.bboxes[4*R+1],x2:this.bboxes[4*R+2],y2:this.bboxes[4*R+3]});for(let R=0;R<this.circleKeys.length;R++){const O=this.circles[3*R],j=this.circles[3*R+1],z=this.circles[3*R+2];D.push({key:this.circleKeys[R],x1:O-z,y1:j-z,x2:O+z,y2:j+z})}}else this._forEachCell(o,u,p,m,this._queryCell,D,{hitTest:b,overlapMode:E,seenUids:{box:{},circle:{}}},I);return D}query(o,u,p,m){return this._query(o,u,p,m,!1,null)}hitTest(o,u,p,m,b,E){return this._query(o,u,p,m,!0,b,E).length>0}hitTestCircle(o,u,p,m,b){const E=o-p,I=o+p,D=u-p,R=u+p;if(I<0||E>this.width||R<0||D>this.height)return!1;const O=[];return this._forEachCell(E,D,I,R,this._queryCellCircle,O,{hitTest:!0,overlapMode:m,circle:{x:o,y:u,radius:p},seenUids:{box:{},circle:{}}},b),O.length>0}_queryCell(o,u,p,m,b,E,I,D){const{seenUids:R,hitTest:O,overlapMode:j}=I,z=this.boxCells[b];if(null!==z){const q=this.bboxes;for(const ne of z)if(!R.box[ne]){R.box[ne]=!0;const ee=4*ne,re=this.boxKeys[ne];if(o<=q[ee+2]&&u<=q[ee+3]&&p>=q[ee+0]&&m>=q[ee+1]&&(!D||D(re))&&(!O||!ri(j,re.overlapMode))&&(E.push({key:re,x1:q[ee],y1:q[ee+1],x2:q[ee+2],y2:q[ee+3]}),O))return!0}}const U=this.circleCells[b];if(null!==U){const q=this.circles;for(const ne of U)if(!R.circle[ne]){R.circle[ne]=!0;const ee=3*ne,re=this.circleKeys[ne];if(this._circleAndRectCollide(q[ee],q[ee+1],q[ee+2],o,u,p,m)&&(!D||D(re))&&(!O||!ri(j,re.overlapMode))){const oe=q[ee],ue=q[ee+1],ae=q[ee+2];if(E.push({key:re,x1:oe-ae,y1:ue-ae,x2:oe+ae,y2:ue+ae}),O)return!0}}}return!1}_queryCellCircle(o,u,p,m,b,E,I,D){const{circle:R,seenUids:O,overlapMode:j}=I,z=this.boxCells[b];if(null!==z){const q=this.bboxes;for(const ne of z)if(!O.box[ne]){O.box[ne]=!0;const ee=4*ne,re=this.boxKeys[ne];if(this._circleAndRectCollide(R.x,R.y,R.radius,q[ee+0],q[ee+1],q[ee+2],q[ee+3])&&(!D||D(re))&&!ri(j,re.overlapMode))return E.push(!0),!0}}const U=this.circleCells[b];if(null!==U){const q=this.circles;for(const ne of U)if(!O.circle[ne]){O.circle[ne]=!0;const ee=3*ne,re=this.circleKeys[ne];if(this._circlesCollide(q[ee],q[ee+1],q[ee+2],R.x,R.y,R.radius)&&(!D||D(re))&&!ri(j,re.overlapMode))return E.push(!0),!0}}}_forEachCell(o,u,p,m,b,E,I,D){const R=this._convertToXCellCoord(o),O=this._convertToYCellCoord(u),j=this._convertToXCellCoord(p),z=this._convertToYCellCoord(m);for(let U=R;U<=j;U++)for(let q=O;q<=z;q++)if(b.call(this,o,u,p,m,this.xCellCount*q+U,E,I,D))return}_convertToXCellCoord(o){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(o*this.xScale)))}_convertToYCellCoord(o){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(o*this.yScale)))}_circlesCollide(o,u,p,m,b,E){const I=m-o,D=b-u,R=p+E;return R*R>I*I+D*D}_circleAndRectCollide(o,u,p,m,b,E,I){const D=(E-m)/2,R=Math.abs(o-(m+D));if(R>D+p)return!1;const O=(I-b)/2,j=Math.abs(u-(b+O));if(j>O+p)return!1;if(R<=D||j<=O)return!0;const z=R-D,U=j-O;return z*z+U*U<=p*p}}function Zn(v,o,u){const p=y.L();if(!v){const{vecSouth:j,vecEast:z}=mn(o),U=kl();U[0]=z[0],U[1]=z[1],U[2]=j[0],U[3]=j[1],m=U,(O=(E=(b=U)[0])*(R=b[3])-(D=b[2])*(I=b[1]))&&(m[0]=R*(O=1/O),m[1]=-I*O,m[2]=-D*O,m[3]=E*O),p[0]=U[0],p[1]=U[1],p[4]=U[2],p[5]=U[3]}var m,b,E,I,D,R,O;return y.N(p,p,[1/u,1/u,1]),p}function un(v,o,u,p){if(v){const m=y.L();if(!o){const{vecSouth:b,vecEast:E}=mn(u);m[0]=E[0],m[1]=E[1],m[4]=b[0],m[5]=b[1]}return y.N(m,m,[p,p,1]),m}return u.pixelsToClipSpaceMatrix}function mn(v){const o=Math.cos(v.rollInRadians),u=Math.sin(v.rollInRadians),p=Math.cos(v.pitchInRadians),m=Math.cos(v.bearingInRadians),b=Math.sin(v.bearingInRadians),E=y.ar();E[0]=-m*p*u-b*o,E[1]=-b*p*u+m*o;const I=y.as(E);I<1e-9?y.at(E):y.au(E,E,1/I);const D=y.ar();D[0]=m*p*o-b*u,D[1]=b*p*o+m*u;const R=y.as(D);return R<1e-9?y.at(D):y.au(D,D,1/R),{vecEast:D,vecSouth:E}}function _n(v,o,u,p){let m;p?(m=[v,o,p(v,o),1],y.aw(m,m,u)):(m=[v,o,0,1],Oc(m,m,u));const b=m[3];return{point:new y.P(m[0]/b,m[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function Ze(v,o){return.5+v/o*.5}function Oi(v,o){return v.x>=-o[0]&&v.x<=o[0]&&v.y>=-o[1]&&v.y<=o[1]}function _r(v,o,u,p,m,b,E,I,D,R,O,j,z){const U=u?v.textSizeData:v.iconSizeData,q=y.an(U,o.transform.zoom),ne=[256/o.width*2+1,256/o.height*2+1],ee=u?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ee.clear();const re=v.lineVertexArray,oe=u?v.text.placedSymbolArray:v.icon.placedSymbolArray,ue=o.transform.width/o.transform.height;let ae=!1;for(let fe=0;fe<oe.length;fe++){const ge=oe.get(fe);if(ge.hidden||ge.writingMode===y.ao.vertical&&!ae){dn(ge.numGlyphs,ee);continue}ae=!1;const le=new y.P(ge.anchorX,ge.anchorY),be={getElevation:z,pitchedLabelPlaneMatrix:p,lineVertexArray:re,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:o.transform,tileAnchorPoint:le,unwrappedTileID:D,width:R,height:O,translation:j},ke=rl(ge.anchorX,ge.anchorY,be);if(!Oi(ke.point,ne)){dn(ge.numGlyphs,ee);continue}const Te=Ze(o.transform.cameraToCenterDistance,ke.signedDistanceFromCamera),Ie=y.ap(U,q,ge),Ae=b?Ie*o.transform.getPitchedTextCorrection(ge.anchorX,ge.anchorY,D)/Te:Ie*Te,We=ot({projectionContext:be,pitchedLabelPlaneMatrixInverse:m,symbol:ge,fontSize:Ae,flip:!1,keepUpright:E,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ee,aspectRatio:ue,rotateToLine:I});ae=We.useVertical,(We.notEnoughRoom||ae||We.needsFlipping&&ot({projectionContext:be,pitchedLabelPlaneMatrixInverse:m,symbol:ge,fontSize:Ae,flip:!0,keepUpright:E,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:ee,aspectRatio:ue,rotateToLine:I}).notEnoughRoom)&&dn(ge.numGlyphs,ee)}u?v.text.dynamicLayoutVertexBuffer.updateData(ee):v.icon.dynamicLayoutVertexBuffer.updateData(ee)}function nl(v,o,u,p,m,b,E,I){const D=b.glyphStartIndex+b.numGlyphs,R=b.lineStartIndex,O=b.lineStartIndex+b.lineLength,j=o.getoffsetX(b.glyphStartIndex),z=o.getoffsetX(D-1),U=Nl(v*j,u,p,m,b.segment,R,O,I,E);if(!U)return null;const q=Nl(v*z,u,p,m,b.segment,R,O,I,E);return q?I.projectionCache.anyProjectionOccluded?null:{first:U,last:q}:null}function ii(v,o,u,p){return v===y.ao.horizontal&&Math.abs(u.y-o.y)>Math.abs(u.x-o.x)*p?{useVertical:!0}:(v===y.ao.vertical?o.y<u.y:o.x>u.x)?{needsFlipping:!0}:null}function ot(v){const{projectionContext:o,pitchedLabelPlaneMatrixInverse:u,symbol:p,fontSize:m,flip:b,keepUpright:E,glyphOffsetArray:I,dynamicLayoutVertexArray:D,aspectRatio:R,rotateToLine:O}=v,j=m/24,z=p.lineOffsetX*j,U=p.lineOffsetY*j;let q;if(p.numGlyphs>1){const ne=p.glyphStartIndex+p.numGlyphs,ee=p.lineStartIndex,re=p.lineStartIndex+p.lineLength,oe=nl(j,I,z,U,b,p,O,o);if(!oe)return{notEnoughRoom:!0};const ue=Le(oe.first.point.x,oe.first.point.y,o,u),ae=Le(oe.last.point.x,oe.last.point.y,o,u);if(E&&!b){const fe=ii(p.writingMode,ue,ae,R);if(fe)return fe}q=[oe.first];for(let fe=p.glyphStartIndex+1;fe<ne-1;fe++){const ge=Nl(j*I.getoffsetX(fe),z,U,b,p.segment,ee,re,o,O);if(!ge)return{notEnoughRoom:!0};q.push(ge)}q.push(oe.last)}else{if(E&&!b){const ee=mi(o.tileAnchorPoint.x,o.tileAnchorPoint.y,o).point,re=p.lineStartIndex+p.segment+1,oe=new y.P(o.lineVertexArray.getx(re),o.lineVertexArray.gety(re)),ue=mi(oe.x,oe.y,o),ae=ue.signedDistanceFromCamera>0?ue.point:jt(o.tileAnchorPoint,oe,ee,1,o),fe=Le(ee.x,ee.y,o,u),ge=Le(ae.x,ae.y,o,u),le=ii(p.writingMode,fe,ge,R);if(le)return le}const ne=Nl(j*I.getoffsetX(p.glyphStartIndex),z,U,b,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,o,O);if(!ne||o.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};q=[ne]}for(const ne of q)y.av(D,ne.point,ne.angle);return{}}function jt(v,o,u,p,m){const b=v.add(v.sub(o)._unit()),E=mi(b.x,b.y,m).point,I=u.sub(E);return u.add(I._mult(p/I.mag()))}function an(v,o,u){const p=o.projectionCache;if(p.projections[v])return p.projections[v];const m=new y.P(o.lineVertexArray.getx(v),o.lineVertexArray.gety(v)),b=mi(m.x,m.y,o);if(b.signedDistanceFromCamera>0)return p.projections[v]=b.point,p.anyProjectionOccluded=p.anyProjectionOccluded||b.isOccluded,b.point;const E=v-u.direction;return jt(0===u.distanceFromAnchor?o.tileAnchorPoint:new y.P(o.lineVertexArray.getx(E),o.lineVertexArray.gety(E)),m,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,o)}function mi(v,o,u){const p=v+u.translation[0],m=o+u.translation[1];let b;return u.pitchWithMap?(b=_n(p,m,u.pitchedLabelPlaneMatrix,u.getElevation),b.isOccluded=!1):(b=u.transform.projectTileCoordinates(p,m,u.unwrappedTileID,u.getElevation),b.point.x=(.5*b.point.x+.5)*u.width,b.point.y=(.5*-b.point.y+.5)*u.height),b}function Le(v,o,u,p){if(u.pitchWithMap){const m=[v,o,0,1];return y.aw(m,m,p),u.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],u.unwrappedTileID,u.getElevation).point}return{x:v/u.width*2-1,y:1-o/u.height*2}}function rl(v,o,u){return u.transform.projectTileCoordinates(v,o,u.unwrappedTileID,u.getElevation)}function Lt(v,o,u){return v._unit()._perp()._mult(o*u)}function tr(v,o,u,p,m,b,E,I,D){if(I.projectionCache.offsets[v])return I.projectionCache.offsets[v];const R=u.add(o);if(v+D.direction<p||v+D.direction>=m)return I.projectionCache.offsets[v]=R,R;const O=an(v+D.direction,I,D),j=Lt(O.sub(u),E,D.direction),z=u.add(j),U=O.add(j);return I.projectionCache.offsets[v]=y.ax(b,R,z,U)||R,I.projectionCache.offsets[v]}function Nl(v,o,u,p,m,b,E,I,D){const R=p?v-o:v+o;let O=R>0?1:-1,j=0;p&&(O*=-1,j=Math.PI),O<0&&(j+=Math.PI);let z,U=O>0?b+m:b+m+1;I.projectionCache.cachedAnchorPoint?z=I.projectionCache.cachedAnchorPoint:(z=mi(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=z);let q,ne,ee=z,re=z,oe=0,ue=0;const ae=Math.abs(R),fe=[];let ge;for(;oe+ue<=ae;){if(U+=O,U<b||U>=E)return null;oe+=ue,re=ee,ne=q;const ke={absOffsetX:ae,direction:O,distanceFromAnchor:oe,previousVertex:re};if(ee=an(U,I,ke),0===u)fe.push(re),ge=ee.sub(re);else{let Te;const Ie=ee.sub(re);Te=0===Ie.mag()?Lt(an(U+O,I,ke).sub(ee),u,O):Lt(Ie,u,O),ne||(ne=re.add(Te)),q=tr(U,Te,ee,b,E,ne,u,I,ke),fe.push(ne),ge=q.sub(ne)}ue=ge.mag()}const le=ge._mult((ae-oe)/ue)._add(ne||re),be=j+Math.atan2(ee.y-re.y,ee.x-re.x);return fe.push(le),{point:le,angle:D?be:0,path:fe}}const ef=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function dn(v,o){for(let u=0;u<v;u++){const p=o.length;o.resize(p+4),o.float32.set(ef,3*p)}}function Oc(v,o,u){const p=o[0],m=o[1];return v[0]=u[0]*p+u[4]*m+u[12],v[1]=u[1]*p+u[5]*m+u[13],v[3]=u[3]*p+u[7]*m+u[15],v}const Cn=100;class Fc{constructor(o,u=new Lr(o.width+200,o.height+200,25),p=new Lr(o.width+200,o.height+200,25)){this.transform=o,this.grid=u,this.ignoredGrid=p,this.pitchFactor=Math.cos(o.pitch*Math.PI/180)*o.cameraToCenterDistance,this.screenRightBoundary=o.width+Cn,this.screenBottomBoundary=o.height+Cn,this.gridRightBoundary=o.width+200,this.gridBottomBoundary=o.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(o,u,p,m,b,E,I,D,R,O,j,z){const U=this.projectAndGetPerspectiveRatio(o.anchorPointX+D[0],o.anchorPointY+D[1],b,O,z),q=p*U.perspectiveRatio;let ne;if(E||I)ne=this._projectCollisionBox(o,q,m,b,E,I,D,U,O,j,z);else{const ge=U.x+(j?j.x*q:0),le=U.y+(j?j.y*q:0);ne={allPointsOccluded:!1,box:[ge+o.x1*q,le+o.y1*q,ge+o.x2*q,le+o.y2*q]}}const[ee,re,oe,ue]=ne.box,ae=E?ne.allPointsOccluded:U.isOccluded;let fe=ae;return fe||(fe=U.perspectiveRatio<this.perspectiveRatioCutoff),fe||(fe=!this.isInsideGrid(ee,re,oe,ue)),fe||"always"!==u&&this.grid.hitTest(ee,re,oe,ue,u,R)?{box:[ee,re,oe,ue],placeable:!1,offscreen:!1,occluded:ae}:{box:[ee,re,oe,ue],placeable:!0,offscreen:this.isOffscreen(ee,re,oe,ue),occluded:ae}}placeCollisionCircles(o,u,p,m,b,E,I,D,R,O,j,z,U,q){const ne=[],ee=new y.P(u.anchorX,u.anchorY),re=this.getPerspectiveRatio(ee.x,ee.y,E,q),oe=(R?b*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,E)/re:b*re)/y.aB,ue={getElevation:q,pitchedLabelPlaneMatrix:I,lineVertexArray:p,pitchWithMap:R,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ee,unwrappedTileID:E,width:this.transform.width,height:this.transform.height,translation:U},ae=nl(oe,m,u.lineOffsetX*oe,u.lineOffsetY*oe,!1,u,!1,ue);let fe=!1,ge=!1,le=!0;if(ae){const be=.5*j*re+z,ke=new y.P(-100,-100),Te=new y.P(this.screenRightBoundary,this.screenBottomBoundary),Ie=new Un,Ae=ae.first,We=ae.last;let qe=[];for(let en=Ae.path.length-1;en>=1;en--)qe.push(Ae.path[en]);for(let en=1;en<We.path.length;en++)qe.push(We.path[en]);const Be=2.5*be;if(R){const en=this.projectPathToScreenSpace(qe,ue);qe=en.some(Dn=>Dn.signedDistanceFromCamera<=0)?[]:en.map(Dn=>Dn.point)}let ht=[];if(qe.length>0){const en=qe[0].clone(),Dn=qe[0].clone();for(let In=1;In<qe.length;In++)en.x=Math.min(en.x,qe[In].x),en.y=Math.min(en.y,qe[In].y),Dn.x=Math.max(Dn.x,qe[In].x),Dn.y=Math.max(Dn.y,qe[In].y);ht=en.x>=ke.x&&Dn.x<=Te.x&&en.y>=ke.y&&Dn.y<=Te.y?[qe]:Dn.x<ke.x||en.x>Te.x||Dn.y<ke.y||en.y>Te.y?[]:y.ay([qe],ke.x,ke.y,Te.x,Te.y)}for(const en of ht){Ie.reset(en,.25*be);let Dn=0;Dn=Ie.length<=.5*be?1:Math.ceil(Ie.paddedLength/Be)+1;for(let In=0;In<Dn;In++){const pn=In/Math.max(Dn-1,1),ar=Ie.lerp(pn),wr=ar.x+Cn,tn=ar.y+Cn;ne.push(wr,tn,be,0);const jn=wr-be,li=tn-be,kn=wr+be,Jr=tn+be;if(le=le&&this.isOffscreen(jn,li,kn,Jr),ge=ge||this.isInsideGrid(jn,li,kn,Jr),"always"!==o&&this.grid.hitTestCircle(wr,tn,be,o,O)&&(fe=!0,!D))return{circles:[],offscreen:!1,collisionDetected:fe}}}}return{circles:!D&&fe||!ge||re<this.perspectiveRatioCutoff?[]:ne,offscreen:le,collisionDetected:fe}}projectPathToScreenSpace(o,u){return function(m){let b=0,E=0,I=0,D=0;for(let R=0;R<m.length;R++)m[R].isOccluded?(I=R+1,D=0):(D++,D>E&&(E=D,b=I));return m.slice(b,b+E)}(function(m,b){const E=y.L();return y.aq(E,b.pitchedLabelPlaneMatrix),m.map(I=>{const D=_n(I.x,I.y,E,b.getElevation),R=b.transform.projectTileCoordinates(D.point.x,D.point.y,b.unwrappedTileID,b.getElevation);return R.point.x=(.5*R.point.x+.5)*b.width,R.point.y=(.5*-R.point.y+.5)*b.height,R})}(o,u))}queryRenderedSymbols(o){if(0===o.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const u=[],p=new y.a2;for(const j of o){const z=new y.P(j.x+Cn,j.y+Cn);p.extend(z),u.push(z)}const{minX:m,minY:b,maxX:E,maxY:I}=p,D=this.grid.query(m,b,E,I).concat(this.ignoredGrid.query(m,b,E,I)),R={},O={};for(const j of D){const z=j.key;if(void 0===R[z.bucketInstanceId]&&(R[z.bucketInstanceId]={}),R[z.bucketInstanceId][z.featureIndex])continue;const U=[new y.P(j.x1,j.y1),new y.P(j.x2,j.y1),new y.P(j.x2,j.y2),new y.P(j.x1,j.y2)];y.az(u,U)&&(R[z.bucketInstanceId][z.featureIndex]=!0,void 0===O[z.bucketInstanceId]&&(O[z.bucketInstanceId]=[]),O[z.bucketInstanceId].push(z.featureIndex))}return O}insertCollisionBox(o,u,p,m,b,E){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:b,collisionGroupID:E,overlapMode:u},o[0],o[1],o[2],o[3])}insertCollisionCircles(o,u,p,m,b,E){const I=p?this.ignoredGrid:this.grid,D={bucketInstanceId:m,featureIndex:b,collisionGroupID:E,overlapMode:u};for(let R=0;R<o.length;R+=4)I.insertCircle(D,o[R],o[R+1],o[R+2])}projectAndGetPerspectiveRatio(o,u,p,m,b){if(b){let E;m?(E=[o,u,m(o,u),1],y.aw(E,E,b)):(E=[o,u,0,1],Oc(E,E,b));const I=E[3];return{x:(E[0]/I+1)/2*this.transform.width+Cn,y:(-E[1]/I+1)/2*this.transform.height+Cn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}{const E=this.transform.projectTileCoordinates(o,u,p,m);return{x:(E.point.x+1)/2*this.transform.width+Cn,y:(1-E.point.y)/2*this.transform.height+Cn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E.signedDistanceFromCamera*.5,isOccluded:E.isOccluded,signedDistanceFromCamera:E.signedDistanceFromCamera}}}getPerspectiveRatio(o,u,p,m){const b=this.transform.projectTileCoordinates(o,u,p,m);return.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(o,u,p,m){return p<Cn||o>=this.screenRightBoundary||m<Cn||u>this.screenBottomBoundary}isInsideGrid(o,u,p,m){return p>=0&&o<this.gridRightBoundary&&m>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const o=y.ag([]);return y.M(o,o,[-100,-100,0]),o}_projectCollisionBox(o,u,p,m,b,E,I,D,R,O,j){let z=1,U=0,q=0,ne=1;const ee=o.anchorPointX+I[0],re=o.anchorPointY+I[1];if(E&&!b){const qe=this.projectAndGetPerspectiveRatio(ee+1,re,m,R,j),Be=qe.x-D.x,ht=Math.atan((qe.y-D.y)/Be)+(Be<0?Math.PI:0),en=Math.sin(ht),Dn=Math.cos(ht);z=Dn,U=en,q=-en,ne=Dn}else if(!E&&b){const qe=mn(this.transform);z=qe.vecEast[0],U=qe.vecEast[1],q=qe.vecSouth[0],ne=qe.vecSouth[1]}let oe=D.x,ue=D.y,ae=u;b&&(oe=ee,ue=re,ae=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),ae*=this.transform.getPitchedTextCorrection(ee,re,m),O||(ae*=y.ah(.5+D.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),O&&(oe+=z*O.x*ae+q*O.y*ae,ue+=U*O.x*ae+ne*O.y*ae);const fe=o.x1*ae,ge=o.x2*ae,le=(fe+ge)/2,be=o.y1*ae,ke=o.y2*ae,Te=(be+ke)/2,Ie=[{offsetX:fe,offsetY:be},{offsetX:le,offsetY:be},{offsetX:ge,offsetY:be},{offsetX:ge,offsetY:Te},{offsetX:ge,offsetY:ke},{offsetX:le,offsetY:ke},{offsetX:fe,offsetY:ke},{offsetX:fe,offsetY:Te}];let Ae=[];for(const{offsetX:qe,offsetY:Be}of Ie)Ae.push(new y.P(oe+z*qe+q*Be,ue+U*qe+ne*Be));let We=!1;if(b){const qe=Ae.map(Be=>this.projectAndGetPerspectiveRatio(Be.x,Be.y,m,R,j));We=qe.some(Be=>!Be.isOccluded),Ae=qe.map(Be=>new y.P(Be.x,Be.y))}else We=!0;return{box:y.aA(Ae),allPointsOccluded:!We}}}class Co{constructor(o,u,p,m){this.opacity=o?Math.max(0,Math.min(1,o.opacity+(o.placed?u:-u))):m&&p?1:0,this.placed=p}isHidden(){return 0===this.opacity&&!this.placed}}class Gn{constructor(o,u,p,m,b){this.text=new Co(o?o.text:null,u,p,b),this.icon=new Co(o?o.icon:null,u,m,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class zu{constructor(o,u,p){this.text=o,this.icon=u,this.skipFade=p}}class Yt{constructor(o,u,p,m,b){this.bucketInstanceId=o,this.featureIndex=u,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=b}}class Bc{constructor(o){this.crossSourceCollisions=o,this.maxGroupID=0,this.collisionGroups={}}get(o){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[o]){const u=++this.maxGroupID;this.collisionGroups[o]={ID:u,predicate:p=>p.collisionGroupID===u}}return this.collisionGroups[o]}}function Zr(v,o,u,p,m){const{horizontalAlign:b,verticalAlign:E}=y.aH(v);return new y.P(-(b-.5)*o+p[0]*m,-(E-.5)*u+p[1]*m)}class Ll{constructor(o,u,p,m,b){this.transform=o.clone(),this.terrain=u,this.collisionIndex=new Fc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Bc(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(o){const u=this.terrain;return u?(p,m)=>u.getElevation(o,p,m):null}getBucketParts(o,u,p,m){const b=p.getBucket(u),E=p.latestFeatureIndex;if(!b||!E||u.id!==b.layerIds[0])return;const I=p.collisionBoxArray,D=b.layers[0].layout,R=b.layers[0].paint,O=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),j=p.tileSize/y.$,z=p.tileID.toUnwrapped(),U="map"===D.get("text-rotation-alignment"),q=y.aC(p,1,this.transform.zoom),ne=y.aD(this.collisionIndex.transform,p,R.get("text-translate"),R.get("text-translate-anchor")),ee=y.aD(this.collisionIndex.transform,p,R.get("icon-translate"),R.get("icon-translate-anchor")),re=Zn(U,this.transform,q);this.retainedQueryData[b.bucketInstanceId]=new Yt(b.bucketInstanceId,E,b.sourceLayerIndex,b.index,p.tileID);const oe={bucket:b,layout:D,translationText:ne,translationIcon:ee,unwrappedTileID:z,pitchedLabelPlaneMatrix:re,scale:O,textPixelRatio:j,holdingForFade:p.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:y.an(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(m)for(const ue of b.sortKeyRanges){const{sortKey:ae,symbolInstanceStart:fe,symbolInstanceEnd:ge}=ue;o.push({sortKey:ae,symbolInstanceStart:fe,symbolInstanceEnd:ge,parameters:oe})}else o.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:oe})}attemptAnchorPlacement(o,u,p,m,b,E,I,D,R,O,j,z,U,q,ne,ee,re,oe,ue,ae){const fe=y.aE[o.textAnchor],ge=[o.textOffset0,o.textOffset1],le=Zr(fe,p,m,ge,b),be=this.collisionIndex.placeCollisionBox(u,z,D,R,O,I,E,ee,j.predicate,ue,le,ae);if((!oe||this.collisionIndex.placeCollisionBox(oe,z,D,R,O,I,E,re,j.predicate,ue,le,ae).placeable)&&be.placeable){let ke;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(ke=this.prevPlacement.variableOffsets[U.crossTileID].anchor),0===U.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:ge,width:p,height:m,anchor:fe,textBoxScale:b,prevAnchor:ke},this.markUsedJustification(q,fe,U,ne),q.allowVerticalPlacement&&(this.markUsedOrientation(q,ne,U),this.placedOrientations[U.crossTileID]=ne),{shift:le,placedGlyphBoxes:be}}}placeLayerBucketPart(o,u,p){const{bucket:m,layout:b,translationText:E,translationIcon:I,unwrappedTileID:D,pitchedLabelPlaneMatrix:R,textPixelRatio:O,holdingForFade:j,collisionBoxArray:z,partiallyEvaluatedTextSize:U,collisionGroup:q}=o.parameters,ne=b.get("text-optional"),ee=b.get("icon-optional"),re=y.aF(b,"text-overlap","text-allow-overlap"),oe="always"===re,ue=y.aF(b,"icon-overlap","icon-allow-overlap"),ae="always"===ue,fe="map"===b.get("text-rotation-alignment"),ge="map"===b.get("text-pitch-alignment"),le="none"!==b.get("icon-text-fit"),be="viewport-y"===b.get("symbol-z-order"),ke=oe&&(ae||!m.hasIconData()||ee),Te=ae&&(oe||!m.hasTextData()||ne);!m.collisionArrays&&z&&m.deserializeCollisionBoxes(z);const Ie=this.retainedQueryData[m.bucketInstanceId].tileID,Ae=this._getTerrainElevationFunc(Ie),We=this.transform.getFastPathSimpleProjectionMatrix(Ie),qe=(Be,ht,en)=>{var Dn,In;if(u[Be.crossTileID])return;if(j)return void(this.placements[Be.crossTileID]=new zu(!1,!1,!1));let pn=!1,ar=!1,wr=!0,tn=null,jn={box:null,placeable:!1,offscreen:null,occluded:!1},li={placeable:!1},kn=null,Jr=null,Vi=null,xi=0,Js=0,Xl=0;ht.textFeatureIndex?xi=ht.textFeatureIndex:Be.useRuntimeCollisionCircles&&(xi=Be.featureIndex),ht.verticalTextFeatureIndex&&(Js=ht.verticalTextFeatureIndex);const Ql=ht.textBox;if(Ql){const po=zr=>{let ci=y.ao.horizontal;if(m.allowVerticalPlacement&&!zr&&this.prevPlacement){const No=this.prevPlacement.placedOrientations[Be.crossTileID];No&&(this.placedOrientations[Be.crossTileID]=No,ci=No,this.markUsedOrientation(m,ci,Be))}return ci},wi=(zr,ci)=>{if(m.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&ht.verticalTextBox){for(const No of m.writingModes)if(No===y.ao.vertical?(jn=ci(),li=jn):jn=zr(),jn&&jn.placeable)break}else jn=zr()},Ui=Be.textAnchorOffsetStartIndex,ts=Be.textAnchorOffsetEndIndex;if(ts===Ui){const zr=(ci,No)=>{const lr=this.collisionIndex.placeCollisionBox(ci,re,O,Ie,D,ge,fe,E,q.predicate,Ae,void 0,We);return lr&&lr.placeable&&(this.markUsedOrientation(m,No,Be),this.placedOrientations[Be.crossTileID]=No),lr};wi(()=>zr(Ql,y.ao.horizontal),()=>{const ci=ht.verticalTextBox;return m.allowVerticalPlacement&&Be.numVerticalGlyphVertices>0&&ci?zr(ci,y.ao.vertical):{box:null,offscreen:null}}),po(jn&&jn.placeable)}else{let zr=y.aE[null===(In=null===(Dn=this.prevPlacement)||void 0===Dn?void 0:Dn.variableOffsets[Be.crossTileID])||void 0===In?void 0:In.anchor];const ci=(lr,rd,hu)=>{const ws=lr.x2-lr.x1,Ss=lr.y2-lr.y1,gl=Be.textBoxScale,gh=le&&"never"===ue?rd:null;let go=null,ea="never"===re?1:2,Ua="never";zr&&ea++;for(let id=0;id<ea;id++){for(let od=Ui;od<ts;od++){const ns=m.textAnchorOffsets.get(od);if(zr&&ns.textAnchor!==zr)continue;const $a=this.attemptAnchorPlacement(ns,lr,ws,Ss,gl,fe,ge,O,Ie,D,q,Ua,Be,m,hu,E,I,gh,Ae);if($a&&(go=$a.placedGlyphBoxes,go&&go.placeable))return pn=!0,tn=$a.shift,go}zr?zr=null:Ua=re}return p&&!go&&(go={box:this.collisionIndex.placeCollisionBox(Ql,"always",O,Ie,D,ge,fe,E,q.predicate,Ae,void 0,We).box,offscreen:!1,placeable:!1,occluded:!1}),go};wi(()=>ci(Ql,ht.iconBox,y.ao.horizontal),()=>{const lr=ht.verticalTextBox;return m.allowVerticalPlacement&&(!jn||!jn.placeable)&&Be.numVerticalGlyphVertices>0&&lr?ci(lr,ht.verticalIconBox,y.ao.vertical):{box:null,occluded:!0,offscreen:null}}),jn&&(pn=jn.placeable,wr=jn.offscreen);const No=po(jn&&jn.placeable);if(!pn&&this.prevPlacement){const lr=this.prevPlacement.variableOffsets[Be.crossTileID];lr&&(this.variableOffsets[Be.crossTileID]=lr,this.markUsedJustification(m,lr.anchor,Be,No))}}}if(kn=jn,pn=kn&&kn.placeable,wr=kn&&kn.offscreen,Be.useRuntimeCollisionCircles){const po=m.text.placedSymbolArray.get(Be.centerJustifiedTextSymbolIndex),wi=y.ap(m.textSizeData,U,po),Ui=b.get("text-padding");Jr=this.collisionIndex.placeCollisionCircles(re,po,m.lineVertexArray,m.glyphOffsetArray,wi,D,R,p,ge,q.predicate,Be.collisionCircleDiameter,Ui,E,Ae),Jr.circles.length&&Jr.collisionDetected&&!p&&y.w("Collisions detected, but collision boxes are not shown"),pn=oe||Jr.circles.length>0&&!Jr.collisionDetected,wr=wr&&Jr.offscreen}if(ht.iconFeatureIndex&&(Xl=ht.iconFeatureIndex),ht.iconBox){const po=wi=>this.collisionIndex.placeCollisionBox(wi,ue,O,Ie,D,ge,fe,I,q.predicate,Ae,le&&tn?tn:void 0,We);li&&li.placeable&&ht.verticalIconBox?(Vi=po(ht.verticalIconBox),ar=Vi.placeable):(Vi=po(ht.iconBox),ar=Vi.placeable),wr=wr&&Vi.offscreen}const pl=ne||0===Be.numHorizontalGlyphVertices&&0===Be.numVerticalGlyphVertices,du=ee||0===Be.numIconVertices;pl||du?du?pl||(ar=ar&&pn):pn=ar&&pn:ar=pn=ar&&pn;const Va=ar&&Vi.placeable;if(pn&&kn.placeable&&this.collisionIndex.insertCollisionBox(kn.box,re,b.get("text-ignore-placement"),m.bucketInstanceId,li&&li.placeable&&Js?Js:xi,q.ID),Va&&this.collisionIndex.insertCollisionBox(Vi.box,ue,b.get("icon-ignore-placement"),m.bucketInstanceId,Xl,q.ID),Jr&&pn&&this.collisionIndex.insertCollisionCircles(Jr.circles,re,b.get("text-ignore-placement"),m.bucketInstanceId,xi,q.ID),p&&this.storeCollisionData(m.bucketInstanceId,en,ht,kn,Vi,Jr),0===Be.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===m.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Be.crossTileID]=new zu((pn||ke)&&!kn?.occluded,(ar||Te)&&!Vi?.occluded,wr||m.justReloaded),u[Be.crossTileID]=!0};if(be){if(0!==o.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const Be=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let ht=Be.length-1;ht>=0;--ht){const en=Be[ht];qe(m.symbolInstances.get(en),m.collisionArrays[en],en)}}else for(let Be=o.symbolInstanceStart;Be<o.symbolInstanceEnd;Be++)qe(m.symbolInstances.get(Be),m.collisionArrays[Be],Be);m.justReloaded=!1}storeCollisionData(o,u,p,m,b,E){if(p.textBox||p.iconBox){let I,D;this.collisionBoxArrays.has(o)?I=this.collisionBoxArrays.get(o):(I=new Map,this.collisionBoxArrays.set(o,I)),I.has(u)?D=I.get(u):(D={text:null,icon:null},I.set(u,D)),p.textBox&&(D.text=m.box),p.iconBox&&(D.icon=b.box)}if(E){let I=this.collisionCircleArrays[o];void 0===I&&(I=this.collisionCircleArrays[o]=[]);for(let D=0;D<E.circles.length;D+=4)I.push(E.circles[D+0]-Cn),I.push(E.circles[D+1]-Cn),I.push(E.circles[D+2]),I.push(E.collisionDetected?1:0)}}markUsedJustification(o,u,p,m){let b;b=m===y.ao.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[y.aG(u)];const E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const I of E)I>=0&&(o.text.placedSymbolArray.get(I).crossTileID=b>=0&&I!==b?0:p.crossTileID)}markUsedOrientation(o,u,p){const m=u===y.ao.horizontal||u===y.ao.horizontalOnly?u:0,b=u===y.ao.vertical?u:0,E=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const I of E)o.text.placedSymbolArray.get(I).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(o.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(o){this.commitTime=o,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let p=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const m=u?u.symbolFadeChange(o):1,b=u?u.opacities:{},E=u?u.variableOffsets:{},I=u?u.placedOrientations:{};for(const D in this.placements){const R=this.placements[D],O=b[D];O?(this.opacities[D]=new Gn(O,m,R.text,R.icon),p=p||R.text!==O.text.placed||R.icon!==O.icon.placed):(this.opacities[D]=new Gn(null,m,R.text,R.icon,R.skipFade),p=p||R.text||R.icon)}for(const D in b){const R=b[D];if(!this.opacities[D]){const O=new Gn(R,m,!1,!1);O.isHidden()||(this.opacities[D]=O,p=p||R.text.placed||R.icon.placed)}}for(const D in E)this.variableOffsets[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.variableOffsets[D]=E[D]);for(const D in I)this.placedOrientations[D]||!this.opacities[D]||this.opacities[D].isHidden()||(this.placedOrientations[D]=I[D]);if(u&&void 0===u.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=o:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:o)}updateLayerOpacities(o,u){const p={};for(const m of u){const b=m.getBucket(o);b&&m.latestFeatureIndex&&o.id===b.layerIds[0]&&this.updateBucketOpacities(b,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(o,u,p,m){o.hasTextData()&&(o.text.opacityVertexArray.clear(),o.text.hasVisibleVertices=!1),o.hasIconData()&&(o.icon.opacityVertexArray.clear(),o.icon.hasVisibleVertices=!1),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexArray.clear(),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexArray.clear();const b=o.layers[0],E=b.layout,I=new Gn(null,0,!1,!1,!0),D=E.get("text-allow-overlap"),R=E.get("icon-allow-overlap"),O=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),j="map"===E.get("text-rotation-alignment"),z="map"===E.get("text-pitch-alignment"),U="none"!==E.get("icon-text-fit"),q=new Gn(null,0,D&&(R||!o.hasIconData()||E.get("icon-optional")),R&&(D||!o.hasTextData()||E.get("text-optional")),!0);!o.collisionArrays&&m&&(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData())&&o.deserializeCollisionBoxes(m);const ne=(re,oe,ue)=>{for(let ae=0;ae<oe/4;ae++)re.opacityVertexArray.emplaceBack(ue);re.hasVisibleVertices=re.hasVisibleVertices||ue!==zc},ee=this.collisionBoxArrays.get(o.bucketInstanceId);for(let re=0;re<o.symbolInstances.length;re++){const oe=o.symbolInstances.get(re),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:ae,crossTileID:fe}=oe;let ge=this.opacities[fe];p[fe]?ge=I:ge||(ge=q,this.opacities[fe]=ge),p[fe]=!0;const le=oe.numIconVertices>0,be=this.placedOrientations[oe.crossTileID],ke=be===y.ao.vertical,Te=be===y.ao.horizontal||be===y.ao.horizontalOnly;if(ue>0||ae>0){const Ae=yp(ge.text);ne(o.text,ue,ke?zc:Ae),ne(o.text,ae,Te?zc:Ae);const We=ge.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(ht=>{ht>=0&&(o.text.placedSymbolArray.get(ht).hidden=We||ke?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(o.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=We||Te?1:0);const qe=this.variableOffsets[oe.crossTileID];qe&&this.markUsedJustification(o,qe.anchor,oe,be);const Be=this.placedOrientations[oe.crossTileID];Be&&(this.markUsedJustification(o,"left",oe,Be),this.markUsedOrientation(o,Be,oe))}if(le){const Ae=yp(ge.icon),We=!(U&&oe.verticalPlacedIconSymbolIndex&&ke);oe.placedIconSymbolIndex>=0&&(ne(o.icon,oe.numIconVertices,We?Ae:zc),o.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=ge.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ne(o.icon,oe.numVerticalIconVertices,We?zc:Ae),o.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}const Ie=ee&&ee.has(re)?ee.get(re):{text:null,icon:null};if(o.hasIconCollisionBoxData()||o.hasTextCollisionBoxData()){const Ae=o.collisionArrays[re];if(Ae){let We=new y.P(0,0);if(Ae.textBox||Ae.verticalTextBox){let qe=!0;if(O){const Be=this.variableOffsets[fe];Be?(We=Zr(Be.anchor,Be.width,Be.height,Be.textOffset,Be.textBoxScale),j&&We._rotate(z?-this.transform.bearingInRadians:this.transform.bearingInRadians)):qe=!1}if(Ae.textBox||Ae.verticalTextBox){let Be;Ae.textBox&&(Be=ke),Ae.verticalTextBox&&(Be=Te),tf(o.textCollisionBox.collisionVertexArray,ge.text.placed,!qe||Be,Ie.text,We.x,We.y)}}if(Ae.iconBox||Ae.verticalIconBox){const qe=!(Te||!Ae.verticalIconBox);let Be;Ae.iconBox&&(Be=qe),Ae.verticalIconBox&&(Be=!qe),tf(o.iconCollisionBox.collisionVertexArray,ge.icon.placed,Be,Ie.icon,U?We.x:0,U?We.y:0)}}}}if(o.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[o.bucketInstanceId]&&(this.retainedQueryData[o.bucketInstanceId].featureSortOrder=o.featureSortOrder),o.hasTextData()&&o.text.opacityVertexBuffer&&o.text.opacityVertexBuffer.updateData(o.text.opacityVertexArray),o.hasIconData()&&o.icon.opacityVertexBuffer&&o.icon.opacityVertexBuffer.updateData(o.icon.opacityVertexArray),o.hasIconCollisionBoxData()&&o.iconCollisionBox.collisionVertexBuffer&&o.iconCollisionBox.collisionVertexBuffer.updateData(o.iconCollisionBox.collisionVertexArray),o.hasTextCollisionBoxData()&&o.textCollisionBox.collisionVertexBuffer&&o.textCollisionBox.collisionVertexBuffer.updateData(o.textCollisionBox.collisionVertexArray),o.text.opacityVertexArray.length!==o.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${o.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${o.text.layoutVertexArray.length}) / 4`);if(o.icon.opacityVertexArray.length!==o.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${o.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${o.icon.layoutVertexArray.length}) / 4`);o.bucketInstanceId in this.collisionCircleArrays&&(o.collisionCircleArray=this.collisionCircleArrays[o.bucketInstanceId],delete this.collisionCircleArrays[o.bucketInstanceId])}symbolFadeChange(o){return 0===this.fadeDuration?1:(o-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(o){return Math.max(0,(this.transform.zoom-o)/1.5)}hasTransitions(o){return this.stale||o-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(o,u){const p=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*p>o}setStale(){this.stale=!0}}function tf(v,o,u,p,m,b){p&&0!==p.length||(p=[0,0,0,0]);const E=p[0]-Cn,I=p[1]-Cn,D=p[2]-Cn,R=p[3]-Cn;v.emplaceBack(o?1:0,u?1:0,m||0,b||0,E,I),v.emplaceBack(o?1:0,u?1:0,m||0,b||0,D,I),v.emplaceBack(o?1:0,u?1:0,m||0,b||0,D,R),v.emplaceBack(o?1:0,u?1:0,m||0,b||0,E,R)}const dm=Math.pow(2,25),Sa=Math.pow(2,24),ju=Math.pow(2,17),hm=Math.pow(2,16),gy=Math.pow(2,9),fm=Math.pow(2,8),pm=Math.pow(2,1);function yp(v){if(0===v.opacity&&!v.placed)return 0;if(1===v.opacity&&v.placed)return 4294967295;const o=v.placed?1:0,u=Math.floor(127*v.opacity);return u*dm+o*Sa+u*ju+o*hm+u*gy+o*fm+u*pm+o}const zc=0;class vp{constructor(o){this._sortAcrossTiles="viewport-y"!==o.layout.get("symbol-z-order")&&!o.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(o,u,p,m,b){const E=this._bucketParts;for(;this._currentTileIndex<o.length;)if(u.getBucketParts(E,m,o[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,E.sort((I,D)=>I.sortKey-D.sortKey));this._currentPartIndex<E.length;)if(u.placeLayerBucketPart(E[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,b())return!0;return!1}}class _i{constructor(o,u,p,m,b,E,I,D){this.placement=new Ll(o,u,E,I,D),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(o,u,p){const m=Dt.now(),b=()=>!this._forceFullPlacement&&Dt.now()-m>2;for(;this._currentPlacementIndex>=0;){const E=u[o[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if("symbol"===E.type&&(!E.minzoom||E.minzoom<=I)&&(!E.maxzoom||E.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new vp(E)),this._inProgressLayer.continuePlacement(p[E.source],this.placement,this._showCollisionBoxes,E,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(o){return this.placement.commit(o),this.placement}}const It=512/y.$/2;class bp{constructor(o,u,p){this.tileID=o,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let b=0;b<u.length;b++){const E=u.get(b),I=E.key,D=m.get(I);D?D.push(E):m.set(I,[E])}for(const[b,E]of m){const I={positions:E.map(D=>({x:Math.floor(D.anchorX*It),y:Math.floor(D.anchorY*It)})),crossTileIDs:E.map(D=>D.crossTileID)};if(I.positions.length>128){const D=new y.aI(I.positions.length,16,Uint16Array);for(const{x:R,y:O}of I.positions)D.add(R,O);D.finish(),delete I.positions,I.index=D}this._symbolsByKey[b]=I}}getScaledCoordinates(o,u){const{x:p,y:m,z:b}=this.tileID.canonical,{x:E,y:I,z:D}=u.canonical,R=It/Math.pow(2,D-b),O=(I*y.$+o.anchorY)*R,j=m*y.$*It;return{x:Math.floor((E*y.$+o.anchorX)*R-p*y.$*It),y:Math.floor(O-j)}}findMatches(o,u,p){const m=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let b=0;b<o.length;b++){const E=o.get(b);if(E.crossTileID)continue;const I=this._symbolsByKey[E.key];if(!I)continue;const D=this.getScaledCoordinates(E,u);if(I.index){const R=I.index.range(D.x-m,D.y-m,D.x+m,D.y+m).sort();for(const O of R){const j=I.crossTileIDs[O];if(!p[j]){p[j]=!0,E.crossTileID=j;break}}}else if(I.positions)for(let R=0;R<I.positions.length;R++){const O=I.positions[R],j=I.crossTileIDs[R];if(Math.abs(O.x-D.x)<=m&&Math.abs(O.y-D.y)<=m&&!p[j]){p[j]=!0,E.crossTileID=j;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:o})=>o)}}class xp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gm{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(o){const u=Math.round((o-this.lng)/360);if(0!==u)for(const p in this.indexes){const m=this.indexes[p],b={};for(const E in m){const I=m[E];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+u),b[I.tileID.key]=I}this.indexes[p]=b}this.lng=o}addBucket(o,u,p){if(this.indexes[o.overscaledZ]&&this.indexes[o.overscaledZ][o.key]){if(this.indexes[o.overscaledZ][o.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(o.overscaledZ,this.indexes[o.overscaledZ][o.key])}for(let b=0;b<u.symbolInstances.length;b++)u.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[o.overscaledZ]||(this.usedCrossTileIDs[o.overscaledZ]={});const m=this.usedCrossTileIDs[o.overscaledZ];for(const b in this.indexes){const E=this.indexes[b];if(Number(b)>o.overscaledZ)for(const I in E){const D=E[I];D.tileID.isChildOf(o)&&D.findMatches(u.symbolInstances,o,m)}else{const I=E[o.scaledTo(Number(b)).key];I&&I.findMatches(u.symbolInstances,o,m)}}for(let b=0;b<u.symbolInstances.length;b++){const E=u.symbolInstances.get(b);E.crossTileID||(E.crossTileID=p.generate(),m[E.crossTileID]=!0)}return void 0===this.indexes[o.overscaledZ]&&(this.indexes[o.overscaledZ]={}),this.indexes[o.overscaledZ][o.key]=new bp(o,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(o,u){for(const p of u.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[o][m]}removeStaleBuckets(o){let u=!1;for(const p in this.indexes){const m=this.indexes[p];for(const b in m)o[m[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[b]),delete m[b],u=!0)}return u}}class Vu{constructor(){this.layerIndexes={},this.crossTileIDs=new xp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(o,u,p){let m=this.layerIndexes[o.id];void 0===m&&(m=this.layerIndexes[o.id]=new gm);let b=!1;const E={};m.handleWrapJump(p);for(const I of u){const D=I.getBucket(o);D&&o.id===D.layerIds[0]&&(D.bucketInstanceId||(D.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(I.tileID,D,this.crossTileIDs)&&(b=!0),E[D.bucketInstanceId]=!0)}return m.removeStaleBuckets(E)&&(b=!0),b}pruneUnusedLayers(o){const u={};o.forEach(p=>{u[p]=!0});for(const p in this.layerIndexes)u[p]||delete this.layerIndexes[p]}}var Gd="void main() {fragColor=vec4(1.0);}";const at={prelude:hn("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:hn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:hn("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:hn("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:hn("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:hn("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:hn(Gd,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:hn("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:hn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:hn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:hn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:hn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:hn(Gd,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:hn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:hn("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:hn("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:hn("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:hn("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:hn("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:hn("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:hn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:hn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:hn("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:hn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:hn("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:hn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:hn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:hn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:hn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:hn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:hn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:hn("in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:hn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function hn(v,o){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=o.match(/in ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=o.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),E=b?b.concat(m):m,I={};return{fragmentSource:v=v.replace(u,(D,R,O,j,z)=>(I[z]=!0,"define"===R?`\n#ifndef HAS_UNIFORM_u_${z}\nin ${O} ${j} ${z};\n#else\nuniform ${O} ${j} u_${z};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${z}\n    ${O} ${j} ${z} = u_${z};\n#endif\n`)),vertexSource:o=o.replace(u,(D,R,O,j,z)=>{const U="float"===j?"vec2":"vec4",q=z.match(/color/)?"color":U;return I[z]?"define"===R?`\n#ifndef HAS_UNIFORM_u_${z}\nuniform lowp float u_${z}_t;\nin ${O} ${U} a_${z};\nout ${O} ${j} ${z};\n#else\nuniform ${O} ${j} u_${z};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${z}\n    ${z} = a_${z};\n#else\n    ${O} ${j} ${z} = u_${z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${z}\n    ${z} = unpack_mix_${q}(a_${z}, u_${z}_t);\n#else\n    ${O} ${j} ${z} = u_${z};\n#endif\n`:"define"===R?`\n#ifndef HAS_UNIFORM_u_${z}\nuniform lowp float u_${z}_t;\nin ${O} ${U} a_${z};\n#else\nuniform ${O} ${j} u_${z};\n#endif\n`:"vec4"===q?`\n#ifndef HAS_UNIFORM_u_${z}\n    ${O} ${j} ${z} = a_${z};\n#else\n    ${O} ${j} ${z} = u_${z};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${z}\n    ${O} ${j} ${z} = unpack_mix_${q}(a_${z}, u_${z}_t);\n#else\n    ${O} ${j} ${z} = u_${z};\n#endif\n`}),staticAttributes:p,staticUniforms:E}}class Fi{constructor(o,u,p){this.vertexBuffer=o,this.indexBuffer=u,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var fs=y.aJ([{name:"a_pos",type:"Int16",components:2}]);const Ea="#define PROJECTION_MERCATOR",Ol="mercator";class ln{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Ol}get shaderDefine(){return Ea}get shaderPreludeCode(){return at.projectionMercator}get vertexShaderPreludeCode(){return at.projectionMercator.vertexSource}get subdivisionGranularity(){return y.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(o){}getMeshFromTileID(o,u,p,m,b){if(this._cachedMesh)return this._cachedMesh;const E=new y.aL;E.emplaceBack(0,0),E.emplaceBack(y.$,0),E.emplaceBack(0,y.$),E.emplaceBack(y.$,y.$);const I=o.createVertexBuffer(E,fs.members),D=y.aM.simpleSegment(0,0,4,2),R=new y.aN;R.emplaceBack(1,0,2),R.emplaceBack(1,2,3);const O=o.createIndexBuffer(R);return this._cachedMesh=new Fi(I,O,D),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(o){}}class js{constructor(o=0,u=0,p=0,m=0){if(isNaN(o)||o<0||isNaN(u)||u<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=o,this.bottom=u,this.left=p,this.right=m}interpolate(o,u,p){return null!=u.top&&null!=o.top&&(this.top=y.C.number(o.top,u.top,p)),null!=u.bottom&&null!=o.bottom&&(this.bottom=y.C.number(o.bottom,u.bottom,p)),null!=u.left&&null!=o.left&&(this.left=y.C.number(o.left,u.left,p)),null!=u.right&&null!=o.right&&(this.right=y.C.number(o.right,u.right,p)),this}getCenter(o,u){const p=y.ah((this.left+o-this.right)/2,0,o),m=y.ah((this.top+u-this.bottom)/2,0,u);return new y.P(p,m)}equals(o){return this.top===o.top&&this.bottom===o.bottom&&this.left===o.left&&this.right===o.right}clone(){return new js(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fl(v,o){if(!v.renderWorldCopies||v.lngRange)return;const u=o.lng-v.center.lng;o.lng+=u>180?-360:u<-180?360:0}function jc(v){return Math.max(0,Math.floor(v))}class Ye{constructor(o,u,p,m,b,E){this._callbacks=o,this._tileSize=512,this._renderWorldCopies=void 0===E||!!E,this._minZoom=u||0,this._maxZoom=p||22,this._minPitch=m??0,this._maxPitch=b??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new y.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=jc(this._zoom),this._scale=y.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new js,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(o,u,p){this._latRange=o.latRange,this._lngRange=o.lngRange,this._width=o.width,this._height=o.height,this._center=o.center,this._elevation=o.elevation,this._minElevationForCurrentTile=o.minElevationForCurrentTile,this._zoom=o.zoom,this._tileZoom=jc(this._zoom),this._scale=y.af(this._zoom),this._bearingInRadians=o.bearingInRadians,this._fovInRadians=o.fovInRadians,this._pitchInRadians=o.pitchInRadians,this._rollInRadians=o.rollInRadians,this._unmodified=o.unmodified,this._edgeInsets=new js(o.padding.top,o.padding.bottom,o.padding.left,o.padding.right),this._minZoom=o.minZoom,this._maxZoom=o.maxZoom,this._minPitch=o.minPitch,this._maxPitch=o.maxPitch,this._renderWorldCopies=o.renderWorldCopies,this._cameraToCenterDistance=o.cameraToCenterDistance,this._nearZ=o.nearZ,this._farZ=o.farZ,this._autoCalculateNearFarZ=!p&&o.autoCalculateNearFarZ,u&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(o){this._minElevationForCurrentTile=o}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(o){this._minZoom!==o&&(this._minZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(o){this._maxZoom!==o&&(this._maxZoom=o,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(o){this._minPitch!==o&&(this._minPitch=o,this.setPitch(Math.max(this.pitch,o)))}get maxPitch(){return this._maxPitch}setMaxPitch(o){this._maxPitch!==o&&(this._maxPitch=o,this.setPitch(Math.min(this.pitch,o)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(o){void 0===o?o=!0:null===o&&(o=!1),this._renderWorldCopies=o}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new y.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(o){const u=y.aO(o,-180,180)*Math.PI/180;var p,m,b,E,I,D,R,O,j;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=kl(),p=this._rotationMatrix,b=-this._bearingInRadians,E=(m=this._rotationMatrix)[0],I=m[1],D=m[2],R=m[3],O=Math.sin(b),j=Math.cos(b),p[0]=E*j+D*O,p[1]=I*j+R*O,p[2]=E*-O+D*j,p[3]=I*-O+R*j)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(o){const u=y.ah(o,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(o){const u=o/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return y.aP(this._fovInRadians)}setFov(o){o=y.ah(o,.1,150),this.fov!==o&&(this._unmodified=!1,this._fovInRadians=y.ae(o),this._calcMatrices())}get zoom(){return this._zoom}setZoom(o){const u=this.getConstrained(this._center,o).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=y.af(u),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(o){o.lat===this._center.lat&&o.lng===this._center.lng||(this._unmodified=!1,this._center=o,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(o){o!==this._elevation&&(this._elevation=o,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(o){this._edgeInsets.equals(o)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,o,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(o,u){this._autoCalculateNearFarZ=!1,this._nearZ=o,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(o){return this._edgeInsets.equals(o)}interpolatePadding(o,u,p){this._unmodified=!1,this._edgeInsets.interpolate(o,u,p),this._constrain(),this._calcMatrices()}resize(o,u,p=!0){this._width=o,this._height=u,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new Ir([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(o){o?(this._lngRange=[o.getWest(),o.getEast()],this._latRange=[o.getSouth(),o.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-y.ai,y.ai])}getConstrained(o,u){return this._callbacks.getConstrained(o,u)}getCameraQueryGeometry(o,u){if(1===u.length)return[u[0],o];{const{minX:p,minY:m,maxX:b,maxY:E}=y.a2.fromPoints(u).extend(o);return[new y.P(p,m),new y.P(b,m),new y.P(b,E),new y.P(p,E),new y.P(p,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const o=this._unmodified,{center:u,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(u),this.setZoom(p),this._unmodified=o,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let o=y.ag(new Float64Array(16));y.N(o,o,[this._width/2,-this._height/2,1]),y.M(o,o,[1,-1,0]),this._clipSpaceToPixelsMatrix=o,o=y.ag(new Float64Array(16)),y.N(o,o,[1,-1,1]),y.M(o,o,[-1,-1,0]),y.N(o,o,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=o,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(o,u,p,m){const b=void 0!==p?p:this.bearing,E=m=void 0!==m?m:this.pitch,I=y.a1.fromLngLat(o,u),D=-Math.cos(y.ae(E)),R=Math.sin(y.ae(E)),O=R*Math.sin(y.ae(b)),j=-R*Math.cos(y.ae(b));let z=this.elevation;const U=u-z;let q;D*U>=0||Math.abs(D)<.1?(q=1e4,z=u+q*D):q=-U/D;let ne,ee,re=y.aQ(1,I.y),oe=0;do{if(oe+=1,oe>10)break;ee=q/re,ne=new y.a1(I.x+O*ee,I.y+j*ee),re=1/ne.meterInMercatorCoordinateUnits()}while(Math.abs(q-ee*re)>1e-12);return{center:ne.toLngLat(),elevation:z,zoom:y.ak(this.height/2/Math.tan(this.fovInRadians/2)/ee/this.tileSize)}}recalculateZoomAndCenter(o){if(this.elevation-o==0)return;const u=y.aj(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/u,m=y.a1.fromLngLat(this.center,this.elevation),b=De(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=o;const E=this.calculateCenterFromCameraLngLatAlt(b.toLngLat(),y.aQ(b.z,m.y),this.bearing,this.pitch);this._elevation=E.elevation,this._center=E.center,this.setZoom(E.zoom)}getCameraPoint(){const o=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new y.P(o*Math.sin(this.rollInRadians),o*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const o=y.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/o).toLngLat()}getMercatorTileCoordinates(o){if(!o)return[0,0,1,1];const u=o.canonical.z>=0?1<<o.canonical.z:Math.pow(2,o.canonical.z);return[o.canonical.x/u,o.canonical.y/u,1/u/y.$,1/u/y.$]}}class Kr{constructor(o,u){this.min=o,this.max=u,this.center=y.aR([],y.aS([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],p=y.aT(this.min),m=y.aT(this.max);for(let b=0;b<u.length;b++)p[b]=u[b]?this.min[b]:this.center[b],m[b]=u[b]?this.center[b]:this.max[b];return m[2]=this.max[2],new Kr(p,m)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}intersectsFrustum(o){let u=!0;for(let p=0;p<o.planes.length;p++){const m=this.intersectsPlane(o.planes[p]);if(0===m)return 0;1===m&&(u=!1)}return u?2:o.aabb.min[0]>this.max[0]||o.aabb.min[1]>this.max[1]||o.aabb.min[2]>this.max[2]||o.aabb.max[0]<this.min[0]||o.aabb.max[1]<this.min[1]||o.aabb.max[2]<this.min[2]?0:1}intersectsPlane(o){let u=o[3],p=o[3];for(let m=0;m<3;m++)o[m]>0?(u+=o[m]*this.min[m],p+=o[m]*this.max[m]):(p+=o[m]*this.min[m],u+=o[m]*this.max[m]);return u>=0?2:p<0?0:1}}class oi{distanceToTile2d(o,u,p,m){const b=m.distanceX([o,u]),E=m.distanceY([o,u]);return Math.hypot(b,E)}getWrap(o,u,p){return p}getTileBoundingVolume(o,u,p,m){var b,E;let I=0,D=0;if(m?.terrain){const O=new y.Z(o.z,u,o.z,o.x,o.y),j=m.terrain.getMinMaxElevation(O);I=null!==(b=j.minElevation)&&void 0!==b?b:Math.min(0,p),D=null!==(E=j.maxElevation)&&void 0!==E?E:Math.max(0,p)}const R=1<<o.z;return new Kr([u+o.x/R,o.y/R,I],[u+(o.x+1)/R,(o.y+1)/R,D])}allowVariableZoom(o,u){const p=o.fov*(Math.abs(Math.cos(o.rollInRadians))*o.height+Math.abs(Math.sin(o.rollInRadians))*o.width)/o.height,m=y.ah(78.5-p/2,0,60);return!!u.terrain||o.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class yr{constructor(o,u,p){this.points=o,this.planes=u,this.aabb=p}static fromInvProjectionMatrix(o,u=1,p=0,m,b){const E=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],I=Math.pow(2,p),D=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>function(U,q,ne,ee){const re=y.aw([],U,q),oe=1/re[3]/ne*ee;return y.aY(re,re,[oe,oe,1/re[3],oe])}(z,o,u,I));m&&function(z,U,q,ne){const ee=ne?4:0,re=ne?0:4;let oe=0;const ue=[],ae=[];for(let le=0;le<4;le++){const be=y.aU([],z[le+re],z[le+ee]),ke=y.aZ(be);y.aR(be,be,1/ke),ue.push(ke),ae.push(be)}for(let le=0;le<4;le++){const be=y.a_(z[le+ee],ae[le],q);oe=null!==be&&be>=0?Math.max(oe,be):Math.max(oe,ue[le])}const fe=function(le,be){const ke=y.aU([],le[be[0]],le[be[1]]),Te=y.aU([],le[be[2]],le[be[1]]),Ie=[0,0,0,0];return y.aV(Ie,y.aW([],ke,Te)),Ie[3]=-y.aX(Ie,le[be[0]]),Ie}(z,U),ge=function(le,be){const ke=y.a$(le),Te=y.b0([],le,1/ke),Ie=y.aU([],be,y.aR([],Te,y.aX(be,Te))),Ae=y.a$(Ie);if(Ae>0){const We=Math.sqrt(1-Te[3]*Te[3]),qe=y.aR([],Te,-Te[3]),Be=y.aS([],qe,y.aR([],Ie,We/Ae));return y.b1(be,Be)}return null}(q,fe);if(null!==ge){const le=ge/y.aX(ae[0],fe);oe=Math.min(oe,le)}for(let le=0;le<4;le++){const be=Math.min(oe,ue[le]);z[le+re]=[z[le+ee][0]+ae[le][0]*be,z[le+ee][1]+ae[le][1]*be,z[le+ee][2]+ae[le][2]*be,1]}}(D,E[0],m,b);const R=E.map(z=>{const U=y.aU([],D[z[0]],D[z[1]]),q=y.aU([],D[z[2]],D[z[1]]),ne=y.aV([],y.aW([],U,q)),ee=-y.aX(ne,D[z[1]]);return ne.concat(ee)}),O=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],j=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const z of D)for(let U=0;U<3;U++)O[U]=Math.min(O[U],z[U]),j[U]=Math.max(j[U],z[U]);return new yr(D,R,new Kr(O,j))}}class Tn{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,u,p){return this._helper.interpolatePadding(o,u,p)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,u,p=!0){this._helper.resize(o,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,u){this._helper.overrideNearFarZ(o,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o,u){}constructor(o,u,p,m,b){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ye({calcMatrices:()=>{this._calcMatrices()},getConstrained:(E,I)=>this.getConstrained(E,I)},o,u,p,m,b),this._coveringTilesDetailsProvider=new oi}clone(){const o=new Tn;return o.apply(this),o}apply(o,u,p){this._helper.apply(o,u,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(o){const u=[new y.b2(0,o)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new y.P(0,0)),m=this.screenPointToMercatorCoordinate(new y.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new y.P(this._helper._width,this._helper._height)),E=this.screenPointToMercatorCoordinate(new y.P(0,this._helper._height)),I=Math.floor(Math.min(p.x,m.x,b.x,E.x)),D=Math.floor(Math.max(p.x,m.x,b.x,E.x)),R=1;for(let O=I-R;O<=D+R;O++)0!==O&&u.push(new y.b2(O,o))}return u}getCameraFrustum(){return yr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){const u=this.screenPointToLocation(this.centerPoint,o),p=o?o.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(o,u){const p=y.aj(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(u,p),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),E=y.a1.fromLngLat(o),I=new y.a1(E.x-(m.x-b.x),E.y-(m.y-b.y));this.setCenter(I?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(o,u){return u?this.coordinatePoint(y.a1.fromLngLat(o),u.getElevationForLngLatZoom(o,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(y.a1.fromLngLat(o))}screenPointToLocation(o,u){var p;return null===(p=this.screenPointToMercatorCoordinate(o,u))||void 0===p?void 0:p.toLngLat()}screenPointToMercatorCoordinate(o,u){if(u){const p=u.pointCoordinate(o);if(null!=p)return p}return this.screenPointToMercatorCoordinateAtZ(o)}screenPointToMercatorCoordinateAtZ(o,u){const p=u||0,m=[o.x,o.y,0,1],b=[o.x,o.y,1,1];y.aw(m,m,this._pixelMatrixInverse),y.aw(b,b,this._pixelMatrixInverse);const E=m[3],I=b[3],D=m[1]/E,R=b[1]/I,O=m[2]/E,j=b[2]/I,z=O===j?0:(p-O)/(j-O);return new y.a1(y.C.number(m[0]/E,b[0]/I,z)/this.worldSize,y.C.number(D,R,z)/this.worldSize,p)}coordinatePoint(o,u=0,p=this._pixelMatrix){const m=[o.x*this.worldSize,o.y*this.worldSize,u,1];return y.aw(m,m,p),new y.P(m[0]/m[3],m[1]/m[3])}getBounds(){const o=Math.max(0,this._helper._height/2-me(this));return(new Ir).extend(this.screenPointToLocation(new y.P(0,o))).extend(this.screenPointToLocation(new y.P(this._helper._width,o))).extend(this.screenPointToLocation(new y.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new y.P(0,this._helper._height)))}isPointOnMapSurface(o,u){return u?null!=u.pointCoordinate(o):o.y>this.height/2-me(this)}calculatePosMatrix(o,u=!1,p){var m;const b=null!==(m=o.key)&&void 0!==m?m:y.b3(o.wrap,o.canonical.z,o.canonical.z,o.canonical.x,o.canonical.y),E=u?this._alignedPosMatrixCache:this._posMatrixCache;if(E.has(b)){const R=E.get(b);return p?R.f32:R.f64}const I=Se(o,this.worldSize);y.O(I,u?this._alignedProjMatrix:this._viewProjMatrix,I);const D={f64:I,f32:new Float32Array(I)};return E.set(b,D),p?D.f32:D.f64}calculateFogMatrix(o){const u=o.key,p=this._fogMatrixCacheF32;if(p.has(u))return p.get(u);const m=Se(o,this.worldSize);return y.O(m,this._fogMatrix,m),p.set(u,new Float32Array(m)),p.get(u)}getConstrained(o,u){u=y.ah(+u,this.minZoom,this.maxZoom);const p={center:new y.S(o.lng,o.lat),zoom:u};let m=this._helper._lngRange;if(!this._helper._renderWorldCopies&&null===m){const ue=179.9999999999;m=[-ue,ue]}const b=this.tileSize*y.af(p.zoom);let E=0,I=b,D=0,R=b,O=0,j=0;const{x:z,y:U}=this.size;if(this._helper._latRange){const ue=this._helper._latRange;E=y.U(ue[1])*b,I=y.U(ue[0])*b,I-E<U&&(O=U/(I-E))}m&&(D=y.aO(y.V(m[0])*b,0,b),R=y.aO(y.V(m[1])*b,0,b),R<D&&(R+=b),R-D<z&&(j=z/(R-D)));const{x:q,y:ne}=X(b,o);let ee,re;const oe=Math.max(j||0,O||0);if(oe){const ue=new y.P(j?(R+D)/2:q,O?(I+E)/2:ne);return p.center=ce(b,ue).wrap(),p.zoom+=y.ak(oe),p}if(this._helper._latRange){const ue=U/2;ne-ue<E&&(re=E+ue),ne+ue>I&&(re=I-ue)}if(m){const ue=(D+R)/2;let ae=q;this._helper._renderWorldCopies&&(ae=y.aO(q,ue-b/2,ue+b/2));const fe=z/2;ae-fe<D&&(ee=D+fe),ae+fe>R&&(ee=R-fe)}if(void 0!==ee||void 0!==re){const ue=new y.P(ee??q,re??ne);p.center=ce(b,ue).wrap()}return p}calculateCenterFromCameraLngLatAlt(o,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(o,u,p,m)}_calculateNearFarZIfNeeded(o,u,p){if(!this._helper.autoCalculateNearFarZ)return;const m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=o-m*this._helper._pixelPerMeter/Math.cos(u),E=m<0?b:o,I=Math.PI/2+this.pitchInRadians,D=y.ae(this.fov)*(Math.abs(Math.cos(y.ae(this.roll)))*this.height+Math.abs(Math.sin(y.ae(this.roll)))*this.width)/this.height*(.5+p.y/this.height),R=Math.sin(D)*E/Math.sin(y.ah(Math.PI-I-D,.01,Math.PI-.01)),O=me(this),j=Math.atan(O/this._helper.cameraToCenterDistance),z=y.ae(.75),U=j>z?2*j*(.5+p.y/(2*O)):z,q=Math.sin(U)*E/Math.sin(y.ah(Math.PI-I-U,.01,Math.PI-.01)),ne=Math.min(R,q);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*ne+E),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const o=this.centerOffset,u=X(this.worldSize,this.center),p=u.x,m=u.y;this._helper._pixelPerMeter=y.aj(1,this.center.lat)*this.worldSize;const b=y.ae(Math.min(this.pitch,Y)),E=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let I;this._calculateNearFarZIfNeeded(E,b,o),I=new Float64Array(16),y.b4(I,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),y.aq(this._invProjMatrix,I),I[8]=2*-o.x/this._helper._width,I[9]=2*o.y/this._helper._height,this._projectionMatrix=y.b5(I),y.N(I,I,[1,-1,1]),y.M(I,I,[0,0,-this._helper.cameraToCenterDistance]),y.b6(I,I,-this.rollInRadians),y.b7(I,I,this.pitchInRadians),y.b6(I,I,-this.bearingInRadians),y.M(I,I,[-p,-m,0]),this._mercatorMatrix=y.N([],I,[this.worldSize,this.worldSize,this.worldSize]),y.N(I,I,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=y.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I),y.M(I,I,[0,0,-this.elevation]),this._viewProjMatrix=I,this._invViewProjMatrix=y.aq([],I);const D=[0,0,-1,1];y.aw(D,D,this._invViewProjMatrix),this._cameraPosition=[D[0]/D[3],D[1]/D[3],D[2]/D[3]],this._fogMatrix=new Float64Array(16),y.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,E,this._helper._farZ),this._fogMatrix[8]=2*-o.x/this.width,this._fogMatrix[9]=2*o.y/this.height,y.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),y.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),y.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),y.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),y.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),y.M(this._fogMatrix,this._fogMatrix,[-p,-m,0]),y.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),y.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=y.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,I);const R=this._helper._width%2/2,O=this._helper._height%2/2,j=Math.cos(this.bearingInRadians),z=Math.sin(-this.bearingInRadians),U=p-Math.round(p)+j*R+z*O,q=m-Math.round(m)+j*O+z*R,ne=new Float64Array(I);if(y.M(ne,ne,[U>.5?U-1:U,q>.5?q-1:q,0]),this._alignedProjMatrix=ne,I=y.aq(new Float64Array(16),this._pixelMatrix),!I)throw new Error("failed to invert matrix");this._pixelMatrixInverse=I,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const o=this.screenPointToMercatorCoordinate(new y.P(0,0)),u=[o.x*this.worldSize,o.y*this.worldSize,0,1];return y.aw(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const o=y.aj(1,this.center.lat)*this.worldSize;return De(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/o).toLngLat()}lngLatToCameraDepth(o,u){const p=y.a1.fromLngLat(o),m=[p.x*this.worldSize,p.y*this.worldSize,u,1];return y.aw(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(o){const{overscaledTileID:u,aligned:p,applyTerrainMatrix:m}=o,b=this._helper.getMercatorTileCoordinates(u),E=u?this.calculatePosMatrix(u,p,!0):null;let I;return I=u&&u.terrainRttPosMatrix32f&&m?u.terrainRttPosMatrix32f:E||y.b8(),{mainMatrix:I,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:I}}isLocationOccluded(o){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(o,u,p){return 1}transformLightDirection(o){return y.aT(o)}getRayDirectionFromPixel(o){throw new Error("Not implemented.")}projectTileCoordinates(o,u,p,m){const b=this.calculatePosMatrix(p);let E;m?(E=[o,u,m(o,u),1],y.aw(E,E,b)):(E=[o,u,0,1],Oc(E,E,b));const I=E[3];return{point:new y.P(E[0]/I,E[1]/I),signedDistanceFromCamera:I,isOccluded:!1}}populateCache(o){for(const u of o)this.calculatePosMatrix(u)}getMatrixForModel(o,u){const p=y.a1.fromLngLat(o,u),m=p.meterInMercatorCoordinateUnits(),b=y.b9();return y.M(b,b,[p.x,p.y,p.z]),y.b6(b,b,Math.PI),y.b7(b,b,Math.PI/2),y.N(b,b,[-m,m,m]),b}getProjectionDataForCustomLayer(o=!0){const u=new y.Z(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:o}),m=Se(u,this.worldSize);y.O(m,this._viewProjMatrix,m),p.tileMercatorCoords=[0,0,1,1];const b=[y.$,y.$,this.worldSize/this._helper.pixelsPerMeter],E=y.ba();return y.N(E,m,b),p.fallbackMatrix=E,p.mainMatrix=E,p}getFastPathSimpleProjectionMatrix(o){return this.calculatePosMatrix(o)}}function wp(){y.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ji(v){if(v.useSlerp)if(v.k<1){const o=y.bb(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),u=y.bb(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),p=new Float64Array(4);y.bc(p,o,u,v.k);const m=y.bd(p);v.tr.setRoll(m.roll),v.tr.setPitch(m.pitch),v.tr.setBearing(m.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(y.C.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(y.C.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(y.C.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function To(v,o,u,p,m){const b=m.padding,E=X(m.worldSize,u.getNorthWest()),I=X(m.worldSize,u.getNorthEast()),D=X(m.worldSize,u.getSouthEast()),R=X(m.worldSize,u.getSouthWest()),O=y.ae(-p),j=E.rotate(O),z=I.rotate(O),U=D.rotate(O),q=R.rotate(O),ne=new y.P(Math.max(j.x,z.x,q.x,U.x),Math.max(j.y,z.y,q.y,U.y)),ee=new y.P(Math.min(j.x,z.x,q.x,U.x),Math.min(j.y,z.y,q.y,U.y)),re=ne.sub(ee),oe=(m.width-(b.left+b.right+o.left+o.right))/re.x,ue=(m.height-(b.top+b.bottom+o.top+o.bottom))/re.y;if(ue<0||oe<0)return void wp();const ae=Math.min(y.ak(m.scale*Math.min(oe,ue)),v.maxZoom),fe=y.P.convert(v.offset),ge=new y.P((o.left-o.right)/2,(o.top-o.bottom)/2).rotate(y.ae(p)),le=fe.add(ge).mult(m.scale/y.af(ae));return{center:ce(m.worldSize,E.add(D).div(2).sub(le)),zoom:ae,bearing:p}}class Yr{get useGlobeControls(){return!1}handlePanInertia(o,u){return{easingOffset:o,easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(o,u){o.bearingDelta&&u.setBearing(u.bearing+o.bearingDelta),o.pitchDelta&&u.setPitch(u.pitch+o.pitchDelta),o.rollDelta&&u.setRoll(u.roll+o.rollDelta),o.zoomDelta&&u.setZoom(u.zoom+o.zoomDelta)}handleMapControlsPan(o,u,p){o.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(p,o.around)}cameraForBoxAndBearing(o,u,p,m,b){return To(o,u,p,m,b)}handleJumpToCenterZoom(o,u){o.zoom!==(void 0!==u.zoom?+u.zoom:o.zoom)&&o.setZoom(+u.zoom),void 0!==u.center&&o.setCenter(y.S.convert(u.center))}handleEaseTo(o,u){const p=o.zoom,m=o.padding,b={roll:o.roll,pitch:o.pitch,bearing:o.bearing},E={roll:void 0===u.roll?o.roll:u.roll,pitch:void 0===u.pitch?o.pitch:u.pitch,bearing:void 0===u.bearing?o.bearing:u.bearing},I=void 0!==u.zoom,D=!o.isPaddingEqual(u.padding);let R=!1;const O=I?+u.zoom:o.zoom;let j=o.centerPoint.add(u.offsetAsPoint);const z=o.screenPointToLocation(j),{center:U,zoom:q}=o.getConstrained(y.S.convert(u.center||z),O??p);Fl(o,U);const ne=X(o.worldSize,z),ee=X(o.worldSize,U).sub(ne),re=y.af(q-p);return R=q!==p,{easeFunc:oe=>{if(R&&o.setZoom(y.C.number(p,q,oe)),y.be(b,E)||Ji({startEulerAngles:b,endEulerAngles:E,tr:o,k:oe,useSlerp:b.roll!=E.roll}),D&&(o.interpolatePadding(m,u.padding,oe),j=o.centerPoint.add(u.offsetAsPoint)),u.around)o.setLocationAtPoint(u.around,u.aroundPoint);else{const ue=y.af(o.zoom-p),ae=q>p?Math.min(2,re):Math.max(.5,re),fe=Math.pow(ae,1-oe),ge=ce(o.worldSize,ne.add(ee.mult(oe*fe)).mult(ue));o.setLocationAtPoint(o.renderWorldCopies?ge.wrap():ge,j)}},isZooming:R,elevationCenter:U}}handleFlyTo(o,u){const p=void 0!==u.zoom,m=o.zoom,b=o.getConstrained(y.S.convert(u.center||u.locationAtOffset),p?+u.zoom:m),E=b.center,I=b.zoom;Fl(o,E);const D=X(o.worldSize,u.locationAtOffset),R=X(o.worldSize,E).sub(D),O=R.mag(),j=y.af(I-m);let z;if(void 0!==u.minZoom){const U=Math.min(+u.minZoom,m,I),q=o.getConstrained(E,U).zoom;z=y.af(q-m)}return{easeFunc:(U,q,ne,ee)=>{o.setZoom(1===U?I:m+y.ak(q));const re=1===U?E:ce(o.worldSize,D.add(R.mult(ne)).mult(q));o.setLocationAtPoint(o.renderWorldCopies?re.wrap():re,ee)},scaleOfZoom:j,targetCenter:E,scaleOfMinZoom:z,pixelPathLength:O}}}class nr{constructor(o,u,p){this.blendFunction=o,this.blendColor=u,this.mask=p}}nr.Replace=[1,0],nr.disabled=new nr(nr.Replace,y.bf.transparent,[!1,!1,!1,!1]),nr.unblended=new nr(nr.Replace,y.bf.transparent,[!0,!0,!0,!0]),nr.alphaBlended=new nr([1,771],y.bf.transparent,[!0,!0,!0,!0]);class Ot{constructor(o,u,p){this.enable=o,this.mode=u,this.frontFace=p}}Ot.disabled=new Ot(!1,1029,2305),Ot.backCCW=new Ot(!0,1029,2305),Ot.frontCCW=new Ot(!0,1028,2305);class Jt{constructor(o,u,p){this.func=o,this.mask=u,this.range=p}}Jt.ReadOnly=!1,Jt.ReadWrite=!0,Jt.disabled=new Jt(519,Jt.ReadOnly,[0,1]);class xn{constructor(o,u,p,m,b,E){this.test=o,this.ref=u,this.mask=p,this.fail=m,this.depthFail=b,this.pass=E}}xn.disabled=new xn({func:519,mask:0},0,0,7680,7680,7680);const eo=new WeakMap;function Zo(v){var o;if(eo.has(v))return eo.get(v);{const u=null===(o=v.getParameter(v.VERSION))||void 0===o?void 0:o.startsWith("WebGL 2.0");return eo.set(v,u),u}}class Vs{get awaitingQuery(){return!!this._readbackQueue}constructor(o){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=o;const u=o.context,p=u.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const m=new y.aL;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);const b=new y.aN;b.emplaceBack(0,1,2),this._fullscreenTriangle=new Fi(u.createVertexBuffer(m,fs.members),u.createIndexBuffer(b),y.aM.simpleSegment(0,0,m.length,b.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(p.TEXTURE1);const E=p.createTexture();p.bindTexture(p.TEXTURE_2D,E),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(E),Zo(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const o=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),o.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(o,u){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(o,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const o=this._cachedRenderContext.context,u=o.gl;o.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),o.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(o,u){const p=this._cachedRenderContext.context,m=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:y.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,m.TRIANGLES,Jt.disabled,xn.disabled,nr.unblended,Ot.disabled,((b,E)=>({u_input:b,u_output_expected:E}))(o,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Zo(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);const b=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const o=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Zo(o)){const u=o.clientWaitSync(this._readbackQueue.sync,0,0);if(u===o.WAIT_FAILED)return y.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===o.TIMEOUT_EXPIRED)return;o.bindBuffer(o.PIXEL_PACK_BUFFER,this._pbo),o.getBufferSubData(o.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),o.bindBuffer(o.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),o.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Vs._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(o){let u=0;return u+=o[0]/256,u+=o[1]/65536,u+=o[2]/16777216,o[3]<127&&(u=-u),u/128}}const Hd=y.$/128;function qd(v,o){const u=void 0!==v.granularity?Math.max(v.granularity,1):1,p=u+(v.generateBorders?2:0),m=u+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),b=p+1,E=m+1,I=v.generateBorders?-1:0,D=v.generateBorders||v.extendToNorthPole?-1:0,R=u+(v.generateBorders?1:0),O=u+(v.generateBorders||v.extendToSouthPole?1:0),j=b*E,z=p*m*6,U=b*E>65536;if(U&&"16bit"===o)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const q=U||"32bit"===o,ne=new Int16Array(2*j);let ee=0;for(let ue=D;ue<=O;ue++)for(let ae=I;ae<=R;ae++){let fe=ae/u*y.$;-1===ae&&(fe=-Hd),ae===u+1&&(fe=y.$+Hd);let ge=ue/u*y.$;-1===ue&&(ge=v.extendToNorthPole?y.bh:-Hd),ue===u+1&&(ge=v.extendToSouthPole?y.bi:y.$+Hd),ne[ee++]=fe,ne[ee++]=ge}const re=q?new Uint32Array(z):new Uint16Array(z);let oe=0;for(let ue=0;ue<m;ue++)for(let ae=0;ae<p;ae++){const fe=ae+1+ue*b,ge=ae+(ue+1)*b,le=ae+1+(ue+1)*b;re[oe++]=ae+ue*b,re[oe++]=ge,re[oe++]=fe,re[oe++]=fe,re[oe++]=ge,re[oe++]=le}return{vertices:ne.buffer.slice(0),indices:re.buffer.slice(0),uses32bitIndices:q}}const Ko=new y.aK({fill:new y.bj(128,2),line:new y.bj(512,0),tile:new y.bj(128,32),stencil:new y.bj(128,1),circle:3});class Ta{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return at.projectionGlobe}get vertexShaderPreludeCode(){return at.projectionMercator.vertexSource}get subdivisionGranularity(){return Ko}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(o){this._errorMeasurement||(this._errorMeasurement=new Vs(o));const u=y.U(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(u,p),b=Dt.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=b);const E=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=y.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,y.bl(E))}_getMeshKey(o){return`${o.granularity.toString(36)}_${o.generateBorders?"b":""}${o.extendToNorthPole?"n":""}${o.extendToSouthPole?"s":""}`}getMeshFromTileID(o,u,p,m,b){const E=("stencil"===b?Ko.stencil:Ko.tile).getGranularityForZoomLevel(u.z);return this._getMesh(o,{granularity:E,generateBorders:p,extendToNorthPole:0===u.y&&m,extendToSouthPole:u.y===(1<<u.z)-1&&m})}_getMesh(o,u){const p=this._getMeshKey(u);if(p in this._tileMeshCache)return this._tileMeshCache[p];const m=function(b,E){const I=qd(E,"16bit"),D=y.aL.deserialize({arrayBuffer:I.vertices,length:I.vertices.byteLength/2/2}),R=y.aN.deserialize({arrayBuffer:I.indices,length:I.indices.byteLength/2/3});return new Fi(b.createVertexBuffer(D,fs.members),b.createIndexBuffer(R),y.aM.simpleSegment(0,0,D.length,R.length))}(o,u);return this._tileMeshCache[p]=m,m}recalculate(o){}hasTransition(){const o=Dt.now();let u=!1;return u=u||(o-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(o){this._errorQueryLatitudeDegrees=o}}const Uu=new y.r({type:new y.D(y.v.projection.type)});class Zt extends y.E{constructor(o){super(),this._transitionable=new y.t(Uu),this.setProjection(o),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new y.F(0)),this._mercatorProjection=new ln,this._verticalPerspectiveProjection=new Ta}get transitionState(){const o=this.properties.get("type");if("string"==typeof o&&"mercator"===o)return 0;if("string"==typeof o&&"vertical-perspective"===o)return 1;if(o instanceof y.bm){if("vertical-perspective"===o.from&&"mercator"===o.to)return 1-o.transition;if("mercator"===o.from&&"vertical-perspective"===o.to)return o.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(o){this._mercatorProjection.updateGPUdependent(o),this._verticalPerspectiveProjection.updateGPUdependent(o)}getMeshFromTileID(o,u,p,m,b){return this.currentProjection.getMeshFromTileID(o,u,p,m,b)}setProjection(o){this._transitionable.setValue("type",o?.type||"mercator")}updateTransitions(o){this._transitioning=this._transitionable.transitioned(o,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(o){this.properties=this._transitioning.possiblyEvaluate(o)}setErrorQueryLatitudeDegrees(o){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(o),this._mercatorProjection.setErrorQueryLatitudeDegrees(o)}}function yn(v){const o=il(v.worldSize,v.center.lat);return 2*Math.PI*o}function Us(v,o,u,p,m){const b=1/(1<<m),E=o/y.$*b+p*b,I=y.bo((v/y.$*b+u*b)*Math.PI*2+Math.PI,2*Math.PI),D=2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI,R=Math.cos(D),O=new Float64Array(3);return O[0]=Math.sin(I)*R,O[1]=Math.sin(D),O[2]=Math.cos(I)*R,O}function yi(v){return function(o,u){const p=Math.cos(u),m=new Float64Array(3);return m[0]=Math.sin(o)*p,m[1]=Math.sin(u),m[2]=Math.cos(o)*p,m}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function il(v,o){return v/(2*Math.PI)/Math.cos(o*Math.PI/180)}function Uc(v){const o=Math.asin(v[1])/Math.PI*180,u=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(u>1e-6){const p=v[0]/u,m=Math.acos(v[2]/u),b=(p>0?m:-m)/Math.PI*180;return new y.S(y.aO(b,-180,180),o)}return new y.S(0,o)}function ps(v){return Math.cos(v*Math.PI/180)}function ur(v,o){const u=ps(v),p=ps(o);return y.ak(p/u)}function mm(v,o){const u=v.rotate(o.bearingInRadians),p=o.zoom+ur(o.center.lat,0),m=y.bk(1/ps(o.center.lat),1/ps(Math.min(Math.abs(o.center.lat),60)),y.bn(p,7,3,0,1)),b=360/yn({worldSize:o.worldSize,center:{lat:o.center.lat}});return new y.S(o.center.lng-u.x*b*m,y.ah(o.center.lat+u.y*b,-y.ai,y.ai))}function Wd(v){const o=.5*v,u=Math.sin(o),p=Math.cos(o);return Math.log(u+p)-Math.log(p-u)}function nf(v,o,u,p){const m=v.lat+u*p;if(Math.abs(u)>1){const b=(Math.sign(v.lat+u)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,E=Math.abs(v.lat+u)*Math.PI/180,I=Wd(b+p*(E-b)),D=Wd(b),R=Wd(E);return new y.S(v.lng+o*((I-D)/(R-D)),m)}return new y.S(v.lng+o*p,m)}class rf{constructor(o){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=o}swapBuffers(){if(!this._hadAnyChanges)return;const o=this._cachePrevious;this._cachePrevious=this._cache,this._cache=o,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(o,u,p,m){const b=`${o.z}_${o.x}_${o.y}_${m?.terrain?"t":""}`,E=this._cache.get(b);if(E)return E;const I=this._cachePrevious.get(b);if(I)return this._cache.set(b,I),I;const D=this._boundingVolumeFactory(o,u,p,m);return this._cache.set(b,D),this._hadAnyChanges=!0,D}}class $c{constructor(o,u,p,m){this.min=p,this.max=m,this.points=o,this.planes=u}static fromAabb(o,u){const p=[];for(let m=0;m<8;m++)p.push([1&~m?o[0]:u[0],1==(m>>1&1)?u[1]:o[1],1==(m>>2&1)?u[2]:o[2]]);return new $c(p,[[-1,0,0,u[0]],[1,0,0,-o[0]],[0,-1,0,u[1]],[0,1,0,-o[1]],[0,0,-1,u[2]],[0,0,1,-o[2]]],o,u)}static fromCenterSizeAngles(o,u,p){const m=y.br([],p[0],p[1],p[2]),b=y.bs([],[u[0],0,0],m),E=y.bs([],[0,u[1],0],m),I=y.bs([],[0,0,u[2]],m),D=[...o],R=[...o];for(let j=0;j<8;j++)for(let z=0;z<3;z++){const U=o[z]+b[z]*(1&~j?-1:1)+E[z]*(1==(j>>1&1)?1:-1)+I[z]*(1==(j>>2&1)?1:-1);D[z]=Math.min(D[z],U),R[z]=Math.max(R[z],U)}const O=[];for(let j=0;j<8;j++){const z=[...o];y.aS(z,z,y.aR([],b,1&~j?-1:1)),y.aS(z,z,y.aR([],E,1==(j>>1&1)?1:-1)),y.aS(z,z,y.aR([],I,1==(j>>2&1)?1:-1)),O.push(z)}return new $c(O,[[...b,-y.aX(b,O[0])],[...E,-y.aX(E,O[0])],[...I,-y.aX(I,O[0])],[-b[0],-b[1],-b[2],-y.aX(b,O[7])],[-E[0],-E[1],-E[2],-y.aX(E,O[7])],[-I[0],-I[1],-I[2],-y.aX(I,O[7])]],D,R)}intersectsFrustum(o){let u=!0;const p=this.points.length,m=this.planes.length,b=o.planes.length,E=o.points.length;for(let I=0;I<b;I++){const D=o.planes[I];let R=0;for(let O=0;O<p;O++){const j=this.points[O];D[0]*j[0]+D[1]*j[1]+D[2]*j[2]+D[3]>=0&&R++}if(0===R)return 0;R<p&&(u=!1)}if(u)return 2;for(let I=0;I<m;I++){const D=this.planes[I];let R=0;for(let O=0;O<E;O++){const j=o.points[O];D[0]*j[0]+D[1]*j[1]+D[2]*j[2]+D[3]>=0&&R++}if(0===R)return 0}return 1}intersectsPlane(o){const u=this.points.length;let p=0;for(let m=0;m<u;m++){const b=this.points[m];o[0]*b[0]+o[1]*b[1]+o[2]*b[2]+o[3]>=0&&p++}return p===u?2:0===p?0:1}}function vi(v,o,u){const p=v-o;return p<0?-p:Math.max(0,p-u)}function Gc(v,o,u,p,m){const b=v-u;let E;return E=b<0?Math.min(-b,1+b-m):b>1?Math.min(Math.max(b-m,0),1-b):0,Math.max(E,vi(o,p,m))}class $s{constructor(){this._boundingVolumeCache=new rf(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(o,u,p,m){const b=1<<p.z,E=1/b,I=p.x/b,D=p.y/b;let R=2;return R=Math.min(R,Gc(o,u,I,D,E)),R=Math.min(R,Gc(o,u,I+.5,-D-E,E)),R=Math.min(R,Gc(o,u,I+.5,2-D-E,E)),R}getWrap(o,u,p){const m=1<<u.z,b=1/m,E=u.x/m,I=vi(o.x,E,b),D=vi(o.x,E-1,b),R=vi(o.x,E+1,b),O=Math.min(I,D,R);return O===R?1:O===D?-1:0}allowVariableZoom(o,u){return yt(o,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(o,u,p,m){return this._boundingVolumeCache.getTileBoundingVolume(o,u,p,m)}_computeTileBoundingVolume(o,u,p,m){var b,E;let I=0,D=0;if(m?.terrain){const R=new y.Z(o.z,u,o.z,o.x,o.y),O=m.terrain.getMinMaxElevation(R);I=null!==(b=O.minElevation)&&void 0!==b?b:Math.min(0,p),D=null!==(E=O.maxElevation)&&void 0!==E?E:Math.max(0,p)}if(I/=y.bu,D/=y.bu,I+=1,D+=1,o.z<=0)return $c.fromAabb([-D,-D,-D],[D,D,D]);if(1===o.z)return $c.fromAabb([0===o.x?-D:0,0===o.y?0:-D,-D],[0===o.x?0:D,0===o.y?D:0,D]);{const R=[Us(0,0,o.x,o.y,o.z),Us(y.$,0,o.x,o.y,o.z),Us(y.$,y.$,o.x,o.y,o.z),Us(0,y.$,o.x,o.y,o.z)],O=[];for(const Ie of R)O.push(y.aR([],Ie,D));if(D!==I)for(const Ie of R)O.push(y.aR([],Ie,I));0===o.y&&O.push([0,1,0]),o.y===(1<<o.z)-1&&O.push([0,-1,0]);const j=[1,1,1],z=[-1,-1,-1];for(const Ie of O)for(let Ae=0;Ae<3;Ae++)j[Ae]=Math.min(j[Ae],Ie[Ae]),z[Ae]=Math.max(z[Ae],Ie[Ae]);const U=Us(y.$/2,y.$/2,o.x,o.y,o.z),q=y.aW([],[0,1,0],U);y.aV(q,q);const ne=y.aW([],U,q);y.aV(ne,ne);const ee=y.aW([],R[2],R[1]);y.aV(ee,ee);const re=y.aW([],R[0],R[3]);y.aV(re,re),O.push(y.aR([],U,D)),o.y>=(1<<o.z)/2&&O.push(y.aR([],Us(y.$/2,0,o.x,o.y,o.z),D)),o.y<(1<<o.z)/2&&O.push(y.aR([],Us(y.$/2,y.$,o.x,o.y,o.z),D));const oe=$u(U,O),ue=$u(ne,O),ae=[-U[0],-U[1],-U[2],oe.max],fe=[U[0],U[1],U[2],-oe.min],ge=[-ne[0],-ne[1],-ne[2],ue.max],le=[ne[0],ne[1],ne[2],-ue.min],be=[...ee,0],ke=[...re,0],Te=[];return 0===o.y?Te.push(y.bt(ke,be,ae),y.bt(ke,be,fe)):Te.push(y.bt(ge,be,ae),y.bt(ge,be,fe),y.bt(ge,ke,ae),y.bt(ge,ke,fe)),o.y===(1<<o.z)-1?Te.push(y.bt(ke,be,ae),y.bt(ke,be,fe)):Te.push(y.bt(le,be,ae),y.bt(le,be,fe),y.bt(le,ke,ae),y.bt(le,ke,fe)),new $c(Te,[ae,fe,ge,le,be,ke],j,z)}}}function $u(v,o){let u=1/0,p=-1/0;for(const m of o){const b=y.aX(v,m);u=Math.min(u,b),p=Math.max(p,b)}return{min:u,max:p}}class Bl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,u,p){return this._helper.interpolatePadding(o,u,p)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,u){this._helper.resize(o,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,u){this._helper.overrideNearFarZ(o,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(o){}constructor(){this._cachedClippingPlane=y.bv(),this._projectionMatrix=y.b9(),this._globeViewProjMatrix32f=y.b8(),this._globeViewProjMatrixNoCorrection=y.b9(),this._globeViewProjMatrixNoCorrectionInverted=y.b9(),this._globeProjMatrixInverted=y.b9(),this._cameraPosition=y.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ye({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,u)=>this.getConstrained(o,u)}),this._coveringTilesDetailsProvider=new $s}clone(){const o=new Bl;return o.apply(this),o}apply(o,u){this._globeLatitudeErrorCorrectionRadians=u||0,this._helper.apply(o)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const o=y.bp();return o[0]=this._cameraPosition[0],o[1]=this._cameraPosition[1],o[2]=this._cameraPosition[2],o}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(o){const{overscaledTileID:u,applyGlobeMatrix:p}=o,m=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(o){const u=this.pitchInRadians,p=this.cameraToCenterDistance/o,m=Math.sin(u)*p,b=Math.cos(u)*p+1,E=1/Math.sqrt(m*m+b*b)*1;let I=-m,D=b;const R=Math.sqrt(I*I+D*D);I/=R,D/=R;const O=[0,I,D];y.bw(O,O,[0,0,0],-this.bearingInRadians),y.bx(O,O,[0,0,0],-1*this.center.lat*Math.PI/180),y.by(O,O,[0,0,0],this.center.lng*Math.PI/180);const j=1/y.aZ(O);return y.aR(O,O,j),[...O,-E*j]}isLocationOccluded(o){return!this.isSurfacePointVisible(yi(o))}transformLightDirection(o){const u=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,m=Math.cos(p),b=[Math.sin(u)*m,Math.sin(p),Math.cos(u)*m],E=[b[2],0,-b[0]],I=[0,0,0];y.aW(I,E,b),y.aV(E,E),y.aV(I,I);const D=[0,0,0];return y.aV(D,[E[0]*o[0]+I[0]*o[1]+b[0]*o[2],E[1]*o[0]+I[1]*o[1]+b[1]*o[2],E[2]*o[0]+I[2]*o[1]+b[2]*o[2]]),D}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(o,u,p){const m=function(I,D,R){const O=1/(1<<R.z);return new y.a1(I/y.$*O+R.x*O,D/y.$*O+R.y*O)}(o,u,p.canonical),b=(E=m.y,[y.bo(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-E*Math.PI*2))-.5*Math.PI]);var E;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(o,u,p,m){const b=p.canonical,E=Us(o,u,b.x,b.y,b.z),I=1+(m?m(o,u):0)/y.bu,D=[E[0]*I,E[1]*I,E[2]*I,1];y.aw(D,D,this._globeViewProjMatrixNoCorrection);const R=this._cachedClippingPlane,O=R[0]*E[0]+R[1]*E[1]+R[2]*E[2]+R[3]<0;return{point:new y.P(D[0]/D[3],D[1]/D[3]),signedDistanceFromCamera:D[3],isOccluded:O}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const o=il(this.worldSize,this.center.lat),u=y.ba(),p=y.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*o),y.b4(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const m=this.centerOffset;u[8]=2*-m.x/this._helper._width,u[9]=2*m.y/this._helper._height,this._projectionMatrix=y.b5(u),this._globeProjMatrixInverted=y.ba(),y.aq(this._globeProjMatrixInverted,u),y.M(u,u,[0,0,-this.cameraToCenterDistance]),y.b6(u,u,this.rollInRadians),y.b7(u,u,-this.pitchInRadians),y.b6(u,u,this.bearingInRadians),y.M(u,u,[0,0,-o]);const b=y.bp();b[0]=o,b[1]=o,b[2]=o,y.b7(p,u,this.center.lat*Math.PI/180),y.bz(p,p,-this.center.lng*Math.PI/180),y.N(p,p,b),this._globeViewProjMatrixNoCorrection=p,y.b7(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),y.bz(u,u,-this.center.lng*Math.PI/180),y.N(u,u,b),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=y.ba(),y.aq(this._globeViewProjMatrixNoCorrectionInverted,p);const E=y.bp();this._cameraPosition=y.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/o,y.bw(this._cameraPosition,this._cameraPosition,E,-this.rollInRadians),y.bx(this._cameraPosition,this._cameraPosition,E,this.pitchInRadians),y.bw(this._cameraPosition,this._cameraPosition,E,-this.bearingInRadians),y.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),y.bx(this._cameraPosition,this._cameraPosition,E,-this.center.lat*Math.PI/180),y.by(this._cameraPosition,this._cameraPosition,E,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(o);const I=y.b5(this._globeViewProjMatrixNoCorrectionInverted);y.N(I,I,[1,1,-1]),this._cachedFrustum=yr.fromInvProjectionMatrix(I,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(o){y.w("calculateFogMatrix is not supported on globe projection.");const u=y.ba();return y.ag(u),u}getVisibleUnwrappedCoordinates(o){return[new y.b2(0,o)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(o){o&&y.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=yi(o);y.aR(p,p,1+u/y.bu);const m=y.bv();return y.aw(m,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(o){}getBounds(){const o=.5*this.width,u=.5*this.height,p=[new y.P(0,0),new y.P(o,0),new y.P(this.width,0),new y.P(this.width,u),new y.P(this.width,this.height),new y.P(o,this.height),new y.P(0,this.height),new y.P(0,u)],m=[];for(const j of p)m.push(this.unprojectScreenPoint(j));let b=0,E=0,I=0,D=0;const R=this.center;for(const j of m){const z=y.bA(R.lng,j.lng),U=y.bA(R.lat,j.lat);z<E&&(E=z),z>b&&(b=z),U<D&&(D=U),U>I&&(I=U)}const O=[R.lng+E,R.lat+D,R.lng+b,R.lat+I];return this.isSurfacePointOnScreen([0,1,0])&&(O[3]=90,O[0]=-180,O[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(O[1]=-90,O[0]=-180,O[2]=180),new Ir(O)}getConstrained(o,u){const p=y.ah(o.lat,-y.ai,y.ai),m=y.ah(+u,this.minZoom+ur(0,p),this.maxZoom);return{center:new y.S(o.lng,p),zoom:m}}calculateCenterFromCameraLngLatAlt(o,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(o,u,p,m)}setLocationAtPoint(o,u){const p=yi(this.unprojectScreenPoint(u)),m=yi(o),b=y.bp();y.bB(b);const E=y.bp();y.by(E,p,b,-this.center.lng*Math.PI/180),y.bx(E,E,b,this.center.lat*Math.PI/180);const I=m[0]*m[0]+m[2]*m[2],D=E[0]*E[0];if(I<D)return;const R=Math.sqrt(I-D),O=-R,j=y.bC(m[0],m[2],E[0],R),z=y.bC(m[0],m[2],E[0],O),U=y.bp();y.by(U,m,b,-j);const q=y.bC(U[1],U[2],E[1],E[2]),ne=y.bp();y.by(ne,m,b,-z);const ee=y.bC(ne[1],ne[2],E[1],E[2]),re=.5*Math.PI,oe=q>=-re&&q<=re,ue=ee>=-re&&ee<=re;let ae,fe;if(oe&&ue){const ke=this.center.lng*Math.PI/180,Te=this.center.lat*Math.PI/180;y.bD(j,ke)+y.bD(q,Te)<y.bD(z,ke)+y.bD(ee,Te)?(ae=j,fe=q):(ae=z,fe=ee)}else if(oe)ae=j,fe=q;else{if(!ue)return;ae=z,fe=ee}const ge=ae/Math.PI*180,le=fe/Math.PI*180,be=this.center.lat;this.setCenter(new y.S(ge,y.ah(le,-90,90))),this.setZoom(this.zoom+ur(be,this.center.lat))}locationToScreenPoint(o,u){const p=yi(o);if(u){const m=u.getElevationForLngLatZoom(o,this._helper._tileZoom);y.aR(p,p,1+m/y.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(o){const u=y.bv();return y.aw(u,[...o,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new y.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(o,u){if(u){const p=u.pointCoordinate(o);if(p)return p}return y.a1.fromLngLat(this.unprojectScreenPoint(o))}screenPointToLocation(o,u){var p;return null===(p=this.screenPointToMercatorCoordinate(o,u))||void 0===p?void 0:p.toLngLat()}isPointOnMapSurface(o,u){const p=this._cameraPosition,m=this.getRayDirectionFromPixel(o);return!!this.rayPlanetIntersection(p,m)}getRayDirectionFromPixel(o){const u=y.bv();u[0]=o.x/this.width*2-1,u[1]=-1*(o.y/this.height*2-1),u[2]=1,u[3]=1,y.aw(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const p=y.bp();p[0]=u[0]-this._cameraPosition[0],p[1]=u[1]-this._cameraPosition[1],p[2]=u[2]-this._cameraPosition[2];const m=y.bp();return y.aV(m,p),m}isSurfacePointVisible(o){const u=this._cachedClippingPlane;return u[0]*o[0]+u[1]*o[1]+u[2]*o[2]+u[3]>=0}isSurfacePointOnScreen(o){if(!this.isSurfacePointVisible(o))return!1;const u=y.bv();return y.aw(u,[...o,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(o,u){const p=y.aX(o,u),m=y.bp(),b=y.bp();y.aR(b,u,p),y.aU(m,o,b);const E=1-y.aX(m,m);if(E<0)return null;const I=y.aX(o,o)-1,D=-p+(p<0?1:-1)*Math.sqrt(E),R=I/D,O=D;return{tMin:Math.min(R,O),tMax:Math.max(R,O)}}unprojectScreenPoint(o){const u=this._cameraPosition,p=this.getRayDirectionFromPixel(o),m=this.rayPlanetIntersection(u,p);if(m){const O=y.bp();y.aS(O,u,[p[0]*m.tMin,p[1]*m.tMin,p[2]*m.tMin]);const j=y.bp();return y.aV(j,O),Uc(j)}const b=this._cachedClippingPlane,E=b[0]*p[0]+b[1]*p[1]+b[2]*p[2],I=-y.b1(b,u)/E,D=y.bp();if(I>0)y.aS(D,u,[p[0]*I,p[1]*I,p[2]*I]);else{const O=y.bp();y.aS(O,u,[2*p[0],2*p[1],2*p[2]]);const j=y.b1(this._cachedClippingPlane,O);y.aU(D,O,[this._cachedClippingPlane[0]*j,this._cachedClippingPlane[1]*j,this._cachedClippingPlane[2]*j])}const R=function(O){const j=y.bp();return j[0]=O[0]*-O[3],j[1]=O[1]*-O[3],j[2]=O[2]*-O[3],{center:j,radius:Math.sqrt(1-O[3]*O[3])}}(b);return Uc(function(O,j,z){const U=y.bp();y.aU(U,z,O);const q=y.bp();return y.bq(q,O,U,j/y.a$(U)),q}(R.center,R.radius,D))}getMatrixForModel(o,u){const p=y.S.convert(o),m=1/y.bu,b=y.b9();return y.bz(b,b,p.lng/180*Math.PI),y.b7(b,b,-p.lat/180*Math.PI),y.M(b,b,[0,0,1+u/y.bu]),y.b7(b,b,.5*Math.PI),y.N(b,b,[m,m,m]),b}getProjectionDataForCustomLayer(o=!0){const u=this.getProjectionData({overscaledTileID:new y.Z(0,0,0,0,0),applyGlobeMatrix:o});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(o){}}class Hc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(o){this._helper.setMinZoom(o)}setMaxZoom(o){this._helper.setMaxZoom(o)}setMinPitch(o){this._helper.setMinPitch(o)}setMaxPitch(o){this._helper.setMaxPitch(o)}setRenderWorldCopies(o){this._helper.setRenderWorldCopies(o)}setBearing(o){this._helper.setBearing(o)}setPitch(o){this._helper.setPitch(o)}setRoll(o){this._helper.setRoll(o)}setFov(o){this._helper.setFov(o)}setZoom(o){this._helper.setZoom(o)}setCenter(o){this._helper.setCenter(o)}setElevation(o){this._helper.setElevation(o)}setMinElevationForCurrentTile(o){this._helper.setMinElevationForCurrentTile(o)}setPadding(o){this._helper.setPadding(o)}interpolatePadding(o,u,p){return this._helper.interpolatePadding(o,u,p)}isPaddingEqual(o){return this._helper.isPaddingEqual(o)}resize(o,u,p=!0){this._helper.resize(o,u,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(o){this._helper.setMaxBounds(o)}overrideNearFarZ(o,u){this._helper.overrideNearFarZ(o,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(o){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),o)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(o,u){this._globeness=o,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ye({calcMatrices:()=>{this._calcMatrices()},getConstrained:(o,u)=>this.getConstrained(o,u)}),this._globeness=1,this._mercatorTransform=new Tn,this._verticalPerspectiveTransform=new Bl}clone(){const o=new Hc;return o._globeness=this._globeness,o._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,o.apply(this),o}apply(o){this._helper.apply(o),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(o){const u=this._mercatorTransform.getProjectionData(o),p=this._verticalPerspectiveTransform.getProjectionData(o);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:u.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:o.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(o){return this.currentTransform.isLocationOccluded(o)}transformLightDirection(o){return this.currentTransform.transformLightDirection(o)}getPixelScale(){return y.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return y.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(o,u,p){const m=this._mercatorTransform.getPitchedTextCorrection(o,u,p),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(o,u,p);return y.bk(m,b,this._globeness)}projectTileCoordinates(o,u,p,m){return this.currentTransform.projectTileCoordinates(o,u,p,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(o){return this.currentTransform.calculateFogMatrix(o)}getVisibleUnwrappedCoordinates(o){return this.currentTransform.getVisibleUnwrappedCoordinates(o)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(o){this._mercatorTransform.recalculateZoomAndCenter(o),this._verticalPerspectiveTransform.recalculateZoomAndCenter(o)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(o,u){return this.currentTransform.lngLatToCameraDepth(o,u)}populateCache(o){this._mercatorTransform.populateCache(o),this._verticalPerspectiveTransform.populateCache(o)}getBounds(){return this.currentTransform.getBounds()}getConstrained(o,u){return this.currentTransform.getConstrained(o,u)}calculateCenterFromCameraLngLatAlt(o,u,p,m){return this._helper.calculateCenterFromCameraLngLatAlt(o,u,p,m)}setLocationAtPoint(o,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(o,u),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(o,u),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(o,u){return this.currentTransform.locationToScreenPoint(o,u)}screenPointToMercatorCoordinate(o,u){return this.currentTransform.screenPointToMercatorCoordinate(o,u)}screenPointToLocation(o,u){return this.currentTransform.screenPointToLocation(o,u)}isPointOnMapSurface(o,u){return this.currentTransform.isPointOnMapSurface(o,u)}getRayDirectionFromPixel(o){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(o)}getMatrixForModel(o,u){return this.currentTransform.getMatrixForModel(o,u)}getProjectionDataForCustomLayer(o=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(o);if(!this.isGlobeRendering)return u;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(o);return p.fallbackMatrix=u.mainMatrix,p}getFastPathSimpleProjectionMatrix(o){return this.currentTransform.getFastPathSimpleProjectionMatrix(o)}}class $n{get useGlobeControls(){return!0}handlePanInertia(o,u){const p=mm(o,u);return Math.abs(p.lng-u.center.lng)>180&&(p.lng=u.center.lng+179.5*Math.sign(p.lng-u.center.lng)),{easingCenter:p,easingOffset:new y.P(0,0)}}handleMapControlsRollPitchBearingZoom(o,u){const p=o.around,m=u.screenPointToLocation(p);o.bearingDelta&&u.setBearing(u.bearing+o.bearingDelta),o.pitchDelta&&u.setPitch(u.pitch+o.pitchDelta),o.rollDelta&&u.setRoll(u.roll+o.rollDelta);const b=u.zoom;o.zoomDelta&&u.setZoom(u.zoom+o.zoomDelta);const E=u.zoom-b;if(0===E)return;const I=y.bA(u.center.lng,m.lng),D=I/(Math.abs(I/180)+1),R=y.bA(u.center.lat,m.lat),O=u.getRayDirectionFromPixel(p),j=u.cameraPosition,z=-1*y.aX(j,O),U=y.bp();y.aS(U,j,[O[0]*z,O[1]*z,O[2]*z]);const q=y.aZ(U)-1,ne=Math.exp(.5*-Math.max(q-.3,0)),ee=il(u.worldSize,u.center.lat)/Math.min(u.width,u.height),re=y.bn(ee,.9,.5,1,.25),oe=(1-y.af(-E))*Math.min(ne,re),ue=u.center.lat,ae=u.zoom,fe=new y.S(u.center.lng+D*oe,y.ah(u.center.lat+R*oe,-y.ai,y.ai));u.setLocationAtPoint(m,p);const ge=u.center,le=y.bn(Math.abs(I),45,85,0,1),be=y.bn(ee,.75,.35,0,1),ke=Math.pow(Math.max(le,be),.25),Te=y.bA(ge.lng,fe.lng),Ie=y.bA(ge.lat,fe.lat);u.setCenter(new y.S(ge.lng+Te*ke,ge.lat+Ie*ke).wrap()),u.setZoom(ae+ur(ue,u.center.lat))}handleMapControlsPan(o,u,p){if(!o.panDelta)return;const m=u.center.lat,b=u.zoom;u.setCenter(mm(o.panDelta,u).wrap()),u.setZoom(b+ur(m,u.center.lat))}cameraForBoxAndBearing(o,u,p,m,b){const E=To(o,u,p,m,b),I=u.left/b.width*2-1,D=(b.width-u.right)/b.width*2-1,R=u.top/b.height*-2+1,O=(b.height-u.bottom)/b.height*-2+1,j=y.bA(p.getWest(),p.getEast())<0,z=j?p.getEast():p.getWest(),U=j?p.getWest():p.getEast(),q=Math.max(p.getNorth(),p.getSouth()),ne=Math.min(p.getNorth(),p.getSouth()),ee=z+.5*y.bA(z,U),re=q+.5*y.bA(q,ne),oe=b.clone();oe.setCenter(E.center),oe.setBearing(E.bearing),oe.setPitch(0),oe.setRoll(0),oe.setZoom(E.zoom);const ue=oe.modelViewProjectionMatrix,ae=[yi(p.getNorthWest()),yi(p.getNorthEast()),yi(p.getSouthWest()),yi(p.getSouthEast()),yi(new y.S(U,re)),yi(new y.S(z,re)),yi(new y.S(ee,q)),yi(new y.S(ee,ne))],fe=yi(E.center);let ge=Number.POSITIVE_INFINITY;for(const le of ae)I<0&&(ge=$n.getLesserNonNegativeNonNull(ge,$n.solveVectorScale(le,fe,ue,"x",I))),D>0&&(ge=$n.getLesserNonNegativeNonNull(ge,$n.solveVectorScale(le,fe,ue,"x",D))),R>0&&(ge=$n.getLesserNonNegativeNonNull(ge,$n.solveVectorScale(le,fe,ue,"y",R))),O<0&&(ge=$n.getLesserNonNegativeNonNull(ge,$n.solveVectorScale(le,fe,ue,"y",O)));if(Number.isFinite(ge)&&0!==ge)return E.zoom=oe.zoom+y.ak(ge),E;wp()}handleJumpToCenterZoom(o,u){const p=o.center.lat,m=o.getConstrained(u.center?y.S.convert(u.center):o.center,o.zoom).center;o.setCenter(m.wrap());const b=void 0!==u.zoom?+u.zoom:o.zoom+ur(p,m.lat);o.zoom!==b&&o.setZoom(b)}handleEaseTo(o,u){const p=o.zoom,m=o.center,b=o.padding,E={roll:o.roll,pitch:o.pitch,bearing:o.bearing},I={roll:void 0===u.roll?o.roll:u.roll,pitch:void 0===u.pitch?o.pitch:u.pitch,bearing:void 0===u.bearing?o.bearing:u.bearing},D=void 0!==u.zoom,R=!o.isPaddingEqual(u.padding);let O=!1;const j=u.center?y.S.convert(u.center):m,z=o.getConstrained(j,p).center;Fl(o,z);const U=o.clone();U.setCenter(z),U.setZoom(D?+u.zoom:p+ur(m.lat,j.lat)),U.setBearing(u.bearing);const q=new y.P(y.ah(o.centerPoint.x+u.offsetAsPoint.x,0,o.width),y.ah(o.centerPoint.y+u.offsetAsPoint.y,0,o.height));U.setLocationAtPoint(z,q);const ne=(u.offset&&u.offsetAsPoint.mag())>0?U.center:z,ee=D?+u.zoom:p+ur(m.lat,ne.lat),re=p+ur(m.lat,0),oe=ee+ur(ne.lat,0),ue=y.bA(m.lng,ne.lng),ae=y.bA(m.lat,ne.lat),fe=y.af(oe-re);return O=ee!==p,{easeFunc:ge=>{if(y.be(E,I)||Ji({startEulerAngles:E,endEulerAngles:I,tr:o,k:ge,useSlerp:E.roll!=I.roll}),R&&o.interpolatePadding(b,u.padding,ge),u.around)y.w("Easing around a point is not supported under globe projection."),o.setLocationAtPoint(u.around,u.aroundPoint);else{const le=oe>re?Math.min(2,fe):Math.max(.5,fe),be=Math.pow(le,1-ge),ke=nf(m,ue,ae,ge*be);o.setCenter(ke.wrap())}if(O){const le=y.C.number(re,oe,ge)+ur(0,o.center.lat);o.setZoom(le)}},isZooming:O,elevationCenter:ne}}handleFlyTo(o,u){const p=void 0!==u.zoom,m=o.center,b=o.zoom,E=o.padding,I=!o.isPaddingEqual(u.padding),D=o.getConstrained(y.S.convert(u.center||u.locationAtOffset),b).center,R=p?+u.zoom:o.zoom+ur(o.center.lat,D.lat),O=o.clone();O.setCenter(D),O.setZoom(R),O.setBearing(u.bearing);const j=new y.P(y.ah(o.centerPoint.x+u.offsetAsPoint.x,0,o.width),y.ah(o.centerPoint.y+u.offsetAsPoint.y,0,o.height));O.setLocationAtPoint(D,j);const z=O.center;Fl(o,z);const U=function(ae,fe,ge){const le=yi(fe),be=yi(ge),ke=y.aX(le,be),Te=Math.acos(ke),Ie=yn(ae);return Te/(2*Math.PI)*Ie}(o,m,z),q=b+ur(m.lat,0),ne=R+ur(z.lat,0),ee=y.af(ne-q);let re;if("number"==typeof u.minZoom){const ae=+u.minZoom+ur(z.lat,0),fe=Math.min(ae,q,ne)+ur(0,z.lat),ge=o.getConstrained(z,fe).zoom+ur(z.lat,0);re=y.af(ge-q)}const oe=y.bA(m.lng,z.lng),ue=y.bA(m.lat,z.lat);return{easeFunc:(ae,fe,ge,le)=>{const be=nf(m,oe,ue,ge);I&&o.interpolatePadding(E,u.padding,ae);const ke=1===ae?z:be;o.setCenter(ke.wrap());const Te=q+y.ak(fe);o.setZoom(1===ae?R:Te+ur(0,ke.lat))},scaleOfZoom:ee,targetCenter:z,scaleOfMinZoom:re,pixelPathLength:U}}static solveVectorScale(o,u,p,m,b){const E="x"===m?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],I=[p[3],p[7],p[11],p[15]],D=o[0]*E[0]+o[1]*E[1]+o[2]*E[2],R=o[0]*I[0]+o[1]*I[1]+o[2]*I[2],O=u[0]*E[0]+u[1]*E[1]+u[2]*E[2],j=u[0]*I[0]+u[1]*I[1]+u[2]*I[2];return O+b*R===D+b*j||I[3]*(D-O)+E[3]*(j-R)+D*j==O*R?null:(O+E[3]-b*j-b*I[3])/(O-D-b*j+b*R)}static getLesserNonNegativeNonNull(o,u){return null!==u&&u>=0&&u<o?u:o}}class sf{constructor(o){this._globe=o,this._mercatorCameraHelper=new Yr,this._verticalPerspectiveCameraHelper=new $n}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(o,u){return this.currentHelper.handlePanInertia(o,u)}handleMapControlsRollPitchBearingZoom(o,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(o,u)}handleMapControlsPan(o,u,p){this.currentHelper.handleMapControlsPan(o,u,p)}cameraForBoxAndBearing(o,u,p,m,b){return this.currentHelper.cameraForBoxAndBearing(o,u,p,m,b)}handleJumpToCenterZoom(o,u){this.currentHelper.handleJumpToCenterZoom(o,u)}handleEaseTo(o,u){return this.currentHelper.handleEaseTo(o,u)}handleFlyTo(o,u){return this.currentHelper.handleFlyTo(o,u)}}const af=(v,o)=>y.y(v,o&&o.filter(u=>"source.canvas"!==u.identifier)),my=y.bE();class Ia extends y.E{constructor(o,u={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;"vector"!==m&&"geojson"!==m||this.sourceCaches[p].reload()}},this.map=o,this.dispatcher=new Nr(Go(),o._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,m)=>this.getGlyphs(p,m)),this.dispatcher.registerMessageHandler("GI",(p,m)=>this.getImages(p,m)),this.imageManager=new Pc,this.imageManager.setEventedParent(this),this.glyphManager=new So(o._requestManager,u.localIdeographFontFamily),this.lineAtlas=new En(256,512),this.crossTileSymbolIndex=new Vu,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new y.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",y.bG()),wa().on(ba,this._rtlPluginLoaded),this.on("data",p=>{if("source"!==p.dataType||"metadata"!==p.sourceDataType)return;const m=this.sourceCaches[p.sourceId];if(!m)return;const b=m.getSource();if(b&&b.vectorLayerIds)for(const E in this._layers){const I=this._layers[E];I.source===b.id&&this._validateLayer(I)}})}setGlobalStateProperty(o,u){var p,m,b;this._checkLoaded();const E=null===u?null!==(b=null===(m=null===(p=this.stylesheet.state)||void 0===p?void 0:p[o])||void 0===m?void 0:m.default)&&void 0!==b?b:null:u;if(y.bH(E,this._globalState[o]))return this;this._globalState[o]=E;const I=this._findGlobalStateAffectedSources([o]);for(const D in this.sourceCaches)I.has(D)&&(this._reloadSource(D),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(o){this._checkLoaded();const u=[];for(const m in o)!y.bH(this._globalState[m],o[m].default)&&(u.push(m),this._globalState[m]=o[m].default);const p=this._findGlobalStateAffectedSources(u);for(const m in this.sourceCaches)p.has(m)&&(this._reloadSource(m),this._changed=!0)}_findGlobalStateAffectedSources(o){if(0===o.length)return new Set;const u=new Set;for(const p in this._layers){const m=this._layers[p],b=m.getLayoutAffectingGlobalStateRefs();for(const E of o)b.has(E)&&u.add(m.source)}return u}loadURL(o,u={},p){this.fire(new y.l("dataloading",{dataType:"style"})),u.validate="boolean"!=typeof u.validate||u.validate;const m=this.map._requestManager.transformRequest(o,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;y.j(m,this._loadStyleRequest).then(E=>{this._loadStyleRequest=null,this._load(E.data,u,p)}).catch(E=>{this._loadStyleRequest=null,E&&!b.signal.aborted&&this.fire(new y.k(E))})}loadJSON(o,u={},p){this.fire(new y.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,Dt.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,u.validate=!1!==u.validate,this._load(o,u,p)}).catch(()=>{})}loadEmpty(){this.fire(new y.l("dataloading",{dataType:"style"})),this._load(my,{validate:!1})}_load(o,u,p){var m,b,E;const I=u.transformStyle?u.transformStyle(p,o):o;if(!u.validate||!af(this,y.z(I))){this._loaded=!0,this.stylesheet=I;for(const D in I.sources)this.addSource(D,I.sources[D],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new ds(this.stylesheet.light),this._setProjectionInternal((null===(m=this.stylesheet.projection)||void 0===m?void 0:m.type)||"mercator"),this.sky=new Ac(this.stylesheet.sky),this.map.setTerrain(null!==(b=this.stylesheet.terrain)&&void 0!==b?b:null),this.setGlobalState(null!==(E=this.stylesheet.state)&&void 0!==E?E:null),this.fire(new y.l("data",{dataType:"style"})),this.fire(new y.l("style.load"))}}_createLayers(){const o=y.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",o),this._order=o.map(u=>u.id),this._layers={},this._serializedLayers=null;for(const u of o){const p=y.bJ(u);p.setEventedParent(this,{layer:{id:u.id}}),this._layers[u.id]=p}}_loadSprite(o,u=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(b,E,I,D){return y._(this,void 0,void 0,function*(){const R=xo(b),O=I>1?"@2x":"",j={},z={};for(const{id:U,url:q}of R){const ne=E.transformRequest(kc(q,O,".json"),"SpriteJSON");j[U]=y.j(ne,D);const ee=E.transformRequest(kc(q,O,".png"),"SpriteImage");z[U]=Uo.getImage(ee,D)}return yield Promise.all([...Object.values(j),...Object.values(z)]),function(U,q){return y._(this,void 0,void 0,function*(){const ne={};for(const ee in U){ne[ee]={};const re=Dt.getImageCanvasContext((yield q[ee]).data),oe=(yield U[ee]).data;for(const ue in oe){const{width:ae,height:fe,x:ge,y:le,sdf:be,pixelRatio:ke,stretchX:Te,stretchY:Ie,content:Ae,textFitWidth:We,textFitHeight:qe}=oe[ue];ne[ee][ue]={data:null,pixelRatio:ke,sdf:be,stretchX:Te,stretchY:Ie,content:Ae,textFitWidth:We,textFitHeight:qe,spriteData:{width:ae,height:fe,x:ge,y:le,context:re}}}}return ne})}(j,z)})}(o,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(b=>{if(this._spriteRequest=null,b)for(const E in b){this._spritesImagesIds[E]=[];const I=this._spritesImagesIds[E]?this._spritesImagesIds[E].filter(D=>!(D in b)):[];for(const D of I)this.imageManager.removeImage(D),this._changedImages[D]=!0;for(const D in b[E]){const R="default"===E?D:`${E}:${D}`;this._spritesImagesIds[E].push(R),R in this.imageManager.images?this.imageManager.updateImage(R,b[E][D],!1):this.imageManager.addImage(R,b[E][D]),u&&(this._changedImages[R]=!0)}}}).catch(b=>{this._spriteRequest=null,m=b,this.fire(new y.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.l("data",{dataType:"style"})),p&&p(m)})}_unloadSprite(){for(const o of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(o),this._changedImages[o]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.l("data",{dataType:"style"}))}_validateLayer(o){const u=this.sourceCaches[o.source];if(!u)return;const p=o.sourceLayer;if(!p)return;const m=u.getSource();("geojson"===m.type||m.vectorLayerIds&&-1===m.vectorLayerIds.indexOf(p))&&this.fire(new y.k(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${o.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const o in this.sourceCaches)if(!this.sourceCaches[o].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(o,u=!1){const p=this._serializedAllLayers();if(!o||0===o.length)return Object.values(u?y.bK(p):p);const m=[];for(const b of o)if(p[b]){const E=u?y.bK(p[b]):p[b];m.push(E)}return m}_serializedAllLayers(){let o=this._serializedLayers;if(o)return o;o=this._serializedLayers={};const u=Object.keys(this._layers);for(const p of u){const m=this._layers[p];"custom"!==m.type&&(o[p]=m.serialize())}return o}hasTransitions(){var o,u,p;if(null!==(o=this.light)&&void 0!==o&&o.hasTransition()||null!==(u=this.sky)&&void 0!==u&&u.hasTransition()||null!==(p=this.projection)&&void 0!==p&&p.hasTransition())return!0;for(const m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(const m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(o){if(!this._loaded)return;const u=this._changed;if(u){const m=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(m.length||b.length)&&this._updateWorkerLayers(m,b);for(const E in this._updatedSources){const I=this._updatedSources[E];if("reload"===I)this._reloadSource(E);else{if("clear"!==I)throw new Error(`Invalid action ${I}`);this._clearSource(E)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const E in this._updatedPaintProps)this._layers[E].updateTransitions(o);this.light.updateTransitions(o),this.sky.updateTransitions(o),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const b=this.sourceCaches[m];p[m]=b.used,b.used=!1}for(const m of this._order){const b=this._layers[m];b.recalculate(o,this._availableImages),!b.isHidden(o.zoom)&&b.source&&(this.sourceCaches[b.source].used=!0)}for(const m in p){const b=this.sourceCaches[m];!!p[m]!=!!b.used&&b.fire(new y.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(o),this.sky.recalculate(o),this.projection.recalculate(o),this.z=o.zoom,u&&this.fire(new y.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const o=Object.keys(this._changedImages);if(o.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],o);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(o,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(o,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(o,u={}){var p;this._checkLoaded();const m=this.serialize();if(o=u.transformStyle?u.transformStyle(m,o):o,(null===(p=u.validate)||void 0===p||p)&&af(this,y.z(o)))return!1;(o=y.bK(o)).layers=y.bI(o.layers);const b=y.bL(m,o),E=this._getOperationsToPerform(b);if(E.unimplemented.length>0)throw new Error(`Unimplemented: ${E.unimplemented.join(", ")}.`);if(0===E.operations.length)return!1;for(const I of E.operations)I();return this.stylesheet=o,this._serializedLayers=null,!0}_getOperationsToPerform(o){const u=[],p=[];for(const m of o)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":u.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":u.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":u.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":u.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":u.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":u.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":u.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":u.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":u.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":u.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":u.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":u.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":u.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":u.push(()=>this.setGlobalState.apply(this,m.args));break;case"setTransition":u.push(()=>{});break;default:p.push(m.command)}return{operations:u,unimplemented:p}}addImage(o,u){if(this.getImage(o))return this.fire(new y.k(new Error(`An image named "${o}" already exists.`)));this.imageManager.addImage(o,u),this._afterImageUpdated(o)}updateImage(o,u){this.imageManager.updateImage(o,u)}getImage(o){return this.imageManager.getImage(o)}removeImage(o){if(!this.getImage(o))return this.fire(new y.k(new Error(`An image named "${o}" does not exist.`)));this.imageManager.removeImage(o),this._afterImageUpdated(o)}_afterImageUpdated(o){this._availableImages=this.imageManager.listImages(),this._changedImages[o]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(o,u,p={}){if(this._checkLoaded(),void 0!==this.sourceCaches[o])throw new Error(`Source "${o}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(y.z.source,`sources.${o}`,u,null,p))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const m=this.sourceCaches[o]=new sn(o,u,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:o})),m.onAdd(this.map),this._changed=!0}removeSource(o){if(this._checkLoaded(),void 0===this.sourceCaches[o])throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===o)return this.fire(new y.k(new Error(`Source "${o}" cannot be removed while layer "${p}" is using it.`)));const u=this.sourceCaches[o];delete this.sourceCaches[o],delete this._updatedSources[o],u.fire(new y.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:o})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(o,u){if(this._checkLoaded(),void 0===this.sourceCaches[o])throw new Error(`There is no source with this ID=${o}`);const p=this.sourceCaches[o].getSource();if("geojson"!==p.type)throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(u),this._changed=!0}getSource(o){return this.sourceCaches[o]&&this.sourceCaches[o].getSource()}addLayer(o,u,p={}){this._checkLoaded();const m=o.id;if(this.getLayer(m))return void this.fire(new y.k(new Error(`Layer "${m}" already exists on this map.`)));let b;if("custom"===o.type){if(af(this,y.bM(o)))return;b=y.bJ(o)}else{if("source"in o&&"object"==typeof o.source&&(this.addSource(m,o.source),o=y.bK(o),o=y.e(o,{source:m})),this._validate(y.z.layer,`layers.${m}`,o,{arrayIndex:-1},p))return;b=y.bJ(o),this._validateLayer(b),b.setEventedParent(this,{layer:{id:m}})}const E=u?this._order.indexOf(u):this._order.length;if(u&&-1===E)this.fire(new y.k(new Error(`Cannot add layer "${m}" before non-existing layer "${u}".`)));else{if(this._order.splice(E,0,m),this._layerOrderChanged=!0,this._layers[m]=b,this._removedLayers[m]&&b.source&&"custom"!==b.type){const I=this._removedLayers[m];delete this._removedLayers[m],I.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.sourceCaches[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(o,u){if(this._checkLoaded(),this._changed=!0,!this._layers[o])return void this.fire(new y.k(new Error(`The layer '${o}' does not exist in the map's style and cannot be moved.`)));if(o===u)return;const p=this._order.indexOf(o);this._order.splice(p,1);const m=u?this._order.indexOf(u):this._order.length;u&&-1===m?this.fire(new y.k(new Error(`Cannot move layer "${o}" before non-existing layer "${u}".`))):(this._order.splice(m,0,o),this._layerOrderChanged=!0)}removeLayer(o){this._checkLoaded();const u=this._layers[o];if(!u)return void this.fire(new y.k(new Error(`Cannot remove non-existing layer "${o}".`)));u.setEventedParent(null);const p=this._order.indexOf(o);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[o]=u,delete this._layers[o],this._serializedLayers&&delete this._serializedLayers[o],delete this._updatedLayers[o],delete this._updatedPaintProps[o],u.onRemove&&u.onRemove(this.map)}getLayer(o){return this._layers[o]}getLayersOrder(){return[...this._order]}hasLayer(o){return o in this._layers}setLayerZoomRange(o,u,p){this._checkLoaded();const m=this.getLayer(o);m?m.minzoom===u&&m.maxzoom===p||(null!=u&&(m.minzoom=u),null!=p&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new y.k(new Error(`Cannot set the zoom range of non-existing layer "${o}".`)))}setFilter(o,u,p={}){this._checkLoaded();const m=this.getLayer(o);if(m){if(!y.bH(m.filter,u))return null==u?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(y.z.filter,`layers.${m.id}.filter`,u,null,p)||(m.setFilter(y.bK(u)),this._updateLayer(m)))}else this.fire(new y.k(new Error(`Cannot filter non-existing layer "${o}".`)))}getFilter(o){return y.bK(this.getLayer(o).filter)}setLayoutProperty(o,u,p,m={}){this._checkLoaded();const b=this.getLayer(o);b?y.bH(b.getLayoutProperty(u),p)||(b.setLayoutProperty(u,p,m),this._updateLayer(b)):this.fire(new y.k(new Error(`Cannot style non-existing layer "${o}".`)))}getLayoutProperty(o,u){const p=this.getLayer(o);if(p)return p.getLayoutProperty(u);this.fire(new y.k(new Error(`Cannot get style of non-existing layer "${o}".`)))}setPaintProperty(o,u,p,m={}){this._checkLoaded();const b=this.getLayer(o);b?y.bH(b.getPaintProperty(u),p)||(b.setPaintProperty(u,p,m)&&this._updateLayer(b),this._changed=!0,this._updatedPaintProps[o]=!0,this._serializedLayers=null):this.fire(new y.k(new Error(`Cannot style non-existing layer "${o}".`)))}getPaintProperty(o,u){return this.getLayer(o).getPaintProperty(u)}setFeatureState(o,u){this._checkLoaded();const p=o.source,m=o.sourceLayer,b=this.sourceCaches[p];if(void 0===b)return void this.fire(new y.k(new Error(`The source '${p}' does not exist in the map's style.`)));const E=b.getSource().type;"geojson"===E&&m?this.fire(new y.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==E||m?(void 0===o.id&&this.fire(new y.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(m,o.id,u)):this.fire(new y.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(o,u){this._checkLoaded();const p=o.source,m=this.sourceCaches[p];if(void 0===m)return void this.fire(new y.k(new Error(`The source '${p}' does not exist in the map's style.`)));const b=m.getSource().type,E="vector"===b?o.sourceLayer:void 0;"vector"!==b||E?u&&"string"!=typeof o.id&&"number"!=typeof o.id?this.fire(new y.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(E,o.id,u):this.fire(new y.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(o){this._checkLoaded();const u=o.source,p=o.sourceLayer,m=this.sourceCaches[u];if(void 0!==m)return"vector"!==m.getSource().type||p?(void 0===o.id&&this.fire(new y.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,o.id)):void this.fire(new y.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new y.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return y.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const o=y.bN(this.sourceCaches,b=>b.serialize()),u=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return y.bO({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:o,layers:u,terrain:p},b=>void 0!==b)}_updateLayer(o){this._updatedLayers[o.id]=!0,o.source&&!this._updatedSources[o.source]&&"raster"!==this.sourceCaches[o.source].getSource().type&&(this._updatedSources[o.source]="reload",this.sourceCaches[o.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(o){const u=E=>"fill-extrusion"===this._layers[E].type,p={},m=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I)){p[I]=E;for(const D of o){const R=D[I];if(R)for(const O of R)m.push(O)}}}m.sort((E,I)=>I.intersectionZ-E.intersectionZ);const b=[];for(let E=this._order.length-1;E>=0;E--){const I=this._order[E];if(u(I))for(let D=m.length-1;D>=0;D--){const R=m[D].feature;if(p[R.layer.id]<E)break;b.push(R),m.pop()}else for(const D of o){const R=D[I];if(R)for(const O of R)b.push(O.feature)}}return b}queryRenderedFeatures(o,u,p){u&&u.filter&&this._validate(y.z.filter,"queryRenderedFeatures.filter",u.filter,null,u);const m={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new y.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const R of u.layers){const O=this._layers[R];if(!O)return this.fire(new y.k(new Error(`The layer '${R}' does not exist in the map's style and cannot be queried for features.`))),[];m[O.source]=!0}}const b=[];u.availableImages=this._availableImages;const E=this._serializedAllLayers(),I=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,D=Object.assign(Object.assign({},u),{layers:I});for(const R in this.sourceCaches)u.layers&&!m[R]||b.push(qo(this.sourceCaches[R],this._layers,E,o,D,p,this.map.terrain?(O,j,z)=>this.map.terrain.getElevation(O,j,z):void 0));return this.placement&&b.push(function(R,O,j,z,U,q,ne){const ee={},re=q.queryRenderedSymbols(z),oe=[];for(const ue of Object.keys(re).map(Number))oe.push(ne[ue]);oe.sort(Al);for(const ue of oe){const ae=ue.featureIndex.lookupSymbolFeatures(re[ue.bucketInstanceId],O,ue.bucketIndex,ue.sourceLayerIndex,U.filter,U.layers,U.availableImages,R);for(const fe in ae){const ge=ee[fe]=ee[fe]||[],le=ae[fe];le.sort((be,ke)=>{const Te=ue.featureSortOrder;if(Te){const Ie=Te.indexOf(be.featureIndex);return Te.indexOf(ke.featureIndex)-Ie}return ke.featureIndex-be.featureIndex});for(const be of le)ge.push(be)}}return function(ue,ae,fe){for(const ge in ue)for(const le of ue[ge])Nc(le,fe[ae[ge].source]);return ue}(ee,R,j)}(this._layers,E,this.sourceCaches,o,D,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(o,u){u&&u.filter&&this._validate(y.z.filter,"querySourceFeatures.filter",u.filter,null,u);const p=this.sourceCaches[o];return p?function(m,b){const E=m.getRenderableIds().map(R=>m.getTileByID(R)),I=[],D={};for(let R=0;R<E.length;R++){const O=E[R],j=O.tileID.canonical.key;D[j]||(D[j]=!0,O.querySourceFeatures(I,b))}return I}(p,u):[]}getLight(){return this.light.getLight()}setLight(o,u={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const E in o)if(!y.bH(o[E],p[E])){m=!0;break}if(!m)return;const b={now:Dt.now(),transition:y.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(o,u),this.light.updateTransitions(b)}getProjection(){var o;return null===(o=this.stylesheet)||void 0===o?void 0:o.projection}setProjection(o){if(this._checkLoaded(),this.projection){if(this.projection.name===o.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=o,this._setProjectionInternal(o.type)}getSky(){var o;return null===(o=this.stylesheet)||void 0===o?void 0:o.sky}setSky(o,u={}){this._checkLoaded();const p=this.getSky();let m=!1;if(!o&&!p)return;if(o&&!p)m=!0;else if(!o&&p)m=!0;else for(const E in o)if(!y.bH(o[E],p[E])){m=!0;break}if(!m)return;const b={now:Dt.now(),transition:y.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=o,this.sky.setSky(o,u),this.sky.updateTransitions(b)}_setProjectionInternal(o){const u=function(p){if(Array.isArray(p)){const m=new Zt({type:p});return{projection:m,transform:new Hc,cameraHelper:new sf(m)}}switch(p){case"mercator":return{projection:new ln,transform:new Tn,cameraHelper:new Yr};case"globe":{const m=new Zt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new Hc,cameraHelper:new sf(m)}}case"vertical-perspective":return{projection:new Ta,transform:new Bl,cameraHelper:new $n};default:return y.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new ln,transform:new Tn,cameraHelper:new Yr}}}(o);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(o,u,p,m,b={}){return(!b||!1!==b.validate)&&af(this,o.call(y.z,y.e({key:u,style:this.serialize(),value:p,styleSpec:y.v},m)))}_remove(o=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),wa().off(ba,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.sourceCaches){const p=this.sourceCaches[u];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),o&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(o)}_clearSource(o){this.sourceCaches[o].clearTiles()}_reloadSource(o){this.sourceCaches[o].resume(),this.sourceCaches[o].reload()}_updateSources(o){for(const u in this.sourceCaches)this.sourceCaches[u].update(o,this.map.terrain)}_generateCollisionBoxes(){for(const o in this.sourceCaches)this._reloadSource(o)}_updatePlacement(o,u,p,m,b=!1){let E=!1,I=!1;const D={};for(const R of this._order){const O=this._layers[R];if("symbol"!==O.type)continue;if(!D[O.source]){const z=this.sourceCaches[O.source];D[O.source]=z.getRenderableIds(!0).map(U=>z.getTileByID(U)).sort((U,q)=>q.tileID.overscaledZ-U.tileID.overscaledZ||(U.tileID.isLessThan(q.tileID)?-1:1))}const j=this.crossTileSymbolIndex.addLayer(O,D[O.source],o.center.lng);E=E||j}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||0===p)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(Dt.now(),o.zoom))&&(this.pauseablePlacement=new _i(o,this.map.terrain,this._order,b,u,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,D),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(Dt.now()),I=!0),E&&this.pauseablePlacement.placement.setStale()),I||E)for(const R of this._order){const O=this._layers[R];"symbol"===O.type&&this.placement.updateLayerOpacities(O,D[O.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(Dt.now())}_releaseSymbolFadeTiles(){for(const o in this.sourceCaches)this.sourceCaches[o].releaseSymbolFadeTiles()}getImages(o,u){return y._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,u.icons),p})}getGlyphs(o,u){return y._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(u.stacks),m=this.sourceCaches[u.source];return m&&m.setDependencies(u.tileID.key,u.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(o,u={}){this._checkLoaded(),o&&this._validate(y.z.glyphs,"glyphs",o,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=o,this.glyphManager.entries={},this.glyphManager.setURL(o))}addSprite(o,u,p={},m){this._checkLoaded();const b=[{id:o,url:u}],E=[...xo(this.stylesheet.sprite),...b];this._validate(y.z.sprite,"sprite",E,null,p)||(this.stylesheet.sprite=E,this._loadSprite(b,!0,m))}removeSprite(o){this._checkLoaded();const u=xo(this.stylesheet.sprite);if(u.find(p=>p.id===o)){if(this._spritesImagesIds[o])for(const p of this._spritesImagesIds[o])this.imageManager.removeImage(p),this._changedImages[p]=!0;u.splice(u.findIndex(p=>p.id===o),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[o],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new y.l("data",{dataType:"style"}))}else this.fire(new y.k(new Error(`Sprite "${o}" doesn't exists on this map.`)))}getSprite(){return xo(this.stylesheet.sprite)}setSprite(o,u={},p){this._checkLoaded(),o&&this._validate(y.z.sprite,"sprite",o,null,u)||(this.stylesheet.sprite=o,o?this._loadSprite(o,!0,p):(this._unloadSprite(),p&&p(null)))}}var lf=y.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _m{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(o,u,p,m,b,E,I,D,R){this.context=o;let O=this.boundPaintVertexBuffers.length!==m.length;for(let j=0;!O&&j<m.length;j++)this.boundPaintVertexBuffers[j]!==m[j]&&(O=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==p||O||this.boundIndexBuffer!==b||this.boundVertexOffset!==E||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==D||this.boundDynamicVertexBuffer3!==R?this.freshBind(u,p,m,b,E,I,D,R):(o.bindVertexArray.set(this.vao),I&&I.bind(),b&&b.dynamicDraw&&b.bind(),D&&D.bind(),R&&R.bind())}freshBind(o,u,p,m,b,E,I,D){const R=o.numAttributes,O=this.context,j=O.gl;this.vao&&this.destroy(),this.vao=O.createVertexArray(),O.bindVertexArray.set(this.vao),this.boundProgram=o,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=E,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=D,u.enableAttributes(j,o);for(const z of p)z.enableAttributes(j,o);E&&E.enableAttributes(j,o),I&&I.enableAttributes(j,o),D&&D.enableAttributes(j,o),u.bind(),u.setVertexAttribPointers(j,o,b);for(const z of p)z.bind(),z.setVertexAttribPointers(j,o,b);E&&(E.bind(),E.setVertexAttribPointers(j,o,b)),m&&m.bind(),I&&(I.bind(),I.setVertexAttribPointers(j,o,b)),D&&(D.bind(),D.setVertexAttribPointers(j,o,b)),O.currentNumAttributes=R}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Zd=(v,o,u,p,m)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:o,u_fog_color:u?u.properties.get("fog-color"):y.bf.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:u?u.calculateFogBlendOpacity(p):0,u_horizon_color:u?u.properties.get("horizon-color"):y.bf.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),kt={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function ol(v){const o=[];for(let u=0;u<v.length;u++){if(null===v[u])continue;const p=v[u].split(" ");o.push(p.pop())}return o}class Fe{constructor(o,u,p,m,b,E,I,D,R=[]){const O=o.gl;this.program=O.createProgram();const j=ol(u.staticAttributes),z=p?p.getBinderAttributes():[],U=j.concat(z),q=at.prelude.staticUniforms?ol(at.prelude.staticUniforms):[],ne=I.staticUniforms?ol(I.staticUniforms):[],ee=u.staticUniforms?ol(u.staticUniforms):[],re=p?p.getBinderUniforms():[],oe=q.concat(ne).concat(ee).concat(re),ue=[];for(const Te of oe)ue.indexOf(Te)<0&&ue.push(Te);const ae=p?p.defines():[];Zo(O)&&ae.unshift("#version 300 es"),b&&ae.push("#define OVERDRAW_INSPECTOR;"),E&&ae.push("#define TERRAIN3D;"),D&&ae.push(D),R&&ae.push(...R);let fe=ae.concat(at.prelude.fragmentSource,I.fragmentSource,u.fragmentSource).join("\n"),ge=ae.concat(at.prelude.vertexSource,I.vertexSource,u.vertexSource).join("\n");Zo(O)||(fe=fe.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D("),ge=ge.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D("));const le=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(le,fe),O.compileShader(le),!O.getShaderParameter(le,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(le)}`);O.attachShader(this.program,le);const be=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(be,ge),O.compileShader(be),!O.getShaderParameter(be,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(be)}`);O.attachShader(this.program,be),this.attributes={};const ke={};this.numAttributes=U.length;for(let Te=0;Te<this.numAttributes;Te++)U[Te]&&(O.bindAttribLocation(this.program,Te,U[Te]),this.attributes[U[Te]]=Te);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(be),O.deleteShader(le);for(let Te=0;Te<ue.length;Te++){const Ie=ue[Te];if(Ie&&!ke[Ie]){const Ae=O.getUniformLocation(this.program,Ie);Ae&&(ke[Ie]=Ae)}}this.fixedUniforms=m(o,ke),this.terrainUniforms=((Te,Ie)=>({u_depth:new y.bP(Te,Ie.u_depth),u_terrain:new y.bP(Te,Ie.u_terrain),u_terrain_dim:new y.bg(Te,Ie.u_terrain_dim),u_terrain_matrix:new y.bR(Te,Ie.u_terrain_matrix),u_terrain_unpack:new y.bS(Te,Ie.u_terrain_unpack),u_terrain_exaggeration:new y.bg(Te,Ie.u_terrain_exaggeration)}))(o,ke),this.projectionUniforms=((Te,Ie)=>({u_projection_matrix:new y.bR(Te,Ie.u_projection_matrix),u_projection_tile_mercator_coords:new y.bS(Te,Ie.u_projection_tile_mercator_coords),u_projection_clipping_plane:new y.bS(Te,Ie.u_projection_clipping_plane),u_projection_transition:new y.bg(Te,Ie.u_projection_transition),u_projection_fallback_matrix:new y.bR(Te,Ie.u_projection_fallback_matrix)}))(o,ke),this.binderUniforms=p?p.getUniforms(o,ke):[]}draw(o,u,p,m,b,E,I,D,R,O,j,z,U,q,ne,ee,re,oe,ue){const ae=o.gl;if(this.failedToCreate)return;if(o.program.set(this.program),o.setDepthMode(p),o.setStencilMode(m),o.setColorMode(b),o.setCullFace(E),D){o.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,D.depthTexture),o.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,D.texture);for(const ge in this.terrainUniforms)this.terrainUniforms[ge].set(D[ge])}if(R)for(const ge in R)this.projectionUniforms[kt[ge]].set(R[ge]);if(I)for(const ge in this.fixedUniforms)this.fixedUniforms[ge].set(I[ge]);ee&&ee.setUniforms(o,this.binderUniforms,q,{zoom:ne});let fe=0;switch(u){case ae.LINES:fe=2;break;case ae.TRIANGLES:fe=3;break;case ae.LINE_STRIP:fe=1}for(const ge of U.get()){const le=ge.vaos||(ge.vaos={});(le[O]||(le[O]=new _m)).bind(o,this,j,ee?ee.getPaintVertexBuffers():[],z,ge.vertexOffset,re,oe,ue),ae.drawElements(u,ge.primitiveLength*fe,ae.UNSIGNED_SHORT,ge.primitiveOffset*fe*2)}}}function sl(v,o,u){const p=1/y.aC(u,1,o.transform.tileZoom),m=Math.pow(2,u.tileID.overscaledZ),b=u.tileSize*Math.pow(2,o.transform.tileZoom)/m,E=b*(u.tileID.canonical.x+u.tileID.wrap*m),I=b*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[E>>16,I>>16],u_pixel_coord_lower:[65535&E,65535&I]}}const gs=(v,o,u,p)=>{const m=v.style.light,b=m.properties.get("position"),E=[b.x,b.y,b.z],I=y.bV();"viewport"===m.properties.get("anchor")&&y.bW(I,v.transform.bearingInRadians),y.bX(E,E,I);const D=v.transform.transformLightDirection(E),R=m.properties.get("color");return{u_lightpos:E,u_lightpos_globe:D,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+o,u_opacity:u,u_fill_translate:p}},cf=(v,o,u,p,m,b,E)=>y.e(gs(v,o,u,p),sl(b,v,E),{u_height_factor:-Math.pow(2,m.overscaledZ)/E.tileSize/8}),al=(v,o,u,p)=>y.e(sl(o,v,u),{u_fill_translate:p}),Gu=(v,o)=>({u_world:v,u_fill_translate:o}),ms=(v,o,u,p,m)=>y.e(al(v,o,u,m),{u_world:p}),ym=(v,o,u,p,m)=>{const b=v.transform;let E,I,D=0;if("map"===u.paint.get("circle-pitch-alignment")){const R=y.aC(o,1,b.zoom);E=!0,I=[R,R],D=R/(y.$*Math.pow(2,o.tileID.overscaledZ))*2*Math.PI*m}else E=!1,I=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+("map"===u.paint.get("circle-pitch-scale")),u_pitch_with_map:+E,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:I,u_globe_extrude_scale:D,u_translate:p}},to=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),qc=v=>({u_viewport_size:[v.width,v.height]}),ll=(v,o=1)=>({u_color:v,u_overlay:0,u_overlay_scale:o}),Hu=(v,o,u,p)=>{const m=y.aC(v,1,o)/(y.$*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:y.aC(v,1,o),u_intensity:u,u_globe_extrude_scale:m}},Wc=(v,o,u,p)=>{const m=y.L();y.bY(m,0,v.width,v.height,0,0,1);const b=v.context.gl;return{u_matrix:m,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:u,u_color_ramp:p,u_opacity:o.paint.get("heatmap-opacity")}},Sp=(v,o,u)=>{const p=u.paint.get("hillshade-accent-color");let m;switch(u.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}const b=u.getIlluminationProperties();for(let E=0;E<b.directionRadians.length;E++)"viewport"===u.paint.get("hillshade-illumination-anchor")&&(b.directionRadians[E]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:Zc(0,o.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:p,u_method:m,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},uf=(v,o)=>{const u=o.stride,p=y.L();return y.bY(p,0,y.$,-y.$,0,0,1),y.M(p,p,[0,-y.$,0]),{u_matrix:p,u_image:1,u_dimension:[u,u],u_zoom:v.overscaledZ,u_unpack:o.getUnpackVector()}};function Zc(v,o){const u=Math.pow(2,o.canonical.z),p=o.canonical.y;return[new y.a1(0,p/u).toLngLat().lat,new y.a1(0,(p+1)/u).toLngLat().lat]}const Kd=(v,o,u=0)=>({u_image:0,u_unpack:o.getUnpackVector(),u_dimension:[o.stride,o.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:v.paint.get("color-relief-opacity")}),cl=(v,o,u,p)=>{const m=v.transform;return{u_translation:Yd(v,o,u),u_ratio:p/y.aC(o,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},Ep=(v,o,u,p,m)=>y.e(cl(v,o,u,p),{u_image:0,u_image_height:m}),_s=(v,o,u,p,m)=>{const b=v.transform,E=Gs(o,b);return{u_translation:Yd(v,o,u),u_texsize:o.imageAtlasTexture.size,u_ratio:p/y.aC(o,1,b.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[E,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Rn=(v,o,u,p,m,b)=>{const E=v.lineAtlas,I=Gs(o,v.transform),D="round"===u.layout.get("line-cap"),R=E.getDash(m.from,D),O=E.getDash(m.to,D),j=R.width*b.fromScale,z=O.width*b.toScale;return y.e(cl(v,o,u,p),{u_patternscale_a:[I/j,-R.height/2],u_patternscale_b:[I/z,-O.height/2],u_sdfgamma:E.width/(256*Math.min(j,z)*v.pixelRatio)/2,u_image:0,u_tex_y_a:R.y,u_tex_y_b:O.y,u_mix:b.t})};function Gs(v,o){return 1/y.aC(v,1,o.tileZoom)}function Yd(v,o,u){return y.aD(v.transform,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const zl=(v,o,u,p,m)=>{return{u_tl_parent:v,u_scale_parent:o,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(E=p.paint.get("raster-saturation"),E>0?1-1/(1.001-E):-E),u_contrast_factor:(b=p.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Xd(p.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var b,E};function Xd(v){v*=Math.PI/180;const o=Math.sin(v),u=Math.cos(v);return[(2*u+1)/3,(-Math.sqrt(3)*o-u+1)/3,(Math.sqrt(3)*o-u+1)/3]}const fo=(v,o,u,p,m,b,E,I,D,R,O,j,z)=>{const U=E.transform;return{u_is_size_zoom_constant:+("constant"===v||"source"===v),u_is_size_feature_constant:+("constant"===v||"camera"===v),u_size_t:o?o.uSizeT:0,u_size:o?o.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:U.width/U.height,u_fade_change:E.options.fadeDuration?E.symbolFadeChange:1,u_label_plane_matrix:I,u_coord_matrix:D,u_is_text:+O,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:b,u_texsize:j,u_texture:0,u_translation:R,u_pitched_scale:z}},Qd=(v,o,u,p,m,b,E,I,D,R,O,j,z,U)=>{const q=E.transform;return y.e(fo(v,o,u,p,m,b,E,I,D,R,O,j,U),{u_gamma_scale:p?Math.cos(q.pitch*Math.PI/180)*q.cameraToCenterDistance:1,u_device_pixel_ratio:E.pixelRatio,u_is_halo:1})},Ln=(v,o,u,p,m,b,E,I,D,R,O,j,z)=>y.e(Qd(v,o,u,p,m,b,E,I,D,R,!0,O,0,z),{u_texsize_icon:j,u_texture_icon:1}),vm=(v,o)=>({u_opacity:v,u_color:o}),Bi=(v,o,u,p,m)=>y.e(function(b,E,I,D){const R=I.imageManager.getPattern(b.from.toString()),O=I.imageManager.getPattern(b.to.toString()),{width:j,height:z}=I.imageManager.getPixelSize(),U=Math.pow(2,D.tileID.overscaledZ),q=D.tileSize*Math.pow(2,I.transform.tileZoom)/U,ne=q*(D.tileID.canonical.x+D.tileID.wrap*U),ee=q*D.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[j,z],u_mix:E.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:E.fromScale,u_scale_b:E.toScale,u_tile_units_to_pixels:1/y.aC(D,1,I.transform.tileZoom),u_pixel_coord_upper:[ne>>16,ee>>16],u_pixel_coord_lower:[65535&ne,65535&ee]}}(u,m,o,p),{u_opacity:v}),Io=(v,o)=>{},ul={fillExtrusion:(v,o)=>({u_lightpos:new y.bT(v,o.u_lightpos),u_lightpos_globe:new y.bT(v,o.u_lightpos_globe),u_lightintensity:new y.bg(v,o.u_lightintensity),u_lightcolor:new y.bT(v,o.u_lightcolor),u_vertical_gradient:new y.bg(v,o.u_vertical_gradient),u_opacity:new y.bg(v,o.u_opacity),u_fill_translate:new y.bU(v,o.u_fill_translate)}),fillExtrusionPattern:(v,o)=>({u_lightpos:new y.bT(v,o.u_lightpos),u_lightpos_globe:new y.bT(v,o.u_lightpos_globe),u_lightintensity:new y.bg(v,o.u_lightintensity),u_lightcolor:new y.bT(v,o.u_lightcolor),u_vertical_gradient:new y.bg(v,o.u_vertical_gradient),u_height_factor:new y.bg(v,o.u_height_factor),u_opacity:new y.bg(v,o.u_opacity),u_fill_translate:new y.bU(v,o.u_fill_translate),u_image:new y.bP(v,o.u_image),u_texsize:new y.bU(v,o.u_texsize),u_pixel_coord_upper:new y.bU(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new y.bU(v,o.u_pixel_coord_lower),u_scale:new y.bT(v,o.u_scale),u_fade:new y.bg(v,o.u_fade)}),fill:(v,o)=>({u_fill_translate:new y.bU(v,o.u_fill_translate)}),fillPattern:(v,o)=>({u_image:new y.bP(v,o.u_image),u_texsize:new y.bU(v,o.u_texsize),u_pixel_coord_upper:new y.bU(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new y.bU(v,o.u_pixel_coord_lower),u_scale:new y.bT(v,o.u_scale),u_fade:new y.bg(v,o.u_fade),u_fill_translate:new y.bU(v,o.u_fill_translate)}),fillOutline:(v,o)=>({u_world:new y.bU(v,o.u_world),u_fill_translate:new y.bU(v,o.u_fill_translate)}),fillOutlinePattern:(v,o)=>({u_world:new y.bU(v,o.u_world),u_image:new y.bP(v,o.u_image),u_texsize:new y.bU(v,o.u_texsize),u_pixel_coord_upper:new y.bU(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new y.bU(v,o.u_pixel_coord_lower),u_scale:new y.bT(v,o.u_scale),u_fade:new y.bg(v,o.u_fade),u_fill_translate:new y.bU(v,o.u_fill_translate)}),circle:(v,o)=>({u_camera_to_center_distance:new y.bg(v,o.u_camera_to_center_distance),u_scale_with_map:new y.bP(v,o.u_scale_with_map),u_pitch_with_map:new y.bP(v,o.u_pitch_with_map),u_extrude_scale:new y.bU(v,o.u_extrude_scale),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_globe_extrude_scale:new y.bg(v,o.u_globe_extrude_scale),u_translate:new y.bU(v,o.u_translate)}),collisionBox:(v,o)=>({u_pixel_extrude_scale:new y.bU(v,o.u_pixel_extrude_scale)}),collisionCircle:(v,o)=>({u_viewport_size:new y.bU(v,o.u_viewport_size)}),debug:(v,o)=>({u_color:new y.bQ(v,o.u_color),u_overlay:new y.bP(v,o.u_overlay),u_overlay_scale:new y.bg(v,o.u_overlay_scale)}),depth:Io,clippingMask:Io,heatmap:(v,o)=>({u_extrude_scale:new y.bg(v,o.u_extrude_scale),u_intensity:new y.bg(v,o.u_intensity),u_globe_extrude_scale:new y.bg(v,o.u_globe_extrude_scale)}),heatmapTexture:(v,o)=>({u_matrix:new y.bR(v,o.u_matrix),u_world:new y.bU(v,o.u_world),u_image:new y.bP(v,o.u_image),u_color_ramp:new y.bP(v,o.u_color_ramp),u_opacity:new y.bg(v,o.u_opacity)}),hillshade:(v,o)=>({u_image:new y.bP(v,o.u_image),u_latrange:new y.bU(v,o.u_latrange),u_exaggeration:new y.bg(v,o.u_exaggeration),u_altitudes:new y.b_(v,o.u_altitudes),u_azimuths:new y.b_(v,o.u_azimuths),u_accent:new y.bQ(v,o.u_accent),u_method:new y.bP(v,o.u_method),u_shadows:new y.bZ(v,o.u_shadows),u_highlights:new y.bZ(v,o.u_highlights)}),hillshadePrepare:(v,o)=>({u_matrix:new y.bR(v,o.u_matrix),u_image:new y.bP(v,o.u_image),u_dimension:new y.bU(v,o.u_dimension),u_zoom:new y.bg(v,o.u_zoom),u_unpack:new y.bS(v,o.u_unpack)}),colorRelief:(v,o)=>({u_image:new y.bP(v,o.u_image),u_unpack:new y.bS(v,o.u_unpack),u_dimension:new y.bU(v,o.u_dimension),u_elevation_stops:new y.bP(v,o.u_elevation_stops),u_color_stops:new y.bP(v,o.u_color_stops),u_color_ramp_size:new y.bP(v,o.u_color_ramp_size),u_opacity:new y.bg(v,o.u_opacity)}),line:(v,o)=>({u_translation:new y.bU(v,o.u_translation),u_ratio:new y.bg(v,o.u_ratio),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_units_to_pixels:new y.bU(v,o.u_units_to_pixels)}),lineGradient:(v,o)=>({u_translation:new y.bU(v,o.u_translation),u_ratio:new y.bg(v,o.u_ratio),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_units_to_pixels:new y.bU(v,o.u_units_to_pixels),u_image:new y.bP(v,o.u_image),u_image_height:new y.bg(v,o.u_image_height)}),linePattern:(v,o)=>({u_translation:new y.bU(v,o.u_translation),u_texsize:new y.bU(v,o.u_texsize),u_ratio:new y.bg(v,o.u_ratio),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_image:new y.bP(v,o.u_image),u_units_to_pixels:new y.bU(v,o.u_units_to_pixels),u_scale:new y.bT(v,o.u_scale),u_fade:new y.bg(v,o.u_fade)}),lineSDF:(v,o)=>({u_translation:new y.bU(v,o.u_translation),u_ratio:new y.bg(v,o.u_ratio),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_units_to_pixels:new y.bU(v,o.u_units_to_pixels),u_patternscale_a:new y.bU(v,o.u_patternscale_a),u_patternscale_b:new y.bU(v,o.u_patternscale_b),u_sdfgamma:new y.bg(v,o.u_sdfgamma),u_image:new y.bP(v,o.u_image),u_tex_y_a:new y.bg(v,o.u_tex_y_a),u_tex_y_b:new y.bg(v,o.u_tex_y_b),u_mix:new y.bg(v,o.u_mix)}),raster:(v,o)=>({u_tl_parent:new y.bU(v,o.u_tl_parent),u_scale_parent:new y.bg(v,o.u_scale_parent),u_buffer_scale:new y.bg(v,o.u_buffer_scale),u_fade_t:new y.bg(v,o.u_fade_t),u_opacity:new y.bg(v,o.u_opacity),u_image0:new y.bP(v,o.u_image0),u_image1:new y.bP(v,o.u_image1),u_brightness_low:new y.bg(v,o.u_brightness_low),u_brightness_high:new y.bg(v,o.u_brightness_high),u_saturation_factor:new y.bg(v,o.u_saturation_factor),u_contrast_factor:new y.bg(v,o.u_contrast_factor),u_spin_weights:new y.bT(v,o.u_spin_weights),u_coords_top:new y.bS(v,o.u_coords_top),u_coords_bottom:new y.bS(v,o.u_coords_bottom)}),symbolIcon:(v,o)=>({u_is_size_zoom_constant:new y.bP(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new y.bP(v,o.u_is_size_feature_constant),u_size_t:new y.bg(v,o.u_size_t),u_size:new y.bg(v,o.u_size),u_camera_to_center_distance:new y.bg(v,o.u_camera_to_center_distance),u_pitch:new y.bg(v,o.u_pitch),u_rotate_symbol:new y.bP(v,o.u_rotate_symbol),u_aspect_ratio:new y.bg(v,o.u_aspect_ratio),u_fade_change:new y.bg(v,o.u_fade_change),u_label_plane_matrix:new y.bR(v,o.u_label_plane_matrix),u_coord_matrix:new y.bR(v,o.u_coord_matrix),u_is_text:new y.bP(v,o.u_is_text),u_pitch_with_map:new y.bP(v,o.u_pitch_with_map),u_is_along_line:new y.bP(v,o.u_is_along_line),u_is_variable_anchor:new y.bP(v,o.u_is_variable_anchor),u_texsize:new y.bU(v,o.u_texsize),u_texture:new y.bP(v,o.u_texture),u_translation:new y.bU(v,o.u_translation),u_pitched_scale:new y.bg(v,o.u_pitched_scale)}),symbolSDF:(v,o)=>({u_is_size_zoom_constant:new y.bP(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new y.bP(v,o.u_is_size_feature_constant),u_size_t:new y.bg(v,o.u_size_t),u_size:new y.bg(v,o.u_size),u_camera_to_center_distance:new y.bg(v,o.u_camera_to_center_distance),u_pitch:new y.bg(v,o.u_pitch),u_rotate_symbol:new y.bP(v,o.u_rotate_symbol),u_aspect_ratio:new y.bg(v,o.u_aspect_ratio),u_fade_change:new y.bg(v,o.u_fade_change),u_label_plane_matrix:new y.bR(v,o.u_label_plane_matrix),u_coord_matrix:new y.bR(v,o.u_coord_matrix),u_is_text:new y.bP(v,o.u_is_text),u_pitch_with_map:new y.bP(v,o.u_pitch_with_map),u_is_along_line:new y.bP(v,o.u_is_along_line),u_is_variable_anchor:new y.bP(v,o.u_is_variable_anchor),u_texsize:new y.bU(v,o.u_texsize),u_texture:new y.bP(v,o.u_texture),u_gamma_scale:new y.bg(v,o.u_gamma_scale),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_is_halo:new y.bP(v,o.u_is_halo),u_translation:new y.bU(v,o.u_translation),u_pitched_scale:new y.bg(v,o.u_pitched_scale)}),symbolTextAndIcon:(v,o)=>({u_is_size_zoom_constant:new y.bP(v,o.u_is_size_zoom_constant),u_is_size_feature_constant:new y.bP(v,o.u_is_size_feature_constant),u_size_t:new y.bg(v,o.u_size_t),u_size:new y.bg(v,o.u_size),u_camera_to_center_distance:new y.bg(v,o.u_camera_to_center_distance),u_pitch:new y.bg(v,o.u_pitch),u_rotate_symbol:new y.bP(v,o.u_rotate_symbol),u_aspect_ratio:new y.bg(v,o.u_aspect_ratio),u_fade_change:new y.bg(v,o.u_fade_change),u_label_plane_matrix:new y.bR(v,o.u_label_plane_matrix),u_coord_matrix:new y.bR(v,o.u_coord_matrix),u_is_text:new y.bP(v,o.u_is_text),u_pitch_with_map:new y.bP(v,o.u_pitch_with_map),u_is_along_line:new y.bP(v,o.u_is_along_line),u_is_variable_anchor:new y.bP(v,o.u_is_variable_anchor),u_texsize:new y.bU(v,o.u_texsize),u_texsize_icon:new y.bU(v,o.u_texsize_icon),u_texture:new y.bP(v,o.u_texture),u_texture_icon:new y.bP(v,o.u_texture_icon),u_gamma_scale:new y.bg(v,o.u_gamma_scale),u_device_pixel_ratio:new y.bg(v,o.u_device_pixel_ratio),u_is_halo:new y.bP(v,o.u_is_halo),u_translation:new y.bU(v,o.u_translation),u_pitched_scale:new y.bg(v,o.u_pitched_scale)}),background:(v,o)=>({u_opacity:new y.bg(v,o.u_opacity),u_color:new y.bQ(v,o.u_color)}),backgroundPattern:(v,o)=>({u_opacity:new y.bg(v,o.u_opacity),u_image:new y.bP(v,o.u_image),u_pattern_tl_a:new y.bU(v,o.u_pattern_tl_a),u_pattern_br_a:new y.bU(v,o.u_pattern_br_a),u_pattern_tl_b:new y.bU(v,o.u_pattern_tl_b),u_pattern_br_b:new y.bU(v,o.u_pattern_br_b),u_texsize:new y.bU(v,o.u_texsize),u_mix:new y.bg(v,o.u_mix),u_pattern_size_a:new y.bU(v,o.u_pattern_size_a),u_pattern_size_b:new y.bU(v,o.u_pattern_size_b),u_scale_a:new y.bg(v,o.u_scale_a),u_scale_b:new y.bg(v,o.u_scale_b),u_pixel_coord_upper:new y.bU(v,o.u_pixel_coord_upper),u_pixel_coord_lower:new y.bU(v,o.u_pixel_coord_lower),u_tile_units_to_pixels:new y.bg(v,o.u_tile_units_to_pixels)}),terrain:(v,o)=>({u_texture:new y.bP(v,o.u_texture),u_ele_delta:new y.bg(v,o.u_ele_delta),u_fog_matrix:new y.bR(v,o.u_fog_matrix),u_fog_color:new y.bQ(v,o.u_fog_color),u_fog_ground_blend:new y.bg(v,o.u_fog_ground_blend),u_fog_ground_blend_opacity:new y.bg(v,o.u_fog_ground_blend_opacity),u_horizon_color:new y.bQ(v,o.u_horizon_color),u_horizon_fog_blend:new y.bg(v,o.u_horizon_fog_blend),u_is_globe_mode:new y.bg(v,o.u_is_globe_mode)}),terrainDepth:(v,o)=>({u_ele_delta:new y.bg(v,o.u_ele_delta)}),terrainCoords:(v,o)=>({u_texture:new y.bP(v,o.u_texture),u_terrain_coords_id:new y.bg(v,o.u_terrain_coords_id),u_ele_delta:new y.bg(v,o.u_ele_delta)}),projectionErrorMeasurement:(v,o)=>({u_input:new y.bg(v,o.u_input),u_output_expected:new y.bg(v,o.u_output_expected)}),atmosphere:(v,o)=>({u_sun_pos:new y.bT(v,o.u_sun_pos),u_atmosphere_blend:new y.bg(v,o.u_atmosphere_blend),u_globe_position:new y.bT(v,o.u_globe_position),u_globe_radius:new y.bg(v,o.u_globe_radius),u_inv_proj_matrix:new y.bR(v,o.u_inv_proj_matrix)}),sky:(v,o)=>({u_sky_color:new y.bQ(v,o.u_sky_color),u_horizon_color:new y.bQ(v,o.u_horizon_color),u_horizon:new y.bU(v,o.u_horizon),u_horizon_normal:new y.bU(v,o.u_horizon_normal),u_sky_horizon_blend:new y.bg(v,o.u_sky_horizon_blend),u_sky_blend:new y.bg(v,o.u_sky_blend)})};class jl{constructor(o,u,p){this.context=o;const m=o.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),o.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(o){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,o.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Ma{constructor(o,u,p,m){this.length=u.length,this.attributes=p,this.itemSize=u.bytesPerElement,this.dynamicDraw=m,this.context=o;const b=o.gl;this.buffer=b.createBuffer(),o.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(o){if(o.length!==this.length)throw new Error(`Length of new data is ${o.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,o.arrayBuffer)}enableAttributes(o,u){for(let p=0;p<this.attributes.length;p++){const m=u.attributes[this.attributes[p].name];void 0!==m&&o.enableVertexAttribArray(m)}}setVertexAttribPointers(o,u,p){for(let m=0;m<this.attributes.length;m++){const b=this.attributes[m],E=u.attributes[b.name];void 0!==E&&o.vertexAttribPointer(E,b.components,o[Jd[b.type]],!1,this.itemSize,b.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class wn{constructor(o){this.gl=o.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(o){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class eh extends wn{getDefault(){return y.bf.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.clearColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class Kc extends wn{getDefault(){return 1}set(o){(o!==this.current||this.dirty)&&(this.gl.clearDepth(o),this.current=o,this.dirty=!1)}}class bm extends wn{getDefault(){return 0}set(o){(o!==this.current||this.dirty)&&(this.gl.clearStencil(o),this.current=o,this.dirty=!1)}}class qu extends wn{getDefault(){return[!0,!0,!0,!0]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.colorMask(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Vl extends wn{getDefault(){return!0}set(o){(o!==this.current||this.dirty)&&(this.gl.depthMask(o),this.current=o,this.dirty=!1)}}class Wu extends wn{getDefault(){return 255}set(o){(o!==this.current||this.dirty)&&(this.gl.stencilMask(o),this.current=o,this.dirty=!1)}}class Cp extends wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(o){const u=this.current;(o.func!==u.func||o.ref!==u.ref||o.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(o.func,o.ref,o.mask),this.current=o,this.dirty=!1)}}class Tp extends wn{getDefault(){const o=this.gl;return[o.KEEP,o.KEEP,o.KEEP]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(o[0],o[1],o[2]),this.current=o,this.dirty=!1)}}class Da extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=o,this.dirty=!1}}class Ip extends wn{getDefault(){return[0,1]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.depthRange(o[0],o[1]),this.current=o,this.dirty=!1)}}class th extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=o,this.dirty=!1}}class nh extends wn{getDefault(){return this.gl.LESS}set(o){(o!==this.current||this.dirty)&&(this.gl.depthFunc(o),this.current=o,this.dirty=!1)}}class df extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.BLEND):u.disable(u.BLEND),this.current=o,this.dirty=!1}}class Yc extends wn{getDefault(){const o=this.gl;return[o.ONE,o.ZERO]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(o[0],o[1]),this.current=o,this.dirty=!1)}}class Xc extends wn{getDefault(){return y.bf.transparent}set(o){const u=this.current;(o.r!==u.r||o.g!==u.g||o.b!==u.b||o.a!==u.a||this.dirty)&&(this.gl.blendColor(o.r,o.g,o.b,o.a),this.current=o,this.dirty=!1)}}class si extends wn{getDefault(){return this.gl.FUNC_ADD}set(o){(o!==this.current||this.dirty)&&(this.gl.blendEquation(o),this.current=o,this.dirty=!1)}}class ka extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;o?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=o,this.dirty=!1}}class Pa extends wn{getDefault(){return this.gl.BACK}set(o){(o!==this.current||this.dirty)&&(this.gl.cullFace(o),this.current=o,this.dirty=!1)}}class Zu extends wn{getDefault(){return this.gl.CCW}set(o){(o!==this.current||this.dirty)&&(this.gl.frontFace(o),this.current=o,this.dirty=!1)}}class Qc extends wn{getDefault(){return null}set(o){(o!==this.current||this.dirty)&&(this.gl.useProgram(o),this.current=o,this.dirty=!1)}}class Mo extends wn{getDefault(){return this.gl.TEXTURE0}set(o){(o!==this.current||this.dirty)&&(this.gl.activeTexture(o),this.current=o,this.dirty=!1)}}class Jc extends wn{getDefault(){const o=this.gl;return[0,0,o.drawingBufferWidth,o.drawingBufferHeight]}set(o){const u=this.current;(o[0]!==u[0]||o[1]!==u[1]||o[2]!==u[2]||o[3]!==u[3]||this.dirty)&&(this.gl.viewport(o[0],o[1],o[2],o[3]),this.current=o,this.dirty=!1)}}class Ul extends wn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,o),this.current=o,this.dirty=!1}}class hf extends wn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class $l extends wn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,o),this.current=o,this.dirty=!1}}class rh extends wn{getDefault(){return null}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class eu extends wn{getDefault(){return null}set(o){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,o),this.current=o,this.dirty=!1}}class Ii extends wn{getDefault(){return null}set(o){var u;if(o===this.current&&!this.dirty)return;const p=this.gl;Zo(p)?p.bindVertexArray(o):null===(u=p.getExtension("OES_vertex_array_object"))||void 0===u||u.bindVertexArrayOES(o),this.current=o,this.dirty=!1}}class tu extends wn{getDefault(){return 4}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,o),this.current=o,this.dirty=!1}}class xm extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o),this.current=o,this.dirty=!1}}class rr extends wn{getDefault(){return!1}set(o){if(o===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,o),this.current=o,this.dirty=!1}}class He extends wn{constructor(o,u){super(o),this.context=o,this.parent=u}getDefault(){return null}}class Vt extends He{setDirty(){this.dirty=!0}set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,o,0),this.current=o,this.dirty=!1}}class dr extends He{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}class Pt extends He{set(o){if(o===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,o),this.current=o,this.dirty=!1}}const Dr="Framebuffer is not complete";class Gl{constructor(o,u,p,m,b){this.context=o,this.width=u,this.height=p;const E=o.gl,I=this.framebuffer=E.createFramebuffer();if(this.colorAttachment=new Vt(o,I),m)this.depthAttachment=b?new Pt(o,I):new dr(o,I);else if(b)throw new Error("Stencil cannot be set without depth");if(E.checkFramebufferStatus(E.FRAMEBUFFER)!==E.FRAMEBUFFER_COMPLETE)throw new Error(Dr)}destroy(){const o=this.context.gl,u=this.colorAttachment.get();if(u&&o.deleteTexture(u),this.depthAttachment){const p=this.depthAttachment.get();p&&o.deleteRenderbuffer(p)}o.deleteFramebuffer(this.framebuffer)}}class nu{constructor(o){var u,p;if(this.gl=o,this.clearColor=new eh(this),this.clearDepth=new Kc(this),this.clearStencil=new bm(this),this.colorMask=new qu(this),this.depthMask=new Vl(this),this.stencilMask=new Wu(this),this.stencilFunc=new Cp(this),this.stencilOp=new Tp(this),this.stencilTest=new Da(this),this.depthRange=new Ip(this),this.depthTest=new th(this),this.depthFunc=new nh(this),this.blend=new df(this),this.blendFunc=new Yc(this),this.blendColor=new Xc(this),this.blendEquation=new si(this),this.cullFace=new ka(this),this.cullFaceSide=new Pa(this),this.frontFace=new Zu(this),this.program=new Qc(this),this.activeTexture=new Mo(this),this.viewport=new Jc(this),this.bindFramebuffer=new Ul(this),this.bindRenderbuffer=new hf(this),this.bindTexture=new $l(this),this.bindVertexBuffer=new rh(this),this.bindElementBuffer=new eu(this),this.bindVertexArray=new Ii(this),this.pixelStoreUnpack=new tu(this),this.pixelStoreUnpackPremultiplyAlpha=new xm(this),this.pixelStoreUnpackFlipY=new rr(this),this.extTextureFilterAnisotropic=o.getExtension("EXT_texture_filter_anisotropic")||o.getExtension("MOZ_EXT_texture_filter_anisotropic")||o.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=o.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=o.getParameter(o.MAX_TEXTURE_SIZE),Zo(o)){this.HALF_FLOAT=o.HALF_FLOAT;const m=o.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(u=o.RGBA16F)&&void 0!==u?u:m?.RGBA16F_EXT,this.RGB16F=null!==(p=o.RGB16F)&&void 0!==p?p:m?.RGB16F_EXT,o.getExtension("EXT_color_buffer_float")}else{o.getExtension("EXT_color_buffer_half_float"),o.getExtension("OES_texture_half_float_linear");const m=o.getExtension("OES_texture_half_float");this.HALF_FLOAT=m?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(o,u){return new jl(this,o,u)}createVertexBuffer(o,u,p){return new Ma(this,o,u,p)}createRenderbuffer(o,u,p){const m=this.gl,b=m.createRenderbuffer();return this.bindRenderbuffer.set(b),m.renderbufferStorage(m.RENDERBUFFER,o,u,p),this.bindRenderbuffer.set(null),b}createFramebuffer(o,u,p,m){return new Gl(this,o,u,p,m)}clear({color:o,depth:u,stencil:p}){const m=this.gl;let b=0;o&&(b|=m.COLOR_BUFFER_BIT,this.clearColor.set(o),this.colorMask.set([!0,!0,!0,!0])),void 0!==u&&(b|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),void 0!==p&&(b|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(b)}setCullFace(o){!1===o.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(o.mode),this.frontFace.set(o.frontFace))}setDepthMode(o){o.func!==this.gl.ALWAYS||o.mask?(this.depthTest.set(!0),this.depthFunc.set(o.func),this.depthMask.set(o.mask),this.depthRange.set(o.range)):this.depthTest.set(!1)}setStencilMode(o){o.test.func!==this.gl.ALWAYS||o.mask?(this.stencilTest.set(!0),this.stencilMask.set(o.mask),this.stencilOp.set([o.fail,o.depthFail,o.pass]),this.stencilFunc.set({func:o.test.func,ref:o.ref,mask:o.test.mask})):this.stencilTest.set(!1)}setColorMode(o){y.bH(o.blendFunction,nr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(o.blendFunction),this.blendColor.set(o.blendColor)),this.colorMask.set(o.mask)}createVertexArray(){var o;return Zo(this.gl)?this.gl.createVertexArray():null===(o=this.gl.getExtension("OES_vertex_array_object"))||void 0===o?void 0:o.createVertexArrayOES()}deleteVertexArray(o){var u;return Zo(this.gl)?this.gl.deleteVertexArray(o):null===(u=this.gl.getExtension("OES_vertex_array_object"))||void 0===u?void 0:u.deleteVertexArrayOES(o)}unbindVAO(){this.bindVertexArray.set(null)}}let gn;function Kn(v,o,u,p,m){const b=v.context,E=v.transform,I=b.gl,D=v.useProgram("collisionBox"),R=[];let O=0,j=0;for(let re=0;re<p.length;re++){const oe=p[re],ue=o.getTile(oe).getBucket(u);if(!ue)continue;const ae=m?ue.textCollisionBox:ue.iconCollisionBox,fe=ue.collisionCircleArray;fe.length>0&&(R.push({circleArray:fe,circleOffset:j,coord:oe}),O+=fe.length/4,j=O),ae&&D.draw(b,I.LINES,Jt.disabled,xn.disabled,v.colorModeForRenderPass(),Ot.disabled,to(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(oe),E.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,null,v.transform.zoom,null,null,ae.collisionVertexBuffer)}if(!m||!R.length)return;const z=v.useProgram("collisionCircle"),U=new y.b$;U.resize(4*O),U._trim();let q=0;for(const re of R)for(let oe=0;oe<re.circleArray.length/4;oe++){const ue=4*oe,ae=re.circleArray[ue+0],fe=re.circleArray[ue+1],ge=re.circleArray[ue+2],le=re.circleArray[ue+3];U.emplace(q++,ae,fe,ge,le,0),U.emplace(q++,ae,fe,ge,le,1),U.emplace(q++,ae,fe,ge,le,2),U.emplace(q++,ae,fe,ge,le,3)}(!gn||gn.length<2*O)&&(gn=function(re){const oe=2*re,ue=new y.c1;ue.resize(oe),ue._trim();for(let ae=0;ae<oe;ae++){const fe=6*ae;ue.uint16[fe+0]=4*ae+0,ue.uint16[fe+1]=4*ae+1,ue.uint16[fe+2]=4*ae+2,ue.uint16[fe+3]=4*ae+2,ue.uint16[fe+4]=4*ae+3,ue.uint16[fe+5]=4*ae+0}return ue}(O));const ne=b.createIndexBuffer(gn,!0),ee=b.createVertexBuffer(U,y.c0.members,!0);for(const re of R){const oe=qc(v.transform);z.draw(b,I.TRIANGLES,Jt.disabled,xn.disabled,v.colorModeForRenderPass(),Ot.disabled,oe,v.style.map.terrain&&v.style.map.terrain.getTerrainData(re.coord),null,u.id,ee,ne,y.aM.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,v.transform.zoom,null,null,null)}ee.destroy(),ne.destroy()}const Yo=y.ag(new Float32Array(16));function nn(v,o,u,p,m,b){const{horizontalAlign:E,verticalAlign:I}=y.aH(v);return new y.P((-(E-.5)*o/m+p[0])*b,(-(I-.5)*u/m+p[1])*b)}function Hl(v,o,u,p,m,b){const E=o.tileAnchorPoint.add(new y.P(o.translation[0],o.translation[1]));if(o.pitchWithMap){let I=p.mult(b);u||(I=I.rotate(-m));const D=E.add(I);return _n(D.x,D.y,o.pitchedLabelPlaneMatrix,o.getElevation).point}if(u){const I=mi(o.tileAnchorPoint.x+1,o.tileAnchorPoint.y,o).point.sub(v),D=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return v.add(p.rotate(D))}return v.add(p)}function ru(v,o,u,p,m,b,E,I,D,R,O,j){const z=v.text.placedSymbolArray,U=v.text.dynamicLayoutVertexArray,q=v.icon.dynamicLayoutVertexArray,ne={};U.clear();for(let ee=0;ee<z.length;ee++){const re=z.get(ee),oe=re.hidden||!re.crossTileID||v.allowVerticalPlacement&&!re.placedOrientation?null:p[re.crossTileID];if(oe){const ue=new y.P(re.anchorX,re.anchorY),ae={getElevation:j,width:m.width,height:m.height,pitchedLabelPlaneMatrix:b,pitchWithMap:u,transform:m,tileAnchorPoint:ue,translation:R,unwrappedTileID:O},fe=u?rl(ue.x,ue.y,ae):mi(ue.x,ue.y,ae),ge=Ze(m.cameraToCenterDistance,fe.signedDistanceFromCamera);let le=y.ap(v.textSizeData,I,re)*ge/y.aB;u&&(le*=v.tilePixelRatio/E);const{width:be,height:ke,anchor:Te,textOffset:Ie,textBoxScale:Ae}=oe,We=nn(Te,be,ke,Ie,Ae,le),qe=m.getPitchedTextCorrection(ue.x+R[0],ue.y+R[1],O),Be=Hl(fe.point,ae,o,We,-m.bearingInRadians,qe),ht=v.allowVerticalPlacement&&re.placedOrientation===y.ao.vertical?Math.PI/2:0;for(let en=0;en<re.numGlyphs;en++)y.av(U,Be,ht);D&&re.associatedIconIndex>=0&&(ne[re.associatedIconIndex]={shiftedAnchor:Be,angle:ht})}else dn(re.numGlyphs,U)}if(D){q.clear();const ee=v.icon.placedSymbolArray;for(let re=0;re<ee.length;re++){const oe=ee.get(re);if(oe.hidden)dn(oe.numGlyphs,q);else{const ue=ne[re];if(ue)for(let ae=0;ae<oe.numGlyphs;ae++)y.av(q,ue.shiftedAnchor,ue.angle);else dn(oe.numGlyphs,q)}}v.icon.dynamicLayoutVertexBuffer.updateData(q)}v.text.dynamicLayoutVertexBuffer.updateData(U)}function Aa(v,o,u){return u.iconsInText&&o?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function ir(v,o,u,p,m,b,E,I,D,R,O,j,z){const U=v.context,q=U.gl,ne=v.transform,ee="map"===I,re="map"===D,oe="viewport"!==I&&"point"!==u.layout.get("symbol-placement"),ue=ee&&!re&&!oe,ae=!u.layout.get("symbol-sort-key").isConstant();let fe=!1;const ge=v.getDepthModeForSublayer(0,Jt.ReadOnly),le=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),be=[],ke=ne.getCircleRadiusCorrection();for(const Te of p){const Ie=o.getTile(Te),Ae=Ie.getBucket(u);if(!Ae)continue;const We=m?Ae.text:Ae.icon;if(!We||!We.segments.get().length||!We.hasVisibleVertices)continue;const qe=We.programConfigurations.get(u.id),Be=m||Ae.sdfIcons,ht=m?Ae.textSizeData:Ae.iconSizeData,en=re||0!==ne.pitch,Dn=v.useProgram(Aa(Be,m,Ae),qe),In=y.an(ht,ne.zoom),pn=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Te);let ar,wr,tn,jn,li=[0,0],kn=null;if(m)wr=Ie.glyphAtlasTexture,tn=q.LINEAR,ar=Ie.glyphAtlasTexture.size,Ae.iconsInText&&(li=Ie.imageAtlasTexture.size,kn=Ie.imageAtlasTexture,jn=en||v.options.rotating||v.options.zooming||"composite"===ht.kind||"camera"===ht.kind?q.LINEAR:q.NEAREST);else{const zr=1!==u.layout.get("icon-size").constantOr(0)||Ae.iconsNeedLinear;wr=Ie.imageAtlasTexture,tn=Be||v.options.rotating||v.options.zooming||zr||en?q.LINEAR:q.NEAREST,ar=Ie.imageAtlasTexture.size}const Jr=y.aC(Ie,1,v.transform.zoom),Vi=Zn(ee,v.transform,Jr),xi=y.L();y.aq(xi,Vi);const Js=un(re,ee,v.transform,Jr),Xl=y.aD(ne,Ie,b,E),Ql=ne.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),pl=le&&Ae.hasTextData(),du="none"!==u.layout.get("icon-text-fit")&&pl&&Ae.hasIconData();if(oe){const zr=v.style.map.terrain?(No,lr)=>v.style.map.terrain.getElevation(Te,No,lr):null,ci="map"===u.layout.get("text-rotation-alignment");_r(Ae,v,m,Vi,xi,re,R,ci,Te.toUnwrapped(),ne.width,ne.height,Xl,zr)}const Va=m&&le||du,po=oe||Va?Yo:re?Vi:v.transform.clipSpaceToPixelsMatrix,wi=Be&&0!==u.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1);let Ui;Ui=Be?Ae.iconsInText?Ln(ht.kind,In,ue,re,oe,Va,v,po,Js,Xl,ar,li,ke):Qd(ht.kind,In,ue,re,oe,Va,v,po,Js,Xl,m,ar,0,ke):fo(ht.kind,In,ue,re,oe,Va,v,po,Js,Xl,m,ar,ke);const ts={program:Dn,buffers:We,uniformValues:Ui,projectionData:Ql,atlasTexture:wr,atlasTextureIcon:kn,atlasInterpolation:tn,atlasInterpolationIcon:jn,isSDF:Be,hasHalo:wi};if(ae&&Ae.canOverlap){fe=!0;const zr=We.segments.get();for(const ci of zr)be.push({segments:new y.aM([ci]),sortKey:ci.sortKey,state:ts,terrainData:pn})}else be.push({segments:We.segments,sortKey:0,state:ts,terrainData:pn})}fe&&be.sort((Te,Ie)=>Te.sortKey-Ie.sortKey);for(const Te of be){const Ie=Te.state;if(U.activeTexture.set(q.TEXTURE0),Ie.atlasTexture.bind(Ie.atlasInterpolation,q.CLAMP_TO_EDGE),Ie.atlasTextureIcon&&(U.activeTexture.set(q.TEXTURE1),Ie.atlasTextureIcon&&Ie.atlasTextureIcon.bind(Ie.atlasInterpolationIcon,q.CLAMP_TO_EDGE)),Ie.isSDF){const Ae=Ie.uniformValues;Ie.hasHalo&&(Ae.u_is_halo=1,ys(Ie.buffers,Te.segments,u,v,Ie.program,ge,O,j,Ae,Ie.projectionData,Te.terrainData)),Ae.u_is_halo=0}ys(Ie.buffers,Te.segments,u,v,Ie.program,ge,O,j,Ie.uniformValues,Ie.projectionData,Te.terrainData)}}function ys(v,o,u,p,m,b,E,I,D,R,O){const j=p.context;m.draw(j,j.gl.TRIANGLES,b,E,I,Ot.backCCW,D,O,R,u.id,v.layoutVertexBuffer,v.indexBuffer,o,u.paint,p.transform.zoom,v.programConfigurations.get(u.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function dl(v,o,u,p,m){const b=v.context,E=b.gl,I=xn.disabled,D=new nr([E.ONE,E.ONE],y.bf.transparent,[!0,!0,!0,!0]),R=o.getBucket(u);if(!R)return;const O=p.key;let j=u.heatmapFbos.get(O);j||(j=Ra(b,o.tileSize,o.tileSize),u.heatmapFbos.set(O,j)),b.bindFramebuffer.set(j.framebuffer),b.viewport.set([0,0,o.tileSize,o.tileSize]),b.clear({color:y.bf.transparent});const z=R.programConfigurations.get(u.id),U=v.useProgram("heatmap",z,!m),q=v.transform.getProjectionData({overscaledTileID:o.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ne=v.style.map.terrain.getTerrainData(p);U.draw(b,E.TRIANGLES,Jt.disabled,I,D,Ot.disabled,Hu(o,v.transform.zoom,u.paint.get("heatmap-intensity"),1),ne,q,u.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,u.paint,v.transform.zoom,z)}function Hs(v,o,u,p,m){const b=v.context,E=b.gl,I=v.transform;b.setColorMode(v.colorModeForRenderPass());const D=iu(b,o),R=u.key,O=o.heatmapFbos.get(R);if(!O)return;b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,O.colorAttachment.get()),b.activeTexture.set(E.TEXTURE1),D.bind(E.LINEAR,E.CLAMP_TO_EDGE);const j=I.getProjectionData({overscaledTileID:u,applyTerrainMatrix:m,applyGlobeMatrix:!p});v.useProgram("heatmapTexture").draw(b,E.TRIANGLES,Jt.disabled,xn.disabled,v.colorModeForRenderPass(),Ot.disabled,Wc(v,o,0,1),null,j,o.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,o.paint,I.zoom),O.destroy(),o.heatmapFbos.delete(R)}function Ra(v,o,u){var p,m;const b=v.gl,E=b.createTexture();b.bindTexture(b.TEXTURE_2D,E),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const I=null!==(p=v.HALF_FLOAT)&&void 0!==p?p:b.UNSIGNED_BYTE,D=null!==(m=v.RGBA16F)&&void 0!==m?m:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,D,o,u,0,b.RGBA,I,null);const R=v.createFramebuffer(o,u,!1,!1);return R.colorAttachment.set(E),R}function iu(v,o){return o.colorRampTexture||(o.colorRampTexture=new y.T(v,o.colorRamp,v.gl.RGBA)),o.colorRampTexture}function Xo(v,o,u,p,m){if(!u||!p||!p.imageAtlas)return;const b=p.imageAtlas.patternPositions;let E=b[u.to.toString()],I=b[u.from.toString()];if(!E&&I&&(E=I),!I&&E&&(I=E),!E||!I){const D=m.getPaintProperty(o);E=b[D],I=b[D]}E&&I&&v.setConstantPatternPositions(E,I)}function ou(v,o,u,p,m,b,E,I){const D=v.context.gl,R="fill-pattern",O=u.paint.get(R),j=O&&O.constantOr(1),z=u.getCrossfadeParameters();let U,q,ne,ee,re;const oe=v.transform,ue=u.paint.get("fill-translate"),ae=u.paint.get("fill-translate-anchor");E?(q=j&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=D.LINES):(q=j?"fillPattern":"fill",U=D.TRIANGLES);const fe=O.constantOr(null);for(const ge of p){const le=o.getTile(ge);if(j&&!le.patternsLoaded())continue;const be=le.getBucket(u);if(!be)continue;const ke=be.programConfigurations.get(u.id),Te=v.useProgram(q,ke),Ie=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ge);j&&(v.context.activeTexture.set(D.TEXTURE0),le.imageAtlasTexture.bind(D.LINEAR,D.CLAMP_TO_EDGE),ke.updatePaintBuffers(z)),Xo(ke,R,fe,le,u);const Ae=oe.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!I,applyTerrainMatrix:!0}),We=y.aD(oe,le,ue,ae);if(E){ee=be.indexBuffer2,re=be.segments2;const Be=[D.drawingBufferWidth,D.drawingBufferHeight];ne="fillOutlinePattern"===q&&j?ms(v,z,le,Be,We):Gu(Be,We)}else ee=be.indexBuffer,re=be.segments,ne=j?al(v,z,le,We):{u_fill_translate:We};const qe=v.stencilModeForClipping(ge);Te.draw(v.context,U,m,qe,b,Ot.backCCW,ne,Ie,Ae,u.id,be.layoutVertexBuffer,ee,re,u.paint,v.transform.zoom,ke)}}function Na(v,o,u,p,m,b,E,I){const D=v.context,R=D.gl,O="fill-extrusion-pattern",j=u.paint.get(O),z=j.constantOr(1),U=u.getCrossfadeParameters(),q=u.paint.get("fill-extrusion-opacity"),ne=j.constantOr(null),ee=v.transform;for(const re of p){const oe=o.getTile(re),ue=oe.getBucket(u);if(!ue)continue;const ae=v.style.map.terrain&&v.style.map.terrain.getTerrainData(re),fe=ue.programConfigurations.get(u.id),ge=v.useProgram(z?"fillExtrusionPattern":"fillExtrusion",fe);z&&(v.context.activeTexture.set(R.TEXTURE0),oe.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),fe.updatePaintBuffers(U));const le=ee.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!I,applyTerrainMatrix:!0});Xo(fe,O,ne,oe,u);const be=y.aD(ee,oe,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),ke=u.paint.get("fill-extrusion-vertical-gradient"),Te=z?cf(v,ke,q,be,re,U,oe):gs(v,ke,q,be);ge.draw(D,D.gl.TRIANGLES,m,b,E,Ot.backCCW,Te,ae,le,u.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,u.paint,v.transform.zoom,fe,v.style.map.terrain&&ue.centroidVertexBuffer)}}function ai(v,o,u,p,m,b,E,I,D){var R;const O=v.style.projection,j=v.context,z=v.transform,U=j.gl,q=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],ne=v.useProgram("hillshade",null,!1,q),ee=!v.options.moving;for(const re of p){const oe=o.getTile(re),ue=oe.fbo;if(!ue)continue;const ae=O.getMeshFromTileID(j,re.canonical,I,!0,"raster"),fe=null===(R=v.style.map.terrain)||void 0===R?void 0:R.getTerrainData(re);j.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,ue.colorAttachment.get());const ge=z.getProjectionData({overscaledTileID:re,aligned:ee,applyGlobeMatrix:!D,applyTerrainMatrix:!0});ne.draw(j,U.TRIANGLES,b,m[re.overscaledZ],E,Ot.backCCW,Sp(v,oe,u),fe,ge,u.id,ae.vertexBuffer,ae.indexBuffer,ae.segments)}}function hl(v,o,u,p,m,b,E,I,D){var R;const O=v.style.projection,j=v.context,z=v.transform,U=j.gl,q=v.useProgram("colorRelief"),ne=!v.options.moving;let ee=!0,re=0;for(const oe of p){const ue=o.getTile(oe),ae=ue.dem;if(ee){const Te=U.getParameter(U.MAX_TEXTURE_SIZE),{elevationTexture:Ie,colorTexture:Ae}=u.getColorRampTextures(j,Te,ae.getUnpackVector());j.activeTexture.set(U.TEXTURE1),Ie.bind(U.NEAREST,U.CLAMP_TO_EDGE),j.activeTexture.set(U.TEXTURE4),Ae.bind(U.LINEAR,U.CLAMP_TO_EDGE),ee=!1,re=Ie.size[0]}if(!ae||!ae.data)continue;const fe=ae.stride,ge=ae.getPixels();if(j.activeTexture.set(U.TEXTURE0),j.pixelStoreUnpackPremultiplyAlpha.set(!1),ue.demTexture=ue.demTexture||v.getTileTexture(fe),ue.demTexture){const Te=ue.demTexture;Te.update(ge,{premultiply:!1}),Te.bind(U.LINEAR,U.CLAMP_TO_EDGE)}else ue.demTexture=new y.T(j,ge,U.RGBA,{premultiply:!1}),ue.demTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE);const le=O.getMeshFromTileID(j,oe.canonical,I,!0,"raster"),be=null===(R=v.style.map.terrain)||void 0===R?void 0:R.getTerrainData(oe),ke=z.getProjectionData({overscaledTileID:oe,aligned:ne,applyGlobeMatrix:!D,applyTerrainMatrix:!0});q.draw(j,U.TRIANGLES,b,m[oe.overscaledZ],E,Ot.backCCW,Kd(u,ue.dem,re),be,ke,u.id,le.vertexBuffer,le.indexBuffer,le.segments)}}const At=[new y.P(0,0),new y.P(y.$,0),new y.P(y.$,y.$),new y.P(0,y.$)];function La(v,o,u,p,m,b,E,I,D=!1,R=!1){const O=p[p.length-1].overscaledZ,j=v.context,z=j.gl,U=v.useProgram("raster"),q=v.transform,ne=v.style.projection,ee=v.colorModeForRenderPass(),re=!v.options.moving;for(const oe of p){const ue=v.getDepthModeForSublayer(oe.overscaledZ-O,1===u.paint.get("raster-opacity")?Jt.ReadWrite:Jt.ReadOnly,z.LESS),ae=o.getTile(oe);ae.registerFadeDuration(u.paint.get("raster-fade-duration"));const fe=o.findLoadedParent(oe,0),ge=o.findLoadedSibling(oe),le=qs(ae,fe||ge||null,o,u,v.transform,v.style.map.terrain);let be,ke;const Te="nearest"===u.paint.get("raster-resampling")?z.NEAREST:z.LINEAR;j.activeTexture.set(z.TEXTURE0),ae.texture.bind(Te,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),j.activeTexture.set(z.TEXTURE1),fe?(fe.texture.bind(Te,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),be=Math.pow(2,fe.tileID.overscaledZ-ae.tileID.overscaledZ),ke=[ae.tileID.canonical.x*be%1,ae.tileID.canonical.y*be%1]):ae.texture.bind(Te,z.CLAMP_TO_EDGE,z.LINEAR_MIPMAP_NEAREST),ae.texture.useMipmap&&j.extTextureFilterAnisotropic&&v.transform.pitch>20&&z.texParameterf(z.TEXTURE_2D,j.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,j.extTextureFilterAnisotropicMax);const Ie=v.style.map.terrain&&v.style.map.terrain.getTerrainData(oe),Ae=q.getProjectionData({overscaledTileID:oe,aligned:re,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),We=zl(ke||[0,0],be||1,le,u,I),qe=ne.getMeshFromTileID(j,oe.canonical,b,E,"raster");U.draw(j,z.TRIANGLES,ue,m?m[oe.overscaledZ]:xn.disabled,ee,D?Ot.frontCCW:Ot.backCCW,We,Ie,Ae,u.id,qe.vertexBuffer,qe.indexBuffer,qe.segments)}}function qs(v,o,u,p,m,b){const E=p.paint.get("raster-fade-duration");if(!b&&E>0){const I=Dt.now(),D=(I-v.timeAdded)/E,R=o?(I-o.timeAdded)/E:-1,O=u.getSource(),j=yt(m,{tileSize:O.tileSize,roundZoom:O.roundZoom}),z=!o||Math.abs(o.tileID.overscaledZ-j)>Math.abs(v.tileID.overscaledZ-j),U=z&&v.refreshedUponExpiration?1:y.ah(z?D:1-R,0,1);return v.refreshedUponExpiration&&D>=1&&(v.refreshedUponExpiration=!1),o?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}const Ws=new y.bf(1,0,0,1),Ku=new y.bf(0,1,0,1),Oa=new y.bf(0,0,1,1),or=new y.bf(1,0,1,1),vr=new y.bf(0,1,1,1);function Mi(v,o,u,p){bi(v,0,o+u/2,v.transform.width,u,p)}function hr(v,o,u,p){bi(v,o-u/2,0,u,v.transform.height,p)}function bi(v,o,u,p,m,b){const E=v.context,I=E.gl;I.enable(I.SCISSOR_TEST),I.scissor(o*v.pixelRatio,u*v.pixelRatio,p*v.pixelRatio,m*v.pixelRatio),E.clear({color:b}),I.disable(I.SCISSOR_TEST)}function Di(v,o,u){const p=v.context,m=p.gl,b=v.useProgram("debug"),E=Jt.disabled,I=xn.disabled,D=v.colorModeForRenderPass(),R="$debug",O=v.style.map.terrain&&v.style.map.terrain.getTerrainData(u);p.activeTexture.set(m.TEXTURE0);const j=o.getTileByID(u.key).latestRawTileData,z=Math.floor((j&&j.byteLength||0)/1024),U=o.getTile(u).tileSize,q=512/Math.min(U,512)*(u.overscaledZ/v.transform.zoom)*.5;let ne=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ne+=` => ${u.overscaledZ}`),function(re,oe){re.initDebugOverlayCanvas();const ue=re.debugOverlayCanvas,ae=re.context.gl,fe=re.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,ue.width,ue.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(oe,5,5),fe.strokeText(oe,5,5),re.debugOverlayTexture.update(ue),re.debugOverlayTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE)}(v,`${ne} ${z}kB`);const ee=v.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(p,m.TRIANGLES,E,I,nr.alphaBlended,Ot.disabled,ll(y.bf.transparent,q),null,ee,R,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),b.draw(p,m.LINE_STRIP,E,I,D,Ot.disabled,ll(y.bf.red),O,ee,R,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function zi(v,o,u,p){const{isRenderingGlobe:m}=p,b=v.context,E=b.gl,I=v.transform,D=v.colorModeForRenderPass(),R=v.getDepthModeFor3D(),O=v.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,v.width,v.height]);for(const j of u){const z=o.getTerrainMesh(j.tileID),U=v.renderToTexture.getTexture(j),q=o.getTerrainData(j.tileID);b.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,U.texture);const ne=o.getMeshFrameDelta(I.zoom),ee=I.calculateFogMatrix(j.tileID.toUnwrapped()),re=Zd(ne,ee,v.style.sky,I.pitch,m),oe=I.getProjectionData({overscaledTileID:j.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});O.draw(b,E.TRIANGLES,R,xn.disabled,D,Ot.backCCW,re,q,oe,"terrain",z.vertexBuffer,z.indexBuffer,z.segments)}}function Qo(v,o){if(!o.mesh){const u=new y.aL;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const p=new y.aN;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),o.mesh=new Fi(v.createVertexBuffer(u,fs.members),v.createIndexBuffer(p),y.aM.simpleSegment(0,0,u.length,p.length))}return o.mesh}class wm{constructor(o,u){this.context=new nu(o),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:y.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=sn.maxUnderzooming+sn.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vu}resize(o,u,p){if(this.width=Math.floor(o*p),this.height=Math.floor(u*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const o=this.context,u=new y.aL;u.emplaceBack(0,0),u.emplaceBack(y.$,0),u.emplaceBack(0,y.$),u.emplaceBack(y.$,y.$),this.tileExtentBuffer=o.createVertexBuffer(u,fs.members),this.tileExtentSegments=y.aM.simpleSegment(0,0,4,2);const p=new y.aL;p.emplaceBack(0,0),p.emplaceBack(y.$,0),p.emplaceBack(0,y.$),p.emplaceBack(y.$,y.$),this.debugBuffer=o.createVertexBuffer(p,fs.members),this.debugSegments=y.aM.simpleSegment(0,0,4,5);const m=new y.c6;m.emplaceBack(0,0,0,0),m.emplaceBack(y.$,0,y.$,0),m.emplaceBack(0,y.$,0,y.$),m.emplaceBack(y.$,y.$,y.$,y.$),this.rasterBoundsBuffer=o.createVertexBuffer(m,lf.members),this.rasterBoundsSegments=y.aM.simpleSegment(0,0,4,2);const b=new y.aL;b.emplaceBack(0,0),b.emplaceBack(y.$,0),b.emplaceBack(0,y.$),b.emplaceBack(y.$,y.$),this.rasterBoundsBufferPosOnly=o.createVertexBuffer(b,fs.members),this.rasterBoundsSegmentsPosOnly=y.aM.simpleSegment(0,0,4,5);const E=new y.aL;E.emplaceBack(0,0),E.emplaceBack(1,0),E.emplaceBack(0,1),E.emplaceBack(1,1),this.viewportBuffer=o.createVertexBuffer(E,fs.members),this.viewportSegments=y.aM.simpleSegment(0,0,4,2);const I=new y.c7;I.emplaceBack(0),I.emplaceBack(1),I.emplaceBack(3),I.emplaceBack(2),I.emplaceBack(0),this.tileBorderIndexBuffer=o.createIndexBuffer(I);const D=new y.aN;D.emplaceBack(1,0,2),D.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=o.createIndexBuffer(D);const R=this.context.gl;this.stencilClearMode=new xn({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO),this.tileExtentMesh=new Fi(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const o=this.context,u=o.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=y.L();y.bY(p,0,this.width,this.height,0,0,1),y.N(p,p,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const m={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(o,u.TRIANGLES,Jt.disabled,this.stencilClearMode,nr.disabled,Ot.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(o,u,p){if(this.currentStencilSource===o.source||!o.isTileClipped()||!u||!u.length)return;this.currentStencilSource=o.source,this.nextStencilID+u.length>256&&this.clearStencil();const m=this.context;m.setColorMode(nr.disabled),m.setDepthMode(Jt.disabled);const b={};for(const E of u)b[E.key]=this.nextStencilID++;this._renderTileMasks(b,u,p,!0),this._renderTileMasks(b,u,p,!1),this._tileClippingMaskIDs=b}_renderTileMasks(o,u,p,m){const b=this.context,E=b.gl,I=this.style.projection,D=this.transform,R=this.useProgram("clippingMask");for(const O of u){const j=o[O.key],z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(O),U=I.getMeshFromTileID(this.context,O.canonical,m,!0,"stencil"),q=D.getProjectionData({overscaledTileID:O,applyGlobeMatrix:!p,applyTerrainMatrix:!0});R.draw(b,E.TRIANGLES,Jt.disabled,new xn({func:E.ALWAYS,mask:0},j,255,E.KEEP,E.KEEP,E.REPLACE),nr.disabled,p?Ot.disabled:Ot.backCCW,null,z,q,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}_renderTilesDepthBuffer(){const o=this.context,u=o.gl,p=this.style.projection,m=this.transform,b=this.useProgram("depth"),E=this.getDepthModeFor3D(),I=Ee(m,{tileSize:m.tileSize});for(const D of I){const R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D),O=p.getMeshFromTileID(this.context,D.canonical,!0,!0,"raster"),j=m.getProjectionData({overscaledTileID:D,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(o,u.TRIANGLES,E,xn.disabled,nr.disabled,Ot.backCCW,null,R,j,"$clipping",O.vertexBuffer,O.indexBuffer,O.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const o=this.nextStencilID++,u=this.context.gl;return new xn({func:u.NOTEQUAL,mask:255},o,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(o){const u=this.context.gl;return new xn({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[o.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(o){const u=this.context.gl,p=o.sort((E,I)=>I.overscaledZ-E.overscaledZ),m=p[p.length-1].overscaledZ,b=p[0].overscaledZ-m+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const E={};for(let I=0;I<b;I++)E[I+m]=new xn({func:u.GEQUAL,mask:255},I+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=b,[E,p]}return[{[m]:xn.disabled},p]}stencilConfigForOverlapTwoPass(o){const u=this.context.gl,p=o.sort((E,I)=>I.overscaledZ-E.overscaledZ),m=p[p.length-1].overscaledZ,b=p[0].overscaledZ-m+1;if(this.clearStencil(),b>1){const E={},I={};for(let D=0;D<b;D++)E[D+m]=new xn({func:u.GREATER,mask:255},b+1+D,255,u.KEEP,u.KEEP,u.REPLACE),I[D+m]=new xn({func:u.GREATER,mask:255},1+D,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*b+1,[E,I,p]}return this.nextStencilID=3,[{[m]:new xn({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[m]:new xn({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},p]}colorModeForRenderPass(){const o=this.context.gl;return this._showOverdrawInspector?new nr([o.CONSTANT_COLOR,o.ONE],new y.bf(.125,.125,.125,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?nr.unblended:nr.alphaBlended}getDepthModeForSublayer(o,u,p){if(!this.opaquePassEnabledForLayer())return Jt.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+o)*this.depthEpsilon;return new Jt(p||this.context.gl.LEQUAL,u,[m,m])}getDepthModeFor3D(){return new Jt(this.context.gl.LEQUAL,Jt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(o,u){var p,m;this.style=o,this.options=u,this.lineAtlas=o.lineAtlas,this.imageManager=o.imageManager,this.glyphManager=o.glyphManager,this.symbolFadeChange=o.placement.symbolFadeChange(Dt.now()),this.imageManager.beginFrame();const b=this.style._order,E=this.style.sourceCaches,I={},D={},R={},O={isRenderingToTexture:!1,isRenderingGlobe:(null===(p=o.projection)||void 0===p?void 0:p.transitionState)>0};for(const z in E){const U=E[z];U.used&&U.prepare(this.context),I[z]=U.getVisibleCoordinates(!1),D[z]=I[z].slice().reverse(),R[z]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<b.length;z++)if(this.style._layers[b[z]].is3D()){this.opaquePassCutoff=z;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const z of b){const U=this.style._layers[z];if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;const q=D[U.source];("custom"===U.type||q.length)&&this.renderLayer(this,E[U.source],U,q,O)}if(null===(m=this.style.projection)||void 0===m||m.updateGPUdependent({context:this.context,useProgram:z=>this.useProgram(z)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?y.bf.black:y.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(z,U){const q=z.context,ne=q.gl,ee=((ge,le,be)=>{const ke=Math.cos(le.rollInRadians),Te=Math.sin(le.rollInRadians),Ie=me(le),Ae=le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:[(le.width/2-Ie*Te)*be,(le.height/2+Ie*ke)*be],u_horizon_normal:[-Te,ke],u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*le.height/2*be,u_sky_blend:Ae}})(U,z.style.map.transform,z.pixelRatio),re=new Jt(ne.LEQUAL,Jt.ReadWrite,[0,1]),oe=xn.disabled,ue=z.colorModeForRenderPass(),ae=z.useProgram("sky"),fe=Qo(q,U);ae.draw(q,ne.TRIANGLES,re,oe,ue,Ot.disabled,ee,null,void 0,"sky",fe.vertexBuffer,fe.indexBuffer,fe.segments)}(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(o._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[b[this.currentLayer]],U=E[z.source],q=I[z.source];this._renderTileClippingMasks(z,q,!1),this.renderLayer(this,U,z,q,O)}this.renderPass="translucent";let j=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const z=this.style._layers[b[this.currentLayer]],U=E[z.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(z,O))continue;this.opaquePassEnabledForLayer()||j||(j=!0,O.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const q=("symbol"===z.type?R:D)[z.source];this._renderTileClippingMasks(z,I[z.source],!!this.renderToTexture),this.renderLayer(this,U,z,q,O)}if(O.isRenderingGlobe&&function(z,U,q){const ne=z.context,ee=ne.gl,re=z.useProgram("atmosphere"),oe=new Jt(ee.LEQUAL,Jt.ReadOnly,[0,1]),ue=z.transform,ae=function(Ae,We){const qe=Ae.properties.get("position"),Be=[-qe.x,-qe.y,-qe.z],ht=y.ag(new Float64Array(16));return"map"===Ae.properties.get("anchor")&&(y.b6(ht,ht,We.rollInRadians),y.b7(ht,ht,-We.pitchInRadians),y.b6(ht,ht,We.bearingInRadians),y.b7(ht,ht,We.center.lat*Math.PI/180),y.bz(ht,ht,-We.center.lng*Math.PI/180)),y.c5(Be,Be,ht),Be}(q,z.transform),fe=ue.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ge=U.properties.get("atmosphere-blend")*fe.projectionTransition;if(0===ge)return;const le=il(ue.worldSize,ue.center.lat),be=ue.inverseProjectionMatrix,ke=new Float64Array(4);ke[3]=1,y.aw(ke,ke,ue.modelViewProjectionMatrix),ke[0]/=ke[3],ke[1]/=ke[3],ke[2]/=ke[3],ke[3]=1,y.aw(ke,ke,be),ke[0]/=ke[3],ke[1]/=ke[3],ke[2]/=ke[3],ke[3]=1;const Te=((Ae,We,qe,Be,ht)=>({u_sun_pos:Ae,u_atmosphere_blend:We,u_globe_position:qe,u_globe_radius:Be,u_inv_proj_matrix:ht}))(ae,ge,[ke[0],ke[1],ke[2]],le,be),Ie=Qo(ne,U);re.draw(ne,ee.TRIANGLES,oe,xn.disabled,nr.alphaBlended,Ot.disabled,Te,null,null,"atmosphere",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const z=function(U,q){let ne=null;const ee=Object.values(U._layers).flatMap(ae=>ae.source&&!ae.isHidden(q)?[U.sourceCaches[ae.source]]:[]),re=ee.filter(ae=>"vector"===ae.getSource().type),oe=ee.filter(ae=>"vector"!==ae.getSource().type),ue=ae=>{(!ne||ne.getSource().maxzoom<ae.getSource().maxzoom)&&(ne=ae)};return re.forEach(ae=>ue(ae)),ne||oe.forEach(ae=>ue(ae)),ne}(this.style,this.transform.zoom);z&&function(U,q,ne){for(let ee=0;ee<ne.length;ee++)Di(U,q,ne[ee])}(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const U=z.transform.padding;Mi(z,z.transform.height-(U.top||0),3,Ws),Mi(z,U.bottom||0,3,Ku),hr(z,U.left||0,3,Oa),hr(z,z.transform.width-(U.right||0),3,or);const q=z.transform.centerPoint;var ne,ee,re,oe;bi(ne=z,(ee=q.x)-1,(re=z.transform.height-q.y)-10,2,20,oe=vr),bi(ne,ee-10,re-1,20,2,oe)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(o){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=o?!y.c8(u,p):!y.c9(u,p)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(y.ca(u,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(b,E){const I=b.context,D=I.gl,R=b.transform,O=nr.unblended,j=new Jt(D.LEQUAL,Jt.ReadWrite,[0,1]),z=E.sourceCache.getRenderableTiles(),U=b.useProgram("terrainDepth");I.bindFramebuffer.set(E.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:y.bf.transparent,depth:1});for(const q of z){const ne=E.getTerrainMesh(q.tileID),ee=E.getTerrainData(q.tileID),re=R.getProjectionData({overscaledTileID:q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),oe={u_ele_delta:E.getMeshFrameDelta(R.zoom)};U.draw(I,D.TRIANGLES,j,xn.disabled,O,Ot.backCCW,oe,ee,re,"terrain",ne.vertexBuffer,ne.indexBuffer,ne.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain),function(b,E){const I=b.context,D=I.gl,R=b.transform,O=nr.unblended,j=new Jt(D.LEQUAL,Jt.ReadWrite,[0,1]),z=E.getCoordsTexture(),U=E.sourceCache.getRenderableTiles(),q=b.useProgram("terrainCoords");I.bindFramebuffer.set(E.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),I.clear({color:y.bf.transparent,depth:1}),E.coordsIndex=[];for(const ne of U){const ee=E.getTerrainMesh(ne.tileID),re=E.getTerrainData(ne.tileID);I.activeTexture.set(D.TEXTURE0),D.bindTexture(D.TEXTURE_2D,z.texture);const oe={u_terrain_coords_id:(255-E.coordsIndex.length)/255,u_texture:0,u_ele_delta:E.getMeshFrameDelta(R.zoom)},ue=R.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(I,D.TRIANGLES,j,xn.disabled,O,Ot.backCCW,oe,re,ue,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments),E.coordsIndex.push(ne.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,b.width,b.height])}(this,this.style.map.terrain))}renderLayer(o,u,p,m,b){p.isHidden(this.transform.zoom)||("background"===p.type||"custom"===p.type||(m||[]).length)&&(this.id=p.id,y.cb(p)?function(E,I,D,R,O,j){if("translucent"!==E.renderPass)return;const{isRenderingToTexture:z}=j,U=xn.disabled,q=E.colorModeForRenderPass();(D._unevaluatedLayout.hasValue("text-variable-anchor")||D._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ne,ee,re,oe,ue,ae,fe,ge,le){const be=ee.transform,ke=ee.style.map.terrain,Te="map"===ue,Ie="map"===ae;for(const Ae of ne){const We=oe.getTile(Ae),qe=We.getBucket(re);if(!qe||!qe.text||!qe.text.segments.get().length)continue;const Be=y.an(qe.textSizeData,be.zoom),ht=y.aC(We,1,ee.transform.zoom),en=Zn(Te,ee.transform,ht),Dn="none"!==re.layout.get("icon-text-fit")&&qe.hasIconData();if(Be){const In=Math.pow(2,be.zoom-We.tileID.overscaledZ),pn=ke?(ar,wr)=>ke.getElevation(Ae,ar,wr):null;ru(qe,Te,Ie,le,be,en,In,Be,Dn,y.aD(be,We,fe,ge),Ae.toUnwrapped(),pn)}}}(R,E,D,I,D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),O),0!==D.paint.get("icon-opacity").constantOr(1)&&ir(E,I,D,R,!1,D.paint.get("icon-translate"),D.paint.get("icon-translate-anchor"),D.layout.get("icon-rotation-alignment"),D.layout.get("icon-pitch-alignment"),D.layout.get("icon-keep-upright"),U,q,z),0!==D.paint.get("text-opacity").constantOr(1)&&ir(E,I,D,R,!0,D.paint.get("text-translate"),D.paint.get("text-translate-anchor"),D.layout.get("text-rotation-alignment"),D.layout.get("text-pitch-alignment"),D.layout.get("text-keep-upright"),U,q,z),I.map.showCollisionBoxes&&(Kn(E,I,D,R,!0),Kn(E,I,D,R,!1))}(o,u,p,m,this.style.placement.variableOffsets,b):y.cc(p)?function(E,I,D,R,O){if("translucent"!==E.renderPass)return;const{isRenderingToTexture:j}=O,z=D.paint.get("circle-opacity"),U=D.paint.get("circle-stroke-width"),q=D.paint.get("circle-stroke-opacity"),ne=!D.layout.get("circle-sort-key").isConstant();if(0===z.constantOr(1)&&(0===U.constantOr(1)||0===q.constantOr(1)))return;const ee=E.context,re=ee.gl,oe=E.transform,ue=E.getDepthModeForSublayer(0,Jt.ReadOnly),ae=xn.disabled,fe=E.colorModeForRenderPass(),ge=[],le=oe.getCircleRadiusCorrection();for(let be=0;be<R.length;be++){const ke=R[be],Te=I.getTile(ke),Ie=Te.getBucket(D);if(!Ie)continue;const Ae=D.paint.get("circle-translate"),We=D.paint.get("circle-translate-anchor"),qe=y.aD(oe,Te,Ae,We),Be=Ie.programConfigurations.get(D.id),ht=E.useProgram("circle",Be),en=Ie.layoutVertexBuffer,Dn=Ie.indexBuffer,In=E.style.map.terrain&&E.style.map.terrain.getTerrainData(ke),pn={programConfiguration:Be,program:ht,layoutVertexBuffer:en,indexBuffer:Dn,uniformValues:ym(E,Te,D,qe,le),terrainData:In,projectionData:oe.getProjectionData({overscaledTileID:ke,applyGlobeMatrix:!j,applyTerrainMatrix:!0})};if(ne){const ar=Ie.segments.get();for(const wr of ar)ge.push({segments:new y.aM([wr]),sortKey:wr.sortKey,state:pn})}else ge.push({segments:Ie.segments,sortKey:0,state:pn})}ne&&ge.sort((be,ke)=>be.sortKey-ke.sortKey);for(const be of ge){const{programConfiguration:ke,program:Te,layoutVertexBuffer:Ie,indexBuffer:Ae,uniformValues:We,terrainData:qe,projectionData:Be}=be.state;Te.draw(ee,re.TRIANGLES,ue,ae,fe,Ot.backCCW,We,qe,Be,D.id,Ie,Ae,be.segments,D.paint,E.transform.zoom,ke)}}(o,u,p,m,b):y.cd(p)?function(E,I,D,R,O){if(0===D.paint.get("heatmap-opacity"))return;const j=E.context,{isRenderingToTexture:z,isRenderingGlobe:U}=O;if(E.style.map.terrain){for(const q of R){const ne=I.getTile(q);I.hasRenderableParent(q)||("offscreen"===E.renderPass?dl(E,ne,D,q,U):"translucent"===E.renderPass&&Hs(E,D,q,z,U))}j.viewport.set([0,0,E.width,E.height])}else"offscreen"===E.renderPass?function(q,ne,ee,re){const oe=q.context,ue=oe.gl,ae=q.transform,fe=xn.disabled,ge=new nr([ue.ONE,ue.ONE],y.bf.transparent,[!0,!0,!0,!0]);(function(le,be,ke){const Te=le.gl;le.activeTexture.set(Te.TEXTURE1),le.viewport.set([0,0,be.width/4,be.height/4]);let Ie=ke.heatmapFbos.get(y.c2);Ie?(Te.bindTexture(Te.TEXTURE_2D,Ie.colorAttachment.get()),le.bindFramebuffer.set(Ie.framebuffer)):(Ie=Ra(le,be.width/4,be.height/4),ke.heatmapFbos.set(y.c2,Ie))})(oe,q,ee),oe.clear({color:y.bf.transparent});for(let le=0;le<re.length;le++){const be=re[le];if(ne.hasRenderableParent(be))continue;const ke=ne.getTile(be),Te=ke.getBucket(ee);if(!Te)continue;const Ie=Te.programConfigurations.get(ee.id),Ae=q.useProgram("heatmap",Ie),We=ae.getProjectionData({overscaledTileID:be,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),qe=ae.getCircleRadiusCorrection();Ae.draw(oe,ue.TRIANGLES,Jt.disabled,fe,ge,Ot.backCCW,Hu(ke,ae.zoom,ee.paint.get("heatmap-intensity"),qe),null,We,ee.id,Te.layoutVertexBuffer,Te.indexBuffer,Te.segments,ee.paint,ae.zoom,Ie)}oe.viewport.set([0,0,q.width,q.height])}(E,I,D,R):"translucent"===E.renderPass&&function(q,ne){const ee=q.context,re=ee.gl;ee.setColorMode(q.colorModeForRenderPass());const oe=ne.heatmapFbos.get(y.c2);oe&&(ee.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,oe.colorAttachment.get()),ee.activeTexture.set(re.TEXTURE1),iu(ee,ne).bind(re.LINEAR,re.CLAMP_TO_EDGE),q.useProgram("heatmapTexture").draw(ee,re.TRIANGLES,Jt.disabled,xn.disabled,q.colorModeForRenderPass(),Ot.disabled,Wc(q,ne,0,1),null,null,ne.id,q.viewportBuffer,q.quadTriangleIndexBuffer,q.viewportSegments,ne.paint,q.transform.zoom))}(E,D)}(o,u,p,m,b):y.ce(p)?function(E,I,D,R,O){if("translucent"!==E.renderPass)return;const{isRenderingToTexture:j}=O,z=D.paint.get("line-opacity"),U=D.paint.get("line-width");if(0===z.constantOr(1)||0===U.constantOr(1))return;const q=E.getDepthModeForSublayer(0,Jt.ReadOnly),ne=E.colorModeForRenderPass(),ee=D.paint.get("line-dasharray"),re=D.paint.get("line-pattern"),oe=re.constantOr(1),ue=D.paint.get("line-gradient"),ae=D.getCrossfadeParameters(),fe=oe?"linePattern":ee?"lineSDF":ue?"lineGradient":"line",ge=E.context,le=ge.gl,be=E.transform;let ke=!0;for(const Te of R){const Ie=I.getTile(Te);if(oe&&!Ie.patternsLoaded())continue;const Ae=Ie.getBucket(D);if(!Ae)continue;const We=Ae.programConfigurations.get(D.id),qe=E.context.program.get(),Be=E.useProgram(fe,We),ht=ke||Be.program!==qe,en=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Te),Dn=re.constantOr(null);if(Dn&&Ie.imageAtlas){const tn=Ie.imageAtlas,jn=tn.patternPositions[Dn.to.toString()],li=tn.patternPositions[Dn.from.toString()];jn&&li&&We.setConstantPatternPositions(jn,li)}const In=be.getProjectionData({overscaledTileID:Te,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),pn=be.getPixelScale(),ar=oe?_s(E,Ie,D,pn,ae):ee?Rn(E,Ie,D,pn,ee,ae):ue?Ep(E,Ie,D,pn,Ae.lineClipsArray.length):cl(E,Ie,D,pn);if(oe)ge.activeTexture.set(le.TEXTURE0),Ie.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),We.updatePaintBuffers(ae);else if(ee&&(ht||E.lineAtlas.dirty))ge.activeTexture.set(le.TEXTURE0),E.lineAtlas.bind(ge);else if(ue){const tn=Ae.gradients[D.id];let jn=tn.texture;if(D.gradientVersion!==tn.version){let li=256;if(D.stepInterpolant){const kn=I.getSource().maxzoom,Jr=Te.canonical.z===kn?Math.ceil(1<<E.transform.maxZoom-Te.canonical.z):1;li=y.ah(y.c3(Ae.maxLineLength/y.$*1024*Jr),256,ge.maxTextureSize)}tn.gradient=y.c4({expression:D.gradientExpression(),evaluationKey:"lineProgress",resolution:li,image:tn.gradient||void 0,clips:Ae.lineClipsArray}),tn.texture?tn.texture.update(tn.gradient):tn.texture=new y.T(ge,tn.gradient,le.RGBA),tn.version=D.gradientVersion,jn=tn.texture}ge.activeTexture.set(le.TEXTURE0),jn.bind(D.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}const wr=E.stencilModeForClipping(Te);Be.draw(ge,le.TRIANGLES,q,wr,ne,Ot.disabled,ar,en,In,D.id,Ae.layoutVertexBuffer,Ae.indexBuffer,Ae.segments,D.paint,E.transform.zoom,We,Ae.layoutVertexBuffer2),ke=!1}}(o,u,p,m,b):y.cf(p)?function(E,I,D,R,O){const j=D.paint.get("fill-color"),z=D.paint.get("fill-opacity");if(0===z.constantOr(1))return;const{isRenderingToTexture:U}=O,q=E.colorModeForRenderPass(),ne=D.paint.get("fill-pattern"),ee=E.opaquePassEnabledForLayer()&&!ne.constantOr(1)&&1===j.constantOr(y.bf.transparent).a&&1===z.constantOr(0)?"opaque":"translucent";if(E.renderPass===ee){const re=E.getDepthModeForSublayer(1,"opaque"===E.renderPass?Jt.ReadWrite:Jt.ReadOnly);ou(E,I,D,R,re,q,!1,U)}if("translucent"===E.renderPass&&D.paint.get("fill-antialias")){const re=E.getDepthModeForSublayer(D.getPaintProperty("fill-outline-color")?2:0,Jt.ReadOnly);ou(E,I,D,R,re,q,!0,U)}}(o,u,p,m,b):y.cg(p)?function(E,I,D,R,O){const j=D.paint.get("fill-extrusion-opacity");if(0===j)return;const{isRenderingToTexture:z}=O;if("translucent"===E.renderPass){const U=new Jt(E.context.gl.LEQUAL,Jt.ReadWrite,E.depthRangeFor3D);if(1!==j||D.paint.get("fill-extrusion-pattern").constantOr(1))Na(E,I,D,R,U,xn.disabled,nr.disabled,z),Na(E,I,D,R,U,E.stencilModeFor3D(),E.colorModeForRenderPass(),z);else{const q=E.colorModeForRenderPass();Na(E,I,D,R,U,xn.disabled,q,z)}}}(o,u,p,m,b):y.ch(p)?function(E,I,D,R,O){if("offscreen"!==E.renderPass&&"translucent"!==E.renderPass)return;const{isRenderingToTexture:j}=O,z=E.context,U=E.style.projection.useSubdivision,q=E.getDepthModeForSublayer(0,Jt.ReadOnly),ne=E.colorModeForRenderPass();if("offscreen"===E.renderPass)(function(ee,re,oe,ue,ae,fe,ge){const le=ee.context,be=le.gl;for(const ke of oe){const Te=re.getTile(ke),Ie=Te.dem;if(!Ie||!Ie.data||!Te.needsHillshadePrepare)continue;const Ae=Ie.dim,We=Ie.stride,qe=Ie.getPixels();if(le.activeTexture.set(be.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),Te.demTexture=Te.demTexture||ee.getTileTexture(We),Te.demTexture){const ht=Te.demTexture;ht.update(qe,{premultiply:!1}),ht.bind(be.NEAREST,be.CLAMP_TO_EDGE)}else Te.demTexture=new y.T(le,qe,be.RGBA,{premultiply:!1}),Te.demTexture.bind(be.NEAREST,be.CLAMP_TO_EDGE);le.activeTexture.set(be.TEXTURE0);let Be=Te.fbo;if(!Be){const ht=new y.T(le,{width:Ae,height:Ae,data:null},be.RGBA);ht.bind(be.LINEAR,be.CLAMP_TO_EDGE),Be=Te.fbo=le.createFramebuffer(Ae,Ae,!0,!1),Be.colorAttachment.set(ht.texture)}le.bindFramebuffer.set(Be.framebuffer),le.viewport.set([0,0,Ae,Ae]),ee.useProgram("hillshadePrepare").draw(le,be.TRIANGLES,ae,fe,ge,Ot.disabled,uf(Te.tileID,Ie),null,null,ue.id,ee.rasterBoundsBuffer,ee.quadTriangleIndexBuffer,ee.rasterBoundsSegments),Te.needsHillshadePrepare=!1}})(E,I,R,D,q,xn.disabled,ne),z.viewport.set([0,0,E.width,E.height]);else if("translucent"===E.renderPass)if(U){const[ee,re,oe]=E.stencilConfigForOverlapTwoPass(R);ai(E,I,D,oe,ee,q,ne,!1,j),ai(E,I,D,oe,re,q,ne,!0,j)}else{const[ee,re]=E.getStencilConfigForOverlapAndUpdateStencilID(R);ai(E,I,D,re,ee,q,ne,!1,j)}}(o,u,p,m,b):y.ci(p)?function(E,I,D,R,O){if("translucent"!==E.renderPass||!R.length)return;const{isRenderingToTexture:j}=O,z=E.style.projection.useSubdivision,U=E.getDepthModeForSublayer(0,Jt.ReadOnly),q=E.colorModeForRenderPass();if(z){const[ne,ee,re]=E.stencilConfigForOverlapTwoPass(R);hl(E,I,D,re,ne,U,q,!1,j),hl(E,I,D,re,ee,U,q,!0,j)}else{const[ne,ee]=E.getStencilConfigForOverlapAndUpdateStencilID(R);hl(E,I,D,ee,ne,U,q,!1,j)}}(o,u,p,m,b):y.cj(p)?function(E,I,D,R,O){if("translucent"!==E.renderPass||0===D.paint.get("raster-opacity")||!R.length)return;const{isRenderingToTexture:j}=O,z=I.getSource(),U=E.style.projection.useSubdivision;if(z instanceof Wo)La(E,I,D,R,null,!1,!1,z.tileCoords,z.flippedWindingOrder,j);else if(U){const[q,ne,ee]=E.stencilConfigForOverlapTwoPass(R);La(E,I,D,ee,q,!1,!0,At,!1,j),La(E,I,D,ee,ne,!0,!0,At,!1,j)}else{const[q,ne]=E.getStencilConfigForOverlapAndUpdateStencilID(R);La(E,I,D,ne,q,!1,!0,At,!1,j)}}(o,u,p,m,b):y.ck(p)?function(E,I,D,R,O){const j=D.paint.get("background-color"),z=D.paint.get("background-opacity");if(0===z)return;const{isRenderingToTexture:U}=O,q=E.context,ne=q.gl,ee=E.style.projection,re=E.transform,oe=re.tileSize,ue=D.paint.get("background-pattern");if(E.isPatternMissing(ue))return;const ae=!ue&&1===j.a&&1===z&&E.opaquePassEnabledForLayer()?"opaque":"translucent";if(E.renderPass!==ae)return;const fe=xn.disabled,ge=E.getDepthModeForSublayer(0,"opaque"===ae?Jt.ReadWrite:Jt.ReadOnly),le=E.colorModeForRenderPass(),be=E.useProgram(ue?"backgroundPattern":"background"),ke=R||Ee(re,{tileSize:oe,terrain:E.style.map.terrain});ue&&(q.activeTexture.set(ne.TEXTURE0),E.imageManager.bind(E.context));const Te=D.getCrossfadeParameters();for(const Ie of ke){const Ae=re.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),We=ue?Bi(z,E,ue,{tileID:Ie,tileSize:oe},Te):vm(z,j),qe=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ie),Be=ee.getMeshFromTileID(q,Ie.canonical,!1,!0,"raster");be.draw(q,ne.TRIANGLES,ge,fe,le,Ot.backCCW,We,qe,Ae,D.id,Be.vertexBuffer,Be.indexBuffer,Be.segments)}}(o,0,p,m,b):y.cl(p)&&function(E,I,D,R){const{isRenderingGlobe:O}=R,j=E.context,z=D.implementation,U=E.style.projection,q=E.transform,ne=q.getProjectionDataForCustomLayer(O),ee={farZ:q.farZ,nearZ:q.nearZ,fov:q.fov*Math.PI/180,modelViewProjectionMatrix:q.modelViewProjectionMatrix,projectionMatrix:q.projectionMatrix,shaderData:{variantName:U.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${U.shaderPreludeCode.vertexSource}`,define:U.shaderDefine},defaultProjectionData:ne},re=z.renderingMode?z.renderingMode:"2d";if("offscreen"===E.renderPass){const oe=z.prerender;oe&&(E.setCustomLayerDefaults(),j.setColorMode(E.colorModeForRenderPass()),oe.call(z,j.gl,ee),j.setDirty(),E.setBaseState())}else if("translucent"===E.renderPass){E.setCustomLayerDefaults(),j.setColorMode(E.colorModeForRenderPass()),j.setStencilMode(xn.disabled);const oe="3d"===re?E.getDepthModeFor3D():E.getDepthModeForSublayer(0,Jt.ReadOnly);j.setDepthMode(oe),z.render(j.gl,ee),j.setDirty(),E.setBaseState(),j.bindFramebuffer.set(null)}}(o,0,p,b))}saveTileTexture(o){const u=this._tileTextures[o.size[0]];u?u.push(o):this._tileTextures[o.size[0]]=[o]}getTileTexture(o){const u=this._tileTextures[o];return u&&u.length>0?u.pop():null}isPatternMissing(o){if(!o)return!1;if(!o.from||!o.to)return!0;const u=this.imageManager.getPattern(o.from.toString()),p=this.imageManager.getPattern(o.to.toString());return!u||!p}useProgram(o,u,p=!1,m=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,E=this.style.projection,I=p?at.projectionMercator:E.shaderPreludeCode,D=p?Ea:E.shaderDefine,R=o+(u?u.cacheKey:"")+`/${p?Ol:E.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[R]||(this.cache[R]=new Fe(this.context,at[o],u,ul[o],this._showOverdrawInspector,b,I,D,m)),this.cache[R]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const o=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(o.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new y.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:o,drawingBufferHeight:u}=this.context.gl;return this.width!==o||this.height!==u}}function su(v,o){let u,p=!1,m=null,b=null;const E=()=>{m=null,p&&(v.apply(b,u),m=setTimeout(E,o),p=!1)};return(...I)=>(p=!0,b=this,u=I,m||E(),m)}class Jo{constructor(o){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let p;return u.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(p=m)}),(p&&p[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:p,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(0===u.length)return;const p=u.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let b=window.location.hash.replace(m,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):"#"===b&&(b="");let E=window.location.href.replace(/(#.+)?$/,b);E=E.replace("&&","&"),window.history.replaceState(window.history.state,null,E)},this._updateHash=su(this._updateHashUnthrottled,300),this._hashName=o&&encodeURIComponent(o)}addTo(o){return this._map=o,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(o){const u=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,m),E=Math.round(u.lng*b)/b,I=Math.round(u.lat*b)/b,D=this._map.getBearing(),R=this._map.getPitch();let O="";if(O+=o?`/${E}/${I}/${p}`:`${p}/${I}/${E}`,(D||R)&&(O+="/"+Math.round(10*D)/10),R&&(O+=`/${Math.round(R)}`),this._hashName){const j=this._hashName;let z=!1;const U=window.location.hash.slice(1).split("&").map(q=>{const ne=q.split("=")[0];return ne===j?(z=!0,`${ne}=${O}`):q}).filter(q=>q);return z||U.push(`${j}=${O}`),`#${U.join("&")}`}return`#${O}`}_isValidHash(o){if(o.length<3||o.some(isNaN))return!1;try{new y.S(+o[2],+o[1])}catch{return!1}const u=+o[0],p=+(o[3]||0),m=+(o[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&p>=-180&&p<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}const Zs={linearity:.3,easing:y.cm(0,0,.3,1)},Mp=y.e({deceleration:2500,maxSpeed:1400},Zs),Dp=y.e({deceleration:20,maxSpeed:1400},Zs),Yu=y.e({deceleration:1e3,maxSpeed:360},Zs),Sm=y.e({deceleration:1e3,maxSpeed:90},Zs),Em=y.e({deceleration:1e3,maxSpeed:360},Zs);class Cm{constructor(o){this._map=o,this.clear()}clear(){this._inertiaBuffer=[]}record(o){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:Dt.now(),settings:o})}_drainInertiaBuffer(){const o=this._inertiaBuffer,u=Dt.now();for(;o.length>0&&u-o[0].time>160;)o.shift()}_onMoveEnd(o){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new y.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)u.zoom+=b.zoomDelta||0,u.bearing+=b.bearingDelta||0,u.pitch+=b.pitchDelta||0,u.roll+=b.rollDelta||0,b.panDelta&&u.pan._add(b.panDelta),b.around&&(u.around=b.around),b.pinchAround&&(u.pinchAround=b.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(u.pan.mag()){const b=Xu(u.pan.mag(),p,y.e({},Mp,o||{})),E=u.pan.mult(b.amount/u.pan.mag()),I=this._map.cameraHelper.handlePanInertia(E,this._map.transform);m.center=I.easingCenter,m.offset=I.easingOffset,Ks(m,b)}if(u.zoom){const b=Xu(u.zoom,p,Dp);m.zoom=this._map.transform.zoom+b.amount,Ks(m,b)}if(u.bearing){const b=Xu(u.bearing,p,Yu);m.bearing=this._map.transform.bearing+y.ah(b.amount,-179,179),Ks(m,b)}if(u.pitch){const b=Xu(u.pitch,p,Sm);m.pitch=this._map.transform.pitch+b.amount,Ks(m,b)}if(u.roll){const b=Xu(u.roll,p,Em);m.roll=this._map.transform.roll+y.ah(b.amount,-179,179),Ks(m,b)}if(m.zoom||m.bearing){const b=void 0===u.pinchAround?u.around:u.pinchAround;m.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),y.e(m,{noMoveStart:!0})}}function Ks(v,o){(!v.duration||v.duration<o.duration)&&(v.duration=o.duration,v.easing=o.easing)}function Xu(v,o,u){const{maxSpeed:p,linearity:m,deceleration:b}=u,E=y.ah(v*m/(o/1e3),-p,p),I=Math.abs(E)/(b*m);return{easing:u.easing,duration:1e3*I,amount:E*(I/2)}}class Do extends y.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p,m={}){p=p instanceof MouseEvent?p:new MouseEvent(o,p);const b=Re.mousePos(u.getCanvas(),p),E=u.unproject(b);super(o,y.e({point:b,lngLat:E,originalEvent:p},m)),this._defaultPrevented=!1,this.target=u}}class au extends y.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p){const m="touchend"===o?p.changedTouches:p.touches,b=Re.touchPos(u.getCanvasContainer(),m),E=b.map(D=>u.unproject(D)),I=b.reduce((D,R,O,j)=>D.add(R.div(j.length)),new y.P(0,0));super(o,{points:b,point:I,lngLats:E,lngLat:u.unproject(I),originalEvent:p}),this._defaultPrevented=!1}}class kp extends y.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(o,u,p){super(o,{originalEvent:p}),this._defaultPrevented=!1}}class Tm{constructor(o,u){this._map=o,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(o){return this._firePreventable(new kp(o.type,this._map,o))}mousedown(o,u){return this._mousedownPos=u,this._firePreventable(new Do(o.type,this._map,o))}mouseup(o){this._map.fire(new Do(o.type,this._map,o))}click(o,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Do(o.type,this._map,o))}dblclick(o){return this._firePreventable(new Do(o.type,this._map,o))}mouseover(o){this._map.fire(new Do(o.type,this._map,o))}mouseout(o){this._map.fire(new Do(o.type,this._map,o))}touchstart(o){return this._firePreventable(new au(o.type,this._map,o))}touchmove(o){this._map.fire(new au(o.type,this._map,o))}touchend(o){this._map.fire(new au(o.type,this._map,o))}touchcancel(o){this._map.fire(new au(o.type,this._map,o))}_firePreventable(o){if(this._map.fire(o),o.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Im{constructor(o){this._map=o}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(o){this._map.fire(new Do(o.type,this._map,o))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Do("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(o){this._delayContextMenu?this._contextMenuEvent=o:this._ignoreContextMenu||this._map.fire(new Do(o.type,this._map,o)),this._map.listens("contextmenu")&&o.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Qu{constructor(o){this._map=o}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(o){return this.transform.screenPointToLocation(y.P.convert(o),this._map.terrain)}}class ih{constructor(o,u){this._map=o,this._tr=new Qu(o),this._el=o.getCanvasContainer(),this._container=o.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(o,u){this.isEnabled()&&o.shiftKey&&0===o.button&&(Re.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(o,u){if(!this._active)return;const p=u;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=Re.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",o));const b=Math.min(m.x,p.x),E=Math.max(m.x,p.x),I=Math.min(m.y,p.y),D=Math.max(m.y,p.y);Re.setTransform(this._box,`translate(${b}px,${I}px)`),this._box.style.width=E-b+"px",this._box.style.height=D-I+"px"}mouseupWindow(o,u){if(!this._active||0!==o.button)return;const p=this._startPos,m=u;if(this.reset(),Re.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new y.l("boxzoomend",{originalEvent:o})),{cameraAnimation:b=>b.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",o)}keydown(o){this._active&&27===o.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",o))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(Re.remove(this._box),this._box=null),Re.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(o,u){return this._map.fire(new y.l(o,{originalEvent:u}))}}function ql(v,o){if(v.length!==o.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${o.length}`);const u={};for(let p=0;p<v.length;p++)u[v[p].identifier]=o[p];return u}class Mm{constructor(o){this.reset(),this.numTouches=o.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(o,u,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=o.timeStamp),p.length===this.numTouches&&(this.centroid=function(m){const b=new y.P(0,0);for(const E of m)b._add(E);return b.div(m.length)}(u),this.touches=ql(p,u)))}touchmove(o,u,p){if(this.aborted||!this.centroid)return;const m=ql(p,u);for(const b in this.touches){const E=m[b];(!E||E.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(o,u,p){if((!this.centroid||o.timeStamp-this.startTime>500)&&(this.aborted=!0),0===p.length){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class ko{constructor(o){this.singleTap=new Mm(o),this.numTaps=o.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(o,u,p){this.singleTap.touchstart(o,u,p)}touchmove(o,u,p){this.singleTap.touchmove(o,u,p)}touchend(o,u,p){const m=this.singleTap.touchend(o,u,p);if(m){const b=o.timeStamp-this.lastTime<500,E=!this.lastTap||this.lastTap.dist(m)<30;if(b&&E||this.reset(),this.count++,this.lastTime=o.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ys{constructor(o){this._tr=new Qu(o),this._zoomIn=new ko({numTouches:1,numTaps:2}),this._zoomOut=new ko({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(o,u,p){this._zoomIn.touchstart(o,u,p),this._zoomOut.touchstart(o,u,p)}touchmove(o,u,p){this._zoomIn.touchmove(o,u,p),this._zoomOut.touchmove(o,u,p)}touchend(o,u,p){const m=this._zoomIn.touchend(o,u,p),b=this._zoomOut.touchend(o,u,p),E=this._tr;return m?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom+1,around:E.unproject(m)},{originalEvent:o})}):b?(this._active=!0,o.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:E.zoom-1,around:E.unproject(b)},{originalEvent:o})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Wl{constructor(o){this._enabled=!!o.enable,this._moveStateManager=o.moveStateManager,this._clickTolerance=o.clickTolerance||1,this._moveFunction=o.move,this._activateOnStart=!!o.activateOnStart,o.assignEvents(this),this.reset()}reset(o){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(o)}_move(...o){const u=this._moveFunction(...o);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(o,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(o)&&(this._moveStateManager.startMove(o),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(o,u){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(o.preventDefault(),!this._moveStateManager.isValidMoveEvent(o))return void this.reset(o);const m=Array.isArray(u)?u[0]:u;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(o){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(o)&&(this._moved&&Re.suppressClick(),this.reset(o))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const es=0,br=2,Dm={[es]:1,[br]:2};class Xs{constructor(o){this._correctEvent=o.checkCorrectEvent}startMove(o){const u=Re.mouseButton(o);this._eventButton=u}endMove(o){delete this._eventButton}isValidStartEvent(o){return this._correctEvent(o)}isValidMoveEvent(o){return!function(u,p){const m=Dm[p];return void 0===u.buttons||(u.buttons&m)!==m}(o,this._eventButton)}isValidEndEvent(o){return Re.mouseButton(o)===this._eventButton}}class Xr{constructor(){this._firstTouch=void 0}_isOneFingerTouch(o){return 1===o.targetTouches.length}_isSameTouchEvent(o){return o.targetTouches[0].identifier===this._firstTouch}startMove(o){this._firstTouch=o.targetTouches[0].identifier}endMove(o){delete this._firstTouch}isValidStartEvent(o){return this._isOneFingerTouch(o)}isValidMoveEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}isValidEndEvent(o){return this._isOneFingerTouch(o)&&this._isSameTouchEvent(o)}}class km{constructor(o=new Xs({checkCorrectEvent:()=>!0}),u=new Xr){this.mouseMoveStateManager=o,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(o,u,p){return o instanceof MouseEvent?u(o):typeof TouchEvent<"u"&&o instanceof TouchEvent?p(o):void 0}startMove(o){this._executeRelevantHandler(o,u=>this.mouseMoveStateManager.startMove(u),u=>this.oneFingerTouchMoveStateManager.startMove(u))}endMove(o){this._executeRelevantHandler(o,u=>this.mouseMoveStateManager.endMove(u),u=>this.oneFingerTouchMoveStateManager.endMove(u))}isValidStartEvent(o){return this._executeRelevantHandler(o,u=>this.mouseMoveStateManager.isValidStartEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u))}isValidMoveEvent(o){return this._executeRelevantHandler(o,u=>this.mouseMoveStateManager.isValidMoveEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u))}isValidEndEvent(o){return this._executeRelevantHandler(o,u=>this.mouseMoveStateManager.isValidEndEvent(u),u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u))}}const Qs=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=o=>{o.preventDefault()}};class vs{constructor(o,u){this._clickTolerance=o.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new y.P(0,0)}_shouldBePrevented(o){return o<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(o,u,p){return this._calculateTransform(o,u,p)}touchmove(o,u,p){if(this._active){if(!this._shouldBePrevented(p.length))return o.preventDefault(),this._calculateTransform(o,u,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",o)}}touchend(o,u,p){this._calculateTransform(o,u,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(o,u,p){p.length>0&&(this._active=!0);const m=ql(p,u),b=new y.P(0,0),E=new y.P(0,0);let I=0;for(const R in m){const O=m[R],j=this._touches[R];j&&(b._add(O),E._add(O.sub(j)),I++,m[R]=O)}if(this._touches=m,this._shouldBePrevented(I)||!E.mag())return;const D=E.div(I);return this._sum._add(D),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(I),panDelta:D}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Po{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(o,u,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([u[0],u[1]]))}touchmove(o,u,p){if(!this._firstTwoTouches)return;o.preventDefault();const[m,b]=this._firstTwoTouches,E=Xe(p,u,m),I=Xe(p,u,b);if(!E||!I)return;const D=this._aroundCenter?null:E.add(I).div(2);return this._move([E,I],D,o)}touchend(o,u,p){if(!this._firstTwoTouches)return;const[m,b]=this._firstTwoTouches,E=Xe(p,u,m),I=Xe(p,u,b);E&&I||(this._active&&Re.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(o){this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Xe(v,o,u){for(let p=0;p<v.length;p++)if(v[p].identifier===u)return o[p]}function ff(v,o){return Math.log(v/o)/Math.LN2}class lu extends Po{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(o){this._startDistance=this._distance=o[0].dist(o[1])}_move(o,u){const p=this._distance;if(this._distance=o[0].dist(o[1]),this._active||!(Math.abs(ff(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ff(this._distance,p),pinchAround:u}}}function pf(v,o){return 180*v.angleWith(o)/Math.PI}class Or extends Po{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(o){this._startVector=this._vector=o[0].sub(o[1]),this._minDiameter=o[0].dist(o[1])}_move(o,u,p){const m=this._vector;if(this._vector=o[0].sub(o[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:pf(this._vector,m),pinchAround:u}}_isBelowThreshold(o){this._minDiameter=Math.min(this._minDiameter,o.mag());const u=25/(Math.PI*this._minDiameter)*360,p=pf(o,this._startVector);return Math.abs(p)<u}}function fl(v){return Math.abs(v.y)>Math.abs(v.x)}class Ju extends Po{constructor(o){super(),this._currentTouchCount=0,this._map=o}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(o,u,p){super.touchstart(o,u,p),this._currentTouchCount=p.length}_start(o){this._lastPoints=o,fl(o[0].sub(o[1]))&&(this._valid=!1)}_move(o,u,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=o[0].sub(this._lastPoints[0]),b=o[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,b,p.timeStamp),this._valid?(this._lastPoints=o,this._active=!0,{pitchDelta:(m.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(o,u,p){if(void 0!==this._valid)return this._valid;const m=o.mag()>=2,b=u.mag()>=2;if(!m&&!b)return;if(!m||!b)return void 0===this._firstMove&&(this._firstMove=p),p-this._firstMove<100&&void 0;const E=o.y>0==u.y>0;return fl(o)&&fl(u)&&E}}const fn={panStep:100,bearingStep:15,pitchStep:10};class Zl{constructor(o){this._tr=new Qu(o);const u=fn;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(o){if(o.altKey||o.ctrlKey||o.metaKey)return;let u=0,p=0,m=0,b=0,E=0;switch(o.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:o.shiftKey?p=-1:(o.preventDefault(),b=-1);break;case 39:o.shiftKey?p=1:(o.preventDefault(),b=1);break;case 38:o.shiftKey?m=1:(o.preventDefault(),E=-1);break;case 40:o.shiftKey?m=-1:(o.preventDefault(),E=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:I=>{const D=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:gf,zoom:u?Math.round(D.zoom)+u*(o.shiftKey?2:1):D.zoom,bearing:D.bearing+p*this._bearingStep,pitch:D.pitch+m*this._pitchStep,offset:[-b*this._panStep,-E*this._panStep],center:D.center},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function gf(v){return v*(2-v)}const Fa=4.000244140625,oh=1/450;class sh{constructor(o,u){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=o,this._tr=new Qu(o),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=oh}setZoomRate(o){this._defaultZoomRate=o}setWheelZoomRate(o){this._wheelZoomRate=o}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(o){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!o&&"center"===o.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(o){return!!this._map.cooperativeGestures.isEnabled()&&!(o.ctrlKey||this._map.cooperativeGestures.isBypassed(o))}wheel(o){if(!this.isEnabled())return;if(this._shouldBePrevented(o))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",o);let u=o.deltaMode===WheelEvent.DOM_DELTA_LINE?40*o.deltaY:o.deltaY;const p=Dt.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,0!==u&&u%Fa==0?this._type="wheel":0!==u&&Math.abs(u)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,o)):this._type||(this._type=Math.abs(m*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),o.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=o,this._delta-=u,this._active||this._start(o)),o.preventDefault()}_start(o){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=Re.mousePos(this._map.getCanvas(),o),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(y.S.convert(p.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const o=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const I=o.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=I),"number"==typeof this._targetZoom&&(this._targetZoom+=I)}if(0!==this._delta){const I="wheel"===this._type&&Math.abs(this._delta)>Fa?this._wheelZoomRate:this._defaultZoomRate;let D=2/(1+Math.exp(-Math.abs(this._delta*I)));this._delta<0&&0!==D&&(D=1/D);const R="number"!=typeof this._targetZoom?o.scale:y.af(this._targetZoom);this._targetZoom=o.getConstrained(o.getCameraLngLat(),y.ak(R*D)).zoom,"wheel"===this._type&&(this._startZoom=o.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u="number"!=typeof this._targetZoom?o.zoom:this._targetZoom,p=this._startZoom,m=this._easing;let b,E=!1;if("wheel"===this._type&&p&&m){const I=Dt.now()-this._lastWheelEventTime,D=Math.min((I+5)/200,1),R=m(D);b=y.C.number(p,u,R),D<1?this._frameId||(this._frameId=!0):E=!0}else b=u,E=!0;return this._active=!0,E&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!E,zoomDelta:b-o.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(o){let u=y.co;if(this._prevEase){const p=this._prevEase,m=(Dt.now()-p.start)/p.duration,b=p.easing(m+.01)-p.easing(m),E=.27/Math.sqrt(b*b+1e-4)*.01,I=Math.sqrt(.0729-E*E);u=y.cm(E,I,.25,1)}return this._prevEase={start:Dt.now(),duration:o,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class bs{constructor(o,u){this._clickZoom=o,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ah{constructor(o){this._tr=new Qu(o),this.reset()}reset(){this._active=!1}dblclick(o,u){return o.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(o.shiftKey?-1:1),around:this._tr.unproject(u)},{originalEvent:o})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class mf{constructor(){this._tap=new ko({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(o,u,p){if(!this._swipePoint)if(this._tapTime){const m=u[0],b=o.timeStamp-this._tapTime<500,E=this._tapPoint.dist(m)<30;b&&E?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(o,u,p)}touchmove(o,u,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=u[0],b=m.y-this._swipePoint.y;return this._swipePoint=m,o.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(o,u,p)}touchend(o,u,p){if(this._tapTime)this._swipePoint&&0===p.length&&this.reset();else{const m=this._tap.touchend(o,u,p);m&&(this._tapTime=o.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class _f{constructor(o,u,p){this._el=o,this._mousePan=u,this._touchPan=p}enable(o){this._inertiaOptions=o||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Wt{constructor(o,u,p,m){this._pitchWithRotate=o.pitchWithRotate,this._rollEnabled=o.rollEnabled,this._mouseRotate=u,this._mousePitch=p,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Kl{constructor(o,u,p,m){this._el=o,this._touchZoom=u,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(o){this._touchZoom.enable(o),this._rotationDisabled||this._touchRotate.enable(o),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class lh{constructor(o,u){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=o,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const o=this._map.getCanvasContainer();o.classList.add("maplibregl-cooperative-gestures"),this._container=Re.create("div","maplibregl-cooperative-gesture-screen",o);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=u,this._container.appendChild(m);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=p,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(Re.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(o){return o[this._bypassKey]}notifyGestureBlocked(o,u){this._enabled&&(this._map.fire(new y.l("cooperativegestureprevented",{gestureType:o,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Ao=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class sr extends y.l{}function cu(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class ch{constructor(o,u){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,b)=>{if("blur"===m.type)return void this.stop(!0);this._updatingCamera=!0;const E="renderFrame"===m.type?void 0:m,I={needsRenderFrame:!1},D={},R={};for(const{handlerName:z,handler:U,allowed:q}of this._handlers){if(!U.isEnabled())continue;let ne;if(this._blockedByActive(R,q,z))U.reset();else if(U[b||m.type]){if(y.cp(m,b||m.type)){const ee=Re.mousePos(this._map.getCanvas(),m);ne=U[b||m.type](m,ee)}else if(y.cq(m,b||m.type)){const ee=this._getMapTouches(m.touches),re=Re.touchPos(this._map.getCanvas(),ee);ne=U[b||m.type](m,re,ee)}else y.cr(b||m.type)||(ne=U[b||m.type](m));this.mergeHandlerResult(I,D,ne,z,E),ne&&ne.needsRenderFrame&&this._triggerRenderFrame()}(ne||U.isActive())&&(R[z]=U)}const O={};for(const z in this._previousActiveHandlers)R[z]||(O[z]=E);this._previousActiveHandlers=R,(Object.keys(O).length||cu(I))&&(this._changes.push([I,D,O]),this._triggerRenderFrame()),(Object.keys(R).length||cu(I))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:j}=I;j&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],j(this._map))},this._map=o,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cm(o),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,b,E]of this._listeners)Re.addEventListener(m,b,m===document?this.handleWindowEvent:this.handleEvent,E)}destroy(){for(const[o,u,p]of this._listeners)Re.removeEventListener(o,u,o===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(o){const u=this._map,p=u.getCanvasContainer();this._add("mapEvent",new Tm(u,o));const m=u.boxZoom=new ih(u,o);this._add("boxZoom",m),o.interactive&&o.boxZoom&&m.enable();const b=u.cooperativeGestures=new lh(u,o.cooperativeGestures);this._add("cooperativeGestures",b),o.cooperativeGestures&&b.enable();const E=new Ys(u),I=new ah(u);u.doubleClickZoom=new bs(I,E),this._add("tapZoom",E),this._add("clickZoom",I),o.interactive&&o.doubleClickZoom&&u.doubleClickZoom.enable();const D=new mf;this._add("tapDragZoom",D);const R=u.touchPitch=new Ju(u);this._add("touchPitch",R),o.interactive&&o.touchPitch&&u.touchPitch.enable(o.touchPitch);const O=()=>u.project(u.getCenter()),j=function({enable:ae,clickTolerance:fe,aroundCenter:ge=!0,minPixelCenterThreshold:le=100,rotateDegreesPerPixelMoved:be=.8},ke){const Te=new Xs({checkCorrectEvent:Ie=>0===Re.mouseButton(Ie)&&Ie.ctrlKey||2===Re.mouseButton(Ie)&&!Ie.ctrlKey});return new Wl({clickTolerance:fe,move:(Ie,Ae)=>{const We=ke();if(ge&&Math.abs(We.y-Ie.y)>le)return{bearingDelta:y.cn(new y.P(Ie.x,Ae.y),Ae,We)};let qe=(Ae.x-Ie.x)*be;return ge&&Ae.y<We.y&&(qe=-qe),{bearingDelta:qe}},moveStateManager:Te,enable:ae,assignEvents:Qs})}(o,O),z=function({enable:ae,clickTolerance:fe,pitchDegreesPerPixelMoved:ge=-.5}){const le=new Xs({checkCorrectEvent:be=>0===Re.mouseButton(be)&&be.ctrlKey||2===Re.mouseButton(be)});return new Wl({clickTolerance:fe,move:(be,ke)=>({pitchDelta:(ke.y-be.y)*ge}),moveStateManager:le,enable:ae,assignEvents:Qs})}(o),U=function({enable:ae,clickTolerance:fe,rollDegreesPerPixelMoved:ge=.3},le){const be=new Xs({checkCorrectEvent:ke=>2===Re.mouseButton(ke)&&ke.ctrlKey});return new Wl({clickTolerance:fe,move:(ke,Te)=>{const Ie=le();let Ae=(Te.x-ke.x)*ge;return Te.y<Ie.y&&(Ae=-Ae),{rollDelta:Ae}},moveStateManager:be,enable:ae,assignEvents:Qs})}(o,O);u.dragRotate=new Wt(o,j,z,U),this._add("mouseRotate",j,["mousePitch"]),this._add("mousePitch",z,["mouseRotate","mouseRoll"]),this._add("mouseRoll",U,["mousePitch"]),o.interactive&&o.dragRotate&&u.dragRotate.enable();const q=function({enable:ae,clickTolerance:fe}){const ge=new Xs({checkCorrectEvent:le=>0===Re.mouseButton(le)&&!le.ctrlKey});return new Wl({clickTolerance:fe,move:(le,be)=>({around:be,panDelta:be.sub(le)}),activateOnStart:!0,moveStateManager:ge,enable:ae,assignEvents:Qs})}(o),ne=new vs(o,u);u.dragPan=new _f(p,q,ne),this._add("mousePan",q),this._add("touchPan",ne,["touchZoom","touchRotate"]),o.interactive&&o.dragPan&&u.dragPan.enable(o.dragPan);const ee=new Or,re=new lu;u.touchZoomRotate=new Kl(p,re,ee,D),this._add("touchRotate",ee,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),o.interactive&&o.touchZoomRotate&&u.touchZoomRotate.enable(o.touchZoomRotate);const oe=u.scrollZoom=new sh(u,()=>this._triggerRenderFrame());this._add("scrollZoom",oe,["mousePan"]),o.interactive&&o.scrollZoom&&u.scrollZoom.enable(o.scrollZoom);const ue=u.keyboard=new Zl(u);this._add("keyboard",ue),o.interactive&&o.keyboard&&u.keyboard.enable(),this._add("blockableMapEvent",new Im(u))}_add(o,u,p){this._handlers.push({handlerName:o,handler:u,allowed:p}),this._handlersById[o]=u}stop(o){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},o),this._changes=[]}}isActive(){for(const{handler:o}of this._handlers)if(o.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Ao(this._eventsInProgress)||this.isZooming()}_blockedByActive(o,u,p){for(const m in o)if(m!==p&&(!u||u.indexOf(m)<0))return!0;return!1}_getMapTouches(o){const u=[];for(const p of o)this._el.contains(p.target)&&u.push(p);return u}mergeHandlerResult(o,u,p,m,b){if(!p)return;y.e(o,p);const E={handlerName:m,originalEvent:p.originalEvent||b};void 0!==p.zoomDelta&&(u.zoom=E),void 0!==p.panDelta&&(u.drag=E),void 0!==p.rollDelta&&(u.roll=E),void 0!==p.pitchDelta&&(u.pitch=E),void 0!==p.bearingDelta&&(u.rotate=E)}_applyChanges(){const o={},u={},p={};for(const[m,b,E]of this._changes)m.panDelta&&(o.panDelta=(o.panDelta||new y.P(0,0))._add(m.panDelta)),m.zoomDelta&&(o.zoomDelta=(o.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(o.bearingDelta=(o.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(o.pitchDelta=(o.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(o.rollDelta=(o.rollDelta||0)+m.rollDelta),void 0!==m.around&&(o.around=m.around),void 0!==m.pinchAround&&(o.pinchAround=m.pinchAround),m.noInertia&&(o.noInertia=m.noInertia),y.e(u,b),y.e(p,E);this._updateMapTransform(o,u,p),this._changes=[]}_updateMapTransform(o,u,p){const m=this._map,b=m._getTransformForUpdate(),E=m.terrain;if(!(cu(o)||E&&this._terrainMovement))return this._fireEvents(u,p,!0);m._stop(!0);let{panDelta:I,zoomDelta:D,bearingDelta:R,pitchDelta:O,rollDelta:j,around:z,pinchAround:U}=o;void 0!==U&&(z=U),z=z||m.transform.centerPoint,E&&!b.isPointOnMapSurface(z)&&(z=b.centerPoint);const q={panDelta:I,zoomDelta:D,rollDelta:j,pitchDelta:O,bearingDelta:R,around:z};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(z)&&(z=b.centerPoint);const ne=z.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(I?z.sub(I):z);E?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(q,b),this._terrainMovement||!u.drag&&!u.zoom?u.drag&&this._terrainMovement?b.setCenter(b.screenPointToLocation(b.centerPoint.sub(I))):this._map.cameraHelper.handleMapControlsPan(q,b,ne):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(q,b,ne))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(q,b),this._map.cameraHelper.handleMapControlsPan(q,b,ne)),m._applyUpdatedTransform(b),this._map._update(),o.noInertia||this._inertia.record(o),this._fireEvents(u,p,!0)}_fireEvents(o,u,p){const m=Ao(this._eventsInProgress),b=Ao(o),E={};for(const j in o){const{originalEvent:z}=o[j];this._eventsInProgress[j]||(E[`${j}start`]=z),this._eventsInProgress[j]=o[j]}!m&&b&&this._fireEvent("movestart",b.originalEvent);for(const j in E)this._fireEvent(j,E[j]);b&&this._fireEvent("move",b.originalEvent);for(const j in o){const{originalEvent:z}=o[j];this._fireEvent(j,z)}const I={};let D;for(const j in this._eventsInProgress){const{handlerName:z,originalEvent:U}=this._eventsInProgress[j];this._handlersById[z].isActive()||(delete this._eventsInProgress[j],D=u[z]||U,I[`${j}end`]=D)}for(const j in I)this._fireEvent(j,I[j]);const R=Ao(this._eventsInProgress),O=(m||b)&&!R;if(O&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const j=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&j.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(j)}if(p&&O){this._updatingCamera=!0;const j=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),z=U=>0!==U&&-this._bearingSnap<U&&U<this._bearingSnap;!j||!j.essential&&Dt.prefersReducedMotion?(this._map.fire(new y.l("moveend",{originalEvent:D})),z(this._map.getBearing())&&this._map.resetNorth()):(z(j.bearing||this._map.getBearing())&&(j.bearing=0),j.freezeElevation=!0,this._map.easeTo(j,{originalEvent:D})),this._updatingCamera=!1}}_fireEvent(o,u){this._map.fire(new y.l(o,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(o=>{delete this._frameId,this.handleEvent(new sr("renderFrame",{timeStamp:o})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class uh extends y.E{constructor(o,u,p){super(),this._renderFrameCallback=()=>{const m=Math.min((Dt.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=o,this._bearingSnap=p.bearingSnap,this.cameraHelper=u,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(o,u){o.apply(this.transform),this.transform=o,this.cameraHelper=u}getCenter(){return new y.S(this.transform.center.lng,this.transform.center.lat)}setCenter(o,u){return this.jumpTo({center:o},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(o,u){return this.jumpTo({elevation:o},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(o){this._centerClampedToGround=o}panBy(o,u,p){return o=y.P.convert(o).mult(-1),this.panTo(this.transform.center,y.e({offset:o},u),p)}panTo(o,u,p){return this.easeTo(y.e({center:o},u),p)}getZoom(){return this.transform.zoom}setZoom(o,u){return this.jumpTo({zoom:o},u),this}zoomTo(o,u,p){return this.easeTo(y.e({zoom:o},u),p)}zoomIn(o,u){return this.zoomTo(this.getZoom()+1,o,u),this}zoomOut(o,u){return this.zoomTo(this.getZoom()-1,o,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(o,u){return o!=this.transform.fov&&(this.transform.setFov(o),this.fire(new y.l("movestart",u)).fire(new y.l("move",u)).fire(new y.l("moveend",u))),this}getBearing(){return this.transform.bearing}setBearing(o,u){return this.jumpTo({bearing:o},u),this}getPadding(){return this.transform.padding}setPadding(o,u){return this.jumpTo({padding:o},u),this}rotateTo(o,u,p){return this.easeTo(y.e({bearing:o},u),p)}resetNorth(o,u){return this.rotateTo(0,y.e({duration:1e3},o),u),this}resetNorthPitch(o,u){return this.easeTo(y.e({bearing:0,pitch:0,roll:0,duration:1e3},o),u),this}snapToNorth(o,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(o,u):this}getPitch(){return this.transform.pitch}setPitch(o,u){return this.jumpTo({pitch:o},u),this}getRoll(){return this.transform.roll}setRoll(o,u){return this.jumpTo({roll:o},u),this}cameraForBounds(o,u){o=Ir.convert(o).adjustAntiMeridian();const p=u&&u.bearing||0;return this._cameraForBoxAndBearing(o.getNorthWest(),o.getSouthEast(),p,u)}_cameraForBoxAndBearing(o,u,p,m){const b={top:0,bottom:0,right:0,left:0};if("number"==typeof(m=y.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding){const R=m.padding;m.padding={top:R,bottom:R,right:R,left:R}}const E=y.e(b,m.padding);m.padding=E;const I=this.transform,D=new Ir(o,u);return this.cameraHelper.cameraForBoxAndBearing(m,E,D,p,I)}fitBounds(o,u,p){return this._fitInternal(this.cameraForBounds(o,u),u,p)}fitScreenCoordinates(o,u,p,m,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(y.P.convert(o)),this.transform.screenPointToLocation(y.P.convert(u)),p,m),m,b)}_fitInternal(o,u,p){return o?(delete(u=y.e(o,u)).padding,u.linear?this.easeTo(u,p):this.flyTo(u,p)):this}jumpTo(o,u){this.stop();const p=this._getTransformForUpdate();let m=!1,b=!1,E=!1;const I=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,o);const D=p.zoom!==I;return"elevation"in o&&p.elevation!==+o.elevation&&p.setElevation(+o.elevation),"bearing"in o&&p.bearing!==+o.bearing&&(m=!0,p.setBearing(+o.bearing)),"pitch"in o&&p.pitch!==+o.pitch&&(b=!0,p.setPitch(+o.pitch)),"roll"in o&&p.roll!==+o.roll&&(E=!0,p.setRoll(+o.roll)),null==o.padding||p.isPaddingEqual(o.padding)||p.setPadding(o.padding),this._applyUpdatedTransform(p),this.fire(new y.l("movestart",u)).fire(new y.l("move",u)),D&&this.fire(new y.l("zoomstart",u)).fire(new y.l("zoom",u)).fire(new y.l("zoomend",u)),m&&this.fire(new y.l("rotatestart",u)).fire(new y.l("rotate",u)).fire(new y.l("rotateend",u)),b&&this.fire(new y.l("pitchstart",u)).fire(new y.l("pitch",u)).fire(new y.l("pitchend",u)),E&&this.fire(new y.l("rollstart",u)).fire(new y.l("roll",u)).fire(new y.l("rollend",u)),this.fire(new y.l("moveend",u))}calculateCameraOptionsFromTo(o,u,p,m=0){const b=y.a1.fromLngLat(o,u),E=y.a1.fromLngLat(p,m),I=E.x-b.x,D=E.y-b.y,R=E.z-b.z,O=Math.hypot(I,D,R);if(0===O)throw new Error("Can't calculate camera options with same From and To");const j=Math.hypot(I,D),z=y.ak(this.transform.cameraToCenterDistance/O/this.transform.tileSize),U=180*Math.atan2(I,-D)/Math.PI;let q=180*Math.acos(j/O)/Math.PI;return q=R<0?90-q:90+q,{center:E.toLngLat(),elevation:m,zoom:z,pitch:q,bearing:U}}calculateCameraOptionsFromCameraLngLatAltRotation(o,u,p,m,b){const E=this.transform.calculateCenterFromCameraLngLatAlt(o,u,p,m);return{center:E.center,elevation:E.elevation,zoom:E.zoom,bearing:p,pitch:m,roll:b}}easeTo(o,u){this._stop(!1,o.easeId),(!1===(o=y.e({offset:[0,0],duration:500,easing:y.co},o)).animate||!o.essential&&Dt.prefersReducedMotion)&&(o.duration=0);const p=this._getTransformForUpdate(),m=this.getBearing(),b=p.pitch,E=p.roll,I="bearing"in o?this._normalizeBearing(o.bearing,m):m,D="pitch"in o?+o.pitch:b,R="roll"in o?this._normalizeBearing(o.roll,E):E,O="padding"in o?o.padding:p.padding,j=y.P.convert(o.offset);let z,U;o.around&&(z=y.S.convert(o.around),U=p.locationToScreenPoint(z));const q={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ne=this.cameraHelper.handleEaseTo(p,{bearing:I,pitch:D,roll:R,padding:O,around:z,aroundPoint:U,offsetAsPoint:j,offset:o.offset,zoom:o.zoom,center:o.center});return this._rotating=this._rotating||m!==I,this._pitching=this._pitching||D!==b,this._rolling=this._rolling||R!==E,this._padding=!p.isPaddingEqual(O),this._zooming=this._zooming||ne.isZooming,this._easeId=o.easeId,this._prepareEase(u,o.noMoveStart,q),this.terrain&&this._prepareElevation(ne.elevationCenter),this._ease(ee=>{ne.easeFunc(ee),this.terrain&&!o.freezeElevation&&this._updateElevation(ee),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},ee=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(u,ee)},o),this}_prepareEase(o,u,p={}){this._moving=!0,u||p.moving||this.fire(new y.l("movestart",o)),this._zooming&&!p.zooming&&this.fire(new y.l("zoomstart",o)),this._rotating&&!p.rotating&&this.fire(new y.l("rotatestart",o)),this._pitching&&!p.pitching&&this.fire(new y.l("pitchstart",o)),this._rolling&&!p.rolling&&this.fire(new y.l("rollstart",o))}_prepareElevation(o){this._elevationCenter=o,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(o){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(o<1&&u!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=o*(p-(u-(p*o+this._elevationStart))/(1-o)),this._elevationTarget=u}this.transform.setElevation(y.C.number(this._elevationStart,this._elevationTarget,o))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(o){if(!this.terrain&&o.elevation>=0&&o.pitch<=90)return{};const u=o.getCameraLngLat(),p=o.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(u,o.zoom):0;if(p<m){const b=this.calculateCameraOptionsFromTo(u,m,o.center,o.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(o){const u=[];if(u.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&u.push(m=>this.transformCameraUpdate(m)),!u.length)return;const p=o.clone();for(const m of u){const b=p.clone(),{center:E,zoom:I,roll:D,pitch:R,bearing:O,elevation:j}=m(b);E&&b.setCenter(E),void 0!==j&&b.setElevation(j),void 0!==I&&b.setZoom(I),void 0!==D&&b.setRoll(D),void 0!==R&&b.setPitch(R),void 0!==O&&b.setBearing(O),p.apply(b)}this.transform.apply(p)}_fireMoveEvents(o){this.fire(new y.l("move",o)),this._zooming&&this.fire(new y.l("zoom",o)),this._rotating&&this.fire(new y.l("rotate",o)),this._pitching&&this.fire(new y.l("pitch",o)),this._rolling&&this.fire(new y.l("roll",o))}_afterEase(o,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const p=this._zooming,m=this._rotating,b=this._pitching,E=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new y.l("zoomend",o)),m&&this.fire(new y.l("rotateend",o)),b&&this.fire(new y.l("pitchend",o)),E&&this.fire(new y.l("rollend",o)),this.fire(new y.l("moveend",o))}flyTo(o,u){if(!o.essential&&Dt.prefersReducedMotion){const Ae=y.Q(o,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Ae,u)}this.stop(),o=y.e({offset:[0,0],speed:1.2,curve:1.42,easing:y.co},o);const p=this._getTransformForUpdate(),m=p.bearing,b=p.pitch,E=p.roll,I=p.padding,D="bearing"in o?this._normalizeBearing(o.bearing,m):m,R="pitch"in o?+o.pitch:b,O="roll"in o?this._normalizeBearing(o.roll,E):E,j="padding"in o?o.padding:p.padding,z=y.P.convert(o.offset);let U=p.centerPoint.add(z);const q=p.screenPointToLocation(U),ne=this.cameraHelper.handleFlyTo(p,{bearing:D,pitch:R,roll:O,padding:j,locationAtOffset:q,offsetAsPoint:z,center:o.center,minZoom:o.minZoom,zoom:o.zoom});let ee=o.curve;const re=Math.max(p.width,p.height),oe=re/ne.scaleOfZoom,ue=ne.pixelPathLength;"number"==typeof ne.scaleOfMinZoom&&(ee=Math.sqrt(re/ne.scaleOfMinZoom/ue*2));const ae=ee*ee;function fe(Ae){const We=(oe*oe-re*re+(Ae?-1:1)*ae*ae*ue*ue)/(2*(Ae?oe:re)*ae*ue);return Math.log(Math.sqrt(We*We+1)-We)}function ge(Ae){return(Math.exp(Ae)-Math.exp(-Ae))/2}function le(Ae){return(Math.exp(Ae)+Math.exp(-Ae))/2}const be=fe(!1);let ke=function(Ae){return le(be)/le(be+ee*Ae)},Te=function(Ae){return re*((le(be)*(ge(We=be+ee*Ae)/le(We))-ge(be))/ae)/ue;var We},Ie=(fe(!0)-be)/ee;if(Math.abs(ue)<2e-6||!isFinite(Ie)){if(Math.abs(re-oe)<1e-6)return this.easeTo(o,u);const Ae=oe<re?-1:1;Ie=Math.abs(Math.log(oe/re))/ee,Te=()=>0,ke=We=>Math.exp(Ae*ee*We)}return o.duration="duration"in o?+o.duration:1e3*Ie/("screenSpeed"in o?+o.screenSpeed/ee:+o.speed),o.maxDuration&&o.duration>o.maxDuration&&(o.duration=0),this._zooming=!0,this._rotating=m!==D,this._pitching=R!==b,this._rolling=O!==E,this._padding=!p.isPaddingEqual(j),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(ne.targetCenter),this._ease(Ae=>{const We=Ae*Ie,qe=1/ke(We),Be=Te(We);this._rotating&&p.setBearing(y.C.number(m,D,Ae)),this._pitching&&p.setPitch(y.C.number(b,R,Ae)),this._rolling&&p.setRoll(y.C.number(E,O,Ae)),this._padding&&(p.interpolatePadding(I,j,Ae),U=p.centerPoint.add(z)),ne.easeFunc(Ae,qe,Be,U),this.terrain&&!o.freezeElevation&&this._updateElevation(Ae),this._applyUpdatedTransform(p),this._fireMoveEvents(u)},()=>{this.terrain&&o.freezeElevation&&this._finalizeElevation(),this._afterEase(u)},o),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(o,u){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}return o||null===(p=this.handlers)||void 0===p||p.stop(!1),this}_ease(o,u,p){!1===p.animate||0===p.duration?(o(1),u()):(this._easeStart=Dt.now(),this._easeOptions=p,this._onEaseFrame=o,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(o,u){o=y.aO(o,-180,180);const p=Math.abs(o-u);return Math.abs(o-360-u)<p&&(o-=360),Math.abs(o+360-u)<p&&(o+=360),o}queryTerrainElevation(o){return this.terrain?this.terrain.getElevationForLngLatZoom(y.S.convert(o),this.transform.tileZoom):null}}const dh={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class hh{constructor(o=dh){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||"metadata"!==u.sourceDataType&&"visibility"!==u.sourceDataType&&"style"!==u.dataType&&"terrain"!==u.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=o}getDefaultPosition(){return"bottom-right"}onAdd(o){return this._map=o,this._compact=this.options.compact,this._container=Re.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=Re.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=Re.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){Re.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(o,u){const p=this._map._getUIString(`AttributionControl.${u}`);o.title=p,o.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let o=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?o=o.concat(this.options.customAttribution.map(m=>"string"!=typeof m?"":m)):"string"==typeof this.options.customAttribution&&o.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const u=this._map.style.sourceCaches;for(const m in u){const b=u[m];if(b.used||b.usedForTerrain){const E=b.getSource();E.attribution&&o.indexOf(E.attribution)<0&&o.push(E.attribution)}}o=o.filter(m=>String(m).trim()),o.sort((m,b)=>m.length-b.length),o=o.filter((m,b)=>{for(let E=b+1;E<o.length;E++)if(o[E].indexOf(m)>=0)return!1;return!0});const p=o.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,o.length?(this._innerContainer.innerHTML=Re.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Pp{constructor(o={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const p=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=o}getDefaultPosition(){return"bottom-left"}onAdd(o){this._map=o,this._compact=this.options&&this.options.compact,this._container=Re.create("div","maplibregl-ctrl");const u=Re.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){Re.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Ba{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(o){const u=++this._id;return this._queue.push({callback:o,id:u,cancelled:!1}),u}remove(o){const u=this._currentlyRunning,p=u?this._queue.concat(u):this._queue;for(const m of p)if(m.id===o)return void(m.cancelled=!0)}run(o=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const p of u)if(!p.cancelled&&(p.callback(o),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var fh=y.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class mt extends y.E{constructor(o){super(),this._lastTilesetChange=Dt.now(),this.sourceCache=o,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=o._source.tileSize*2**this.deltaZoom,o.usedForTerrain=!0,o.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(o,u){this.sourceCache.update(o,u),this._renderableTilesKeys=[];const p={};for(const m of Ee(o,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),y.bY(m.terrainRttPosMatrix32f,0,y.$,y.$,0,0,1),this._tiles[m.key]=new Rl(m,this.tileSize),this._lastTilesetChange=Dt.now());for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(o){for(const u in this._tiles){const p=this._tiles[u];(!o||p.tileID.equals(o)||p.tileID.isChildOf(o)||o.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(o=>this.getTileByID(o))}getTileByID(o){return this._tiles[o]}getTerrainCoords(o,u){return u?this._getTerrainCoordsForTileRanges(o,u):this._getTerrainCoordsForRegularTile(o)}_getTerrainCoordsForRegularTile(o){const u={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID,b=o.clone(),E=y.ba();if(m.canonical.equals(o.canonical))y.bY(E,0,y.$,y.$,0,0,1);else if(m.canonical.isChildOf(o.canonical)){const I=m.canonical.z-o.canonical.z,D=m.canonical.x-(m.canonical.x>>I<<I),R=m.canonical.y-(m.canonical.y>>I<<I),O=y.$>>I;y.bY(E,0,O,O,0,0,1),y.M(E,E,[-D*O,-R*O,0])}else{if(!o.canonical.isChildOf(m.canonical))continue;{const I=o.canonical.z-m.canonical.z,D=o.canonical.x-(o.canonical.x>>I<<I),R=o.canonical.y-(o.canonical.y>>I<<I),O=y.$>>I;y.bY(E,0,y.$,y.$,0,0,1),y.M(E,E,[D*O,R*O,0]),y.N(E,E,[1/2**I,1/2**I,0])}}b.terrainRttPosMatrix32f=new Float32Array(E),u[p]=b}return u}_getTerrainCoordsForTileRanges(o,u){const p={};for(const m of this._renderableTilesKeys){const b=this._tiles[m].tileID;if(!this._isWithinTileRanges(b,u))continue;const E=o.clone(),I=y.ba();if(b.canonical.z===o.canonical.z){const D=o.canonical.x-b.canonical.x,R=o.canonical.y-b.canonical.y;y.bY(I,0,y.$,y.$,0,0,1),y.M(I,I,[D*y.$,R*y.$,0])}else if(b.canonical.z>o.canonical.z){const D=b.canonical.z-o.canonical.z,R=b.canonical.x-(b.canonical.x>>D<<D),O=b.canonical.y-(b.canonical.y>>D<<D),j=o.canonical.x-(b.canonical.x>>D),z=o.canonical.y-(b.canonical.y>>D),U=y.$>>D;y.bY(I,0,U,U,0,0,1),y.M(I,I,[-R*U+j*y.$,-O*U+z*y.$,0])}else{const D=o.canonical.z-b.canonical.z,R=o.canonical.x-(o.canonical.x>>D<<D),O=o.canonical.y-(o.canonical.y>>D<<D),j=(o.canonical.x>>D)-b.canonical.x,z=(o.canonical.y>>D)-b.canonical.y,U=y.$<<D;y.bY(I,0,U,U,0,0,1),y.M(I,I,[R*y.$+j*U,O*y.$+z*U,0])}E.terrainRttPosMatrix32f=new Float32Array(I),p[m]=E}return p}getSourceTile(o,u){const p=this.sourceCache._source;let m=o.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[o.key]||(this._sourceTileCache[o.key]=o.scaledTo(m).key);let b=this.sourceCache.getTileByID(this._sourceTileCache[o.key]);if((!b||!b.dem)&&u)for(;m>=p.minzoom&&(!b||!b.dem);)b=this.sourceCache.getTileByID(o.scaledTo(m--).key);return b}anyTilesAfterTime(o=Date.now()){return this._lastTilesetChange>=o}_isWithinTileRanges(o,u){return u[o.canonical.z]&&o.canonical.x>=u[o.canonical.z].minTileX&&o.canonical.x<=u[o.canonical.z].maxTileX&&o.canonical.y>=u[o.canonical.z].minTileY&&o.canonical.y<=u[o.canonical.z].maxTileY}}class Ce{constructor(o,u,p){this._meshCache={},this.painter=o,this.sourceCache=new mt(u),this.options=p,this.exaggeration="number"==typeof p.exaggeration?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(o,u,p,m=y.$){var b;if(!(u>=0&&u<m&&p>=0&&p<m))return 0;const E=this.getTerrainData(o),I=null===(b=E.tile)||void 0===b?void 0:b.dem;if(!I)return 0;const D=y.cs([],[u/m*y.$,p/m*y.$],E.u_terrain_matrix),R=[D[0]*I.dim,D[1]*I.dim],O=Math.floor(R[0]),j=Math.floor(R[1]),z=R[0]-O,U=R[1]-j;return I.get(O,j)*(1-z)*(1-U)+I.get(O+1,j)*z*(1-U)+I.get(O,j+1)*(1-z)*U+I.get(O+1,j+1)*z*U}getElevationForLngLatZoom(o,u){if(!y.ct(u,o.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(o,u);return this.getElevation(p,m%y.$,b%y.$,y.$)}getElevation(o,u,p,m=y.$){return this.getDEMElevation(o,u,p,m)*this.exaggeration}getTerrainData(o){if(!this._emptyDemTexture){const m=this.painter.context,b=new y.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new y.T(m,b,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new y.T(m,new y.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=y.ag([])}const u=this.sourceCache.getSourceTile(o,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const m=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new y.T(m,u.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),u.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const p=u&&u+u.tileID.key+o.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let b=o.canonical.z-u.tileID.canonical.z;o.overscaledZ>o.canonical.z&&(o.canonical.z>=m?b=o.canonical.z-m:y.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const E=o.canonical.x-(o.canonical.x>>b<<b),I=o.canonical.y-(o.canonical.y>>b<<b),D=y.cu(new Float64Array(16),[1/(y.$<<b),1/(y.$<<b),0]);y.M(D,D,[E*y.$,I*y.$,0]),this._demMatrixCache[o.key]={matrix:D,coord:o}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[o.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(o){const u=this.painter,p=u.width/devicePixelRatio,m=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new y.T(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new y.T(u.context,{width:p,height:m,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set("coords"===o?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const o=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,E=0;b<this._coordsTextureSize;b++)for(let I=0;I<this._coordsTextureSize;I++,E+=4)u[E+0]=255&I,u[E+1]=255&b,u[E+2]=I>>8<<4|b>>8,u[E+3]=0;const p=new y.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),m=new y.T(o,p,o.gl.RGBA,{premultiply:!1});return m.bind(o.gl.NEAREST,o.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(o){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),p=this.painter.context,m=p.gl,b=Math.round(o.x*this.painter.pixelRatio/devicePixelRatio),E=Math.round(o.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(b,I-E-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null);const D=u[0]+(u[2]>>4<<8),R=u[1]+((15&u[2])<<8),O=this.coordsIndex[255-u[3]],j=O&&this.sourceCache.getTileByID(O);if(!j)return null;const z=this._coordsTextureSize,U=(1<<j.tileID.canonical.z)*z;return new y.a1((j.tileID.canonical.x*z+D)/U+j.tileID.wrap,(j.tileID.canonical.y*z+R)/U,this.getElevation(j.tileID,D,R,z))}depthAtPoint(o){const u=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(o.x,this.painter.height/devicePixelRatio-o.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,u),p.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(o){var u;const p=(null===(u=this.painter.style.projection)||void 0===u?void 0:u.transitionState)>0,m=p&&0===o.canonical.y,b=p&&o.canonical.y===(1<<o.canonical.z)-1,E=`m_${m?"n":""}_${b?"s":""}`;if(this._meshCache[E])return this._meshCache[E];const I=this.painter.context,D=new y.cv,R=new y.aN,O=this.meshSize,j=y.$/O,z=O*O;for(let le=0;le<=O;le++)for(let be=0;be<=O;be++)D.emplaceBack(be*j,le*j,0);for(let le=0;le<z;le+=O+1)for(let be=0;be<O;be++)R.emplaceBack(be+le,O+be+le+1,O+be+le+2),R.emplaceBack(be+le,O+be+le+2,be+le+1);const U=D.length,q=U+(O+1),ne=(O+1)*O,ee=m?y.bh:0,re=m?0:1,oe=b?y.bi:y.$,ue=b?0:1;for(let le=0;le<=O;le++)D.emplaceBack(le*j,ee,re);for(let le=0;le<=O;le++)D.emplaceBack(le*j,oe,ue);for(let le=0;le<O;le++)R.emplaceBack(ne+le,q+le,q+le+1),R.emplaceBack(ne+le,q+le+1,ne+le+1),R.emplaceBack(0+le,U+le+1,U+le),R.emplaceBack(0+le,0+le+1,U+le+1);const ae=D.length,fe=ae+2*(O+1);for(const le of[0,1])for(let be=0;be<=O;be++)for(const ke of[0,1])D.emplaceBack(le*y.$,be*j,ke);for(let le=0;le<2*O;le+=2)R.emplaceBack(ae+le,ae+le+1,ae+le+3),R.emplaceBack(ae+le,ae+le+3,ae+le+2),R.emplaceBack(fe+le,fe+le+3,fe+le+1),R.emplaceBack(fe+le,fe+le+2,fe+le+3);const ge=new Fi(I.createVertexBuffer(D,fh.members),I.createIndexBuffer(R),y.aM.simpleSegment(0,0,D.length,R.length));return this._meshCache[E]=ge,ge}getMeshFrameDelta(o){return 2*Math.PI*y.bu/Math.pow(2,Math.max(o,0))/5}getMinTileElevationForLngLatZoom(o,u){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(o,u);return null!==(p=this.getMinMaxElevation(m).minElevation)&&void 0!==p?p:0}getMinMaxElevation(o){const u=this.getTerrainData(o).tile,p={minElevation:null,maxElevation:null};return u&&u.dem&&(p.minElevation=u.dem.min*this.exaggeration,p.maxElevation=u.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(o,u){const p=y.a1.fromLngLat(o.wrap()),m=(1<<u)*y.$,b=p.x*m,E=p.y*m,I=Math.floor(b/y.$),D=Math.floor(E/y.$);return{tileID:new y.Z(u,0,u,I,D),mercatorX:b,mercatorY:E}}}class Kt{constructor(o,u,p){this._context=o,this._size=u,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const o of this._objects)o.texture.destroy(),o.fbo.destroy()}_createObject(o){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new y.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(p.texture),{id:o,fbo:u,texture:p,stamp:-1,inUse:!1}}getObjectForId(o){return this._objects[o]}useObject(o){o.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(u=>o.id!==u),this._recentlyUsed.push(o.id)}stampObject(o){o.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const o=this._createObject(this._objects.length);return this._objects.push(o),o}freeObject(o){o.inUse=!1}freeAllObjects(){for(const o of this._objects)this.freeObject(o)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some(o=>!o.inUse)}}const Fr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class ki{constructor(o,u){this.painter=o,this.terrain=u,this.pool=new Kt(o.context,30,u.sourceCache.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(o){return this.pool.getObjectForId(o.rtt[this._stacks.length-1].id).texture}prepareForRender(o,u){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=o._order.filter(p=>!o._layers[p].isHidden(u)),this._coordsAscending={};for(const p in o.sourceCaches){this._coordsAscending[p]={};const m=o.sourceCaches[p].getVisibleCoordinates(),b=o.sourceCaches[p].getSource(),E=b instanceof Wo?b.terrainTileRanges:null;for(const I of m){const D=this.terrain.sourceCache.getTerrainCoords(I,E);for(const R in D)this._coordsAscending[p][R]||(this._coordsAscending[p][R]=[]),this._coordsAscending[p][R].push(D[R])}}this._coordsAscendingStr={};for(const p of o._order){const m=o._layers[p],b=m.source;if(Fr[m.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const E in this._coordsAscending[b])this._coordsAscendingStr[b][E]=this._coordsAscending[b][E].map(I=>I.key).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsAscendingStr){const b=this._coordsAscendingStr[m][p.tileID.key];b&&b!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(o,u){if(o.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),m=o.type,b=this.painter,E=this._renderableLayerIds[this._renderableLayerIds.length-1]===o.id;if(Fr[m]&&(this._prevType&&Fr[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(o.id),!E))return!0;if(Fr[this._prevType]||Fr[m]&&E){this._prevType=m;const I=this._stacks.length-1,D=this._stacks[I]||[];for(const R of this._renderableTiles){if(this.pool.isFull()&&(zi(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(R),R.rtt[I]){const j=this.pool.getObjectForId(R.rtt[I].id);if(j.stamp===R.rtt[I].stamp){this.pool.useObject(j);continue}}const O=this.pool.getOrCreateFreeObject();this.pool.useObject(O),this.pool.stampObject(O),R.rtt[I]={id:O.id,stamp:O.stamp},b.context.bindFramebuffer.set(O.fbo.framebuffer),b.context.clear({color:y.bf.transparent,stencil:0}),b.currentStencilSource=void 0;for(let j=0;j<D.length;j++){const z=b.style._layers[D[j]],U=z.source?this._coordsAscending[z.source][R.tileID.key]:[R.tileID];b.context.viewport.set([0,0,O.fbo.width,O.fbo.height]),b._renderTileClippingMasks(z,U,!0),b.renderLayer(b,b.style.sourceCaches[z.source],z,U,p),z.source&&(R.rttCoords[z.source]=this._coordsAscendingStr[z.source][R.tileID.key])}}return zi(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),Fr[m]}return!1}}const Mt={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ji={hash:!1,interactive:!0,bearingSnap:7,attributionControl:dh,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:y.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},za={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class uu{constructor(o,u,p=!1){this.mousedown=b=>{this.startMove(b,Re.mousePos(this.element,b)),Re.addEventListener(window,"mousemove",this.mousemove),Re.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,Re.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{1!==b.targetTouches.length?this.reset():(this._startPos=this._lastPos=Re.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),Re.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),Re.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{1!==b.targetTouches.length?this.reset():(this._lastPos=Re.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{0===b.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const m=new km;this._rotatePitchHandler=new Wl({clickTolerance:3,move:(b,E)=>{const I=u.getBoundingClientRect(),D=new y.P((I.bottom-I.top)/2,(I.right-I.left)/2);return{bearingDelta:y.cn(new y.P(b.x,E.y),E,D),pitchDelta:p?-.5*(E.y-b.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=o,Re.addEventListener(u,"mousedown",this.mousedown),Re.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),Re.addEventListener(u,"touchcancel",this.reset)}startMove(o,u){this._rotatePitchHandler.dragStart(o,u),Re.disableDrag()}move(o,u){const p=this.map,{bearingDelta:m,pitchDelta:b}=this._rotatePitchHandler.dragMove(o,u)||{};m&&p.setBearing(p.getBearing()+m),b&&p.setPitch(p.getPitch()+b)}off(){const o=this.element;Re.removeEventListener(o,"mousedown",this.mousedown),Re.removeEventListener(o,"touchstart",this.touchstart,{passive:!1}),Re.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Re.removeEventListener(window,"touchend",this.touchend),Re.removeEventListener(o,"touchcancel",this.reset),this.offTemp()}offTemp(){Re.enableDrag(),Re.removeEventListener(window,"mousemove",this.mousemove),Re.removeEventListener(window,"mouseup",this.mouseup),Re.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),Re.removeEventListener(window,"touchend",this.touchend)}}let zn;function xr(v,o,u,p=!1){if(p||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return v?.wrap();const m=new y.S(v.lng,v.lat);if(v=new y.S(v.lng,v.lat),o){const b=new y.S(v.lng-360,v.lat),E=new y.S(v.lng+360,v.lat),I=u.locationToScreenPoint(v).distSqr(o);u.locationToScreenPoint(b).distSqr(o)<I?v=b:u.locationToScreenPoint(E).distSqr(o)<I&&(v=E)}for(;Math.abs(v.lng-u.center.lng)>180;){const b=u.locationToScreenPoint(v);if(b.x>=0&&b.y>=0&&b.x<=u.width&&b.y<=u.height)break;v.lng>u.center.lng?v.lng-=360:v.lng+=360}return v.lng!==m.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(v))?v:m}const vf={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ed(v,o,u){const p=v.classList;for(const m in vf)p.remove(`maplibregl-${u}-anchor-${m}`);p.add(`maplibregl-${u}-anchor-${o}`)}class Yl extends y.E{constructor(o){if(super(),this._onKeyPress=u=>{const p=u.code,m=u.charCode||u.keyCode;"Space"!==p&&"Enter"!==p&&32!==m&&13!==m||this.togglePopup()},this._onMapClick=u=>{const p=u.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();("terrain"===u?.type||"render"===u?.type&&!p)&&this._map.once("render",this._update),this._lngLat=xr(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?m=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?b="rotateX(0deg)":"map"===this._pitchAlignment&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&"moveend"!==u.type||(this._pos=this._pos.round()),Re.setTransform(this._element,`${vf[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),Dt.frameAsync(new AbortController).then(()=>{this._updateOpacity(u&&"moveend"===u.type)}).catch(()=>{})},this._onMove=u=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new y.l("dragstart"))),this.fire(new y.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new y.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=o&&o.anchor||"center",this._color=o&&o.color||"#3FB1CE",this._scale=o&&o.scale||1,this._draggable=o&&o.draggable||!1,this._clickTolerance=o&&o.clickTolerance||0,this._subpixelPositioning=o&&o.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=o&&o.rotation||0,this._rotationAlignment=o&&o.rotationAlignment||"auto",this._pitchAlignment=o&&o.pitchAlignment&&"auto"!==o.pitchAlignment?o.pitchAlignment:this._rotationAlignment,this.setOpacity(o?.opacity,o?.opacityWhenCovered),o&&o.element)this._element=o.element,this._offset=y.P.convert(o&&o.offset||[0,0]);else{this._defaultMarker=!0,this._element=Re.create("div");const u=Re.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${p}px`),u.setAttributeNS(null,"width",`${m}px`),u.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const b=Re.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const E=Re.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"fill-rule","nonzero");const I=Re.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");const D=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const re of D){const oe=Re.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",re.rx),oe.setAttributeNS(null,"ry",re.ry),I.appendChild(oe)}const R=Re.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"fill",this._color);const O=Re.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),R.appendChild(O);const j=Re.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"opacity","0.25"),j.setAttributeNS(null,"fill","#000000");const z=Re.createNS("http://www.w3.org/2000/svg","path");z.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),j.appendChild(z);const U=Re.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(6.0, 7.0)"),U.setAttributeNS(null,"fill","#FFFFFF");const q=Re.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ne=Re.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#000000"),ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962");const ee=Re.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#FFFFFF"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962"),q.appendChild(ne),q.appendChild(ee),E.appendChild(I),E.appendChild(R),E.appendChild(j),E.appendChild(U),E.appendChild(q),u.appendChild(E),u.setAttributeNS(null,"height",p*this._scale+"px"),u.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(u),this._offset=y.P.convert(o&&o.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",u=>{u.preventDefault()}),this._element.addEventListener("mousedown",u=>{u.preventDefault()}),ed(this._element,this._anchor,"marker"),o&&o.className)for(const u of o.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(o){return this.remove(),this._map=o,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",o._getUIString("Marker.Title")),o.getCanvasContainer().appendChild(this._element),o.on("move",this._update),o.on("moveend",this._update),o.on("terrain",this._update),o.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),Re.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(o){return this._lngLat=y.S.convert(o),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(o){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),o){if(!("offset"in o.options)){const m=Math.abs(13.5)/Math.SQRT2;o.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(24.6+m)],"bottom-right":[-m,-1*(24.6+m)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=o,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(o){return this._subpixelPositioning=o,this}getPopup(){return this._popup}togglePopup(){const o=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:o?(o.isOpen()?o.remove():(o.setLngLat(this._lngLat),o.addTo(this._map)),this):this}_updateOpacity(o=!1){var u,p;const m=null===(u=this._map)||void 0===u?void 0:u.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!m||b){const U=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==U&&(this._element.style.opacity=U))}if(o)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const E=this._map,I=E.terrain.depthAtPoint(this._pos),D=E.terrain.getElevationForLngLatZoom(this._lngLat,E.transform.tileZoom);if(E.transform.lngLatToCameraDepth(this._lngLat,D)-I<.006)return void(this._element.style.opacity=this._opacity);const R=-this._offset.y/E.transform.pixelsPerMeter,O=Math.sin(E.getPitch()*Math.PI/180)*R,j=E.terrain.depthAtPoint(new y.P(this._pos.x,this._pos.y-this._offset.y)),z=E.transform.lngLatToCameraDepth(this._lngLat,D+O)-j>.006;!(null===(p=this._popup)||void 0===p)&&p.isOpen()&&z&&this._popup.remove(),this._element.style.opacity=z?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(o){return this._offset=y.P.convert(o),this._update(),this}addClassName(o){this._element.classList.add(o)}removeClassName(o){this._element.classList.remove(o)}toggleClassName(o){return this._element.classList.toggle(o)}setDraggable(o){return this._draggable=!!o,this._map&&(o?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(o){return this._rotation=o||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(o){return this._rotationAlignment=o||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(o){return this._pitchAlignment=o&&"auto"!==o?o:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(o,u){return(void 0===this._opacity||void 0===o&&void 0===u)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==o&&(this._opacity=o),void 0!==u&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const ph={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let ja=0,Br=!1;const Ro={maxWidth:100,unit:"metric"};function td(v,o,u){const p=u&&u.maxWidth||100,m=v._container.clientHeight/2,b=v._container.clientWidth/2,E=v.unproject([b-p/2,m]),I=v.unproject([b+p/2,m]),D=Math.round(v.project(I).x-v.project(E).x),R=Math.min(p,D,v._container.clientWidth),O=E.distanceTo(I);if(u&&"imperial"===u.unit){const j=3.2808*O;j>5280?Qr(o,R,j/5280,v._getUIString("ScaleControl.Miles")):Qr(o,R,j,v._getUIString("ScaleControl.Feet"))}else u&&"nautical"===u.unit?Qr(o,R,O/1852,v._getUIString("ScaleControl.NauticalMiles")):O>=1e3?Qr(o,R,O/1e3,v._getUIString("ScaleControl.Kilometers")):Qr(o,R,O,v._getUIString("ScaleControl.Meters"))}function Qr(v,o,u,p){const m=function(b){const E=Math.pow(10,`${Math.floor(b)}`.length-1);let I=b/E;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(D){const R=Math.pow(10,Math.ceil(-Math.log(D)/Math.LN10));return Math.round(D*R)/R}(I),E*I}(u);v.style.width=o*(m/u)+"px",v.innerHTML=`${m}&nbsp;${p}`}const xs={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},bf=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function nd(v){if(v){if("number"==typeof v){const o=Math.round(Math.abs(v)/Math.SQRT2);return{center:new y.P(0,0),top:new y.P(0,v),"top-left":new y.P(o,o),"top-right":new y.P(-o,o),bottom:new y.P(0,-v),"bottom-left":new y.P(o,-o),"bottom-right":new y.P(-o,-o),left:new y.P(v,0),right:new y.P(-v,0)}}if(v instanceof y.P||Array.isArray(v)){const o=y.P.convert(v);return{center:o,top:o,"top-left":o,"top-right":o,bottom:o,"bottom-left":o,"bottom-right":o,left:o,right:o}}return{center:y.P.convert(v.center||[0,0]),top:y.P.convert(v.top||[0,0]),"top-left":y.P.convert(v["top-left"]||[0,0]),"top-right":y.P.convert(v["top-right"]||[0,0]),bottom:y.P.convert(v.bottom||[0,0]),"bottom-left":y.P.convert(v["bottom-left"]||[0,0]),"bottom-right":y.P.convert(v["bottom-right"]||[0,0]),left:y.P.convert(v.left||[0,0]),right:y.P.convert(v.right||[0,0])}}return nd(new y.P(0,0))}W.AJAXError=y.cz,W.Event=y.l,W.Evented=y.E,W.LngLat=y.S,W.MercatorCoordinate=y.a1,W.Point=y.P,W.addProtocol=y.cA,W.config=y.a,W.removeProtocol=y.cB,W.AttributionControl=hh,W.BoxZoomHandler=ih,W.CanvasSource=An,W.CooperativeGesturesHandler=lh,W.DoubleClickZoomHandler=bs,W.DragPanHandler=_f,W.DragRotateHandler=Wt,W.EdgeInsets=js,W.FullscreenControl=class extends y.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var o;let u=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null!==(o=u?.shadowRoot)&&void 0!==o&&o.fullscreenElement;)u=u.shadowRoot.fullscreenElement;u===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:y.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=Re.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){Re.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=Re.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);Re.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new y.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new y.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},W.GeoJSONSource=va,W.GeolocateControl=class extends y.E{constructor(v){super(),this._onSuccess=o=>{if(this._map){if(this._isOutOfMapMaxBounds(o))return this._setErrorState(),this.fire(new y.l("outofmaxbounds",o)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=o,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(o),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(o),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new y.l("geolocate",o)),this._finish()}},this._updateCamera=o=>{const u=new y.S(o.coords.longitude,o.coords.latitude),p=o.coords.accuracy,m=this._map.getBearing(),b=y.e({bearing:m},this.options.fitBoundsOptions),E=Ir.fromLngLat(u,p);this._map.fitBounds(E,b,{geolocateSource:!0})},this._updateMarker=o=>{if(o){const u=new y.S(o.coords.longitude,o.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=o.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=o=>{if(this._map){if(1===o.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===o.code&&Br)return;this.options.trackUserLocation&&this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new y.l("error",o)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",o=>o.preventDefault()),this._geolocateButton=Re.create("button","maplibregl-ctrl-geolocate",this._container),Re.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=o=>{if(this._map){if(!1===o){y.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=Re.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Yl({element:this._dotElement}),this._circleElement=Re.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Yl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",u=>{const p=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||"ACTIVE_LOCK"!==this._watchState||p||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new y.l("trackuserlocationend")),this.fire(new y.l("userlocationlostfocus")))})}},this.options=y.e({},ph,v)}onAdd(v){return this._map=v,this._container=Re.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return y._(this,arguments,void 0,function*(o=!1){if(void 0!==zn&&!o)return zn;if(void 0===window.navigator.permissions)return zn=!!window.navigator.geolocation,zn;try{zn="denied"!==(yield window.navigator.permissions.query({name:"geolocation"})).state}catch{zn=!!window.navigator.geolocation}return zn})}().then(o=>this._finishSetupUI(o)),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),Re.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,ja=0,Br=!1}_isOutOfMapMaxBounds(v){const o=this._map.getMaxBounds(),u=v.coords;return o&&(u.longitude<o.getWest()||u.longitude>o.getEast()||u.latitude<o.getSouth()||u.latitude>o.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),o=v.getSouthEast(),u=v.getNorthEast(),p=o.distanceTo(u),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return y.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new y.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":ja--,Br=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new y.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new y.l("trackuserlocationstart")),this.fire(new y.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),ja++,ja>1?(v={maximumAge:6e5,timeout:0},Br=!0):(v=this.options.positionOptions,Br=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},W.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const o=null===(v=this._map.getProjection())||void 0===v?void 0:v.type;this._map.setProjection("mercator"!==o&&o?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(v=this._map.getProjection())||void 0===v?void 0:v.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=Re.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=Re.create("button","maplibregl-ctrl-globe",this._container),Re.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){Re.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},W.Hash=Jo,W.ImageSource=Wo,W.KeyboardHandler=Zl,W.LngLatBounds=Ir,W.LogoControl=Pp,W.Map=class extends uh{constructor(v){var o,u;y.cw.mark(y.cx.create);const p=Object.assign(Object.assign(Object.assign({},ji),v),{canvasContextAttributes:Object.assign(Object.assign({},ji.canvasContextAttributes),v.canvasContextAttributes)});if(null!=p.minZoom&&null!=p.maxZoom&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=p.minPitch&&null!=p.maxPitch&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=p.minPitch&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=p.maxPitch&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const m=new Tn,b=new Yr;if(void 0!==p.minZoom&&m.setMinZoom(p.minZoom),void 0!==p.maxZoom&&m.setMaxZoom(p.maxZoom),void 0!==p.minPitch&&m.setMinPitch(p.minPitch),void 0!==p.maxPitch&&m.setMaxPitch(p.maxPitch),void 0!==p.renderWorldCopies&&m.setRenderWorldCopies(p.renderWorldCopies),super(m,b,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Ba,this._controls=[],this._mapId=y.a7(),this._contextLost=I=>{I.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new y.l("webglcontextlost",{originalEvent:I}))},this._contextRestored=I=>{this._setupPainter(),this.resize(),this._update(),this.fire(new y.l("webglcontextrestored",{originalEvent:I}))},this._onMapScroll=I=>{if(I.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=!0===p.trackResize,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=!0===p.refreshExpiredTiles,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=!0===p.crossSourceCollisions,this._collectResourceTiming=!0===p.collectResourceTiming,this._locale=Object.assign(Object.assign({},Mt),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===p.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=Uo.addThrottleControl(()=>this.isMoving()),this._requestManager=new Ls(p.transformRequest),"string"==typeof p.container){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let I=!1;const D=su(R=>{this._trackResize&&!this._removed&&(this.resize(R),this.redraw())},50);this._resizeObserver=new ResizeObserver(R=>{I?D(R):I=!0}),this._resizeObserver.observe(this._container)}this.handlers=new ch(this,p),this._hash=p.hash&&new Jo("string"==typeof p.hash&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,y.e({},p.fitBoundsOptions,{duration:0}))));const E="string"==typeof p.style||"globe"!==(null===(u=null===(o=p.style)||void 0===o?void 0:o.projection)||void 0===u?void 0:u.type);this.resize(null,E),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new hh("boolean"==typeof p.attributionControl?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new Pp,p.logoPosition),this.on("style.load",()=>{if(E||this._resizeTransform(),this.transform.unmodified){const I=y.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(I)}}),this.on("data",I=>{this._update("style"===I.dataType),this.fire(new y.l(`${I.dataType}data`,I))}),this.on("dataloading",I=>{this.fire(new y.l(`${I.dataType}dataloading`,I))}),this.on("dataabort",I=>{this.fire(new y.l("sourcedataabort",I))})}_getMapId(){return this._mapId}setGlobalStateProperty(v,o){return this.style.setGlobalStateProperty(v,o),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,o){if(void 0===o&&(o=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new y.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[o];return-1!==o.indexOf("bottom")?p.insertBefore(u,p.firstChild):p.appendChild(u),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new y.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const o=this._controls.indexOf(v);return o>-1&&this._controls.splice(o,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,o,u,p){return null==p&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(u,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,o,u,p)}resize(v,o=!0){const[u,p]=this._containerDimensions(),m=this._getClampedPixelRatio(u,p);if(this._resizeCanvas(u,p,m),this.painter.resize(u,p,m),this.painter.overLimit()){const E=this.painter.context.gl;this._maxCanvasSize=[E.drawingBufferWidth,E.drawingBufferHeight];const I=this._getClampedPixelRatio(u,p);this._resizeCanvas(u,p,I),this.painter.resize(u,p,I)}this._resizeTransform(o);const b=!this._moving;return b&&(this.stop(),this.fire(new y.l("movestart",v)).fire(new y.l("move",v))),this.fire(new y.l("resize",v)),b&&this.fire(new y.l("moveend",v)),this}_resizeTransform(v=!0){var o;const[u,p]=this._containerDimensions();this.transform.resize(u,p,v),null===(o=this._requestedCameraState)||void 0===o||o.resize(u,p,v)}_getClampedPixelRatio(v,o){const{0:u,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),b=v*m,E=o*m;return Math.min(b>u?u/b:1,E>p?p/E:1)*m}getPixelRatio(){var v;return null!==(v=this._overridePixelRatio)&&void 0!==v?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Ir.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(y.S.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(y.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||(null===(v=this.handlers)||void 0===v?void 0:v.isMoving())}isZooming(){var v;return this._zooming||(null===(v=this.handlers)||void 0===v?void 0:v.isZooming())}isRotating(){var v;return this._rotating||(null===(v=this.handlers)||void 0===v?void 0:v.isRotating())}_createDelegatedListener(v,o,u){if("mouseenter"===v||"mouseover"===v){let p=!1;return{layers:o,listener:u,delegates:{mousemove:b=>{const E=o.filter(D=>this.getLayer(D)),I=0!==E.length?this.queryRenderedFeatures(b.point,{layers:E}):[];I.length?p||(p=!0,u.call(this,new Do(v,this,b.originalEvent,{features:I}))):p=!1},mouseout:()=>{p=!1}}}}if("mouseleave"===v||"mouseout"===v){let p=!1;return{layers:o,listener:u,delegates:{mousemove:E=>{const I=o.filter(D=>this.getLayer(D));(0!==I.length?this.queryRenderedFeatures(E.point,{layers:I}):[]).length?p=!0:p&&(p=!1,u.call(this,new Do(v,this,E.originalEvent)))},mouseout:E=>{p&&(p=!1,u.call(this,new Do(v,this,E.originalEvent)))}}}}{const p=m=>{const b=o.filter(I=>this.getLayer(I)),E=0!==b.length?this.queryRenderedFeatures(m.point,{layers:b}):[];E.length&&(m.features=E,u.call(this,m),delete m.features)};return{layers:o,listener:u,delegates:{[v]:p}}}}_saveDelegatedListener(v,o){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(o)}_removeDelegatedListener(v,o,u){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const p=this._delegatedListeners[v];for(let m=0;m<p.length;m++){const b=p[m];if(b.listener===u&&b.layers.length===o.length&&b.layers.every(E=>o.includes(E))){for(const E in b.delegates)this.off(E,b.delegates[E]);return void p.splice(m,1)}}}on(v,o,u){if(void 0===u)return super.on(v,o);const p="string"==typeof o?[o]:o,m=this._createDelegatedListener(v,p,u);this._saveDelegatedListener(v,m);for(const b in m.delegates)this.on(b,m.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(v,p,u)}}}once(v,o,u){if(void 0===u)return super.once(v,o);const p="string"==typeof o?[o]:o,m=this._createDelegatedListener(v,p,u);for(const b in m.delegates){const E=m.delegates[b];m.delegates[b]=(...I)=>{this._removeDelegatedListener(v,p,u),E(...I)}}this._saveDelegatedListener(v,m);for(const b in m.delegates)this.once(b,m.delegates[b]);return this}off(v,o,u){return void 0===u?super.off(v,o):(this._removeDelegatedListener(v,"string"==typeof o?[o]:o,u),this)}queryRenderedFeatures(v,o){if(!this.style)return[];let u;const p=v instanceof y.P||Array.isArray(v),m=p?v:[[0,0],[this.transform.width,this.transform.height]];if(o=o||(p?{}:v)||{},m instanceof y.P||"number"==typeof m[0])u=[y.P.convert(m)];else{const b=y.P.convert(m[0]),E=y.P.convert(m[1]);u=[b,new y.P(E.x,b.y),E,new y.P(b.x,E.y),b]}return this.style.queryRenderedFeatures(u,o,this.transform)}querySourceFeatures(v,o){return this.style.querySourceFeatures(v,o)}setStyle(v,o){return!1!==(o=y.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},o)).diff&&o.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,o),this):(this._localIdeographFontFamily=o.localIdeographFontFamily,this._updateStyle(v,o))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const o=this._locale[v];if(null==o)throw new Error(`Missing UI string '${v}'`);return o}_updateStyle(v,o){var u,p;if(o.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,o));const m=this.style&&o.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Ia(this,o||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof v?this.style.loadURL(v,o,m):this.style.loadJSON(v,o,m),this):(null===(p=null===(u=this.style)||void 0===u?void 0:u.projection)||void 0===p||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Ia(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,o){if("string"==typeof v){const u=this._requestManager.transformRequest(v,"Style");y.j(u,new AbortController).then(p=>{this._updateDiff(p.data,o)}).catch(p=>{p&&this.fire(new y.k(p))})}else"object"==typeof v&&this._updateDiff(v,o)}_updateDiff(v,o){try{this.style.setState(v,o)&&this._update(!0)}catch(u){y.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(v,o)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():y.w("There is no style added to the map.")}addSource(v,o){return this._lazyInitEmptyStyle(),this.style.addSource(v,o),this._update(!0)}isSourceLoaded(v){const o=this.style&&this.style.sourceCaches[v];if(void 0!==o)return o.loaded();this.fire(new y.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const o=this.style.sourceCaches[v.source];if(!o)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);null===this.terrain&&o.reload();for(const u in this.style._layers){const p=this.style._layers[u];"hillshade"===p.type&&p.source===v.source&&y.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===p.type&&p.source===v.source&&y.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ce(this.painter,o,v),this.painter.renderToTexture=new ki(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var p;"style"===u.dataType?this.terrain.sourceCache.freeRtt():"source"===u.dataType&&u.tile&&(u.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(p=u.source)||void 0===p?void 0:p.type)?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new y.l("terrain",{terrain:v})),this}getTerrain(){var v,o;return null!==(o=null===(v=this.terrain)||void 0===v?void 0:v.options)&&void 0!==o?o:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const o in v){const u=v[o]._tiles;for(const p in u){const m=u[p];if("loaded"!==m.state&&"errored"!==m.state)return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,o,u){if(u){const p=this.getSource(u);if(!p)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);p.calculateTileZoom=Ge(Math.max(1,v),Math.max(1,o))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=Ge(Math.max(1,v),Math.max(1,o));return this._update(!0),this}refreshTiles(v,o){const u=this.style.sourceCaches[v];if(!u)throw new Error(`There is no source cache with ID "${v}", cannot refresh tile`);void 0===o?u.reload(!0):u.refreshTiles(o.map(p=>new y.a4(p.z,p.x,p.y)))}addImage(v,o,u={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:b,stretchY:E,content:I,textFitWidth:D,textFitHeight:R}=u;if(this._lazyInitEmptyStyle(),!(o instanceof HTMLImageElement||y.b(o))){if(void 0===o.width||void 0===o.height)return this.fire(new y.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:O,height:j,data:z}=o,U=o;return this.style.addImage(v,{data:new y.R({width:O,height:j},new Uint8Array(z)),pixelRatio:p,stretchX:b,stretchY:E,content:I,textFitWidth:D,textFitHeight:R,sdf:m,version:0,userImage:U}),U.onAdd&&U.onAdd(this,v),this}}{const{width:O,height:j,data:z}=Dt.getImageData(o);this.style.addImage(v,{data:new y.R({width:O,height:j},z),pixelRatio:p,stretchX:b,stretchY:E,content:I,textFitWidth:D,textFitHeight:R,sdf:m,version:0})}}updateImage(v,o){const u=this.style.getImage(v);if(!u)return this.fire(new y.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=o instanceof HTMLImageElement||y.b(o)?Dt.getImageData(o):o,{width:m,height:b,data:E}=p;if(void 0===m||void 0===b)return this.fire(new y.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==u.data.width||b!==u.data.height)return this.fire(new y.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const I=!(o instanceof HTMLImageElement||y.b(o));return u.data.replace(E,I),this.style.updateImage(v,u),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new y.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return Uo.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,o){return this._lazyInitEmptyStyle(),this.style.addLayer(v,o),this._update(!0)}moveLayer(v,o){return this.style.moveLayer(v,o),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,o,u){return this.style.setLayerZoomRange(v,o,u),this._update(!0)}setFilter(v,o,u={}){return this.style.setFilter(v,o,u),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,o,u,p={}){return this.style.setPaintProperty(v,o,u,p),this._update(!0)}getPaintProperty(v,o){return this.style.getPaintProperty(v,o)}setLayoutProperty(v,o,u,p={}){return this.style.setLayoutProperty(v,o,u,p),this._update(!0)}getLayoutProperty(v,o){return this.style.getLayoutProperty(v,o)}setGlyphs(v,o={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,o),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,o,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,o,u,p=>{p||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,o={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,o,u=>{u||this._update(!0)}),this}setLight(v,o={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,o),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,o={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,o),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,o){return this.style.setFeatureState(v,o),this._update()}removeFeatureState(v,o){return this.style.removeFeatureState(v,o),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,o=0;return this._container&&(v=this._container.clientWidth||400,o=this._container.clientHeight||300),[v,o]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const o=this._canvasContainer=Re.create("div","maplibregl-canvas-container",v);this._interactive&&o.classList.add("maplibregl-interactive"),this._canvas=Re.create("canvas","maplibregl-canvas",o),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),p=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],p);const m=this._controlContainer=Re.create("div","maplibregl-control-container",v),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(E=>{b[E]=Re.create("div",`maplibregl-ctrl-${E} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,o,u){this._canvas.width=Math.floor(u*v),this._canvas.height=Math.floor(u*o),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${o}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let o=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{o={requestedAttributes:v},p&&(o.statusMessage=p.statusMessage,o.type=p.type)},{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!u){const p="Failed to initialize WebGL";throw o?(o.message=p,new Error(JSON.stringify(o))):new Error(p)}this.painter=new wm(u,this.transform),Ns.testSupport(u)}migrateProjection(v,o){super.migrateProjection(v,o),this.painter.transform=v,this.fire(new y.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var o,u,p,m,b;const E=this._idleTriggered?this._fadeDuration:0,I=(null===(o=this.style.projection)||void 0===o?void 0:o.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let D=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const j=this.transform.zoom,z=Dt.now();this.style.zoomHistory.update(j,z);const U=new y.F(j,{now:z,fadeDuration:E,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),q=U.crossFadingFactor();1===q&&q===this._crossFadingFactor||(D=!0,this._crossFadingFactor=q),this.style.update(U)}const R=(null===(u=this.style.projection)||void 0===u?void 0:u.transitionState)>0!==I;null===(p=this.style.projection)||void 0===p||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(m=this.style.projection)||void 0===m?void 0:m.transitionState,null===(b=this.style.projection)||void 0===b?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||R)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,E,this._crossSourceCollisions,R),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:E,showPadding:this.showPadding}),this.fire(new y.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,y.cw.mark(y.cx.load),this.fire(new y.l("load"))),this.style&&(this.style.hasTransitions()||D)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const O=this._sourcesDirty||this._styleDirty||this._placementDirty;return O||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new y.l("idle")),!this._loaded||this._fullyLoaded||O||(this._fullyLoaded=!0,y.cw.mark(y.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Uo.removeThrottleControl(this._imageQueueHandle),null===(v=this._resizeObserver)||void 0===v||v.disconnect();const o=this.painter.context.gl.getExtension("WEBGL_lose_context");o?.loseContext&&o.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),Re.remove(this._canvasContainer),Re.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),y.cw.clearMetrics(),this._removed=!0,this.fire(new y.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,Dt.frame(this._frameRequest,v=>{y.cw.frame(v),this._frameRequest=null;try{this._render(v)}catch(o){if(!y.cy(o)&&o.message!==Dr)throw o}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return"5.6.2"}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},W.MapMouseEvent=Do,W.MapTouchEvent=au,W.MapWheelEvent=kp,W.Marker=Yl,W.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const o=this._map.getZoom(),u=o===this._map.getMaxZoom(),p=o===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(o,u)=>{const p=this._map._getUIString(`NavigationControl.${u}`);o.title=p,o.setAttribute("aria-label",p)},this.options=y.e({},za,v),this._container=Re.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",o=>o.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",o=>this._map.zoomIn({},{originalEvent:o})),Re.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",o=>this._map.zoomOut({},{originalEvent:o})),Re.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",o=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:o}):this._map.resetNorth({},{originalEvent:o})}),this._compassIcon=Re.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){Re.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,o){const u=Re.create("button",v,this._container);return u.type="button",u.addEventListener("click",o),u}},W.Popup=class extends y.E{constructor(v){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&Re.remove(this._content),this._container&&(Re.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new y.l("close"))),this),this._onMouseUp=o=>{this._update(o.point)},this._onMouseMove=o=>{this._update(o.point)},this._onDrag=o=>{this._update(o.point)},this._update=o=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=Re.create("div","maplibregl-popup",this._map.getContainer()),this._tip=Re.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const E of this.options.className.split(" "))this._container.classList.add(E);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=xr(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!o)return;const u=this._flatPos=this._pos=this._trackPointer&&o?o:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&o?o:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const m=nd(this.options.offset);if(!p){const E=this._container.offsetWidth,I=this._container.offsetHeight;let D;D=u.y+m.bottom.y<I?["top"]:u.y>this._map.transform.height-I?["bottom"]:[],u.x<E/2?D.push("left"):u.x>this._map.transform.width-E/2&&D.push("right"),p=0===D.length?"bottom":D.join("-")}let b=u.add(m[p]);this.options.subpixelPositioning||(b=b.round()),Re.setTransform(this._container,`${vf[p]} translate(${b.x}px,${b.y}px)`),ed(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=y.e(Object.create(xs),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new y.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=y.S.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const o=document.createDocumentFragment(),u=document.createElement("body");let p;for(u.innerHTML=v;p=u.firstChild,p;)o.appendChild(p);return this.setDOMContent(o)}getMaxWidth(){var v;return null===(v=this._container)||void 0===v?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=Re.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=Re.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(bf);v&&v.focus()}},W.RasterDEMTileSource=tl,W.RasterTileSource=Eo,W.ScaleControl=class{constructor(v){this._onMove=()=>{td(this._map,this._container,this.options)},this.setUnit=o=>{this.options.unit=o,td(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Ro),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=Re.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){Re.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},W.ScrollZoomHandler=sh,W.Style=Ia,W.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=Re.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Re.create("button","maplibregl-ctrl-terrain",this._container),Re.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){Re.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},W.TwoFingersTouchPitchHandler=Ju,W.TwoFingersTouchRotateHandler=Or,W.TwoFingersTouchZoomHandler=lu,W.TwoFingersTouchZoomRotateHandler=Kl,W.VectorTileSource=hs,W.VideoSource=Lc,W.addSourceType=(v,o)=>y._(void 0,void 0,void 0,function*(){if(zs(v))throw new Error(`A source type called "${v}" already exists.`);Bs[v]=o}),W.clearPrewarmedResources=function(){const v=Fs;v&&(v.isPreloaded()&&1===v.numActive()?(v.release(ya),Fs=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},W.createTileMesh=qd,W.getMaxParallelImageRequests=function(){return y.a.MAX_PARALLEL_IMAGE_REQUESTS},W.getRTLTextPluginStatus=function(){return wa().getRTLTextPluginStatus()},W.getVersion=function(){return"5.6.2"},W.getWorkerCount=function(){return Qi.workerCount},W.getWorkerUrl=function(){return y.a.WORKER_URL},W.importScriptInWorkers=function(v){return Rc().broadcast("IS",v)},W.prewarm=function(){Go().acquire(ya)},W.setMaxParallelImageRequests=function(v){y.a.MAX_PARALLEL_IMAGE_REQUESTS=v},W.setRTLTextPlugin=function(v,o){return wa().setRTLTextPlugin(v,o)},W.setWorkerCount=function(v){Qi.workerCount=v},W.setWorkerUrl=function(v){y.a.WORKER_URL=v}}),$d}()}},cm=>{cm(cm.s=28)}]);